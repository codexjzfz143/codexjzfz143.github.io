(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1017:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(24),o=n.n(r),a=n(0),i=n.n(a),l=n(12),c=n.n(l),s=n(27),u=Object.assign;function d(e){return i.a.createElement(s.a,u(u({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--RadioButtonOn24"+(t?" "+t:""))}),i.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{d:"M18 12a6 6 0 11-12 0 6 6 0 0112 0z"}));var t}function f(e){return i.a.createElement(d,u(u({},e),{className:function(){return"Zi Zi--RadioButtonOn"+(e.className?" "+e.className:"")}}))}var p=Object.assign;function h(e){return i.a.createElement(s.a,p(p({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--RadioButtonOff24"+(t?" "+t:""))}),i.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function g(e){return i.a.createElement(h,p(p({},e),{className:function(){return"Zi Zi--RadioButtonOff"+(e.className?" "+e.className:"")}}))}var m=n(9);function v(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var y=function(e){var t=e.style,n=e.className,r=e.id,i=e.name,l=e.value,s=e.size,u=void 0===s?20:s,d=e.checked,p=e.onChange,h=e.disabled,y=Object(a.useState)(!1),b=v(o.a,y,2),k=b[0],C=b[1];return Object(m.g)("label",{style:t,className:c()("RadioButton",n,{"RadioButton--focused":k,"RadioButton--disabled":h})},d?Object(m.g)(f,{size:u,className:"RadioButton-iconOn"}):Object(m.g)(g,{size:u,className:"RadioButton-iconOff"}),Object(m.g)("input",{className:"RadioButton-input",id:r,name:i,value:l,type:"radio",checked:d,onFocus:function(){return C(!0)},onBlur:function(){return C(!1)},onChange:p,disabled:h}))}},1079:function(e,t,n){"use strict";var r=n(1174),o=n.n(r),a=n(1311),i=o()();i.tlds(a),t.a=i},1117:function(e,t,n){"use strict";var r=n(940);t.a=function(e,t,n){var o=e.getCurrentContent().replaceEntityData(t,n),a=r.EditorState.set(r.EditorState.push(e,o,"apply-entity"),{lastChangeType:"apply-entity"});return r.EditorState.forceSelection(a,e.getSelection())}},1137:function(e,t,n){"use strict";var r=n(940);t.a=function(e,t,n){var o=r.Modifier.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return r.EditorState.push(e,o.set("entityMap",n),"insert-fragment")}},1157:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(26),o=n.n(r),a=n(22),i=n.n(a),l=n(28),c=n.n(l),s=n(25),u=n.n(s),d=n(29),f=n.n(d),p=n(18),h=n.n(p),g=n(0),m=n.n(g),v=n(12),y=n.n(v),b=n(9);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var C=function(e){u()(n,e);var t=k(n);function n(e){var r;i()(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState({checked:e.target.checked});var t=r.props.onChange;"function"==typeof t&&t(e)},r.handleFocus=function(){r.setState({focused:!0})},r.handleBlur=function(){r.setState({focused:!1})};var o=e.checked;return r.state={checked:Boolean(o),focused:!1},r}return c()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.checked,r=t.forceControlled;if(!r){var o=e.forceControlled,a=e.checked;if(!o||r){if(void 0!==n){var i=this.state.checked;a!==n&&n!==i&&this.setState({checked:n})}}else this.setState({checked:Boolean(n)})}}},{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.style,a=t.className,i=t.preset,l=t.onClick,c=t.onChange,s=t.name,u=t.value,d=t.checked,f=t.disabled,p=t.forceControlled,h=this.state,g=h.focused,m=h.checked,v=p?d:m,k=p?c:this.handleChange;return Object(b.g)("label",{className:y()("Switch",a,(e={},o()(e,"Switch--".concat(i),"normal"!==i),o()(e,"Switch--focused",g),o()(e,"Switch--disabled",f),o()(e,"Switch--checked",Boolean(v)),e)),style:r},Object(b.g)("input",{id:n,className:"Switch-input",type:"checkbox",onClick:l,onChange:k,onFocus:this.handleFocus,onBlur:this.handleBlur,name:s,value:u,checked:Boolean(v),disabled:f}))}}]),n}(m.a.Component);C.defaultProps={preset:"normal"}},1175:function(e,t,n){"use strict";var r=n(940),o=n(1117);t.a=function(e,t,n,a,i){var l=e.getCurrentContent(),c=e.getSelection(),s=i||c.focusKey,u=t||n.url,d=l,f=e,p=l.getEntity(a);if(!p||"link"!==p.type.toLowerCase())return e;var h=l.getBlockForKey(s);if(!h.getLength())return e;n&&(d=(f=Object(o.a)(f,a,n)).getCurrentContent());var g,m,v,y="";h.findEntityRanges((function(e){return e.getEntity()===a}),(function(e,t){g=e,m=t,y=h.getText().slice(e,t)})),u!==y&&(v=r.SelectionState.createEmpty(s).merge({anchorOffset:g,focusOffset:m}),d=r.Modifier.replaceText(d,v,u,null,a),m=g+u.length,g=m,v=v.merge({anchorOffset:g,focusOffset:m}),f=r.EditorState.push(f,d,"insert-characters"));var b=v&&v.focusKey===c.focusKey;return r.EditorState.forceSelection(f,b?v:c)}},1237:function(e,t,n){"use strict";function r(e){var t,n,r=window.URL||window.webkitURL;try{n=document.createElement("video"),t=r.createObjectURL(e)}catch(e){}return new Promise((function(e){var r=setTimeout((function(){e(0)}),1e3);n.addEventListener("loadeddata",(function(){clearTimeout(r),e(n.duration?n.duration:0)})),n.src=t}))}n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"e",(function(){return i.e})),n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return i.b})),n.d(t,"c",(function(){return i.c})),n.d(t,"d",(function(){return i.d}));function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;return new Promise((function(n){if(0!==t){var r=document.createElement("video"),o=(window.URL||window.webkitURL).createObjectURL(e),a=0,i=0,l=[],c=document.createElement("canvas"),s=c.getContext("2d"),u=function(){i=r.duration/(t-1),r.currentTime=a};r.addEventListener("loadeddata",u);r.addEventListener("seeked",(function e(){!function(){if(s){var e=r.videoWidth,t=r.videoHeight;c.width=e,c.height=t,s.drawImage(r,0,0,e,t),l.push({url:c.toDataURL("image/jpeg")})}}(),(a+=i)<=r.duration?r.currentTime=a:(r.removeEventListener("loadeddata",u),r.removeEventListener("seeked",e),n(l))})),r.src=o}else n([])}))}var a=function(){return"undefined"!=typeof window&&!/Maxthon/.test(window.navigator.userAgent)},i=n(979)},1246:function(e,t,n){"use strict";var r=n(22),o=n.n(r),a=n(28),i=n.n(a),l=n(25),c=n.n(l),s=n(29),u=n.n(s),d=n(18),f=n.n(d),p=n(49),h=n.n(p),g=n(0),m=n(12),v=n.n(m),y=n(23),b=n(902),k=n(389),C=n(35),S=n(975),E=n(1291),w=n(458),O=n(9);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u()(this,n)}}var A={upload:"è§†é¢‘ä¸Šä¼ å¤±è´¥"};function x(e){var t=e/1e3/1e3;return t=t<10?t.toPrecision(1):Math.round(t),"".concat(t,"M")}var j=function(e){c()(n,e);var t=T(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleStart=function(){e.trackEvent("Upload")},e.handleRetry=function(t){t.stopPropagation(),e.props.session.start()},e.handleAbort=function(){e.trackEvent("Cancel")},e.handleError=function(t){e.trackEvent("StatusReport",{status:{event:{action:"Upload",path:[{module:"VideoItem"}],url:location.href},result:"Fail"}}),e.props.onVideoUploadError&&e.props.onVideoUploadError(e.props.entityKey,t)},e.handleStep=function(t,n){Object(k.a)((function(){var r,o;return null===(r=(o=e.props).onVideoProcessStep)||void 0===r?void 0:r.call(o,t,n)})),"uploaded"===t&&e.trackEvent("StatusReport",{status:{event:{action:"Add"},result:"Success"}},{id:9381})},e.handleComplete=function(t){var n=e.props.session.state,r=n.uploadTime,o=n.transcodeTime;e.trackEvent("StatusReport",{status:{event:{action:"Upload",path:[{module:"VideoItem"}],url:location.href},result:"Success"},play:{upload_time:r,transcode_time:o}}),e.handleVideoUploadComplete(t)},e}return i()(n,[{key:"componentDidMount",value:function(){this.pendingEvents=[];var e=this.props.session;this.video=e.video,this.setModule(),e.addListener("start",this.handleStart),e.addListener("abort",this.handleAbort),e.addListener("error",this.handleError),e.addListener("step",this.handleStep),e.addListener("complete",this.handleComplete),e.state.error||e.start()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.video!==e.session.video&&(this.video=e.session.video,this.setModule(),this.flushPendingEvents())}},{key:"componentWillUnmount",value:function(){var e=this.props.session;e.removeListener("start",this.handleStart),e.removeListener("abort",this.handleAbort),e.removeListener("error",this.handleError),e.removeListener("step",this.handleStep),e.removeListener("complete",this.handleComplete),e.abort()}},{key:"setModule",value:function(){y.a.setModule(this,{module:"VideoItem"},{card:{content:{type:"Video",video_id:this.video?this.video.id:null}}})}},{key:"trackEvent",value:function(e,t,n){this.video?y.a.trackEvent(this,Object.assign(Object.assign({},n),{},{action:e}),t):this.pendingEvents.push({action:e,extra:t,detailView:n})}},{key:"flushPendingEvents",value:function(){var e=this,t=this.pendingEvents;this.pendingEvents=[],t.forEach((function(t){var n=t.action,r=t.extra,o=t.detailView;e.trackEvent(n,r,o)}))}},{key:"handleVideoUploadComplete",value:function(e){if(this.props.onVideoUploaded){var t=this.props.data,n=t.thumbnail,r=t.title;this.props.onVideoUploaded(this.props.entityKey,Object.assign(Object.assign({},e),{},{isLens:!0,id:e.id,isPlayable:!0,title:r||"",thumbnail:n||e.thumbnail,needUploadThumbnail:e.needUploadThumbnail||Boolean(n),url:"https://www.zhihu.com/video/".concat(e.id),playerUrl:"https://www.zhihu.com/video/".concat(e.id)}))}}},{key:"renderThumbnail",value:function(){var e=this.props,t=e.session,n=e.data,r=e.handleVideoPosterChange,o=e.isPin,a=e.coverButtonText,i=e.isVideoAnswer,l=t.state,c=l.uploading,s=l.uploadingType,u=l.error,d=l.errorData,f=l.fileSize,p=l.uploadedSize,g=n.thumbnail,m=!(o||i&&u)&&Object(O.g)(E.a,h()({triggerClassName:v()("Editable-videoUploader-uploadPosterButton",{"is-videoAnswer":i}),onVideoPosterChange:r,coverButtonText:a},this.props.data));return Object(O.g)("div",{className:"Editable-videoUploader-thumbnail"},g&&Object(O.g)("img",{src:g,alt:"è§†é¢‘å°é¢",className:"Editable-videoUploader-image"}),g&&Object(O.g)("div",{className:v()("Editable-videoUploader-imageMask",{"is-videoAnswer":i})}),Object(O.g)("div",{className:v()("Editable-videoUploader-text",{"is-bright":g&&i})},Object(O.g)("div",{className:v()("Editable-videoUploader-status",{"is-videoAnswer":i})},c&&"upload"===s&&"è§†é¢‘ä¸Šä¼ ä¸­",u&&(A[d.type]||d.payload&&d.payload.message||"æœªçŸ¥é”™è¯¯"),u&&Object(O.g)("div",{className:v()("Editable-videoUploader-retry",{"is-videoAnswer":i})},Object(O.g)(C.c,{preset:"link",color:"blue",icon:b.a,label:"é‡è¯•",onClick:this.handleRetry}))),c&&Object(O.g)("div",{className:v()("Editable-videoUploader-size",{"is-videoAnswer":i})},x(p)," / ",x(f))),Object(O.g)("div",{className:v()("Editable-videoUploader-progress",{"is-videoAnswer":i})},Object(O.g)("div",{className:v()("Editable-videoUploader-progress-bar",{"is-error":u}),style:{width:u?"100%":"".concat(p/f*100,"%")}})),m)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.onMouseDown,o=e.allowVideoTitleChange,a=e.handleVideoTitleChange,i=e.isVideoAnswer;return Object(O.g)("div",{className:v()("Editable-videoUploader",t,{"is-videoAnswer":i}),onClick:n,onMouseDown:r},Object(O.g)(S.b,h()({isLens:!0,id:"0",isPlayable:!0,isVideoAnswer:i,url:"https://www.zhihu.com/video/".concat("0"),playerUrl:"https://www.zhihu.com/video/".concat("0"),thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}},o()&&{isVideoTitleEditable:!0,onVideoTitleChange:a})))}}]),n}(g.Component);j.defaultProps={allowVideoTitleChange:function(){return!1},isVideoAnswer:!1};t.a=Object(w.a)((function(e){return{type:"video",value:e.data.upload.file}}))(j)},1254:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h}));var r=n(24),o=n.n(r),a=n(0),i=n(884),l=n(376),c=n(311),s=n(9);function u(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var d=Object(a.createRef)(),f=function(e){var t;return null===(t=d.current[e])||void 0===t?void 0:t.current},p=function(e){var t;return null===(t=f(e))||void 0===t?void 0:t.updateSkeletonHeight()},h=function(e){var t;return null===(t=f(e))||void 0===t?void 0:t.resetSkeletonHeight()},g={},m=function(e,t){g[e]=t},v=function(e){var t=e.blockKey,n=Object(a.useState)(0),r=u(o.a,n,2)[1],f=Object(a.useRef)(null),p=Object(i.a)({once:!0}),h=u(o.a,p,2),v=h[0],y=h[1],b=Object(a.useRef)(null),k=function(e){return g[e]}(t),C=Object(a.useRef)(!0),S=C.current&&Boolean(k),E=Object(a.useRef)(!1),w=Object(a.useCallback)(Object(c.a)(b,v),[]);Object(a.useImperativeHandle)(f,(function(){return{updateSkeletonHeight:function(){b.current&&m(t,b.current.offsetHeight)},resetSkeletonHeight:function(){m(t,void 0),r((function(e){return e+1}))}}}),[t]),Object(l.a)((function(){C.current=!1,E.current=S,function(e,t){d.current||(d.current={}),d.current[e]=t}(t,f)}));var O=S||E.current;return Object(s.g)("div",{ref:O?w:b,style:{height:k||"auto"}},O&&!y?null:e.children)};v.decorate=function(e){return function(t){return Object(s.g)(v,t,Object(s.g)(e,t))}},t.a=v},1291:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));var r=n(30),o=n.n(r),a=n(22),i=n.n(a),l=n(28),c=n.n(l),s=n(25),u=n.n(s),d=n(29),f=n.n(d),p=n(18),h=n.n(p),g=n(0),m=n.n(g),v=n(3),y=n.n(v),b=n(12),k=n.n(b),C=n(118),S=n(51),E=n(1006),w=n(312),O=n(180),T=n(192),A=n(95),x=n(901),j=n(9);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var R=function(e){u()(n,e);var t=_(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleVideoPosterChange=function(){e.props.onVideoPosterChange(e.input.files[0])},e}return c()(n,[{key:"render",value:function(){var e=this;return Object(j.g)("form",null,Object(j.g)("div",{className:"VideoCoverFileInput"},Object(j.g)("div",{className:"VideoCoverFile-uploader"},Object(j.g)("div",{className:"VideoCoverFile-uploader-icon"},Object(j.g)(x.a,{size:70})),Object(j.g)("div",{className:"VideoCoverFile-uploader-text"},"é€‰æ‹©è¦ä¸Šä¼ çš„å›¾ç‰‡"),Object(j.g)("div",{className:"VideoCoverFile-uploader-tip"},"æ”¯æŒ jpgï¼Œpng æ ¼å¼ï¼Œå»ºè®®åˆ†è¾¨çŽ‡ 1280*720"),Object(j.g)("input",{type:"file",className:"VideoCoverFileInput-input",accept:"image/png,image/jpeg",ref:function(t){e.input=t},onChange:this.handleVideoPosterChange,onClick:function(){return e.input.value=null}}))))}}]),n}(m.a.Component);R.propTypes={onVideoPosterChange:y.a.func.isRequired},R.defaultProps={onVideoPosterChange:function(){}};var M=n(1040),L=n(1090),B=n.n(L),I=n(1131),N=n(35);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var P=function(e){u()(n,e);var t=D(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={range:1,image:e.props.image},e.handleSave=function(){var t=e.editorEl.getImage(),n=e.props.image;t&&t.toBlob(e.handleUploadBlob,n.type)},e.handleUploadBlob=function(t){e.props.onUploadImage(t,"avatar")},e.handleResetUpload=function(){e.setState({range:1,image:""}),e.props.onResetUpload()},e}return c()(n,[{key:"render",value:function(){var e=this,t=this.props.image,n=this.state.range;return Object(j.g)("div",{className:"VideoCoverCrop"},Object(j.g)(B.a,{ref:function(t){e.editorEl=t},image:t,width:340,height:208,border:[0,20],color:[246,246,246,.9],scale:parseFloat(n)}),Object(j.g)(I.a,{className:"VideoCoverCrop-range",value:n,onChange:function(t){return e.setState({range:t.target.value})}}),Object(j.g)("div",{className:"VideoCoverCrop-uploadImgFooter"},Object(j.g)(N.c,{preset:"primary",onClick:this.handleResetUpload},"é‡æ–°ä¸Šä¼ "),Object(j.g)(N.c,{color:"blue",preset:"primary",onClick:this.handleSave},"ä¿å­˜")))}}]),n}(m.a.Component);P.propTypes={image:y.a.oneOfType([y.a.string,y.a.object]).isRequired,onResetUpload:y.a.func.isRequired,onUploadImage:y.a.func.isRequired};var z={name:"12qah06",styles:"display:block;width:100%;height:100%;object-fit:cover;"},q={name:"1rwvvfg",styles:"width:100%;display:flex;flex-direction:row;margin-top:30px;& button{flex:1;}"},K={name:"8mg22s",styles:"margin-right:20px;"};function U(e){var t=e.image,n=e.file,r=e.onResetUpload,o=e.onUploadImage;return Object(j.g)("div",null,Object(j.g)("img",{src:t,css:z}),Object(j.g)("div",{css:q},Object(j.g)(N.c,{preset:"primary",onClick:r,css:K},"é‡æ–°ä¸Šä¼ "),Object(j.g)(N.c,{color:"blue",preset:"primary",onClick:function(){return o(n)}},"ä¿å­˜")))}var F=n(23);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var H=function(e){u()(n,e);var t=V(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleSelect=function(t){t.preventDefault();var n=e.props.setTab;F.a.trackEvent(t.target,{id:2181}),n(1)},e}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.curTabId,n=e.setTab;return Object(j.g)("ul",{className:"VideoCoverEditor-tabs"},Object(j.g)("li",{className:k()("VideoCoverEditor-tabItem",{active:0===t}),onClick:function(){return n(0)}},"ä¸Šä¼ å°é¢"),Object(j.g)("li",{className:k()("VideoCoverEditor-tabItem",{active:1===t}),onClick:this.handleSelect},"é€‰æ‹©å°é¢"))}}]),n}(m.a.Component);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}H.propTypes={curTabId:y.a.number.isRequired,setTab:y.a.func.isRequired};var W=function(e){u()(n,e);var t=G(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){return Object(j.g)("div",{className:"VideoCoverPickerPending"},Object(j.g)("p",null,"è§†é¢‘å¤„ç†ä¸­..."),Object(j.g)("p",null,"æš‚æ— ç³»ç»Ÿå°é¢ï¼Œè¯·ä½¿ç”¨ä¸Šä¼ å°é¢"),Object(j.g)(N.c,{className:"VideoCoverPickerPending-nowUpdate",color:"blue",preset:"primary",onClick:this.props.backTab},"çŽ°åœ¨ä¸Šä¼ "))}}]),n}(m.a.Component);W.propTypes={backTab:y.a.func.isRequired};var Z=n(1237),$=n(1239),Y=n(491);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var X=function(e){u()(n,e);var t=J(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={curPicIndex:0,thumbs:[]},e.handleCoverClick=function(t){e.setState({curPicIndex:t})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.curPicIndex,r=e.props,o=r.items,a=r.onUploadPoster;F.a.trackEvent(t.target,{id:2234});var i=!o.length;a(e.list.children[n].children[0].src,i)},e}return c()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.video;Object(Z.g)(t).then((function(t){e.setState({thumbs:t})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.curPicIndex,r=t.thumbs;return Object(j.g)("div",{className:"VideoCoverPicker-coverSelect"},0===r.length?Object(j.g)("div",{className:"VideoCoverPicker-coverList VideoCoverPicker-empty"},Array.from(Array(9)).map((function(e,t){return Object(j.g)("div",{className:"VideoCoverPicker-coverItem",key:t})})),Object(j.g)(Y.a,null)):Object(j.g)("div",{className:"VideoCoverPicker-coverList",ref:function(t){return e.list=t}},r.slice(0,9).map((function(t,r){return Object(j.g)("div",{className:k()("VideoCoverPicker-coverItem",{actived:n===r}),onClick:function(){return e.handleCoverClick(r)},key:r},Object(j.g)("img",{src:t.url}),Object(j.g)($.a,{shown:n!==r}))}))),Object(j.g)(N.c,{onClick:this.handleSubmit,className:"VideoCoverPicker-coverSelectBtn",color:"blue",preset:"primary"},"ç¡®å®š"))}}]),n}(m.a.Component);X.propTypes={items:y.a.array.isRequired,onUploadPoster:y.a.func.isRequired};var Q=["errorMessage"];function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var te=function(e){u()(n,e);var t=ee(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={editorShown:!1,cropShown:!1,file:null,dataUrl:"",curTabId:0,errorMsg:""},e.renderTitle=function(){var t=e.state.curTabId;return Object(j.g)(H,{curTabId:t,setTab:e.setTab})},e.setTab=function(t){e.setState({curTabId:t})},e.showEditor=function(){e.setState({editorShown:!0})},e.hideEditor=function(){e.setState({editorShown:!1})},e.handleVideoPosterChange=function(t){Object(E.b)({file:t,preset:E.a.content}).then((function(){Object(E.d)(t).then((function(n){var r=window.URL.createObjectURL(n),o=new Image;o.onload=function(){o.width<640||o.height<360?(e.setState({errorMsg:"è¯·ä¸Šä¼ å®½åº¦ä¸å°äºŽ 640pxï¼Œé«˜åº¦ä¸å°äºŽ 360px çš„å›¾ç‰‡"},(function(){e.resetErrorMsg()})),e.resetUpload()):e.setState({cropShown:!0,file:t,dataUrl:r})},o.src=r}))})).catch((function(t){var n=t.message;e.setState({errorMsg:n},(function(){e.resetErrorMsg()})),e.resetUpload()}))},e.resetUpload=function(){e.setState({cropShown:!1})},e.resetErrorMsg=function(){setTimeout((function(){e.setState({errorMsg:""})}),2400)},e.uploadImage=function(t){return Object(w.a)(t,{source:"zvideo"}).then((function(t){var n=t.src;e.uploadVideoPoster(n)})).catch((function(){e.setState({errorMsg:"ä¸Šä¼ å°é¢å›¾ç‰‡å¤±è´¥"},(function(){e.resetErrorMsg()}))}))},e.uploadVideoPoster=function(t,n){if(n)return Object(C.loadImage)(t).then((function(t){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),n.toBlob(e.uploadImage,"image/jpeg")}));t=Object(C.imgUrl)(t,""),(0,e.props.onVideoPosterChange)(t),e.resetUpload(),e.hideEditor()},e.handleUploadImage=function(){var t;e.load("https://lens.zhihu.com/report?msg=upload_cover",{catch:function(){return null}}),(t=e).uploadImage.apply(t,arguments).then((function(){e.shouldRetry=!1}))},e}return c()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.thumbnail,r=t.needUploadThumbnail,o=t.uploading,a=t.id,i=t.changedVideoPoster,l=t.instantUpload;r&&n&&this.uploadVideoPoster(n,!n.startsWith("http")),!1!==o||i||l||(this.shouldRetry=!0,this.cts=new O.a,this.token=this.cts.token,Object(O.b)((function(){return e.load("https://lens.zhihu.com/api/v4/videos/".concat(a,"/default_cover")).then((function(t){if(!t.algorithm_cover_url)return Promise.reject("has no smart cover");e.shouldRetry&&e.uploadVideoPoster(t.algorithm_cover_url,!1)}))}),{times:10,delay:3e3,shouldRetry:function(){return e.shouldRetry},cancellationToken:this.token}))}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.changedVideoPoster,n=e.needUploadThumbnail;t&&!n&&(this.shouldRetry=!1)}},{key:"componentWillUnmount",value:function(){this.cts&&this.cts.cancel();var e=this.state.dataUrl;e&&window.URL.revokeObjectURL(e)}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.errorMessage,a=o()(n,Q);return fetch(e,Object.assign(Object.assign({},a),{},{headers:Object.assign(Object.assign({},a.headers),{},{Accept:"application/json","X-Requested-With":"Fetch"}),credentials:"include"})).then((function(e){return e.json().catch((function(){return{}})).then((function(t){if(!e.ok)throw t;return t}))})).catch((function(){if(n.catch)return n.catch();t.setState({errorMsg:r||"ä¸Šä¼ å°é¢å¤±è´¥"},(function(){t.resetErrorMsg()}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.editorShown,r=t.cropShown,o=t.file,a=t.dataUrl,i=t.curTabId,l=t.errorMsg,c=t.covers,s=void 0===c?[]:c,u=this.props,d=u.triggerClassName,f=u.coverButtonText,p=u.uploading,h=u.upload,g=u.originVideo,m=u.useCoverCrop,v=u.zvideoId,y=u.id,b=(null==h?void 0:h.file)||g,C="video/mp4"===(null==b?void 0:b.type),E=m?P:U;return Object(j.g)(M.a,null,Object(j.g)("div",{className:"VideoCoverEditor"},Object(j.g)(S.a,{className:k()(d,"Video-uploadPosterButton"),zaText:!0,zaType:"Button",zaBlock:"VideoUploadPoster",extra:{mediaInfo:{attachmentZvideoId:v,videoInfo:{videoId:y}}},onClick:this.showEditor},Object(j.g)("p",null,f)),n&&Object(j.g)(A.b,{className:"VideoCoverEditor-Modal",title:C&&this.renderTitle(),onClose:this.hideEditor},0===i&&(r?Object(j.g)(E,{file:o,image:a,onResetUpload:this.resetUpload,onUploadImage:this.handleUploadImage}):Object(j.g)(R,{onVideoPosterChange:this.handleVideoPosterChange})),1===i&&C&&(p?Object(j.g)(W,{backTab:function(){e.setState({curTabId:0})}}):Object(j.g)(X,{items:s,video:b,onUploadPoster:function(){e.load("https://lens.zhihu.com/report?msg=choose_cover",{catch:function(){return null}}),e.uploadVideoPoster.apply(e,arguments).then((function(){e.shouldRetry=!1}))}})))),Object(j.g)(T.a,{notification:{key:l,text:l,theme:"red"},delay:2400}))}}]),n}(g.Component);te.propTypes={onVideoPosterChange:y.a.func.isRequired,coverButtonText:y.a.string,useCoverCrop:y.a.bool},te.defaultProps={onVideoPosterChange:function(){},coverButtonText:"ä¸Šä¼ è§†é¢‘å°é¢",useCoverCrop:!0}},1312:function(e,t,n){"use strict";e.exports.encode=n(1529),e.exports.decode=n(1530),e.exports.format=n(1531),e.exports.parse=n(1532)},1397:function(e,t,n){"use strict";var r=n(118),o=n(94),a=n.n(o),i=n(57),l=null;t.a=function(e){return Object(i.isBrowser)()?Object(r.imgUrl)(e,l=l||{quality:a()(navigator.userAgent).Mobile?50:80,size:window.devicePixelRatio>=1.5?"1440w":"720w"}):e}},1398:function(e,t,n){"use strict";var r=n(24),o=n.n(r),a=n(0),i=n(118),l=n(886),c=n(1254),s=n(95),u=n(9);function d(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var f={name:"mnyjqd",styles:"width:640px;.Modal-content{margin-top:0;padding:0;}"},p=Object(a.forwardRef)((function(e,t){var r=e.handleImageEntityChange,p=e.uploadManager,h=e.onImageUpload,g=void 0===h?function(){}:h,m=Object(a.useState)(!1),v=d(o.a,m,2),y=v[0],b=v[1],k=Object(a.useState)(null),C=d(o.a,k,2),S=C[0],E=C[1],w=Object(a.useRef)(null),O=Object(a.useRef)(null);Object(a.useImperativeHandle)(t,(function(){return{handleShowImageEditor:function(e,t,n){b(!0),w.current=e,O.current=t,E(Object(i.imgUrl)(n,"r"))}}}),[]);var T=Object(l.a)((function(){return Promise.all([n.e(118),n.e(125),n.e(115)]).then(n.bind(null,1873))}),y);return Object(u.g)(s.b,{onClose:function(){b(!1)},css:f},Boolean(y&&T)&&Object(u.g)(T,{uploadManager:p,imageUrl:S,onClose:function(e){if(b(!1),e&&g(e,S),null!=w.current&&e){Object(c.b)(O.current);var t=e.url,n=e.originalSrc,o=e.watermarkSrc,a=e.privateWatermarkSrc,i=e.watermark,l=e.rawWidth,s=e.rawHeight,u=e.id;r(w.current,{src:t,originalSrc:n,watermarkSrc:o,privateWatermarkSrc:a,watermark:i,rawWidth:l,rawHeight:s,id:u})}w.current=null}}))}));t.a=p},1400:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(0),o=n.n(r),a=n(27),i=Object.assign;function l(e){return o.a.createElement(a.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--InfoCircleFill24"+(t?" "+t:""))}),o.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-13.68a1.11 1.11 0 100-2.22 1.11 1.11 0 000 2.22zm-.2 3.098a.07.07 0 01.02-.006h.007c.006.002.016.005.026.013.01.009.015.018.017.023l.002.008c0 .003 0 .009-.003.019l-1.152 4.507c-.312 1.224.941 2.264 2.132 1.77 0 0 1.09-.557 1.461-.848.371-.291.46-.478.334-.765-.168-.388-.542-.513-.928-.352l-1.457.604a.067.067 0 01-.018.006.03.03 0 01-.009 0 .058.058 0 01-.025-.014.057.057 0 01-.018-.022v-.004l-.001-.004.002-.019 1.152-4.507c.313-1.224-.849-2.388-2.131-1.77l-1.457.605c-.387.16-.594.534-.405.97.18.415.598.31 1.081.187l.077-.019 1.294-.382z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function c(e){return o.a.createElement(l,i(i({},e),{className:function(){return"Zi Zi--Info"+(e.className?" "+e.className:"")}}))}},1529:function(e,t,n){"use strict";var r={};function o(e,t,n){var a,i,l,c,s,u="";for("string"!=typeof t&&(n=t,t=o.defaultChars),void 0===n&&(n=!0),s=function(e){var t,n,o=r[e];if(o)return o;for(o=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?o.push(n):o.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)o[e.charCodeAt(t)]=e[t];return o}(t),a=0,i=e.length;a<i;a++)if(l=e.charCodeAt(a),n&&37===l&&a+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(a+1,a+3)))u+=e.slice(a,a+3),a+=2;else if(l<128)u+=s[l];else if(l>=55296&&l<=57343){if(l>=55296&&l<=56319&&a+1<i&&(c=e.charCodeAt(a+1))>=56320&&c<=57343){u+=encodeURIComponent(e[a]+e[a+1]),a++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[a]);return u}o.defaultChars=";/?:@&=+$,-_.!~*'()#",o.componentChars="-_.!~*'()",e.exports=o},1530:function(e,t,n){"use strict";var r={};function o(e,t){var n;return"string"!=typeof t&&(t=o.defaultChars),n=function(e){var t,n,o=r[e];if(o)return o;for(o=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),o.push(n);for(t=0;t<e.length;t++)o[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return o}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,r,o,a,i,l,c,s="";for(t=0,r=e.length;t<r;t+=3)(o=parseInt(e.slice(t+1,t+3),16))<128?s+=n[o]:192==(224&o)&&t+3<r&&128==(192&(a=parseInt(e.slice(t+4,t+6),16)))?(s+=(c=o<<6&1984|63&a)<128?"ï¿½ï¿½":String.fromCharCode(c),t+=3):224==(240&o)&&t+6<r&&(a=parseInt(e.slice(t+4,t+6),16),i=parseInt(e.slice(t+7,t+9),16),128==(192&a)&&128==(192&i))?(s+=(c=o<<12&61440|a<<6&4032|63&i)<2048||c>=55296&&c<=57343?"ï¿½ï¿½ï¿½":String.fromCharCode(c),t+=6):240==(248&o)&&t+9<r&&(a=parseInt(e.slice(t+4,t+6),16),i=parseInt(e.slice(t+7,t+9),16),l=parseInt(e.slice(t+10,t+12),16),128==(192&a)&&128==(192&i)&&128==(192&l))?((c=o<<18&1835008|a<<12&258048|i<<6&4032|63&l)<65536||c>1114111?s+="ï¿½ï¿½ï¿½ï¿½":(c-=65536,s+=String.fromCharCode(55296+(c>>10),56320+(1023&c))),t+=9):s+="ï¿½";return s}))}o.defaultChars=";/?:@&=+$,#",o.componentChars="",e.exports=o},1531:function(e,t,n){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},1532:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),s=["%","/","?",";","#"].concat(c),u=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(e,t){var n,r,a,l,c,g=e;if(g=g.trim(),!t&&1===e.split("#").length){var m=i.exec(g);if(m)return this.pathname=m[1],m[2]&&(this.search=m[2]),this}var v=o.exec(g);if(v&&(a=(v=v[0]).toLowerCase(),this.protocol=v,g=g.substr(v.length)),(t||v||g.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(c="//"===g.substr(0,2))||v&&p[v]||(g=g.substr(2),this.slashes=!0)),!p[v]&&(c||v&&!h[v])){var y,b,k=-1;for(n=0;n<u.length;n++)-1!==(l=g.indexOf(u[n]))&&(-1===k||l<k)&&(k=l);for(-1!==(b=-1===k?g.lastIndexOf("@"):g.lastIndexOf("@",k))&&(y=g.slice(0,b),g=g.slice(b+1),this.auth=y),k=-1,n=0;n<s.length;n++)-1!==(l=g.indexOf(s[n]))&&(-1===k||l<k)&&(k=l);-1===k&&(k=g.length),":"===g[k-1]&&k--;var C=g.slice(0,k);g=g.slice(k),this.parseHost(C),this.hostname=this.hostname||"";var S="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!S){var E=this.hostname.split(/\./);for(n=0,r=E.length;n<r;n++){var w=E[n];if(w&&!w.match(d)){for(var O="",T=0,A=w.length;T<A;T++)w.charCodeAt(T)>127?O+="x":O+=w[T];if(!O.match(d)){var x=E.slice(0,n),j=E.slice(n+1),_=w.match(f);_&&(x.push(_[1]),j.unshift(_[2])),j.length&&(g=j.join(".")+g),this.hostname=x.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var R=g.indexOf("#");-1!==R&&(this.hash=g.substr(R),g=g.slice(0,R));var M=g.indexOf("?");return-1!==M&&(this.search=g.substr(M),g=g.slice(0,M)),g&&(this.pathname=g),h[a]&&this.hostname&&!this.pathname&&(this.pathname=""),this},r.prototype.parseHost=function(e){var t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof r)return e;var n=new r;return n.parse(e,t),n}},1533:function(e,t,n){"use strict";t.Any=n(1139),t.Cc=n(1140),t.Cf=n(1534),t.P=n(1089),t.Z=n(1141)},1534:function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},1535:function(e,t,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},r.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},r.prototype.at=function(e,t,n){var r=this.__find__(e),o=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=o.alt||[],this.__cache__=null},r.prototype.before=function(e,t,n,r){var o=this.__find__(e),a=r||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null},r.prototype.after=function(e,t,n,r){var o=this.__find__(e),a=r||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null},r.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)}),this),this.__cache__=null,n},r.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},r.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)}),this),this.__cache__=null,n},r.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=r},1536:function(e,t,n){"use strict";function r(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(e){var t,n,r;if(!this.attrs)return-1;for(n=0,r=(t=this.attrs).length;n<r;n++)if(t[n][0]===e)return n;return-1},r.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},r.prototype.attrSet=function(e,t){var n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},r.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=r},1654:function(e,t,n){"use strict";var r=n(22),o=n.n(r),a=n(28),i=n.n(a),l=n(25),c=n.n(l),s=n(29),u=n.n(s),d=n(18),f=n.n(d),p=n(0),h=n.n(p),g=n(12),m=n.n(g),v=n(23),y=n(902),b=n(1397),k=n(35),C=n(1659),S=n(458),E=n(9);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u()(this,n)}}var O=function(e){return new Promise((function(t){setTimeout(t,e)}))},T=function(e){return new Promise((function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.src=e}))},A=function(e){c()(n,e);var t=w(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleStart=function(){var t=e.props,n=t.session.value,r=t.data,o=r.rawWidth,a=r.rawHeight,i=e.imgNode;"file"===n.type&&"image/gif"===n.value.type&&(v.a.setModule(i,{module:"GifItem"},{card:{content:{type:"Gif"}}}),v.a.trackEvent(i,{action:"Upload"},{gif:{gif_bytes:n.value.size,gif_hight:a,gif_width:o}}))},e.handleError=function(t){e.props.onImageUploadError&&e.props.onImageUploadError(t)},e.handleComplete=function(t){var n=e.props.session.value,r=t.url,o=t.rawWidth,a=t.rawHeight,i=t.watermark,l=t.originalSrc,c=t.watermarkSrc,s=t.privateWatermarkSrc,u=e.imgNode;"file"===n.type&&"image/gif"===n.value.type&&v.a.trackEvent(u,{action:"StatusReport"},{status:{event:{action:"Upload",path:[{module:"GifItem"}]},result:"Success"},gif:{gif_bytes:n.value.size,gif_hight:a,gif_width:o}});var d=Object(b.a)(r);Promise.race([T(d),O(500)]).catch((function(){})).then((function(){e.props.onImageUploaded&&e.props.onImageUploaded({src:d,rawWidth:o,rawHeight:a,watermark:i,originalSrc:l,watermarkSrc:c,privateWatermarkSrc:s})}))},e.handleRetry=function(){e.props.session.start()},e}return i()(n,[{key:"componentDidMount",value:function(){var e=this.props.session;e.addListener("start",this.handleStart),e.addListener("error",this.handleError),e.addListener("complete",this.handleComplete),e.state.error||e.start()}},{key:"componentWillUnmount",value:function(){var e=this.props.session;e.removeListener("start",this.handleStart),e.removeListener("error",this.handleError),e.removeListener("complete",this.handleComplete),e.abort()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.onClick,o=t.onMouseDown,a=t.session,i=t.disableImageUpload,l=a.state;return l.imageReady?Object(E.g)("div",{className:"Editable-imageUploader",ref:function(t){return e.imgNode=t}},Object(E.g)("div",{className:m()("Editable-imageUploader-layout",{"is-fullWidth":!l.image},n),onClick:r,onMouseDown:o},l.image?Object(E.g)("img",{className:"Editable-imageUploader-image",src:l.image,alt:"å›¾ç‰‡"}):Object(E.g)("div",{className:"Editable-imageUploader-placeholder"}),Object(E.g)("div",{className:m()("Editable-imageUploader-status",{"is-error":l.error})},Object(E.g)("div",{className:"Editable-imageUploader-statusText"},l.uploading&&"å›¾ç‰‡ä¸Šä¼ ä¸­",l.error&&!i&&"å›¾ç‰‡ä¸Šä¼ å¤±è´¥",l.error&&i&&Object(E.g)(h.a.Fragment,null,"å›¾ç‰‡æœåŠ¡è¿›è¡Œå‡çº§æ”¹é€ ",Object(E.g)("br",null),"æš‚æ—¶ä¸èƒ½åœ¨ã€Œé—®é¢˜ã€ã€Œå›žç­”ã€ä¸­æ·»åŠ å›¾ç‰‡")),!i&&l.error&&Object(E.g)("div",{className:"Editable-imageUploader-retry"},Object(E.g)(k.c,{preset:"link",icon:y.a,label:"é‡è¯•",onClick:this.handleRetry}))),l.uploading&&Object(E.g)("div",{className:"Editable-imageUploader-progress"},Object(E.g)(C.a,{active:!0})),l.error&&Object(E.g)("div",{className:"Editable-imageUploader-progress is-error"}))):Object(E.g)("div",{className:"Editable-imageUploader",ref:function(t){return e.imgNode=t}})}}]),n}(p.Component);t.a=Object(S.a)((function(e){return{type:"image",value:e.data.upload}}))(A)},1730:function(e,t,n){"use strict";e.exports=n(2153)},1731:function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",a=new RegExp("^(?:"+r+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),i=new RegExp("^(?:"+r+"|"+o+")");e.exports.HTML_TAG_RE=a,e.exports.HTML_OPEN_CLOSE_TAG_RE=i},1732:function(e,t,n){"use strict";function r(e,t){var n,r,o,a,i,l=[],c=t.length;for(n=0;n<c;n++)126===(o=t[n]).marker&&-1!==o.end&&(a=t[o.end],(i=e.tokens[o.token]).type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",(i=e.tokens[a.token]).type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="","text"===e.tokens[a.token-1].type&&"~"===e.tokens[a.token-1].content&&l.push(a.token-1));for(;l.length;){for(r=(n=l.pop())+1;r<e.tokens.length&&"s_close"===e.tokens[r].type;)r++;n!==--r&&(i=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=i)}}e.exports.tokenize=function(e,t){var n,r,o,a,i=e.pos,l=e.src.charCodeAt(i);if(t)return!1;if(126!==l)return!1;if(o=(r=e.scanDelims(e.pos,!0)).length,a=String.fromCharCode(l),o<2)return!1;for(o%2&&(e.push("text","",0).content=a,o--),n=0;n<o;n+=2)e.push("text","",0).content=a+a,e.delimiters.push({marker:l,length:0,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,o=e.tokens_meta.length;for(r(e,e.delimiters),t=0;t<o;t++)n[t]&&n[t].delimiters&&r(e,n[t].delimiters)}},1733:function(e,t,n){"use strict";function r(e,t){var n,r,o,a,i,l;for(n=t.length-1;n>=0;n--)95!==(r=t[n]).marker&&42!==r.marker||-1!==r.end&&(o=t[r.end],l=n>0&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===o.token+1,i=String.fromCharCode(r.marker),(a=e.tokens[r.token]).type=l?"strong_open":"em_open",a.tag=l?"strong":"em",a.nesting=1,a.markup=l?i+i:i,a.content="",(a=e.tokens[o.token]).type=l?"strong_close":"em_close",a.tag=l?"strong":"em",a.nesting=-1,a.markup=l?i+i:i,a.content="",l&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}e.exports.tokenize=function(e,t){var n,r,o=e.pos,a=e.src.charCodeAt(o);if(t)return!1;if(95!==a&&42!==a)return!1;for(r=e.scanDelims(e.pos,42===a),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(a),e.delimiters.push({marker:a,length:r.length,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,o=e.tokens_meta.length;for(r(e,e.delimiters),t=0;t<o;t++)n[t]&&n[t].delimiters&&r(e,n[t].delimiters)}},2130:function(e,t,n){(function(t){t.Prism={manual:!0};var r=n(1517),o=n(1719);t.Prism=r,e.exports={Prism:r,PrismDecorator:o}}).call(this,n(135))},2151:function(e,t,n){"use strict";e.exports=n(2152)},2152:function(e,t,n){"use strict";var r=n(965),o=n(2154),a=n(2158),i=n(2159),l=n(2167),c=n(2181),s=n(2194),u=n(1312),d=n(693),f={default:n(2196),zero:n(2197),commonmark:n(2198)},p=/^(vbscript|javascript|file|data):/,h=/^data:image\/(gif|png|jpeg|webp);/;function g(e){var t=e.trim().toLowerCase();return!p.test(t)||!!h.test(t)}var m=["http:","https:","mailto:"];function v(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||m.indexOf(t.protocol)>=0))try{t.hostname=d.toASCII(t.hostname)}catch(e){}return u.encode(u.format(t))}function y(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||m.indexOf(t.protocol)>=0))try{t.hostname=d.toUnicode(t.hostname)}catch(e){}return u.decode(u.format(t),u.decode.defaultChars+"%")}function b(e,t){if(!(this instanceof b))return new b(e,t);t||r.isString(e)||(t=e||{},e="default"),this.inline=new c,this.block=new l,this.core=new i,this.renderer=new a,this.linkify=new s,this.validateLink=g,this.normalizeLink=v,this.normalizeLinkText=y,this.utils=r,this.helpers=r.assign({},o),this.options={},this.configure(e),t&&this.set(t)}b.prototype.set=function(e){return r.assign(this.options,e),this},b.prototype.configure=function(e){var t,n=this;if(r.isString(e)&&!(e=f[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)})),this},b.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},b.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},b.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},b.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},b.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},b.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},b.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=b},2153:function(e){e.exports=JSON.parse('{"Aacute":"Ã","aacute":"Ã¡","Abreve":"Ä‚","abreve":"Äƒ","ac":"âˆ¾","acd":"âˆ¿","acE":"âˆ¾Ì³","Acirc":"Ã‚","acirc":"Ã¢","acute":"Â´","Acy":"Ð","acy":"Ð°","AElig":"Ã†","aelig":"Ã¦","af":"â¡","Afr":"ð”„","afr":"ð”ž","Agrave":"Ã€","agrave":"Ã ","alefsym":"â„µ","aleph":"â„µ","Alpha":"Î‘","alpha":"Î±","Amacr":"Ä€","amacr":"Ä","amalg":"â¨¿","amp":"&","AMP":"&","andand":"â©•","And":"â©“","and":"âˆ§","andd":"â©œ","andslope":"â©˜","andv":"â©š","ang":"âˆ ","ange":"â¦¤","angle":"âˆ ","angmsdaa":"â¦¨","angmsdab":"â¦©","angmsdac":"â¦ª","angmsdad":"â¦«","angmsdae":"â¦¬","angmsdaf":"â¦­","angmsdag":"â¦®","angmsdah":"â¦¯","angmsd":"âˆ¡","angrt":"âˆŸ","angrtvb":"âŠ¾","angrtvbd":"â¦","angsph":"âˆ¢","angst":"Ã…","angzarr":"â¼","Aogon":"Ä„","aogon":"Ä…","Aopf":"ð”¸","aopf":"ð•’","apacir":"â©¯","ap":"â‰ˆ","apE":"â©°","ape":"â‰Š","apid":"â‰‹","apos":"\'","ApplyFunction":"â¡","approx":"â‰ˆ","approxeq":"â‰Š","Aring":"Ã…","aring":"Ã¥","Ascr":"ð’œ","ascr":"ð’¶","Assign":"â‰”","ast":"*","asymp":"â‰ˆ","asympeq":"â‰","Atilde":"Ãƒ","atilde":"Ã£","Auml":"Ã„","auml":"Ã¤","awconint":"âˆ³","awint":"â¨‘","backcong":"â‰Œ","backepsilon":"Ï¶","backprime":"â€µ","backsim":"âˆ½","backsimeq":"â‹","Backslash":"âˆ–","Barv":"â«§","barvee":"âŠ½","barwed":"âŒ…","Barwed":"âŒ†","barwedge":"âŒ…","bbrk":"âŽµ","bbrktbrk":"âŽ¶","bcong":"â‰Œ","Bcy":"Ð‘","bcy":"Ð±","bdquo":"â€ž","becaus":"âˆµ","because":"âˆµ","Because":"âˆµ","bemptyv":"â¦°","bepsi":"Ï¶","bernou":"â„¬","Bernoullis":"â„¬","Beta":"Î’","beta":"Î²","beth":"â„¶","between":"â‰¬","Bfr":"ð”…","bfr":"ð”Ÿ","bigcap":"â‹‚","bigcirc":"â—¯","bigcup":"â‹ƒ","bigodot":"â¨€","bigoplus":"â¨","bigotimes":"â¨‚","bigsqcup":"â¨†","bigstar":"â˜…","bigtriangledown":"â–½","bigtriangleup":"â–³","biguplus":"â¨„","bigvee":"â‹","bigwedge":"â‹€","bkarow":"â¤","blacklozenge":"â§«","blacksquare":"â–ª","blacktriangle":"â–´","blacktriangledown":"â–¾","blacktriangleleft":"â—‚","blacktriangleright":"â–¸","blank":"â£","blk12":"â–’","blk14":"â–‘","blk34":"â–“","block":"â–ˆ","bne":"=âƒ¥","bnequiv":"â‰¡âƒ¥","bNot":"â«­","bnot":"âŒ","Bopf":"ð”¹","bopf":"ð•“","bot":"âŠ¥","bottom":"âŠ¥","bowtie":"â‹ˆ","boxbox":"â§‰","boxdl":"â”","boxdL":"â••","boxDl":"â•–","boxDL":"â•—","boxdr":"â”Œ","boxdR":"â•’","boxDr":"â•“","boxDR":"â•”","boxh":"â”€","boxH":"â•","boxhd":"â”¬","boxHd":"â•¤","boxhD":"â•¥","boxHD":"â•¦","boxhu":"â”´","boxHu":"â•§","boxhU":"â•¨","boxHU":"â•©","boxminus":"âŠŸ","boxplus":"âŠž","boxtimes":"âŠ ","boxul":"â”˜","boxuL":"â•›","boxUl":"â•œ","boxUL":"â•","boxur":"â””","boxuR":"â•˜","boxUr":"â•™","boxUR":"â•š","boxv":"â”‚","boxV":"â•‘","boxvh":"â”¼","boxvH":"â•ª","boxVh":"â•«","boxVH":"â•¬","boxvl":"â”¤","boxvL":"â•¡","boxVl":"â•¢","boxVL":"â•£","boxvr":"â”œ","boxvR":"â•ž","boxVr":"â•Ÿ","boxVR":"â• ","bprime":"â€µ","breve":"Ë˜","Breve":"Ë˜","brvbar":"Â¦","bscr":"ð’·","Bscr":"â„¬","bsemi":"â","bsim":"âˆ½","bsime":"â‹","bsolb":"â§…","bsol":"\\\\","bsolhsub":"âŸˆ","bull":"â€¢","bullet":"â€¢","bump":"â‰Ž","bumpE":"âª®","bumpe":"â‰","Bumpeq":"â‰Ž","bumpeq":"â‰","Cacute":"Ä†","cacute":"Ä‡","capand":"â©„","capbrcup":"â©‰","capcap":"â©‹","cap":"âˆ©","Cap":"â‹’","capcup":"â©‡","capdot":"â©€","CapitalDifferentialD":"â……","caps":"âˆ©ï¸€","caret":"â","caron":"Ë‡","Cayleys":"â„­","ccaps":"â©","Ccaron":"ÄŒ","ccaron":"Ä","Ccedil":"Ã‡","ccedil":"Ã§","Ccirc":"Äˆ","ccirc":"Ä‰","Cconint":"âˆ°","ccups":"â©Œ","ccupssm":"â©","Cdot":"ÄŠ","cdot":"Ä‹","cedil":"Â¸","Cedilla":"Â¸","cemptyv":"â¦²","cent":"Â¢","centerdot":"Â·","CenterDot":"Â·","cfr":"ð” ","Cfr":"â„­","CHcy":"Ð§","chcy":"Ñ‡","check":"âœ“","checkmark":"âœ“","Chi":"Î§","chi":"Ï‡","circ":"Ë†","circeq":"â‰—","circlearrowleft":"â†º","circlearrowright":"â†»","circledast":"âŠ›","circledcirc":"âŠš","circleddash":"âŠ","CircleDot":"âŠ™","circledR":"Â®","circledS":"â“ˆ","CircleMinus":"âŠ–","CirclePlus":"âŠ•","CircleTimes":"âŠ—","cir":"â—‹","cirE":"â§ƒ","cire":"â‰—","cirfnint":"â¨","cirmid":"â«¯","cirscir":"â§‚","ClockwiseContourIntegral":"âˆ²","CloseCurlyDoubleQuote":"â€","CloseCurlyQuote":"â€™","clubs":"â™£","clubsuit":"â™£","colon":":","Colon":"âˆ·","Colone":"â©´","colone":"â‰”","coloneq":"â‰”","comma":",","commat":"@","comp":"âˆ","compfn":"âˆ˜","complement":"âˆ","complexes":"â„‚","cong":"â‰…","congdot":"â©­","Congruent":"â‰¡","conint":"âˆ®","Conint":"âˆ¯","ContourIntegral":"âˆ®","copf":"ð•”","Copf":"â„‚","coprod":"âˆ","Coproduct":"âˆ","copy":"Â©","COPY":"Â©","copysr":"â„—","CounterClockwiseContourIntegral":"âˆ³","crarr":"â†µ","cross":"âœ—","Cross":"â¨¯","Cscr":"ð’ž","cscr":"ð’¸","csub":"â«","csube":"â«‘","csup":"â«","csupe":"â«’","ctdot":"â‹¯","cudarrl":"â¤¸","cudarrr":"â¤µ","cuepr":"â‹ž","cuesc":"â‹Ÿ","cularr":"â†¶","cularrp":"â¤½","cupbrcap":"â©ˆ","cupcap":"â©†","CupCap":"â‰","cup":"âˆª","Cup":"â‹“","cupcup":"â©Š","cupdot":"âŠ","cupor":"â©…","cups":"âˆªï¸€","curarr":"â†·","curarrm":"â¤¼","curlyeqprec":"â‹ž","curlyeqsucc":"â‹Ÿ","curlyvee":"â‹Ž","curlywedge":"â‹","curren":"Â¤","curvearrowleft":"â†¶","curvearrowright":"â†·","cuvee":"â‹Ž","cuwed":"â‹","cwconint":"âˆ²","cwint":"âˆ±","cylcty":"âŒ­","dagger":"â€ ","Dagger":"â€¡","daleth":"â„¸","darr":"â†“","Darr":"â†¡","dArr":"â‡“","dash":"â€","Dashv":"â«¤","dashv":"âŠ£","dbkarow":"â¤","dblac":"Ë","Dcaron":"ÄŽ","dcaron":"Ä","Dcy":"Ð”","dcy":"Ð´","ddagger":"â€¡","ddarr":"â‡Š","DD":"â……","dd":"â…†","DDotrahd":"â¤‘","ddotseq":"â©·","deg":"Â°","Del":"âˆ‡","Delta":"Î”","delta":"Î´","demptyv":"â¦±","dfisht":"â¥¿","Dfr":"ð”‡","dfr":"ð”¡","dHar":"â¥¥","dharl":"â‡ƒ","dharr":"â‡‚","DiacriticalAcute":"Â´","DiacriticalDot":"Ë™","DiacriticalDoubleAcute":"Ë","DiacriticalGrave":"`","DiacriticalTilde":"Ëœ","diam":"â‹„","diamond":"â‹„","Diamond":"â‹„","diamondsuit":"â™¦","diams":"â™¦","die":"Â¨","DifferentialD":"â…†","digamma":"Ï","disin":"â‹²","div":"Ã·","divide":"Ã·","divideontimes":"â‹‡","divonx":"â‹‡","DJcy":"Ð‚","djcy":"Ñ’","dlcorn":"âŒž","dlcrop":"âŒ","dollar":"$","Dopf":"ð”»","dopf":"ð••","Dot":"Â¨","dot":"Ë™","DotDot":"âƒœ","doteq":"â‰","doteqdot":"â‰‘","DotEqual":"â‰","dotminus":"âˆ¸","dotplus":"âˆ”","dotsquare":"âŠ¡","doublebarwedge":"âŒ†","DoubleContourIntegral":"âˆ¯","DoubleDot":"Â¨","DoubleDownArrow":"â‡“","DoubleLeftArrow":"â‡","DoubleLeftRightArrow":"â‡”","DoubleLeftTee":"â«¤","DoubleLongLeftArrow":"âŸ¸","DoubleLongLeftRightArrow":"âŸº","DoubleLongRightArrow":"âŸ¹","DoubleRightArrow":"â‡’","DoubleRightTee":"âŠ¨","DoubleUpArrow":"â‡‘","DoubleUpDownArrow":"â‡•","DoubleVerticalBar":"âˆ¥","DownArrowBar":"â¤“","downarrow":"â†“","DownArrow":"â†“","Downarrow":"â‡“","DownArrowUpArrow":"â‡µ","DownBreve":"Ì‘","downdownarrows":"â‡Š","downharpoonleft":"â‡ƒ","downharpoonright":"â‡‚","DownLeftRightVector":"â¥","DownLeftTeeVector":"â¥ž","DownLeftVectorBar":"â¥–","DownLeftVector":"â†½","DownRightTeeVector":"â¥Ÿ","DownRightVectorBar":"â¥—","DownRightVector":"â‡","DownTeeArrow":"â†§","DownTee":"âŠ¤","drbkarow":"â¤","drcorn":"âŒŸ","drcrop":"âŒŒ","Dscr":"ð’Ÿ","dscr":"ð’¹","DScy":"Ð…","dscy":"Ñ•","dsol":"â§¶","Dstrok":"Ä","dstrok":"Ä‘","dtdot":"â‹±","dtri":"â–¿","dtrif":"â–¾","duarr":"â‡µ","duhar":"â¥¯","dwangle":"â¦¦","DZcy":"Ð","dzcy":"ÑŸ","dzigrarr":"âŸ¿","Eacute":"Ã‰","eacute":"Ã©","easter":"â©®","Ecaron":"Äš","ecaron":"Ä›","Ecirc":"ÃŠ","ecirc":"Ãª","ecir":"â‰–","ecolon":"â‰•","Ecy":"Ð­","ecy":"Ñ","eDDot":"â©·","Edot":"Ä–","edot":"Ä—","eDot":"â‰‘","ee":"â…‡","efDot":"â‰’","Efr":"ð”ˆ","efr":"ð”¢","eg":"âªš","Egrave":"Ãˆ","egrave":"Ã¨","egs":"âª–","egsdot":"âª˜","el":"âª™","Element":"âˆˆ","elinters":"â§","ell":"â„“","els":"âª•","elsdot":"âª—","Emacr":"Ä’","emacr":"Ä“","empty":"âˆ…","emptyset":"âˆ…","EmptySmallSquare":"â—»","emptyv":"âˆ…","EmptyVerySmallSquare":"â–«","emsp13":"â€„","emsp14":"â€…","emsp":"â€ƒ","ENG":"ÅŠ","eng":"Å‹","ensp":"â€‚","Eogon":"Ä˜","eogon":"Ä™","Eopf":"ð”¼","eopf":"ð•–","epar":"â‹•","eparsl":"â§£","eplus":"â©±","epsi":"Îµ","Epsilon":"Î•","epsilon":"Îµ","epsiv":"Ïµ","eqcirc":"â‰–","eqcolon":"â‰•","eqsim":"â‰‚","eqslantgtr":"âª–","eqslantless":"âª•","Equal":"â©µ","equals":"=","EqualTilde":"â‰‚","equest":"â‰Ÿ","Equilibrium":"â‡Œ","equiv":"â‰¡","equivDD":"â©¸","eqvparsl":"â§¥","erarr":"â¥±","erDot":"â‰“","escr":"â„¯","Escr":"â„°","esdot":"â‰","Esim":"â©³","esim":"â‰‚","Eta":"Î—","eta":"Î·","ETH":"Ã","eth":"Ã°","Euml":"Ã‹","euml":"Ã«","euro":"â‚¬","excl":"!","exist":"âˆƒ","Exists":"âˆƒ","expectation":"â„°","exponentiale":"â…‡","ExponentialE":"â…‡","fallingdotseq":"â‰’","Fcy":"Ð¤","fcy":"Ñ„","female":"â™€","ffilig":"ï¬ƒ","fflig":"ï¬€","ffllig":"ï¬„","Ffr":"ð”‰","ffr":"ð”£","filig":"ï¬","FilledSmallSquare":"â—¼","FilledVerySmallSquare":"â–ª","fjlig":"fj","flat":"â™­","fllig":"ï¬‚","fltns":"â–±","fnof":"Æ’","Fopf":"ð”½","fopf":"ð•—","forall":"âˆ€","ForAll":"âˆ€","fork":"â‹”","forkv":"â«™","Fouriertrf":"â„±","fpartint":"â¨","frac12":"Â½","frac13":"â…“","frac14":"Â¼","frac15":"â…•","frac16":"â…™","frac18":"â…›","frac23":"â…”","frac25":"â…–","frac34":"Â¾","frac35":"â…—","frac38":"â…œ","frac45":"â…˜","frac56":"â…š","frac58":"â…","frac78":"â…ž","frasl":"â„","frown":"âŒ¢","fscr":"ð’»","Fscr":"â„±","gacute":"Çµ","Gamma":"Î“","gamma":"Î³","Gammad":"Ïœ","gammad":"Ï","gap":"âª†","Gbreve":"Äž","gbreve":"ÄŸ","Gcedil":"Ä¢","Gcirc":"Äœ","gcirc":"Ä","Gcy":"Ð“","gcy":"Ð³","Gdot":"Ä ","gdot":"Ä¡","ge":"â‰¥","gE":"â‰§","gEl":"âªŒ","gel":"â‹›","geq":"â‰¥","geqq":"â‰§","geqslant":"â©¾","gescc":"âª©","ges":"â©¾","gesdot":"âª€","gesdoto":"âª‚","gesdotol":"âª„","gesl":"â‹›ï¸€","gesles":"âª”","Gfr":"ð”Š","gfr":"ð”¤","gg":"â‰«","Gg":"â‹™","ggg":"â‹™","gimel":"â„·","GJcy":"Ðƒ","gjcy":"Ñ“","gla":"âª¥","gl":"â‰·","glE":"âª’","glj":"âª¤","gnap":"âªŠ","gnapprox":"âªŠ","gne":"âªˆ","gnE":"â‰©","gneq":"âªˆ","gneqq":"â‰©","gnsim":"â‹§","Gopf":"ð”¾","gopf":"ð•˜","grave":"`","GreaterEqual":"â‰¥","GreaterEqualLess":"â‹›","GreaterFullEqual":"â‰§","GreaterGreater":"âª¢","GreaterLess":"â‰·","GreaterSlantEqual":"â©¾","GreaterTilde":"â‰³","Gscr":"ð’¢","gscr":"â„Š","gsim":"â‰³","gsime":"âªŽ","gsiml":"âª","gtcc":"âª§","gtcir":"â©º","gt":">","GT":">","Gt":"â‰«","gtdot":"â‹—","gtlPar":"â¦•","gtquest":"â©¼","gtrapprox":"âª†","gtrarr":"â¥¸","gtrdot":"â‹—","gtreqless":"â‹›","gtreqqless":"âªŒ","gtrless":"â‰·","gtrsim":"â‰³","gvertneqq":"â‰©ï¸€","gvnE":"â‰©ï¸€","Hacek":"Ë‡","hairsp":"â€Š","half":"Â½","hamilt":"â„‹","HARDcy":"Ðª","hardcy":"ÑŠ","harrcir":"â¥ˆ","harr":"â†”","hArr":"â‡”","harrw":"â†­","Hat":"^","hbar":"â„","Hcirc":"Ä¤","hcirc":"Ä¥","hearts":"â™¥","heartsuit":"â™¥","hellip":"â€¦","hercon":"âŠ¹","hfr":"ð”¥","Hfr":"â„Œ","HilbertSpace":"â„‹","hksearow":"â¤¥","hkswarow":"â¤¦","hoarr":"â‡¿","homtht":"âˆ»","hookleftarrow":"â†©","hookrightarrow":"â†ª","hopf":"ð•™","Hopf":"â„","horbar":"â€•","HorizontalLine":"â”€","hscr":"ð’½","Hscr":"â„‹","hslash":"â„","Hstrok":"Ä¦","hstrok":"Ä§","HumpDownHump":"â‰Ž","HumpEqual":"â‰","hybull":"âƒ","hyphen":"â€","Iacute":"Ã","iacute":"Ã­","ic":"â£","Icirc":"ÃŽ","icirc":"Ã®","Icy":"Ð˜","icy":"Ð¸","Idot":"Ä°","IEcy":"Ð•","iecy":"Ðµ","iexcl":"Â¡","iff":"â‡”","ifr":"ð”¦","Ifr":"â„‘","Igrave":"ÃŒ","igrave":"Ã¬","ii":"â…ˆ","iiiint":"â¨Œ","iiint":"âˆ­","iinfin":"â§œ","iiota":"â„©","IJlig":"Ä²","ijlig":"Ä³","Imacr":"Äª","imacr":"Ä«","image":"â„‘","ImaginaryI":"â…ˆ","imagline":"â„","imagpart":"â„‘","imath":"Ä±","Im":"â„‘","imof":"âŠ·","imped":"Æµ","Implies":"â‡’","incare":"â„…","in":"âˆˆ","infin":"âˆž","infintie":"â§","inodot":"Ä±","intcal":"âŠº","int":"âˆ«","Int":"âˆ¬","integers":"â„¤","Integral":"âˆ«","intercal":"âŠº","Intersection":"â‹‚","intlarhk":"â¨—","intprod":"â¨¼","InvisibleComma":"â£","InvisibleTimes":"â¢","IOcy":"Ð","iocy":"Ñ‘","Iogon":"Ä®","iogon":"Ä¯","Iopf":"ð•€","iopf":"ð•š","Iota":"Î™","iota":"Î¹","iprod":"â¨¼","iquest":"Â¿","iscr":"ð’¾","Iscr":"â„","isin":"âˆˆ","isindot":"â‹µ","isinE":"â‹¹","isins":"â‹´","isinsv":"â‹³","isinv":"âˆˆ","it":"â¢","Itilde":"Ä¨","itilde":"Ä©","Iukcy":"Ð†","iukcy":"Ñ–","Iuml":"Ã","iuml":"Ã¯","Jcirc":"Ä´","jcirc":"Äµ","Jcy":"Ð™","jcy":"Ð¹","Jfr":"ð”","jfr":"ð”§","jmath":"È·","Jopf":"ð•","jopf":"ð•›","Jscr":"ð’¥","jscr":"ð’¿","Jsercy":"Ðˆ","jsercy":"Ñ˜","Jukcy":"Ð„","jukcy":"Ñ”","Kappa":"Îš","kappa":"Îº","kappav":"Ï°","Kcedil":"Ä¶","kcedil":"Ä·","Kcy":"Ðš","kcy":"Ðº","Kfr":"ð”Ž","kfr":"ð”¨","kgreen":"Ä¸","KHcy":"Ð¥","khcy":"Ñ…","KJcy":"ÐŒ","kjcy":"Ñœ","Kopf":"ð•‚","kopf":"ð•œ","Kscr":"ð’¦","kscr":"ð“€","lAarr":"â‡š","Lacute":"Ä¹","lacute":"Äº","laemptyv":"â¦´","lagran":"â„’","Lambda":"Î›","lambda":"Î»","lang":"âŸ¨","Lang":"âŸª","langd":"â¦‘","langle":"âŸ¨","lap":"âª…","Laplacetrf":"â„’","laquo":"Â«","larrb":"â‡¤","larrbfs":"â¤Ÿ","larr":"â†","Larr":"â†ž","lArr":"â‡","larrfs":"â¤","larrhk":"â†©","larrlp":"â†«","larrpl":"â¤¹","larrsim":"â¥³","larrtl":"â†¢","latail":"â¤™","lAtail":"â¤›","lat":"âª«","late":"âª­","lates":"âª­ï¸€","lbarr":"â¤Œ","lBarr":"â¤Ž","lbbrk":"â²","lbrace":"{","lbrack":"[","lbrke":"â¦‹","lbrksld":"â¦","lbrkslu":"â¦","Lcaron":"Ä½","lcaron":"Ä¾","Lcedil":"Ä»","lcedil":"Ä¼","lceil":"âŒˆ","lcub":"{","Lcy":"Ð›","lcy":"Ð»","ldca":"â¤¶","ldquo":"â€œ","ldquor":"â€ž","ldrdhar":"â¥§","ldrushar":"â¥‹","ldsh":"â†²","le":"â‰¤","lE":"â‰¦","LeftAngleBracket":"âŸ¨","LeftArrowBar":"â‡¤","leftarrow":"â†","LeftArrow":"â†","Leftarrow":"â‡","LeftArrowRightArrow":"â‡†","leftarrowtail":"â†¢","LeftCeiling":"âŒˆ","LeftDoubleBracket":"âŸ¦","LeftDownTeeVector":"â¥¡","LeftDownVectorBar":"â¥™","LeftDownVector":"â‡ƒ","LeftFloor":"âŒŠ","leftharpoondown":"â†½","leftharpoonup":"â†¼","leftleftarrows":"â‡‡","leftrightarrow":"â†”","LeftRightArrow":"â†”","Leftrightarrow":"â‡”","leftrightarrows":"â‡†","leftrightharpoons":"â‡‹","leftrightsquigarrow":"â†­","LeftRightVector":"â¥Ž","LeftTeeArrow":"â†¤","LeftTee":"âŠ£","LeftTeeVector":"â¥š","leftthreetimes":"â‹‹","LeftTriangleBar":"â§","LeftTriangle":"âŠ²","LeftTriangleEqual":"âŠ´","LeftUpDownVector":"â¥‘","LeftUpTeeVector":"â¥ ","LeftUpVectorBar":"â¥˜","LeftUpVector":"â†¿","LeftVectorBar":"â¥’","LeftVector":"â†¼","lEg":"âª‹","leg":"â‹š","leq":"â‰¤","leqq":"â‰¦","leqslant":"â©½","lescc":"âª¨","les":"â©½","lesdot":"â©¿","lesdoto":"âª","lesdotor":"âªƒ","lesg":"â‹šï¸€","lesges":"âª“","lessapprox":"âª…","lessdot":"â‹–","lesseqgtr":"â‹š","lesseqqgtr":"âª‹","LessEqualGreater":"â‹š","LessFullEqual":"â‰¦","LessGreater":"â‰¶","lessgtr":"â‰¶","LessLess":"âª¡","lesssim":"â‰²","LessSlantEqual":"â©½","LessTilde":"â‰²","lfisht":"â¥¼","lfloor":"âŒŠ","Lfr":"ð”","lfr":"ð”©","lg":"â‰¶","lgE":"âª‘","lHar":"â¥¢","lhard":"â†½","lharu":"â†¼","lharul":"â¥ª","lhblk":"â–„","LJcy":"Ð‰","ljcy":"Ñ™","llarr":"â‡‡","ll":"â‰ª","Ll":"â‹˜","llcorner":"âŒž","Lleftarrow":"â‡š","llhard":"â¥«","lltri":"â—º","Lmidot":"Ä¿","lmidot":"Å€","lmoustache":"âŽ°","lmoust":"âŽ°","lnap":"âª‰","lnapprox":"âª‰","lne":"âª‡","lnE":"â‰¨","lneq":"âª‡","lneqq":"â‰¨","lnsim":"â‹¦","loang":"âŸ¬","loarr":"â‡½","lobrk":"âŸ¦","longleftarrow":"âŸµ","LongLeftArrow":"âŸµ","Longleftarrow":"âŸ¸","longleftrightarrow":"âŸ·","LongLeftRightArrow":"âŸ·","Longleftrightarrow":"âŸº","longmapsto":"âŸ¼","longrightarrow":"âŸ¶","LongRightArrow":"âŸ¶","Longrightarrow":"âŸ¹","looparrowleft":"â†«","looparrowright":"â†¬","lopar":"â¦…","Lopf":"ð•ƒ","lopf":"ð•","loplus":"â¨­","lotimes":"â¨´","lowast":"âˆ—","lowbar":"_","LowerLeftArrow":"â†™","LowerRightArrow":"â†˜","loz":"â—Š","lozenge":"â—Š","lozf":"â§«","lpar":"(","lparlt":"â¦“","lrarr":"â‡†","lrcorner":"âŒŸ","lrhar":"â‡‹","lrhard":"â¥­","lrm":"â€Ž","lrtri":"âŠ¿","lsaquo":"â€¹","lscr":"ð“","Lscr":"â„’","lsh":"â†°","Lsh":"â†°","lsim":"â‰²","lsime":"âª","lsimg":"âª","lsqb":"[","lsquo":"â€˜","lsquor":"â€š","Lstrok":"Å","lstrok":"Å‚","ltcc":"âª¦","ltcir":"â©¹","lt":"<","LT":"<","Lt":"â‰ª","ltdot":"â‹–","lthree":"â‹‹","ltimes":"â‹‰","ltlarr":"â¥¶","ltquest":"â©»","ltri":"â—ƒ","ltrie":"âŠ´","ltrif":"â—‚","ltrPar":"â¦–","lurdshar":"â¥Š","luruhar":"â¥¦","lvertneqq":"â‰¨ï¸€","lvnE":"â‰¨ï¸€","macr":"Â¯","male":"â™‚","malt":"âœ ","maltese":"âœ ","Map":"â¤…","map":"â†¦","mapsto":"â†¦","mapstodown":"â†§","mapstoleft":"â†¤","mapstoup":"â†¥","marker":"â–®","mcomma":"â¨©","Mcy":"Ðœ","mcy":"Ð¼","mdash":"â€”","mDDot":"âˆº","measuredangle":"âˆ¡","MediumSpace":"âŸ","Mellintrf":"â„³","Mfr":"ð”","mfr":"ð”ª","mho":"â„§","micro":"Âµ","midast":"*","midcir":"â«°","mid":"âˆ£","middot":"Â·","minusb":"âŠŸ","minus":"âˆ’","minusd":"âˆ¸","minusdu":"â¨ª","MinusPlus":"âˆ“","mlcp":"â«›","mldr":"â€¦","mnplus":"âˆ“","models":"âŠ§","Mopf":"ð•„","mopf":"ð•ž","mp":"âˆ“","mscr":"ð“‚","Mscr":"â„³","mstpos":"âˆ¾","Mu":"Îœ","mu":"Î¼","multimap":"âŠ¸","mumap":"âŠ¸","nabla":"âˆ‡","Nacute":"Åƒ","nacute":"Å„","nang":"âˆ âƒ’","nap":"â‰‰","napE":"â©°Ì¸","napid":"â‰‹Ì¸","napos":"Å‰","napprox":"â‰‰","natural":"â™®","naturals":"â„•","natur":"â™®","nbsp":"Â ","nbump":"â‰ŽÌ¸","nbumpe":"â‰Ì¸","ncap":"â©ƒ","Ncaron":"Å‡","ncaron":"Åˆ","Ncedil":"Å…","ncedil":"Å†","ncong":"â‰‡","ncongdot":"â©­Ì¸","ncup":"â©‚","Ncy":"Ð","ncy":"Ð½","ndash":"â€“","nearhk":"â¤¤","nearr":"â†—","neArr":"â‡—","nearrow":"â†—","ne":"â‰ ","nedot":"â‰Ì¸","NegativeMediumSpace":"â€‹","NegativeThickSpace":"â€‹","NegativeThinSpace":"â€‹","NegativeVeryThinSpace":"â€‹","nequiv":"â‰¢","nesear":"â¤¨","nesim":"â‰‚Ì¸","NestedGreaterGreater":"â‰«","NestedLessLess":"â‰ª","NewLine":"\\n","nexist":"âˆ„","nexists":"âˆ„","Nfr":"ð”‘","nfr":"ð”«","ngE":"â‰§Ì¸","nge":"â‰±","ngeq":"â‰±","ngeqq":"â‰§Ì¸","ngeqslant":"â©¾Ì¸","nges":"â©¾Ì¸","nGg":"â‹™Ì¸","ngsim":"â‰µ","nGt":"â‰«âƒ’","ngt":"â‰¯","ngtr":"â‰¯","nGtv":"â‰«Ì¸","nharr":"â†®","nhArr":"â‡Ž","nhpar":"â«²","ni":"âˆ‹","nis":"â‹¼","nisd":"â‹º","niv":"âˆ‹","NJcy":"ÐŠ","njcy":"Ñš","nlarr":"â†š","nlArr":"â‡","nldr":"â€¥","nlE":"â‰¦Ì¸","nle":"â‰°","nleftarrow":"â†š","nLeftarrow":"â‡","nleftrightarrow":"â†®","nLeftrightarrow":"â‡Ž","nleq":"â‰°","nleqq":"â‰¦Ì¸","nleqslant":"â©½Ì¸","nles":"â©½Ì¸","nless":"â‰®","nLl":"â‹˜Ì¸","nlsim":"â‰´","nLt":"â‰ªâƒ’","nlt":"â‰®","nltri":"â‹ª","nltrie":"â‹¬","nLtv":"â‰ªÌ¸","nmid":"âˆ¤","NoBreak":"â ","NonBreakingSpace":"Â ","nopf":"ð•Ÿ","Nopf":"â„•","Not":"â«¬","not":"Â¬","NotCongruent":"â‰¢","NotCupCap":"â‰­","NotDoubleVerticalBar":"âˆ¦","NotElement":"âˆ‰","NotEqual":"â‰ ","NotEqualTilde":"â‰‚Ì¸","NotExists":"âˆ„","NotGreater":"â‰¯","NotGreaterEqual":"â‰±","NotGreaterFullEqual":"â‰§Ì¸","NotGreaterGreater":"â‰«Ì¸","NotGreaterLess":"â‰¹","NotGreaterSlantEqual":"â©¾Ì¸","NotGreaterTilde":"â‰µ","NotHumpDownHump":"â‰ŽÌ¸","NotHumpEqual":"â‰Ì¸","notin":"âˆ‰","notindot":"â‹µÌ¸","notinE":"â‹¹Ì¸","notinva":"âˆ‰","notinvb":"â‹·","notinvc":"â‹¶","NotLeftTriangleBar":"â§Ì¸","NotLeftTriangle":"â‹ª","NotLeftTriangleEqual":"â‹¬","NotLess":"â‰®","NotLessEqual":"â‰°","NotLessGreater":"â‰¸","NotLessLess":"â‰ªÌ¸","NotLessSlantEqual":"â©½Ì¸","NotLessTilde":"â‰´","NotNestedGreaterGreater":"âª¢Ì¸","NotNestedLessLess":"âª¡Ì¸","notni":"âˆŒ","notniva":"âˆŒ","notnivb":"â‹¾","notnivc":"â‹½","NotPrecedes":"âŠ€","NotPrecedesEqual":"âª¯Ì¸","NotPrecedesSlantEqual":"â‹ ","NotReverseElement":"âˆŒ","NotRightTriangleBar":"â§Ì¸","NotRightTriangle":"â‹«","NotRightTriangleEqual":"â‹­","NotSquareSubset":"âŠÌ¸","NotSquareSubsetEqual":"â‹¢","NotSquareSuperset":"âŠÌ¸","NotSquareSupersetEqual":"â‹£","NotSubset":"âŠ‚âƒ’","NotSubsetEqual":"âŠˆ","NotSucceeds":"âŠ","NotSucceedsEqual":"âª°Ì¸","NotSucceedsSlantEqual":"â‹¡","NotSucceedsTilde":"â‰¿Ì¸","NotSuperset":"âŠƒâƒ’","NotSupersetEqual":"âŠ‰","NotTilde":"â‰","NotTildeEqual":"â‰„","NotTildeFullEqual":"â‰‡","NotTildeTilde":"â‰‰","NotVerticalBar":"âˆ¤","nparallel":"âˆ¦","npar":"âˆ¦","nparsl":"â«½âƒ¥","npart":"âˆ‚Ì¸","npolint":"â¨”","npr":"âŠ€","nprcue":"â‹ ","nprec":"âŠ€","npreceq":"âª¯Ì¸","npre":"âª¯Ì¸","nrarrc":"â¤³Ì¸","nrarr":"â†›","nrArr":"â‡","nrarrw":"â†Ì¸","nrightarrow":"â†›","nRightarrow":"â‡","nrtri":"â‹«","nrtrie":"â‹­","nsc":"âŠ","nsccue":"â‹¡","nsce":"âª°Ì¸","Nscr":"ð’©","nscr":"ð“ƒ","nshortmid":"âˆ¤","nshortparallel":"âˆ¦","nsim":"â‰","nsime":"â‰„","nsimeq":"â‰„","nsmid":"âˆ¤","nspar":"âˆ¦","nsqsube":"â‹¢","nsqsupe":"â‹£","nsub":"âŠ„","nsubE":"â«…Ì¸","nsube":"âŠˆ","nsubset":"âŠ‚âƒ’","nsubseteq":"âŠˆ","nsubseteqq":"â«…Ì¸","nsucc":"âŠ","nsucceq":"âª°Ì¸","nsup":"âŠ…","nsupE":"â«†Ì¸","nsupe":"âŠ‰","nsupset":"âŠƒâƒ’","nsupseteq":"âŠ‰","nsupseteqq":"â«†Ì¸","ntgl":"â‰¹","Ntilde":"Ã‘","ntilde":"Ã±","ntlg":"â‰¸","ntriangleleft":"â‹ª","ntrianglelefteq":"â‹¬","ntriangleright":"â‹«","ntrianglerighteq":"â‹­","Nu":"Î","nu":"Î½","num":"#","numero":"â„–","numsp":"â€‡","nvap":"â‰âƒ’","nvdash":"âŠ¬","nvDash":"âŠ­","nVdash":"âŠ®","nVDash":"âŠ¯","nvge":"â‰¥âƒ’","nvgt":">âƒ’","nvHarr":"â¤„","nvinfin":"â§ž","nvlArr":"â¤‚","nvle":"â‰¤âƒ’","nvlt":"<âƒ’","nvltrie":"âŠ´âƒ’","nvrArr":"â¤ƒ","nvrtrie":"âŠµâƒ’","nvsim":"âˆ¼âƒ’","nwarhk":"â¤£","nwarr":"â†–","nwArr":"â‡–","nwarrow":"â†–","nwnear":"â¤§","Oacute":"Ã“","oacute":"Ã³","oast":"âŠ›","Ocirc":"Ã”","ocirc":"Ã´","ocir":"âŠš","Ocy":"Ðž","ocy":"Ð¾","odash":"âŠ","Odblac":"Å","odblac":"Å‘","odiv":"â¨¸","odot":"âŠ™","odsold":"â¦¼","OElig":"Å’","oelig":"Å“","ofcir":"â¦¿","Ofr":"ð”’","ofr":"ð”¬","ogon":"Ë›","Ograve":"Ã’","ograve":"Ã²","ogt":"â§","ohbar":"â¦µ","ohm":"Î©","oint":"âˆ®","olarr":"â†º","olcir":"â¦¾","olcross":"â¦»","oline":"â€¾","olt":"â§€","Omacr":"ÅŒ","omacr":"Å","Omega":"Î©","omega":"Ï‰","Omicron":"ÎŸ","omicron":"Î¿","omid":"â¦¶","ominus":"âŠ–","Oopf":"ð•†","oopf":"ð• ","opar":"â¦·","OpenCurlyDoubleQuote":"â€œ","OpenCurlyQuote":"â€˜","operp":"â¦¹","oplus":"âŠ•","orarr":"â†»","Or":"â©”","or":"âˆ¨","ord":"â©","order":"â„´","orderof":"â„´","ordf":"Âª","ordm":"Âº","origof":"âŠ¶","oror":"â©–","orslope":"â©—","orv":"â©›","oS":"â“ˆ","Oscr":"ð’ª","oscr":"â„´","Oslash":"Ã˜","oslash":"Ã¸","osol":"âŠ˜","Otilde":"Ã•","otilde":"Ãµ","otimesas":"â¨¶","Otimes":"â¨·","otimes":"âŠ—","Ouml":"Ã–","ouml":"Ã¶","ovbar":"âŒ½","OverBar":"â€¾","OverBrace":"âž","OverBracket":"âŽ´","OverParenthesis":"âœ","para":"Â¶","parallel":"âˆ¥","par":"âˆ¥","parsim":"â«³","parsl":"â«½","part":"âˆ‚","PartialD":"âˆ‚","Pcy":"ÐŸ","pcy":"Ð¿","percnt":"%","period":".","permil":"â€°","perp":"âŠ¥","pertenk":"â€±","Pfr":"ð”“","pfr":"ð”­","Phi":"Î¦","phi":"Ï†","phiv":"Ï•","phmmat":"â„³","phone":"â˜Ž","Pi":"Î ","pi":"Ï€","pitchfork":"â‹”","piv":"Ï–","planck":"â„","planckh":"â„Ž","plankv":"â„","plusacir":"â¨£","plusb":"âŠž","pluscir":"â¨¢","plus":"+","plusdo":"âˆ”","plusdu":"â¨¥","pluse":"â©²","PlusMinus":"Â±","plusmn":"Â±","plussim":"â¨¦","plustwo":"â¨§","pm":"Â±","Poincareplane":"â„Œ","pointint":"â¨•","popf":"ð•¡","Popf":"â„™","pound":"Â£","prap":"âª·","Pr":"âª»","pr":"â‰º","prcue":"â‰¼","precapprox":"âª·","prec":"â‰º","preccurlyeq":"â‰¼","Precedes":"â‰º","PrecedesEqual":"âª¯","PrecedesSlantEqual":"â‰¼","PrecedesTilde":"â‰¾","preceq":"âª¯","precnapprox":"âª¹","precneqq":"âªµ","precnsim":"â‹¨","pre":"âª¯","prE":"âª³","precsim":"â‰¾","prime":"â€²","Prime":"â€³","primes":"â„™","prnap":"âª¹","prnE":"âªµ","prnsim":"â‹¨","prod":"âˆ","Product":"âˆ","profalar":"âŒ®","profline":"âŒ’","profsurf":"âŒ“","prop":"âˆ","Proportional":"âˆ","Proportion":"âˆ·","propto":"âˆ","prsim":"â‰¾","prurel":"âŠ°","Pscr":"ð’«","pscr":"ð“…","Psi":"Î¨","psi":"Ïˆ","puncsp":"â€ˆ","Qfr":"ð””","qfr":"ð”®","qint":"â¨Œ","qopf":"ð•¢","Qopf":"â„š","qprime":"â—","Qscr":"ð’¬","qscr":"ð“†","quaternions":"â„","quatint":"â¨–","quest":"?","questeq":"â‰Ÿ","quot":"\\"","QUOT":"\\"","rAarr":"â‡›","race":"âˆ½Ì±","Racute":"Å”","racute":"Å•","radic":"âˆš","raemptyv":"â¦³","rang":"âŸ©","Rang":"âŸ«","rangd":"â¦’","range":"â¦¥","rangle":"âŸ©","raquo":"Â»","rarrap":"â¥µ","rarrb":"â‡¥","rarrbfs":"â¤ ","rarrc":"â¤³","rarr":"â†’","Rarr":"â† ","rArr":"â‡’","rarrfs":"â¤ž","rarrhk":"â†ª","rarrlp":"â†¬","rarrpl":"â¥…","rarrsim":"â¥´","Rarrtl":"â¤–","rarrtl":"â†£","rarrw":"â†","ratail":"â¤š","rAtail":"â¤œ","ratio":"âˆ¶","rationals":"â„š","rbarr":"â¤","rBarr":"â¤","RBarr":"â¤","rbbrk":"â³","rbrace":"}","rbrack":"]","rbrke":"â¦Œ","rbrksld":"â¦Ž","rbrkslu":"â¦","Rcaron":"Å˜","rcaron":"Å™","Rcedil":"Å–","rcedil":"Å—","rceil":"âŒ‰","rcub":"}","Rcy":"Ð ","rcy":"Ñ€","rdca":"â¤·","rdldhar":"â¥©","rdquo":"â€","rdquor":"â€","rdsh":"â†³","real":"â„œ","realine":"â„›","realpart":"â„œ","reals":"â„","Re":"â„œ","rect":"â–­","reg":"Â®","REG":"Â®","ReverseElement":"âˆ‹","ReverseEquilibrium":"â‡‹","ReverseUpEquilibrium":"â¥¯","rfisht":"â¥½","rfloor":"âŒ‹","rfr":"ð”¯","Rfr":"â„œ","rHar":"â¥¤","rhard":"â‡","rharu":"â‡€","rharul":"â¥¬","Rho":"Î¡","rho":"Ï","rhov":"Ï±","RightAngleBracket":"âŸ©","RightArrowBar":"â‡¥","rightarrow":"â†’","RightArrow":"â†’","Rightarrow":"â‡’","RightArrowLeftArrow":"â‡„","rightarrowtail":"â†£","RightCeiling":"âŒ‰","RightDoubleBracket":"âŸ§","RightDownTeeVector":"â¥","RightDownVectorBar":"â¥•","RightDownVector":"â‡‚","RightFloor":"âŒ‹","rightharpoondown":"â‡","rightharpoonup":"â‡€","rightleftarrows":"â‡„","rightleftharpoons":"â‡Œ","rightrightarrows":"â‡‰","rightsquigarrow":"â†","RightTeeArrow":"â†¦","RightTee":"âŠ¢","RightTeeVector":"â¥›","rightthreetimes":"â‹Œ","RightTriangleBar":"â§","RightTriangle":"âŠ³","RightTriangleEqual":"âŠµ","RightUpDownVector":"â¥","RightUpTeeVector":"â¥œ","RightUpVectorBar":"â¥”","RightUpVector":"â†¾","RightVectorBar":"â¥“","RightVector":"â‡€","ring":"Ëš","risingdotseq":"â‰“","rlarr":"â‡„","rlhar":"â‡Œ","rlm":"â€","rmoustache":"âŽ±","rmoust":"âŽ±","rnmid":"â«®","roang":"âŸ­","roarr":"â‡¾","robrk":"âŸ§","ropar":"â¦†","ropf":"ð•£","Ropf":"â„","roplus":"â¨®","rotimes":"â¨µ","RoundImplies":"â¥°","rpar":")","rpargt":"â¦”","rppolint":"â¨’","rrarr":"â‡‰","Rrightarrow":"â‡›","rsaquo":"â€º","rscr":"ð“‡","Rscr":"â„›","rsh":"â†±","Rsh":"â†±","rsqb":"]","rsquo":"â€™","rsquor":"â€™","rthree":"â‹Œ","rtimes":"â‹Š","rtri":"â–¹","rtrie":"âŠµ","rtrif":"â–¸","rtriltri":"â§Ž","RuleDelayed":"â§´","ruluhar":"â¥¨","rx":"â„ž","Sacute":"Åš","sacute":"Å›","sbquo":"â€š","scap":"âª¸","Scaron":"Å ","scaron":"Å¡","Sc":"âª¼","sc":"â‰»","sccue":"â‰½","sce":"âª°","scE":"âª´","Scedil":"Åž","scedil":"ÅŸ","Scirc":"Åœ","scirc":"Å","scnap":"âªº","scnE":"âª¶","scnsim":"â‹©","scpolint":"â¨“","scsim":"â‰¿","Scy":"Ð¡","scy":"Ñ","sdotb":"âŠ¡","sdot":"â‹…","sdote":"â©¦","searhk":"â¤¥","searr":"â†˜","seArr":"â‡˜","searrow":"â†˜","sect":"Â§","semi":";","seswar":"â¤©","setminus":"âˆ–","setmn":"âˆ–","sext":"âœ¶","Sfr":"ð”–","sfr":"ð”°","sfrown":"âŒ¢","sharp":"â™¯","SHCHcy":"Ð©","shchcy":"Ñ‰","SHcy":"Ð¨","shcy":"Ñˆ","ShortDownArrow":"â†“","ShortLeftArrow":"â†","shortmid":"âˆ£","shortparallel":"âˆ¥","ShortRightArrow":"â†’","ShortUpArrow":"â†‘","shy":"Â­","Sigma":"Î£","sigma":"Ïƒ","sigmaf":"Ï‚","sigmav":"Ï‚","sim":"âˆ¼","simdot":"â©ª","sime":"â‰ƒ","simeq":"â‰ƒ","simg":"âªž","simgE":"âª ","siml":"âª","simlE":"âªŸ","simne":"â‰†","simplus":"â¨¤","simrarr":"â¥²","slarr":"â†","SmallCircle":"âˆ˜","smallsetminus":"âˆ–","smashp":"â¨³","smeparsl":"â§¤","smid":"âˆ£","smile":"âŒ£","smt":"âªª","smte":"âª¬","smtes":"âª¬ï¸€","SOFTcy":"Ð¬","softcy":"ÑŒ","solbar":"âŒ¿","solb":"â§„","sol":"/","Sopf":"ð•Š","sopf":"ð•¤","spades":"â™ ","spadesuit":"â™ ","spar":"âˆ¥","sqcap":"âŠ“","sqcaps":"âŠ“ï¸€","sqcup":"âŠ”","sqcups":"âŠ”ï¸€","Sqrt":"âˆš","sqsub":"âŠ","sqsube":"âŠ‘","sqsubset":"âŠ","sqsubseteq":"âŠ‘","sqsup":"âŠ","sqsupe":"âŠ’","sqsupset":"âŠ","sqsupseteq":"âŠ’","square":"â–¡","Square":"â–¡","SquareIntersection":"âŠ“","SquareSubset":"âŠ","SquareSubsetEqual":"âŠ‘","SquareSuperset":"âŠ","SquareSupersetEqual":"âŠ’","SquareUnion":"âŠ”","squarf":"â–ª","squ":"â–¡","squf":"â–ª","srarr":"â†’","Sscr":"ð’®","sscr":"ð“ˆ","ssetmn":"âˆ–","ssmile":"âŒ£","sstarf":"â‹†","Star":"â‹†","star":"â˜†","starf":"â˜…","straightepsilon":"Ïµ","straightphi":"Ï•","strns":"Â¯","sub":"âŠ‚","Sub":"â‹","subdot":"âª½","subE":"â«…","sube":"âŠ†","subedot":"â«ƒ","submult":"â«","subnE":"â«‹","subne":"âŠŠ","subplus":"âª¿","subrarr":"â¥¹","subset":"âŠ‚","Subset":"â‹","subseteq":"âŠ†","subseteqq":"â«…","SubsetEqual":"âŠ†","subsetneq":"âŠŠ","subsetneqq":"â«‹","subsim":"â«‡","subsub":"â«•","subsup":"â«“","succapprox":"âª¸","succ":"â‰»","succcurlyeq":"â‰½","Succeeds":"â‰»","SucceedsEqual":"âª°","SucceedsSlantEqual":"â‰½","SucceedsTilde":"â‰¿","succeq":"âª°","succnapprox":"âªº","succneqq":"âª¶","succnsim":"â‹©","succsim":"â‰¿","SuchThat":"âˆ‹","sum":"âˆ‘","Sum":"âˆ‘","sung":"â™ª","sup1":"Â¹","sup2":"Â²","sup3":"Â³","sup":"âŠƒ","Sup":"â‹‘","supdot":"âª¾","supdsub":"â«˜","supE":"â«†","supe":"âŠ‡","supedot":"â«„","Superset":"âŠƒ","SupersetEqual":"âŠ‡","suphsol":"âŸ‰","suphsub":"â«—","suplarr":"â¥»","supmult":"â«‚","supnE":"â«Œ","supne":"âŠ‹","supplus":"â«€","supset":"âŠƒ","Supset":"â‹‘","supseteq":"âŠ‡","supseteqq":"â«†","supsetneq":"âŠ‹","supsetneqq":"â«Œ","supsim":"â«ˆ","supsub":"â«”","supsup":"â«–","swarhk":"â¤¦","swarr":"â†™","swArr":"â‡™","swarrow":"â†™","swnwar":"â¤ª","szlig":"ÃŸ","Tab":"\\t","target":"âŒ–","Tau":"Î¤","tau":"Ï„","tbrk":"âŽ´","Tcaron":"Å¤","tcaron":"Å¥","Tcedil":"Å¢","tcedil":"Å£","Tcy":"Ð¢","tcy":"Ñ‚","tdot":"âƒ›","telrec":"âŒ•","Tfr":"ð”—","tfr":"ð”±","there4":"âˆ´","therefore":"âˆ´","Therefore":"âˆ´","Theta":"Î˜","theta":"Î¸","thetasym":"Ï‘","thetav":"Ï‘","thickapprox":"â‰ˆ","thicksim":"âˆ¼","ThickSpace":"âŸâ€Š","ThinSpace":"â€‰","thinsp":"â€‰","thkap":"â‰ˆ","thksim":"âˆ¼","THORN":"Ãž","thorn":"Ã¾","tilde":"Ëœ","Tilde":"âˆ¼","TildeEqual":"â‰ƒ","TildeFullEqual":"â‰…","TildeTilde":"â‰ˆ","timesbar":"â¨±","timesb":"âŠ ","times":"Ã—","timesd":"â¨°","tint":"âˆ­","toea":"â¤¨","topbot":"âŒ¶","topcir":"â«±","top":"âŠ¤","Topf":"ð•‹","topf":"ð•¥","topfork":"â«š","tosa":"â¤©","tprime":"â€´","trade":"â„¢","TRADE":"â„¢","triangle":"â–µ","triangledown":"â–¿","triangleleft":"â—ƒ","trianglelefteq":"âŠ´","triangleq":"â‰œ","triangleright":"â–¹","trianglerighteq":"âŠµ","tridot":"â—¬","trie":"â‰œ","triminus":"â¨º","TripleDot":"âƒ›","triplus":"â¨¹","trisb":"â§","tritime":"â¨»","trpezium":"â¢","Tscr":"ð’¯","tscr":"ð“‰","TScy":"Ð¦","tscy":"Ñ†","TSHcy":"Ð‹","tshcy":"Ñ›","Tstrok":"Å¦","tstrok":"Å§","twixt":"â‰¬","twoheadleftarrow":"â†ž","twoheadrightarrow":"â† ","Uacute":"Ãš","uacute":"Ãº","uarr":"â†‘","Uarr":"â†Ÿ","uArr":"â‡‘","Uarrocir":"â¥‰","Ubrcy":"ÐŽ","ubrcy":"Ñž","Ubreve":"Å¬","ubreve":"Å­","Ucirc":"Ã›","ucirc":"Ã»","Ucy":"Ð£","ucy":"Ñƒ","udarr":"â‡…","Udblac":"Å°","udblac":"Å±","udhar":"â¥®","ufisht":"â¥¾","Ufr":"ð”˜","ufr":"ð”²","Ugrave":"Ã™","ugrave":"Ã¹","uHar":"â¥£","uharl":"â†¿","uharr":"â†¾","uhblk":"â–€","ulcorn":"âŒœ","ulcorner":"âŒœ","ulcrop":"âŒ","ultri":"â—¸","Umacr":"Åª","umacr":"Å«","uml":"Â¨","UnderBar":"_","UnderBrace":"âŸ","UnderBracket":"âŽµ","UnderParenthesis":"â","Union":"â‹ƒ","UnionPlus":"âŠŽ","Uogon":"Å²","uogon":"Å³","Uopf":"ð•Œ","uopf":"ð•¦","UpArrowBar":"â¤’","uparrow":"â†‘","UpArrow":"â†‘","Uparrow":"â‡‘","UpArrowDownArrow":"â‡…","updownarrow":"â†•","UpDownArrow":"â†•","Updownarrow":"â‡•","UpEquilibrium":"â¥®","upharpoonleft":"â†¿","upharpoonright":"â†¾","uplus":"âŠŽ","UpperLeftArrow":"â†–","UpperRightArrow":"â†—","upsi":"Ï…","Upsi":"Ï’","upsih":"Ï’","Upsilon":"Î¥","upsilon":"Ï…","UpTeeArrow":"â†¥","UpTee":"âŠ¥","upuparrows":"â‡ˆ","urcorn":"âŒ","urcorner":"âŒ","urcrop":"âŒŽ","Uring":"Å®","uring":"Å¯","urtri":"â—¹","Uscr":"ð’°","uscr":"ð“Š","utdot":"â‹°","Utilde":"Å¨","utilde":"Å©","utri":"â–µ","utrif":"â–´","uuarr":"â‡ˆ","Uuml":"Ãœ","uuml":"Ã¼","uwangle":"â¦§","vangrt":"â¦œ","varepsilon":"Ïµ","varkappa":"Ï°","varnothing":"âˆ…","varphi":"Ï•","varpi":"Ï–","varpropto":"âˆ","varr":"â†•","vArr":"â‡•","varrho":"Ï±","varsigma":"Ï‚","varsubsetneq":"âŠŠï¸€","varsubsetneqq":"â«‹ï¸€","varsupsetneq":"âŠ‹ï¸€","varsupsetneqq":"â«Œï¸€","vartheta":"Ï‘","vartriangleleft":"âŠ²","vartriangleright":"âŠ³","vBar":"â«¨","Vbar":"â««","vBarv":"â«©","Vcy":"Ð’","vcy":"Ð²","vdash":"âŠ¢","vDash":"âŠ¨","Vdash":"âŠ©","VDash":"âŠ«","Vdashl":"â«¦","veebar":"âŠ»","vee":"âˆ¨","Vee":"â‹","veeeq":"â‰š","vellip":"â‹®","verbar":"|","Verbar":"â€–","vert":"|","Vert":"â€–","VerticalBar":"âˆ£","VerticalLine":"|","VerticalSeparator":"â˜","VerticalTilde":"â‰€","VeryThinSpace":"â€Š","Vfr":"ð”™","vfr":"ð”³","vltri":"âŠ²","vnsub":"âŠ‚âƒ’","vnsup":"âŠƒâƒ’","Vopf":"ð•","vopf":"ð•§","vprop":"âˆ","vrtri":"âŠ³","Vscr":"ð’±","vscr":"ð“‹","vsubnE":"â«‹ï¸€","vsubne":"âŠŠï¸€","vsupnE":"â«Œï¸€","vsupne":"âŠ‹ï¸€","Vvdash":"âŠª","vzigzag":"â¦š","Wcirc":"Å´","wcirc":"Åµ","wedbar":"â©Ÿ","wedge":"âˆ§","Wedge":"â‹€","wedgeq":"â‰™","weierp":"â„˜","Wfr":"ð”š","wfr":"ð”´","Wopf":"ð•Ž","wopf":"ð•¨","wp":"â„˜","wr":"â‰€","wreath":"â‰€","Wscr":"ð’²","wscr":"ð“Œ","xcap":"â‹‚","xcirc":"â—¯","xcup":"â‹ƒ","xdtri":"â–½","Xfr":"ð”›","xfr":"ð”µ","xharr":"âŸ·","xhArr":"âŸº","Xi":"Îž","xi":"Î¾","xlarr":"âŸµ","xlArr":"âŸ¸","xmap":"âŸ¼","xnis":"â‹»","xodot":"â¨€","Xopf":"ð•","xopf":"ð•©","xoplus":"â¨","xotime":"â¨‚","xrarr":"âŸ¶","xrArr":"âŸ¹","Xscr":"ð’³","xscr":"ð“","xsqcup":"â¨†","xuplus":"â¨„","xutri":"â–³","xvee":"â‹","xwedge":"â‹€","Yacute":"Ã","yacute":"Ã½","YAcy":"Ð¯","yacy":"Ñ","Ycirc":"Å¶","ycirc":"Å·","Ycy":"Ð«","ycy":"Ñ‹","yen":"Â¥","Yfr":"ð”œ","yfr":"ð”¶","YIcy":"Ð‡","yicy":"Ñ—","Yopf":"ð•","yopf":"ð•ª","Yscr":"ð’´","yscr":"ð“Ž","YUcy":"Ð®","yucy":"ÑŽ","yuml":"Ã¿","Yuml":"Å¸","Zacute":"Å¹","zacute":"Åº","Zcaron":"Å½","zcaron":"Å¾","Zcy":"Ð—","zcy":"Ð·","Zdot":"Å»","zdot":"Å¼","zeetrf":"â„¨","ZeroWidthSpace":"â€‹","Zeta":"Î–","zeta":"Î¶","zfr":"ð”·","Zfr":"â„¨","ZHcy":"Ð–","zhcy":"Ð¶","zigrarr":"â‡","zopf":"ð•«","Zopf":"â„¤","Zscr":"ð’µ","zscr":"ð“","zwj":"â€","zwnj":"â€Œ"}')},2154:function(e,t,n){"use strict";t.parseLinkLabel=n(2155),t.parseLinkDestination=n(2156),t.parseLinkTitle=n(2157)},2155:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,a,i,l=-1,c=e.posMax,s=e.pos;for(e.pos=t+1,r=1;e.pos<c;){if(93===(a=e.src.charCodeAt(e.pos))&&0===--r){o=!0;break}if(i=e.pos,e.md.inline.skipToken(e),91===a)if(i===e.pos-1)r++;else if(n)return e.pos=s,-1}return o&&(l=e.pos),e.pos=s,l}},2156:function(e,t,n){"use strict";var r=n(965).unescapeAll;e.exports=function(e,t,n){var o,a,i=t,l={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n;){if(10===(o=e.charCodeAt(t)))return l;if(60===o)return l;if(62===o)return l.pos=t+1,l.str=r(e.slice(i+1,t)),l.ok=!0,l;92===o&&t+1<n?t+=2:t++}return l}for(a=0;t<n&&32!==(o=e.charCodeAt(t))&&!(o<32||127===o);)if(92===o&&t+1<n){if(32===e.charCodeAt(t+1))break;t+=2}else{if(40===o&&++a>32)return l;if(41===o){if(0===a)break;a--}t++}return i===t||0!==a||(l.str=r(e.slice(i,t)),l.lines=0,l.pos=t,l.ok=!0),l}},2157:function(e,t,n){"use strict";var r=n(965).unescapeAll;e.exports=function(e,t,n){var o,a,i=0,l=t,c={ok:!1,pos:0,lines:0,str:""};if(t>=n)return c;if(34!==(a=e.charCodeAt(t))&&39!==a&&40!==a)return c;for(t++,40===a&&(a=41);t<n;){if((o=e.charCodeAt(t))===a)return c.pos=t+1,c.lines=i,c.str=r(e.slice(l+1,t)),c.ok=!0,c;if(40===o&&41===a)return c;10===o?i++:92===o&&t+1<n&&(t++,10===e.charCodeAt(t)&&i++),t++}return c}},2158:function(e,t,n){"use strict";var r=n(965).assign,o=n(965).unescapeAll,a=n(965).escapeHtml,i={};function l(){this.rules=r({},i)}i.code_inline=function(e,t,n,r,o){var i=e[t];return"<code"+o.renderAttrs(i)+">"+a(e[t].content)+"</code>"},i.code_block=function(e,t,n,r,o){var i=e[t];return"<pre"+o.renderAttrs(i)+"><code>"+a(e[t].content)+"</code></pre>\n"},i.fence=function(e,t,n,r,i){var l,c,s,u,d,f=e[t],p=f.info?o(f.info).trim():"",h="",g="";return p&&(h=(s=p.split(/(\s+)/g))[0],g=s.slice(2).join("")),0===(l=n.highlight&&n.highlight(f.content,h,g)||a(f.content)).indexOf("<pre")?l+"\n":p?(c=f.attrIndex("class"),u=f.attrs?f.attrs.slice():[],c<0?u.push(["class",n.langPrefix+h]):(u[c]=u[c].slice(),u[c][1]+=" "+n.langPrefix+h),d={attrs:u},"<pre><code"+i.renderAttrs(d)+">"+l+"</code></pre>\n"):"<pre><code"+i.renderAttrs(f)+">"+l+"</code></pre>\n"},i.image=function(e,t,n,r,o){var a=e[t];return a.attrs[a.attrIndex("alt")][1]=o.renderInlineAsText(a.children,n,r),o.renderToken(e,t,n)},i.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},i.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},i.text=function(e,t){return a(e[t].content)},i.html_block=function(e,t){return e[t].content},i.html_inline=function(e,t){return e[t].content},l.prototype.renderAttrs=function(e){var t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+a(e.attrs[t][0])+'="'+a(e.attrs[t][1])+'"';return r},l.prototype.renderToken=function(e,t,n){var r,o="",a=!1,i=e[t];return i.hidden?"":(i.block&&-1!==i.nesting&&t&&e[t-1].hidden&&(o+="\n"),o+=(-1===i.nesting?"</":"<")+i.tag,o+=this.renderAttrs(i),0===i.nesting&&n.xhtmlOut&&(o+=" /"),i.block&&(a=!0,1===i.nesting&&t+1<e.length&&("inline"===(r=e[t+1]).type||r.hidden||-1===r.nesting&&r.tag===i.tag)&&(a=!1)),o+=a?">\n":">")},l.prototype.renderInline=function(e,t,n){for(var r,o="",a=this.rules,i=0,l=e.length;i<l;i++)void 0!==a[r=e[i].type]?o+=a[r](e,i,t,n,this):o+=this.renderToken(e,i,t);return o},l.prototype.renderInlineAsText=function(e,t,n){for(var r="",o=0,a=e.length;o<a;o++)"text"===e[o].type?r+=e[o].content:"image"===e[o].type?r+=this.renderInlineAsText(e[o].children,t,n):"softbreak"===e[o].type&&(r+="\n");return r},l.prototype.render=function(e,t,n){var r,o,a,i="",l=this.rules;for(r=0,o=e.length;r<o;r++)"inline"===(a=e[r].type)?i+=this.renderInline(e[r].children,t,n):void 0!==l[a]?i+=l[e[r].type](e,r,t,n,this):i+=this.renderToken(e,r,t,n);return i},e.exports=l},2159:function(e,t,n){"use strict";var r=n(1535),o=[["normalize",n(2160)],["block",n(2161)],["inline",n(2162)],["linkify",n(2163)],["replacements",n(2164)],["smartquotes",n(2165)]];function a(){this.ruler=new r;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1])}a.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},a.prototype.State=n(2166),e.exports=a},2160:function(e,t,n){"use strict";var r=/\r\n?|\n/g,o=/\0/g;e.exports=function(e){var t;t=(t=e.src.replace(r,"\n")).replace(o,"ï¿½"),e.src=t}},2161:function(e,t,n){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},2162:function(e,t,n){"use strict";e.exports=function(e){var t,n,r,o=e.tokens;for(n=0,r=o.length;n<r;n++)"inline"===(t=o[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},2163:function(e,t,n){"use strict";var r=n(965).arrayReplaceAt;function o(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,n,a,i,l,c,s,u,d,f,p,h,g,m,v,y,b,k,C=e.tokens;if(e.md.options.linkify)for(n=0,a=C.length;n<a;n++)if("inline"===C[n].type&&e.md.linkify.pretest(C[n].content))for(g=0,t=(i=C[n].children).length-1;t>=0;t--)if("link_close"!==(c=i[t]).type){if("html_inline"===c.type&&(k=c.content,/^<a[>\s]/i.test(k)&&g>0&&g--,o(c.content)&&g++),!(g>0)&&"text"===c.type&&e.md.linkify.test(c.content)){for(d=c.content,b=e.md.linkify.match(d),s=[],h=c.level,p=0,u=0;u<b.length;u++)m=b[u].url,v=e.md.normalizeLink(m),e.md.validateLink(v)&&(y=b[u].text,y=b[u].schema?"mailto:"!==b[u].schema||/^mailto:/i.test(y)?e.md.normalizeLinkText(y):e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),(f=b[u].index)>p&&((l=new e.Token("text","",0)).content=d.slice(p,f),l.level=h,s.push(l)),(l=new e.Token("link_open","a",1)).attrs=[["href",v]],l.level=h++,l.markup="linkify",l.info="auto",s.push(l),(l=new e.Token("text","",0)).content=y,l.level=h,s.push(l),(l=new e.Token("link_close","a",-1)).level=--h,l.markup="linkify",l.info="auto",s.push(l),p=b[u].lastIndex);p<d.length&&((l=new e.Token("text","",0)).content=d.slice(p),l.level=h,s.push(l)),C[n].children=i=r(i,t,s)}}else for(t--;i[t].level!==c.level&&"link_open"!==i[t].type;)t--}},2164:function(e,t,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,o=/\((c|tm|r|p)\)/i,a=/\((c|tm|r|p)\)/gi,i={c:"Â©",r:"Â®",p:"Â§",tm:"â„¢"};function l(e,t){return i[t.toLowerCase()]}function c(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||r||(n.content=n.content.replace(a,l)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function s(e){var t,n,o=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||o||r.test(n.content)&&(n.content=n.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â€¦").replace(/([?!])â€¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1â€”").replace(/(^|\s)--(?=\s|$)/gm,"$1â€“").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1â€“")),"link_open"===n.type&&"auto"===n.info&&o--,"link_close"===n.type&&"auto"===n.info&&o++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(o.test(e.tokens[t].content)&&c(e.tokens[t].children),r.test(e.tokens[t].content)&&s(e.tokens[t].children))}},2165:function(e,t,n){"use strict";var r=n(965).isWhiteSpace,o=n(965).isPunctChar,a=n(965).isMdAsciiPunct,i=/['"]/,l=/['"]/g;function c(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function s(e,t){var n,i,s,u,d,f,p,h,g,m,v,y,b,k,C,S,E,w,O,T,A;for(O=[],n=0;n<e.length;n++){for(i=e[n],p=e[n].level,E=O.length-1;E>=0&&!(O[E].level<=p);E--);if(O.length=E+1,"text"===i.type){d=0,f=(s=i.content).length;e:for(;d<f&&(l.lastIndex=d,u=l.exec(s));){if(C=S=!0,d=u.index+1,w="'"===u[0],g=32,u.index-1>=0)g=s.charCodeAt(u.index-1);else for(E=n-1;E>=0&&("softbreak"!==e[E].type&&"hardbreak"!==e[E].type);E--)if(e[E].content){g=e[E].content.charCodeAt(e[E].content.length-1);break}if(m=32,d<f)m=s.charCodeAt(d);else for(E=n+1;E<e.length&&("softbreak"!==e[E].type&&"hardbreak"!==e[E].type);E++)if(e[E].content){m=e[E].content.charCodeAt(0);break}if(v=a(g)||o(String.fromCharCode(g)),y=a(m)||o(String.fromCharCode(m)),b=r(g),(k=r(m))?C=!1:y&&(b||v||(C=!1)),b?S=!1:v&&(k||y||(S=!1)),34===m&&'"'===u[0]&&g>=48&&g<=57&&(S=C=!1),C&&S&&(C=v,S=y),C||S){if(S)for(E=O.length-1;E>=0&&(h=O[E],!(O[E].level<p));E--)if(h.single===w&&O[E].level===p){h=O[E],w?(T=t.md.options.quotes[2],A=t.md.options.quotes[3]):(T=t.md.options.quotes[0],A=t.md.options.quotes[1]),i.content=c(i.content,u.index,A),e[h.token].content=c(e[h.token].content,h.pos,T),d+=A.length-1,h.token===n&&(d+=T.length-1),f=(s=i.content).length,O.length=E;continue e}C?O.push({token:n,pos:u.index,single:w,level:p}):S&&w&&(i.content=c(i.content,u.index,"â€™"))}else w&&(i.content=c(i.content,u.index,"â€™"))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&i.test(e.tokens[t].content)&&s(e.tokens[t].children,e)}},2166:function(e,t,n){"use strict";var r=n(1536);function o(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}o.prototype.Token=r,e.exports=o},2167:function(e,t,n){"use strict";var r=n(1535),o=[["table",n(2168),["paragraph","reference"]],["code",n(2169)],["fence",n(2170),["paragraph","reference","blockquote","list"]],["blockquote",n(2171),["paragraph","reference","blockquote","list"]],["hr",n(2172),["paragraph","reference","blockquote","list"]],["list",n(2173),["paragraph","reference","blockquote"]],["reference",n(2174)],["html_block",n(2175),["paragraph","reference","blockquote"]],["heading",n(2177),["paragraph","reference","blockquote"]],["lheading",n(2178)],["paragraph",n(2179)]];function a(){this.ruler=new r;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1],{alt:(o[e][2]||[]).slice()})}a.prototype.tokenize=function(e,t,n){for(var r,o=this.ruler.getRules(""),a=o.length,i=t,l=!1,c=e.md.options.maxNesting;i<n&&(e.line=i=e.skipEmptyLines(i),!(i>=n))&&!(e.sCount[i]<e.blkIndent);){if(e.level>=c){e.line=n;break}for(r=0;r<a&&!o[r](e,i,n,!1);r++);e.tight=!l,e.isEmpty(e.line-1)&&(l=!0),(i=e.line)<n&&e.isEmpty(i)&&(l=!0,i++,e.line=i)}},a.prototype.parse=function(e,t,n,r){var o;e&&(o=new this.State(e,t,n,r),this.tokenize(o,o.line,o.lineMax))},a.prototype.State=n(2180),e.exports=a},2168:function(e,t,n){"use strict";var r=n(965).isSpace;function o(e,t){var n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.substr(n,r-n)}function a(e){var t,n=[],r=0,o=e.length,a=!1,i=0,l="";for(t=e.charCodeAt(r);r<o;)124===t&&(a?(l+=e.substring(i,r-1),i=r):(n.push(l+e.substring(i,r)),l="",i=r+1)),a=92===t,r++,t=e.charCodeAt(r);return n.push(l+e.substring(i)),n}e.exports=function(e,t,n,i){var l,c,s,u,d,f,p,h,g,m,v,y,b,k,C,S,E,w;if(t+2>n)return!1;if(f=t+1,e.sCount[f]<e.blkIndent)return!1;if(e.sCount[f]-e.blkIndent>=4)return!1;if((s=e.bMarks[f]+e.tShift[f])>=e.eMarks[f])return!1;if(124!==(E=e.src.charCodeAt(s++))&&45!==E&&58!==E)return!1;if(s>=e.eMarks[f])return!1;if(124!==(w=e.src.charCodeAt(s++))&&45!==w&&58!==w&&!r(w))return!1;if(45===E&&r(w))return!1;for(;s<e.eMarks[f];){if(124!==(l=e.src.charCodeAt(s))&&45!==l&&58!==l&&!r(l))return!1;s++}for(p=(c=o(e,t+1)).split("|"),m=[],u=0;u<p.length;u++){if(!(v=p[u].trim())){if(0===u||u===p.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?m.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?m.push("left"):m.push("")}if(-1===(c=o(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((p=a(c)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),0===(h=p.length)||h!==m.length)return!1;if(i)return!0;for(k=e.parentType,e.parentType="table",S=e.md.block.ruler.getRules("blockquote"),(g=e.push("table_open","table",1)).map=y=[t,0],(g=e.push("thead_open","thead",1)).map=[t,t+1],(g=e.push("tr_open","tr",1)).map=[t,t+1],u=0;u<p.length;u++)g=e.push("th_open","th",1),m[u]&&(g.attrs=[["style","text-align:"+m[u]]]),(g=e.push("inline","",0)).content=p[u].trim(),g.children=[],g=e.push("th_close","th",-1);for(g=e.push("tr_close","tr",-1),g=e.push("thead_close","thead",-1),f=t+2;f<n&&!(e.sCount[f]<e.blkIndent);f++){for(C=!1,u=0,d=S.length;u<d;u++)if(S[u](e,f,n,!0)){C=!0;break}if(C)break;if(!(c=o(e,f).trim()))break;if(e.sCount[f]-e.blkIndent>=4)break;for((p=a(c)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),f===t+2&&((g=e.push("tbody_open","tbody",1)).map=b=[t+2,0]),(g=e.push("tr_open","tr",1)).map=[f,f+1],u=0;u<h;u++)g=e.push("td_open","td",1),m[u]&&(g.attrs=[["style","text-align:"+m[u]]]),(g=e.push("inline","",0)).content=p[u]?p[u].trim():"",g.children=[],g=e.push("td_close","td",-1);g=e.push("tr_close","tr",-1)}return b&&(g=e.push("tbody_close","tbody",-1),b[1]=f),g=e.push("table_close","table",-1),y[1]=f,e.parentType=k,e.line=f,!0}},2169:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,a;if(e.sCount[t]-e.blkIndent<4)return!1;for(o=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(e.sCount[r]-e.blkIndent>=4))break;o=++r}return e.line=o,(a=e.push("code_block","code",0)).content=e.getLines(t,o,4+e.blkIndent,!1)+"\n",a.map=[t,e.line],!0}},2170:function(e,t,n){"use strict";e.exports=function(e,t,n,r){var o,a,i,l,c,s,u,d=!1,f=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(f+3>p)return!1;if(126!==(o=e.src.charCodeAt(f))&&96!==o)return!1;if(c=f,(a=(f=e.skipChars(f,o))-c)<3)return!1;if(u=e.src.slice(c,f),i=e.src.slice(f,p),96===o&&i.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;for(l=t;!(++l>=n)&&!((f=c=e.bMarks[l]+e.tShift[l])<(p=e.eMarks[l])&&e.sCount[l]<e.blkIndent);)if(e.src.charCodeAt(f)===o&&!(e.sCount[l]-e.blkIndent>=4||(f=e.skipChars(f,o))-c<a||(f=e.skipSpaces(f))<p)){d=!0;break}return a=e.sCount[t],e.line=l+(d?1:0),(s=e.push("fence","code",0)).info=i,s.content=e.getLines(t+1,l,a,!0),s.markup=u,s.map=[t,e.line],!0}},2171:function(e,t,n){"use strict";var r=n(965).isSpace;e.exports=function(e,t,n,o){var a,i,l,c,s,u,d,f,p,h,g,m,v,y,b,k,C,S,E,w,O=e.lineMax,T=e.bMarks[t]+e.tShift[t],A=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(T++))return!1;if(o)return!0;for(c=p=e.sCount[t]+1,32===e.src.charCodeAt(T)?(T++,c++,p++,a=!1,k=!0):9===e.src.charCodeAt(T)?(k=!0,(e.bsCount[t]+p)%4==3?(T++,c++,p++,a=!1):a=!0):k=!1,h=[e.bMarks[t]],e.bMarks[t]=T;T<A&&(i=e.src.charCodeAt(T),r(i));)9===i?p+=4-(p+e.bsCount[t]+(a?1:0))%4:p++,T++;for(g=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(k?1:0),u=T>=A,y=[e.sCount[t]],e.sCount[t]=p-c,b=[e.tShift[t]],e.tShift[t]=T-e.bMarks[t],S=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",f=t+1;f<n&&(w=e.sCount[f]<e.blkIndent,!((T=e.bMarks[f]+e.tShift[f])>=(A=e.eMarks[f])));f++)if(62!==e.src.charCodeAt(T++)||w){if(u)break;for(C=!1,l=0,s=S.length;l<s;l++)if(S[l](e,f,n,!0)){C=!0;break}if(C){e.lineMax=f,0!==e.blkIndent&&(h.push(e.bMarks[f]),g.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),g.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}else{for(c=p=e.sCount[f]+1,32===e.src.charCodeAt(T)?(T++,c++,p++,a=!1,k=!0):9===e.src.charCodeAt(T)?(k=!0,(e.bsCount[f]+p)%4==3?(T++,c++,p++,a=!1):a=!0):k=!1,h.push(e.bMarks[f]),e.bMarks[f]=T;T<A&&(i=e.src.charCodeAt(T),r(i));)9===i?p+=4-(p+e.bsCount[f]+(a?1:0))%4:p++,T++;u=T>=A,g.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(k?1:0),y.push(e.sCount[f]),e.sCount[f]=p-c,b.push(e.tShift[f]),e.tShift[f]=T-e.bMarks[f]}for(m=e.blkIndent,e.blkIndent=0,(E=e.push("blockquote_open","blockquote",1)).markup=">",E.map=d=[t,0],e.md.block.tokenize(e,t,f),(E=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=O,e.parentType=v,d[1]=e.line,l=0;l<b.length;l++)e.bMarks[l+t]=h[l],e.tShift[l+t]=b[l],e.sCount[l+t]=y[l],e.bsCount[l+t]=g[l];return e.blkIndent=m,!0}},2172:function(e,t,n){"use strict";var r=n(965).isSpace;e.exports=function(e,t,n,o){var a,i,l,c,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(a=e.src.charCodeAt(s++))&&45!==a&&95!==a)return!1;for(i=1;s<u;){if((l=e.src.charCodeAt(s++))!==a&&!r(l))return!1;l===a&&i++}return!(i<3)&&(o||(e.line=t+1,(c=e.push("hr","hr",0)).map=[t,e.line],c.markup=Array(i+1).join(String.fromCharCode(a))),!0)}},2173:function(e,t,n){"use strict";var r=n(965).isSpace;function o(e,t){var n,o,a,i;return o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],42!==(n=e.src.charCodeAt(o++))&&45!==n&&43!==n||o<a&&(i=e.src.charCodeAt(o),!r(i))?-1:o}function a(e,t){var n,o=e.bMarks[t]+e.tShift[t],a=o,i=e.eMarks[t];if(a+1>=i)return-1;if((n=e.src.charCodeAt(a++))<48||n>57)return-1;for(;;){if(a>=i)return-1;if(!((n=e.src.charCodeAt(a++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(a-o>=10)return-1}return a<i&&(n=e.src.charCodeAt(a),!r(n))?-1:a}e.exports=function(e,t,n,r){var i,l,c,s,u,d,f,p,h,g,m,v,y,b,k,C,S,E,w,O,T,A,x,j,_,R,M,L,B=!1,I=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[t]-e.listIndent>=4&&e.sCount[t]<e.blkIndent)return!1;if(r&&"paragraph"===e.parentType&&e.sCount[t]>=e.blkIndent&&(B=!0),(x=a(e,t))>=0){if(f=!0,_=e.bMarks[t]+e.tShift[t],y=Number(e.src.slice(_,x-1)),B&&1!==y)return!1}else{if(!((x=o(e,t))>=0))return!1;f=!1}if(B&&e.skipSpaces(x)>=e.eMarks[t])return!1;if(v=e.src.charCodeAt(x-1),r)return!0;for(m=e.tokens.length,f?(L=e.push("ordered_list_open","ol",1),1!==y&&(L.attrs=[["start",y]])):L=e.push("bullet_list_open","ul",1),L.map=g=[t,0],L.markup=String.fromCharCode(v),k=t,j=!1,M=e.md.block.ruler.getRules("list"),E=e.parentType,e.parentType="list";k<n;){for(A=x,b=e.eMarks[k],d=C=e.sCount[k]+x-(e.bMarks[t]+e.tShift[t]);A<b;){if(9===(i=e.src.charCodeAt(A)))C+=4-(C+e.bsCount[k])%4;else{if(32!==i)break;C++}A++}if((u=(l=A)>=b?1:C-d)>4&&(u=1),s=d+u,(L=e.push("list_item_open","li",1)).markup=String.fromCharCode(v),L.map=p=[t,0],f&&(L.info=e.src.slice(_,x-1)),T=e.tight,O=e.tShift[t],w=e.sCount[t],S=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=s,e.tight=!0,e.tShift[t]=l-e.bMarks[t],e.sCount[t]=C,l>=b&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!j||(I=!1),j=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[t]=O,e.sCount[t]=w,e.tight=T,(L=e.push("list_item_close","li",-1)).markup=String.fromCharCode(v),k=t=e.line,p[1]=k,l=e.bMarks[t],k>=n)break;if(e.sCount[k]<e.blkIndent)break;if(e.sCount[t]-e.blkIndent>=4)break;for(R=!1,c=0,h=M.length;c<h;c++)if(M[c](e,k,n,!0)){R=!0;break}if(R)break;if(f){if((x=a(e,k))<0)break;_=e.bMarks[k]+e.tShift[k]}else if((x=o(e,k))<0)break;if(v!==e.src.charCodeAt(x-1))break}return(L=f?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(v),g[1]=k,e.line=k,e.parentType=E,I&&function(e,t){var n,r,o=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===o&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,m),!0}},2174:function(e,t,n){"use strict";var r=n(965).normalizeReference,o=n(965).isSpace;e.exports=function(e,t,n,a){var i,l,c,s,u,d,f,p,h,g,m,v,y,b,k,C,S=0,E=e.bMarks[t]+e.tShift[t],w=e.eMarks[t],O=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(E))return!1;for(;++E<w;)if(93===e.src.charCodeAt(E)&&92!==e.src.charCodeAt(E-1)){if(E+1===w)return!1;if(58!==e.src.charCodeAt(E+1))return!1;break}for(s=e.lineMax,k=e.md.block.ruler.getRules("reference"),g=e.parentType,e.parentType="reference";O<s&&!e.isEmpty(O);O++)if(!(e.sCount[O]-e.blkIndent>3||e.sCount[O]<0)){for(b=!1,d=0,f=k.length;d<f;d++)if(k[d](e,O,s,!0)){b=!0;break}if(b)break}for(w=(y=e.getLines(t,O,e.blkIndent,!1).trim()).length,E=1;E<w;E++){if(91===(i=y.charCodeAt(E)))return!1;if(93===i){h=E;break}(10===i||92===i&&++E<w&&10===y.charCodeAt(E))&&S++}if(h<0||58!==y.charCodeAt(h+1))return!1;for(E=h+2;E<w;E++)if(10===(i=y.charCodeAt(E)))S++;else if(!o(i))break;if(!(m=e.md.helpers.parseLinkDestination(y,E,w)).ok)return!1;if(u=e.md.normalizeLink(m.str),!e.md.validateLink(u))return!1;for(l=E=m.pos,c=S+=m.lines,v=E;E<w;E++)if(10===(i=y.charCodeAt(E)))S++;else if(!o(i))break;for(m=e.md.helpers.parseLinkTitle(y,E,w),E<w&&v!==E&&m.ok?(C=m.str,E=m.pos,S+=m.lines):(C="",E=l,S=c);E<w&&(i=y.charCodeAt(E),o(i));)E++;if(E<w&&10!==y.charCodeAt(E)&&C)for(C="",E=l,S=c;E<w&&(i=y.charCodeAt(E),o(i));)E++;return!(E<w&&10!==y.charCodeAt(E))&&(!!(p=r(y.slice(1,h)))&&(a||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[p]&&(e.env.references[p]={title:C,href:u}),e.parentType=g,e.line=t+S+1),!0))}},2175:function(e,t,n){"use strict";var r=n(2176),o=n(1731).HTML_OPEN_CLOSE_TAG_RE,a=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(o.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,r){var o,i,l,c,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(s))return!1;for(c=e.src.slice(s,u),o=0;o<a.length&&!a[o][0].test(c);o++);if(o===a.length)return!1;if(r)return a[o][2];if(i=t+1,!a[o][1].test(c))for(;i<n&&!(e.sCount[i]<e.blkIndent);i++)if(s=e.bMarks[i]+e.tShift[i],u=e.eMarks[i],c=e.src.slice(s,u),a[o][1].test(c)){0!==c.length&&i++;break}return e.line=i,(l=e.push("html_block","",0)).map=[t,i],l.content=e.getLines(t,i,e.blkIndent,!0),!0}},2176:function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},2177:function(e,t,n){"use strict";var r=n(965).isSpace;e.exports=function(e,t,n,o){var a,i,l,c,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(a=e.src.charCodeAt(s))||s>=u)return!1;for(i=1,a=e.src.charCodeAt(++s);35===a&&s<u&&i<=6;)i++,a=e.src.charCodeAt(++s);return!(i>6||s<u&&!r(a))&&(o||(u=e.skipSpacesBack(u,s),(l=e.skipCharsBack(u,35,s))>s&&r(e.src.charCodeAt(l-1))&&(u=l),e.line=t+1,(c=e.push("heading_open","h"+String(i),1)).markup="########".slice(0,i),c.map=[t,e.line],(c=e.push("inline","",0)).content=e.src.slice(s,u).trim(),c.map=[t,e.line],c.children=[],(c=e.push("heading_close","h"+String(i),-1)).markup="########".slice(0,i)),!0)}},2178:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,a,i,l,c,s,u,d,f,p=t+1,h=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(f=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(c=e.bMarks[p]+e.tShift[p])<(s=e.eMarks[p])&&(45===(d=e.src.charCodeAt(c))||61===d)&&(c=e.skipChars(c,d),(c=e.skipSpaces(c))>=s)){u=61===d?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,a=0,i=h.length;a<i;a++)if(h[a](e,p,n,!0)){o=!0;break}if(o)break}}return!!u&&(r=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(l=e.push("heading_open","h"+String(u),1)).markup=String.fromCharCode(d),l.map=[t,e.line],(l=e.push("inline","",0)).content=r,l.map=[t,e.line-1],l.children=[],(l=e.push("heading_close","h"+String(u),-1)).markup=String.fromCharCode(d),e.parentType=f,!0)}},2179:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,a,i,l,c=t+1,s=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;for(l=e.parentType,e.parentType="paragraph";c<u&&!e.isEmpty(c);c++)if(!(e.sCount[c]-e.blkIndent>3||e.sCount[c]<0)){for(r=!1,o=0,a=s.length;o<a;o++)if(s[o](e,c,u,!0)){r=!0;break}if(r)break}return n=e.getLines(t,c,e.blkIndent,!1).trim(),e.line=c,(i=e.push("paragraph_open","p",1)).map=[t,e.line],(i=e.push("inline","",0)).content=n,i.map=[t,e.line],i.children=[],i=e.push("paragraph_close","p",-1),e.parentType=l,!0}},2180:function(e,t,n){"use strict";var r=n(1536),o=n(965).isSpace;function a(e,t,n,r){var a,i,l,c,s,u,d,f;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",f=!1,l=c=u=d=0,s=(i=this.src).length;c<s;c++){if(a=i.charCodeAt(c),!f){if(o(a)){u++,9===a?d+=4-d%4:d++;continue}f=!0}10!==a&&c!==s-1||(10!==a&&c++,this.bMarks.push(l),this.eMarks.push(c),this.tShift.push(u),this.sCount.push(d),this.bsCount.push(0),f=!1,u=0,d=0,l=c+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}a.prototype.push=function(e,t,n){var o=new r(e,t,n);return o.block=!0,n<0&&this.level--,o.level=this.level,n>0&&this.level++,this.tokens.push(o),o},a.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},a.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},a.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),o(t));e++);return e},a.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!o(this.src.charCodeAt(--e)))return e+1;return e},a.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},a.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},a.prototype.getLines=function(e,t,n,r){var a,i,l,c,s,u,d,f=e;if(e>=t)return"";for(u=new Array(t-e),a=0;f<t;f++,a++){for(i=0,d=c=this.bMarks[f],s=f+1<t||r?this.eMarks[f]+1:this.eMarks[f];c<s&&i<n;){if(l=this.src.charCodeAt(c),o(l))9===l?i+=4-(i+this.bsCount[f])%4:i++;else{if(!(c-d<this.tShift[f]))break;i++}c++}u[a]=i>n?new Array(i-n+1).join(" ")+this.src.slice(c,s):this.src.slice(c,s)}return u.join("")},a.prototype.Token=r,e.exports=a},2181:function(e,t,n){"use strict";var r=n(1535),o=[["text",n(2182)],["newline",n(2183)],["escape",n(2184)],["backticks",n(2185)],["strikethrough",n(1732).tokenize],["emphasis",n(1733).tokenize],["link",n(2186)],["image",n(2187)],["autolink",n(2188)],["html_inline",n(2189)],["entity",n(2190)]],a=[["balance_pairs",n(2191)],["strikethrough",n(1732).postProcess],["emphasis",n(1733).postProcess],["text_collapse",n(2192)]];function i(){var e;for(this.ruler=new r,e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1]);for(this.ruler2=new r,e=0;e<a.length;e++)this.ruler2.push(a[e][0],a[e][1])}i.prototype.skipToken=function(e){var t,n,r=e.pos,o=this.ruler.getRules(""),a=o.length,i=e.md.options.maxNesting,l=e.cache;if(void 0===l[r]){if(e.level<i)for(n=0;n<a&&(e.level++,t=o[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,l[r]=e.pos}else e.pos=l[r]},i.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),o=r.length,a=e.posMax,i=e.md.options.maxNesting;e.pos<a;){if(e.level<i)for(n=0;n<o&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=a)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},i.prototype.parse=function(e,t,n,r){var o,a,i,l=new this.State(e,t,n,r);for(this.tokenize(l),i=(a=this.ruler2.getRules("")).length,o=0;o<i;o++)a[o](l)},i.prototype.State=n(2193),e.exports=i},2182:function(e,t,n){"use strict";function r(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!r(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},2183:function(e,t,n){"use strict";var r=n(965).isSpace;e.exports=function(e,t){var n,o,a,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;if(n=e.pending.length-1,o=e.posMax,!t)if(n>=0&&32===e.pending.charCodeAt(n))if(n>=1&&32===e.pending.charCodeAt(n-1)){for(a=n-1;a>=1&&32===e.pending.charCodeAt(a-1);)a--;e.pending=e.pending.slice(0,a),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(i++;i<o&&r(e.src.charCodeAt(i));)i++;return e.pos=i,!0}},2184:function(e,t,n){"use strict";for(var r=n(965).isSpace,o=[],a=0;a<256;a++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){o[e.charCodeAt(0)]=1})),e.exports=function(e,t){var n,a=e.pos,i=e.posMax;if(92!==e.src.charCodeAt(a))return!1;if(++a<i){if((n=e.src.charCodeAt(a))<256&&0!==o[n])return t||(e.pending+=e.src[a]),e.pos+=2,!0;if(10===n){for(t||e.push("hardbreak","br",0),a++;a<i&&(n=e.src.charCodeAt(a),r(n));)a++;return e.pos=a,!0}}return t||(e.pending+="\\"),e.pos++,!0}},2185:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,a,i,l,c,s,u=e.pos;if(96!==e.src.charCodeAt(u))return!1;for(n=u,u++,r=e.posMax;u<r&&96===e.src.charCodeAt(u);)u++;if(c=(o=e.src.slice(n,u)).length,e.backticksScanned&&(e.backticks[c]||0)<=n)return t||(e.pending+=o),e.pos+=c,!0;for(i=l=u;-1!==(i=e.src.indexOf("`",l));){for(l=i+1;l<r&&96===e.src.charCodeAt(l);)l++;if((s=l-i)===c)return t||((a=e.push("code_inline","code",0)).markup=o,a.content=e.src.slice(u,i).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=l,!0;e.backticks[s]=i}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=c,!0}},2186:function(e,t,n){"use strict";var r=n(965).normalizeReference,o=n(965).isSpace;e.exports=function(e,t){var n,a,i,l,c,s,u,d,f="",p="",h=e.pos,g=e.posMax,m=e.pos,v=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(c=e.pos+1,(l=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((s=l+1)<g&&40===e.src.charCodeAt(s)){for(v=!1,s++;s<g&&(a=e.src.charCodeAt(s),o(a)||10===a);s++);if(s>=g)return!1;if(m=s,(u=e.md.helpers.parseLinkDestination(e.src,s,e.posMax)).ok){for(f=e.md.normalizeLink(u.str),e.md.validateLink(f)?s=u.pos:f="",m=s;s<g&&(a=e.src.charCodeAt(s),o(a)||10===a);s++);if(u=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<g&&m!==s&&u.ok)for(p=u.str,s=u.pos;s<g&&(a=e.src.charCodeAt(s),o(a)||10===a);s++);}(s>=g||41!==e.src.charCodeAt(s))&&(v=!0),s++}if(v){if(void 0===e.env.references)return!1;if(s<g&&91===e.src.charCodeAt(s)?(m=s+1,(s=e.md.helpers.parseLinkLabel(e,s))>=0?i=e.src.slice(m,s++):s=l+1):s=l+1,i||(i=e.src.slice(c,l)),!(d=e.env.references[r(i)]))return e.pos=h,!1;f=d.href,p=d.title}return t||(e.pos=c,e.posMax=l,e.push("link_open","a",1).attrs=n=[["href",f]],p&&n.push(["title",p]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=s,e.posMax=g,!0}},2187:function(e,t,n){"use strict";var r=n(965).normalizeReference,o=n(965).isSpace;e.exports=function(e,t){var n,a,i,l,c,s,u,d,f,p,h,g,m,v="",y=e.pos,b=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(s=e.pos+2,(c=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((u=c+1)<b&&40===e.src.charCodeAt(u)){for(u++;u<b&&(a=e.src.charCodeAt(u),o(a)||10===a);u++);if(u>=b)return!1;for(m=u,(f=e.md.helpers.parseLinkDestination(e.src,u,e.posMax)).ok&&(v=e.md.normalizeLink(f.str),e.md.validateLink(v)?u=f.pos:v=""),m=u;u<b&&(a=e.src.charCodeAt(u),o(a)||10===a);u++);if(f=e.md.helpers.parseLinkTitle(e.src,u,e.posMax),u<b&&m!==u&&f.ok)for(p=f.str,u=f.pos;u<b&&(a=e.src.charCodeAt(u),o(a)||10===a);u++);else p="";if(u>=b||41!==e.src.charCodeAt(u))return e.pos=y,!1;u++}else{if(void 0===e.env.references)return!1;if(u<b&&91===e.src.charCodeAt(u)?(m=u+1,(u=e.md.helpers.parseLinkLabel(e,u))>=0?l=e.src.slice(m,u++):u=c+1):u=c+1,l||(l=e.src.slice(s,c)),!(d=e.env.references[r(l)]))return e.pos=y,!1;v=d.href,p=d.title}return t||(i=e.src.slice(s,c),e.md.inline.parse(i,e.md,e.env,g=[]),(h=e.push("image","img",0)).attrs=n=[["src",v],["alt",""]],h.children=g,h.content=i,p&&n.push(["title",p])),e.pos=u,e.posMax=b,!0}},2188:function(e,t,n){"use strict";var r=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,o=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;e.exports=function(e,t){var n,a,i,l,c,s,u=e.pos;if(60!==e.src.charCodeAt(u))return!1;for(c=e.pos,s=e.posMax;;){if(++u>=s)return!1;if(60===(l=e.src.charCodeAt(u)))return!1;if(62===l)break}return n=e.src.slice(c+1,u),o.test(n)?(a=e.md.normalizeLink(n),!!e.md.validateLink(a)&&(t||((i=e.push("link_open","a",1)).attrs=[["href",a]],i.markup="autolink",i.info="auto",(i=e.push("text","",0)).content=e.md.normalizeLinkText(n),(i=e.push("link_close","a",-1)).markup="autolink",i.info="auto"),e.pos+=n.length+2,!0)):!!r.test(n)&&(a=e.md.normalizeLink("mailto:"+n),!!e.md.validateLink(a)&&(t||((i=e.push("link_open","a",1)).attrs=[["href",a]],i.markup="autolink",i.info="auto",(i=e.push("text","",0)).content=e.md.normalizeLinkText(n),(i=e.push("link_close","a",-1)).markup="autolink",i.info="auto"),e.pos+=n.length+2,!0))}},2189:function(e,t,n){"use strict";var r=n(1731).HTML_TAG_RE;e.exports=function(e,t){var n,o,a,i=e.pos;return!!e.md.options.html&&(a=e.posMax,!(60!==e.src.charCodeAt(i)||i+2>=a)&&(!(33!==(n=e.src.charCodeAt(i+1))&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))&&(!!(o=e.src.slice(i).match(r))&&(t||(e.push("html_inline","",0).content=e.src.slice(i,i+o[0].length)),e.pos+=o[0].length,!0))))}},2190:function(e,t,n){"use strict";var r=n(1730),o=n(965).has,a=n(965).isValidEntityCode,i=n(965).fromCodePoint,l=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,c=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var n,s,u=e.pos,d=e.posMax;if(38!==e.src.charCodeAt(u))return!1;if(u+1<d)if(35===e.src.charCodeAt(u+1)){if(s=e.src.slice(u).match(l))return t||(n="x"===s[1][0].toLowerCase()?parseInt(s[1].slice(1),16):parseInt(s[1],10),e.pending+=a(n)?i(n):i(65533)),e.pos+=s[0].length,!0}else if((s=e.src.slice(u).match(c))&&o(r,s[1]))return t||(e.pending+=r[s[1]]),e.pos+=s[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},2191:function(e,t,n){"use strict";function r(e,t){var n,r,o,a,i,l,c,s,u={},d=t.length;if(d){var f=0,p=-2,h=[];for(n=0;n<d;n++)if(o=t[n],h.push(0),t[f].marker===o.marker&&p===o.token-1||(f=n),p=o.token,o.length=o.length||0,o.close){for(u.hasOwnProperty(o.marker)||(u[o.marker]=[-1,-1,-1,-1,-1,-1]),i=u[o.marker][(o.open?3:0)+o.length%3],l=r=f-h[f]-1;r>i;r-=h[r]+1)if((a=t[r]).marker===o.marker&&a.open&&a.end<0&&(c=!1,(a.close||o.open)&&(a.length+o.length)%3==0&&(a.length%3==0&&o.length%3==0||(c=!0)),!c)){s=r>0&&!t[r-1].open?h[r-1]+1:0,h[n]=n-r+s,h[r]=s,o.open=!1,a.end=n,a.close=!1,l=-1,p=-2;break}-1!==l&&(u[o.marker][(o.open?3:0)+(o.length||0)%3]=l)}}}e.exports=function(e){var t,n=e.tokens_meta,o=e.tokens_meta.length;for(r(0,e.delimiters),t=0;t<o;t++)n[t]&&n[t].delimiters&&r(0,n[t].delimiters)}},2192:function(e,t,n){"use strict";e.exports=function(e){var t,n,r=0,o=e.tokens,a=e.tokens.length;for(t=n=0;t<a;t++)o[t].nesting<0&&r--,o[t].level=r,o[t].nesting>0&&r++,"text"===o[t].type&&t+1<a&&"text"===o[t+1].type?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}},2193:function(e,t,n){"use strict";var r=n(1536),o=n(965).isWhiteSpace,a=n(965).isPunctChar,i=n(965).isMdAsciiPunct;function l(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}l.prototype.pushPending=function(){var e=new r("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},l.prototype.push=function(e,t,n){this.pending&&this.pushPending();var o=new r(e,t,n),a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),o.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(o),this.tokens_meta.push(a),o},l.prototype.scanDelims=function(e,t){var n,r,l,c,s,u,d,f,p,h=e,g=!0,m=!0,v=this.posMax,y=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;h<v&&this.src.charCodeAt(h)===y;)h++;return l=h-e,r=h<v?this.src.charCodeAt(h):32,d=i(n)||a(String.fromCharCode(n)),p=i(r)||a(String.fromCharCode(r)),u=o(n),(f=o(r))?g=!1:p&&(u||d||(g=!1)),u?m=!1:d&&(f||p||(m=!1)),t?(c=g,s=m):(c=g&&(!m||d),s=m&&(!g||p)),{can_open:c,can_close:s,length:l}},l.prototype.Token=r,e.exports=l},2194:function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function o(e){return Object.prototype.toString.call(e)}function a(e){return"[object Function]"===o(e)}function i(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var l={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},s="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|Ñ€Ñ„".split("|");function u(e){var t=e.re=n(2195)(e.__opts__),r=e.__tlds__.slice();function l(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(l(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(l(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(l(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(l(t.tpl_host_fuzzy_test),"i");var c=[];function s(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===o(n))return!function(e){return"[object RegExp]"===o(e)}(n.validate)?a(n.validate)?r.validate=n.validate:s(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(a(n.normalize)?r.normalize=n.normalize:n.normalize?s(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===o(e)}(n)?s(t,n):c.push(t)}})),c.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(i).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><ï½œ]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><ï½œ]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var n=e.__index__,r=e.__last_index__,o=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=o,this.text=o,this.url=o}function f(e,t){var n=new d(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function p(e,t){if(!(this instanceof p))return new p(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||l.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},l,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},c,e),this.__compiled__={},this.__tlds__=s,this.__tlds_replaced__=!1,this.re={},u(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},p.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,o,a,i,l,c;if(this.re.schema_test.test(e))for((l=this.re.schema_search).lastIndex=0;null!==(t=l.exec(e));)if(o=this.testSchemaAt(e,t[2],l.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(a=n.index+n[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(a=r.index+r[1].length,i=r.index+r[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=i)),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},p.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(f(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(f(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},2195:function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(1139).source,t.src_Cc=n(1140).source,t.src_Z=n(1141).source,t.src_P=n(1089).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><ï½œ]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><ï½œ]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><ï½œ]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+").|;(?!"+t.src_ZCc+").|\\!+(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><ï½œ]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½œ]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½œ])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½œ]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½œ])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},2196:function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"â€œâ€â€˜â€™",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},2197:function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"â€œâ€â€˜â€™",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},2198:function(e,t,n){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"â€œâ€â€˜â€™",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},892:function(e,t,n){"use strict";n.r(t);var r=n(33),o=n.n(r),a=n(22),i=n.n(a),l=n(28),c=n.n(l),s=n(105),u=n.n(s),d=n(25),f=n.n(d),p=n(29),h=n.n(p),g=n(18),m=n.n(g),v=n(3),y=n.n(v),b=n(0),k=n.n(b),C=n(49),S=n.n(C),E=n(553),w=n.n(E),O=n(23),T=n(940),A=n(12),x=n.n(A),j=n(51),_=n(1516),R=n.n(_),M=n(73),L=n.n(M),B=n(41),I=n.n(B),N=n(35),D=n(289),P=n(192),z=n(458),q=n(303),K=n(30),U=n.n(K),F=n(162),V=n.n(F),H=n(465),G=n.n(H),W=n(1005),Z=n(1718);var $=function(e,t){var n,r=(n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null,o=r.r*t+255*(1-t),a=r.g*t+255*(1-t),i=r.b*t+255*(1-t);return"rgb(".concat(o,", ").concat(a,", ").concat(i,")")},Y=n(9),J=function(e){var t=e.children,n=e.firstLine;if(0===(null==t?void 0:t.length))return null;var r=n?{display:"flex",alignItems:"center"}:function(e){return{display:"flex",alignItems:"center",border:"1px solid ".concat(e.colors.GBK09A),borderRadius:"4px","&+&":{marginLeft:"10px"}}};return Object(Y.g)("span",{css:r},t)},X=["label","text","icon","toolType","onClick","commandName","shouldActive","isMenuToggler","childItems","shouldDisabled"];var Q={FIRST_LINE:[W.a.CONTENT_OPERATION,W.a.TEXT_STYLE,W.a.LIST,W.a.BLOCK,W.a.STRUCTURE_GENERATION,W.a.PROFESSIONAL_MEDIA],SECOND_LINE:[W.a.BASIC_MEDIA,W.a.BUSINESS_MEDIA]},ee={name:"cfvfo2",styles:"overflow-x:scroll;overflow-y:hidden;&::-webkit-scrollbar{display:none;}scrollbar-width:none;display:flex;justify-content:center;"},te=function(e){var t=e.lineInfo,n=e.firstLine,r=e.separator,o=e.toolbarInfo,a=e.onCommand,i=e.disableMap,l=e.currentStyle,c=e.currentBlockType,s=e.editorState;return Object(Y.g)("div",{css:ee},t.map((function(e,t){var u=o[e];return 0===u.length?null:Object(Y.g)(k.a.Fragment,null,Object(Y.g)(J,{firstLine:n,key:e},t>0&&u.length>0&&r,u.filter((function(e){var t=e.shouldShow;return(void 0===t?function(){return!0}:t)({editorState:s})})).map((function(e,t,r){var o=function e(t,n){var r,o=n.currentBlockType,a=n.currentStyle,i=n.onCommand,l=n.disableMap,c=n.firstLine,s=n.editorState,u=t.label,d=t.text,f=t.icon,p=t.toolType,h=t.onClick,g=t.commandName,m=t.shouldActive,v=t.isMenuToggler,y=t.childItems,b=t.shouldDisabled,k=U()(t,X),C=null==m?void 0:m({currentStyle:a,currentBlockType:o}),S=u,E=f,w=!1,O=d,T=y;if(v&&T.length>=1){var A=t.childItems.find((function(e){var t=e.shouldActive;return null==t?void 0:t({currentStyle:a,currentBlockType:o})}));A?(S=A.label,O=A.text,E=A.icon,w=!1,C=!0):w=!0,T=t.childItems.map((function(t){return e(t,{currentBlockType:o,currentStyle:a,firstLine:c,disableMap:l,onCommand:i,editorState:s})}))}return V()(Object.assign(Object.assign({key:S},k),{},{onClick:function(e){null==h||h(e),g&&i(g)},firstLine:c,isActive:C,disabled:null!==(r=null==b?void 0:b({editorState:s}))&&void 0!==r?r:l[p],label:S,text:O,showTogglerIcon:w,isMenuToggler:v,childItems:T,icon:E}),(function(e){return!G()(e)}))}(e,{onCommand:a,disableMap:i,currentStyle:l,currentBlockType:c,firstLine:n,editorState:s}),u=o.Component,d=o.label,f=null;return f=u?Object(Y.g)(u,S()({key:d,toolbarButton:Z.a},o)):Object(Y.g)(Z.a,S()({key:d},o)),Object(Y.g)(k.a.Fragment,null,f,t<r.length-1&&!n&&Object(Y.g)("span",{css:function(e){return{background:e.colors.GBK09A,height:"36px",width:"1px"}}}))}))))})))},ne={name:"1b08fi0",styles:"height:12px;"},re=function(e){var t=e.plugins,n=(e.currentStyle,e.currentBlockType),r=e.style,o=e.className,a=e.editorState,i=function(e,t){var n={inlineStyle:!1,blockType:!1,entity:!1,clearFormat:!1};return"atomic"===t&&(n.inlineStyle=!0,n.blockType=!0,n.entity=!0,n.clearFormat=!0),"code-block"===t&&(n.inlineStyle=!0,n.entity=!0),n}(0,n),l=Object(W.b)(t);return Object(Y.g)(j.b,{block:"Toolbar"},Object(Y.g)("div",{className:x()("Editable-toolbar",o),onMouseDown:function(e){return e.preventDefault()},css:function(e){return{"&.Editable-toolbar":{padding:"10px 20px",background:"linear-gradient(180deg, ".concat($(e.colors.GBK02B,.02),", ").concat(e.colors.GBK99A," 30%, ").concat(e.colors.GBK99A,")"),border:0,paddingBottom:0}}},style:r},Object(Y.g)(te,S()({editorState:a,lineInfo:Q.FIRST_LINE,toolbarInfo:l,disableMap:i,separator:Object(Y.g)("span",{css:function(e){return{background:e.colors.GBK09A,height:"20px",margin:"0 10px",width:"1px"}}}),firstLine:!0},e)),Object(Y.g)("div",{css:ne}),Object(Y.g)(te,S()({editorState:a,lineInfo:Q.SECOND_LINE,toolbarInfo:l,disableMap:i,firstLine:!1},e)),Object(Y.g)("hr",{css:function(e){return{border:"none",width:"100%",background:e.colors.GBK09A,height:"1px",margin:"10px 0 0 0"}}})))},oe=n(558),ae=n(377),ie=n.n(ae),le=n(452),ce=n.n(le),se=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)},ue=["enabled","className","children"];function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var fe=function(e){var t=e.tagName.toLowerCase();return"blockquote"===t&&e.nextSibling&&"blockquote"===e.nextSibling.tagName.toLowerCase()?0:("pre"===t&&(e=e.parentNode),"li"!==t||e.nextSibling||(e=e.parentNode),parseFloat(getComputedStyle(e).marginBottom))},pe=function(e){f()(n,e);var t=de(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={cursorPosition:null},e.nested=0,e.currentBlock=null,e.handleEnter=function(){},e.handleLeave=function(){e.currentBlock=null,e.setState({cursorPosition:null})},e.handleMove=ie()((function(t){var n=e.getInsertCursorBlock(t);if(n!==e.currentBlock)if(e.currentBlock=n,n){var r=e.root.getBoundingClientRect(),o=e.root.querySelector(".public-DraftEditor-content").getBoundingClientRect(),a=n.getBoundingClientRect(),i=fe(n);e.setState({cursorPosition:{left:o.left-r.left,top:a.bottom+i/2-r.top,width:o.width}})}else e.setState({cursorPosition:null})}),100),e.handleDragOver=function(t){t.preventDefault(),e.handleMove({target:t.target,pageX:t.pageX,pageY:t.pageY})},e.handleDragEnter=function(t){t.preventDefault(),e.nested++,1===e.nested&&e.handleEnter()},e.handleDragLeave=function(){e.nested--,0===e.nested&&(e.handleLeave(),e.handleMove.cancel())},e.handleDrop=function(t){if(t.preventDefault(),e.handleMove.cancel(),e.nested=0,e.currentBlock=null,e.setState({cursorPosition:null}),e.props.enabled){var n=se(t),r=e.getInsertCursorBlock({target:t.target,pageX:t.pageX,pageY:t.pageY}),o=r&&r.dataset.offsetKey.split("-")[0];e.props.onDrop&&e.props.onDrop(n,o)}},e}return c()(n,[{key:"getClosestBlock",value:function(e){for(var t,n=this.root.querySelector(".public-DraftEditor-content").getBoundingClientRect(),r=ce()(e.pageX-window.pageXOffset,Math.ceil(n.left),Math.floor(n.right)),o=ce()(e.pageY-window.pageYOffset,Math.ceil(n.top),Math.floor(n.bottom)),a=0,i=[0,10,20];a<i.length;a++){var l=i[a],c=(t=document.elementFromPoint(r,o-l))?t.closest('[data-block="true"]'):null;if(c)return c}return null}},{key:"getInsertCursorBlock",value:function(e){var t=this.getClosestBlock(e);return t&&"pre"===t.tagName.toLowerCase()?t.parentNode.lastChild:t}},{key:"render",value:function(){var e=this,t=this.props,n=t.enabled,r=t.className,o=t.children,a=U()(t,ue),i=this.state.cursorPosition;return Object(Y.g)("div",S()({},a,{className:x()("Dropzone",r),onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,ref:function(t){e.root=t}}),o,n&&i&&Object(Y.g)("div",{className:"Dropzone-cursor",style:i}))}}]),n}(b.Component),he=n(2130);n(2133);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}k.a.Component;var me=n(1039),ve=n(290),ye=n.n(ve),be=n(1308),ke=n(1358),Ce=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))};function Se(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ee,we,Oe,Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Ce.apply(void 0,Se(o.a,e));return t.__isMiddleware=!0,t};function Ae(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var xe=function(e){var t=e.outputBlockType;return function(e){return function(){for(var n,r,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var l=a[0];function c(e,t){return e?Object(ke.a)(Ee||(Ee=ye()(["<",' data-pid="','">'])),t,e):Object(ke.a)(we||(we=ye()(["<",">"])),t)}function s(e){return e?'<p data-pid="'.concat(e,'"><br></p>'):"<p><br></p>"}var u={unstyled:{start:c(null==l||null===(n=l.data)||void 0===n?void 0:n.pid,t),end:Object(ke.a)(Oe||(Oe=ye()(["</",">"])),t),empty:s(null==l||null===(r=l.data)||void 0===r?void 0:r.pid)},atomic:{start:"",end:""}},d=u[l.type];return d||e.apply(void 0,a)}}},je=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{return t(n)}catch(a){var o=Object(T.convertToRaw)(n);if(r<5)return e(t,Object(T.convertFromRaw)(o),r+1);try{return t(Object(T.convertFromRaw)(o))}catch(e){throw e.message=e.message+" convert from raw failed",e.payload=o,e}}};function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"p",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e.hasText())return"";var r=function(e){return Object(be.convertToHTML)({styleToHTML:Te(n.map((function(e){return e.styleToHTML})).filter(Boolean)),blockToHTML:Te(Ae(o.a,n).map((function(e){return e.blockToHTML})).concat([xe({contentState:e,outputBlockType:t})]).filter(Boolean)),entityToHTML:Te(n.map((function(e){return e.entityToHTML})).filter(Boolean).concat([function(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return r}}]))})(e).replace(/<\/blockquote><blockquote>|<\/pre><pre( lang="[^"]*")?>/g,"<br>").replace(/\n/g,"<br>")};return je(r,e)}function Re(e){return"handled"===e||!0===e}var Me=n(944),Le=n.n(Me),Be=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],Ie=function(e){return Be.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};var Ne=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){e.findEntityRanges((function(e){var n=e.getEntity();return null!==n&&t.includes(r.getEntity(n).getType())}),n)}},De=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r=Ne.apply(void 0,t),o=e.getBlockMap(),a=0;o.forEach((function(t){r(t,(function(r){var o=t.getEntityAt(r),i=e.getEntity(o).getData();n(o,i,a),a++}),e)}))}},Pe=Ne;function ze(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var qe="https://pic2.zhimg.com/v2-6932c031b9e09f13072c09335abdf3dc.png",Ke=function(e){return/^https?:/.test(e.getAttribute("src"))},Ue=function(e){return 1===e.nodeType},Fe=function(e){return e&&"unstyled"===e.getType()&&""===e.getText()},Ve=function(e){if(!Ue(e))return!1;var t="block"===e.getAttribute("data-draft-node"),n="IMG"===e.tagName&&Ke(e),r=e.classList&&(e.classList.contains("video-link")||e.classList.contains("video-box")||e.classList.contains("unprocessable_video")),o="HR"===e.tagName,a="TABLE"===e.tagName;return t||n||r||o||a},He=function(e){var t=document.createElement("img");return t.src=e,t},Ge=function(e,t,n){e=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;for(var r=0,o=Array.from(n.childNodes);r<o.length;r++){var a=o[r];if("BR"===a.nodeName&&a.previousSibling&&"BR"!==a.previousSibling.nodeName&&a.nextSibling&&"BR"===a.nextSibling.nodeName){for(var i=t.createElement("p"),l=a.previousSibling;l&&!Ie(l)&&("BR"!==l.nodeName||l.previousSibling&&"BR"!==l.previousSibling.nodeName&&!Ie(l.previousSibling));){var c=i.childNodes;c.length>0?i.insertBefore(l,c[0]):i.appendChild(l),l=a.previousSibling}i.childNodes.length>0&&(n.insertBefore(i,a),a.nextSibling.parentNode.removeChild(a.nextSibling),a.parentNode.removeChild(a))}}return n.innerHTML}(e);var r=document.createElement("div");t||(e=e.replace(/\n/g,"<br>")),t&&(e=e.replace(/<br>\n/g,"<br>")),r.innerHTML=e,t&&(r.innerHTML=function(e){for(var t=0,n=Array.from(e.querySelectorAll("a"));t<n.length;t++){var r=n[t];r.getAttribute("data-href")&&(r.href=r.getAttribute("data-href"))}for(var a=0,i=Array.from(e.querySelectorAll("mpvideosnap"));a<i.length;a++){var l=i[a],c='<a href="'.concat(l.getAttribute("data-url"),'">').concat(l.getAttribute("data-nickname"),"</a>");l.innerHTML=c}for(var s=0,u=Array.from(e.querySelectorAll("mpprofile"));s<u.length;s++){var d=u[s],f="<p>".concat(d.getAttribute("data-nickname"),"</p>");d.innerHTML=f}for(var p=0,h=Array.from(e.querySelectorAll(".syl-plugin-formula"));p<h.length;p++){var g=h[p],m=JSON.parse(g.getAttribute("data-content"));g.appendChild(He(m.url))}for(var v=0,y=Array.from(e.querySelectorAll(".MathJax"));v<y.length;v++){var b=y[v],k=document.createElement("div");k.innerHTML=b.innerHTML,b.appendChild(k)}for(var C=0,S=Array.from(e.querySelectorAll(".audio-box"));C<S.length;C++){var E=S[C];"audio"===E.getAttribute("data-bjh-box")&&E.parentNode.replaceChild(He("https://pic1.zhimg.com/v2-c1724f5228b56842c247e19c6cff18ca.png"),E)}for(var w=0,O=Array.from(e.querySelectorAll(".syl-plugin-video"));w<O.length;w++){var T=O[w];T.parentNode.replaceChild(He(qe),T)}for(var A=0,x=[].concat(ze(o.a,Array.from(e.querySelectorAll(".tt-vote-card"))),ze(o.a,Array.from(e.querySelectorAll(".vote_iframe"))),ze(o.a,Array.from(e.querySelectorAll(".edui-faked-vote"))));A<x.length;A++){var j=x[A];j.parentNode.replaceChild(He("https://pic1.zhimg.com/v2-58f02873e66da8d3bd58d8c1413c918c.png"),j)}for(var _=0,R=Array.from(e.querySelectorAll(".novel-container"));_<R.length;_++){var M=R[_];M.parentNode.replaceChild(He("https://pic2.zhimg.com/v2-b61ca3e3e3d869ce0289c5de8c8a8325.png"),M)}for(var L=0,B=Array.from(e.querySelectorAll(".lake-content"));L<B.length;L++){for(var I=B[L],N=document.createDocumentFragment(),D=0,P=Array.from(I.children);D<P.length;D++){var z=P[D];N.appendChild(z)}I.parentNode.replaceChild(N,I)}for(var q=0,K=Array.from(e.querySelectorAll(".ne-quote"));q<K.length;q++){var U=K[q],F=document.createElement("blockquote");F.innerHTML=U.innerHTML,U.parentNode.replaceChild(F,U)}return e}(r).innerHTML);for(var a=0,i=Array.from(r.querySelectorAll("p"));a<i.length;a++){var l=i[a];""!==l.textContent||l.querySelector("img")||(l.innerHTML="")}for(var c=0,s=Array.from(r.querySelectorAll("meta, style, title, noscript"));c<s.length;c++){var u=s[c];u.parentNode.removeChild(u)}if(n)for(var d=0,f=Array.from(r.querySelectorAll("img:not([eeimg]):not([data-eeimg])"));d<f.length;d++){var p=f[d];p.parentNode.removeChild(p)}for(var h=0,g=Array.from(r.querySelectorAll(".highlight"));h<g.length;h++){var m=g[h],v=m.querySelector("pre > pre")||m.querySelector("pre");v&&(v.className&&v.setAttribute("lang",v.className.replace(/^language-/,"")),v.innerHTML=v.innerHTML.trim(),m.parentNode.replaceChild(v,m))}for(var y=0,b=Array.from(r.querySelectorAll("pre > code"));y<b.length;y++){var k=b[y],C=k.parentNode;k.className&&C.setAttribute("lang",k.className),C&&(C.innerHTML=k.innerHTML.trim())}for(var S=0,E=Array.from(r.querySelectorAll("img"));S<E.length;S++){var w=E[S];Ke(w)||w.getAttribute("data-diagnose-id")||(w.src="https://pic4.zhimg.com/v2-4f89913ab376925632be5823a038f938.png",w["data-image-src"]=w.src,w["data-image-status"]="import_image_fail")}for(var O=0,T=Array.from(r.querySelectorAll("img[eeimg], img[data-eeimg]"));O<T.length;O++){var A=T[O],x=document.createElement("a"),j=A.getAttribute("data-formula")||A.getAttribute("alt");x.setAttribute("alt",j),x.setAttribute("eeimg",A.getAttribute("eeimg")||"1"),x.textContent=j,A.parentNode.replaceChild(x,A)}for(var _=0,R=Array.from(r.querySelectorAll(".ztext-math"));_<R.length;_++){var M,L=R[_],B=document.createElement("a"),I=L.dataset,N=I.tex,D=I.eeimg;if(N)B.setAttribute("alt",N),B.setAttribute("eeimg",D),B.textContent=N,null===(M=L.parentNode)||void 0===M||M.replaceChild(B,L)}for(var P=0,z=Array.from(r.querySelectorAll('sup[data-draft-type="reference"]'));P<z.length;P++){z[P].textContent="^"}for(var q=0,K=Array.from(r.querySelectorAll('a[data-draft-type="link-card"], div[data-draft-type="link-card"]'));q<K.length;q++){var U=K[q],F=U.querySelector("[data-text]");if(F)U.textContent=F.textContent;else{var V=U.dataset.text;U.textContent=V||U.textContent||U.getAttribute("href")}}for(var H=0,G=Array.from(r.querySelectorAll("[data-paste-ignore]"));H<G.length;H++){var W=G[H];W.parentNode.removeChild(W)}for(var Z=0,$=Array.from(r.querySelectorAll("figure"));Z<$.length;Z++){var Y=$[Z],J=Y.querySelector("img"),X=Y.querySelector("figcaption");J&&(X&&(J.dataset.caption=X.textContent),Y.parentNode.replaceChild(J,Y))}for(var Q=0,ee=Array.from(r.querySelectorAll(".video-box"));Q<ee.length;Q++){for(var te=ee[Q],ne=0,re=Array.from(te.childNodes);ne<re.length;ne++){var oe=re[ne];te.removeChild(oe)}if("video"===te.getAttribute("data-bjh-box")){var ae='<img src="'.concat(qe,'" />');te.innerHTML=ae}}r.innerHTML=r.innerHTML.replace(/^(<br>)+|(<br>)+$/g,"");var ie=r.firstChild;ie&&Ve(ie)&&r.insertBefore(document.createElement("br"),ie);var le=r.lastChild;return le&&Ve(le)&&r.appendChild(document.createElement("br")),r.innerHTML};function We(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,a=Object(be.convertFromHTML)({htmlToStyle:Te(r.map((function(e){return e.htmlToStyle})).concat([function(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[2];return r}}]).filter(Boolean)),htmlToEntity:Te(r.map((function(e){return e.htmlToEntity})).filter(Boolean)),htmlToBlock:Te(r.map((function(e){return e.htmlToBlock})).concat((function(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0],i=t[1],l="";(["h1","h2","h3","h4","h5","h6"].includes(a)&&(l=["h1",!o&&"h2"].filter(Boolean).includes(a)?{type:"header-two"}:{type:"header-three"}),"p"===a)&&(l={type:"unstyled",data:{pid:null==i||null===(r=i.dataset)||void 0===r?void 0:r.pid}});return Ve(i)&&(l={type:"atomic"}),l}})).filter(Boolean))})(Ge(e,t,n)),i=a.getBlockMap();return i.forEach((function(e){if(Pe("reference")(e,(function(t,n){var r=e.getKey(),o=e.getEntityAt(t),i=T.SelectionState.createEmpty(r).set("anchorOffset",t).set("focusOffset",n);a=T.Modifier.replaceText(a,i," ",null,o)}),a),null!=o&&o.isDoc&&"atomic"===e.getType()){var t=e.getKey(),n=a.getBlockAfter(t),r=a.getBlockBefore(t),i=a.getFirstBlock(),l=a.getLastBlock();Fe(r)&&(null==i?void 0:i.getKey())!==(null==r?void 0:r.getKey())&&(a=a.merge({blockMap:a.getBlockMap().delete(r.key)})),Fe(n)&&(null==l?void 0:l.getKey())!==(null==n?void 0:n.getKey())&&(a=a.merge({blockMap:a.getBlockMap().delete(n.key)}))}})),a}var Ze=function(e){return"unstyled"===e.getType()?"Editable-unstyled":"Editable-styled"},$e=function(e){var t={};return e.has("UNDERLINE")&&(t.textDecoration="none",t.borderBottom="1px dashed rgba(64, 64, 64, .72)"),t},Ye=function(e,t){return e instanceof T.ContentState?e:"string"==typeof e?We(e,void 0,void 0,t):"object"==typeof e?Object(T.convertFromRaw)(e):T.ContentState.createFromText("")},Je=function(e,t,n,r){var o=e.getCurrentContent();return{editorState:e,toRaw:function(){return Object(T.convertToRaw)(o)},toHTML:function(){return _e(o,t,n)},get isEmpty(){return!o.hasText()},getAttachment:function(){return r}}};function Xe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return et(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Qe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tt=function(e,t){var n,r=[],a=Qe(e,!0);try{for(a.s();!(n=a.n()).done;){var i=n.value[t];i&&(Array.isArray(i)?r.push.apply(r,Xe(o.a,i)):r.push(i))}}catch(e){a.e(e)}finally{a.f()}return r.sort((function(e,t){return(null==e?void 0:e.priority)-(null==t?void 0:t.priority)})),r.map((function(e){return e.component?e.component:e}))},nt=n(2935),rt=n(108),ot=n(1252),at=n(1171),it=n.n(at);function lt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ct=[["ABAP","abap"],["ABNF","abnf"],["ActionScript 3","as3"],["ActionScript","as"],["Ada","ada"],["ADL","adl"],["Agda","agda"],["Alloy","alloy"],["AmbientTalk","at"],["ANTLR","antlr"],["ApacheConf","apacheconf"],["APL","apl"],["AppleScript","applescript"],["Arduino","arduino"],["AspectJ","aspectj"],["aspx-cs","aspx-cs"],["aspx-vb","aspx-vb"],["Asymptote","asy"],["autohotkey","ahk"],["AutoIt","autoit"],["Awk","awk"],["Base Makefile","basemake"],["Bash Session","console"],["Bash","bash"],["Batchfile","bat"],["BBCode","bbcode"],["BC","bc"],["Befunge","befunge"],["BlitzBasic","blitzbasic"],["BlitzMax","blitzmax"],["BNF","bnf"],["Boo","boo"],["Boogie","boogie"],["Brainfuck","brainfuck"],["Bro","bro"],["BUGS","bugs"],["C","c"],["C#","csharp","c#"],["C++","cpp","c++"],["c-objdump","c-objdump"],["ca65 assembler","ca65"],["cADL","cadl"],["CAmkES","camkes"],["CBM BASIC V2","cbmbas"],["Ceylon","ceylon"],["CFEngine3","cfengine3"],["cfstatement","cfs"],["ChaiScript","chai"],["Chapel","chapel"],["Cheetah","cheetah"],["Cirru","cirru"],["Clay","clay"],["Clojure","clojure"],["ClojureScript","clojurescript"],["CMake","cmake"],["COBOL","cobol"],["COBOLFree","cobolfree"],["CoffeeScript","coffee-script"],["Coldfusion CFC","cfc"],["Coldfusion HTML","cfm"],["Common Lisp","common-lisp"],["Component Pascal","componentpascal"],["Coq","coq"],["cpp-objdump","cpp-objdump"],["CPSA","cpsa"],["Crmsh","crmsh"],["Croc","croc"],["Cryptol","cryptol"],["Csound Document","csound-document"],["Csound Orchestra","csound"],["Csound Score","csound-score"],["CSS","css"],["CUDA","cuda"],["Cypher","cypher"],["Cython","cython"],["D","d"],["d-objdump","d-objdump"],["Darcs Patch","dpatch"],["Dart","dart"],["Debian Control file","control"],["Debian Sourcelist","sourceslist"],["Delphi","delphi"],["dg","dg"],["Diff","diff"],["Django/Jinja","django"],["Docker","docker"],["DTD","dtd"],["Duel","duel"],["Dylan session","dylan-console"],["Dylan","dylan"],["DylanLID","dylan-lid"],["Earl Grey","earl-grey"],["Easytrieve","easytrieve"],["EBNF","ebnf"],["eC","ec"],["ECL","ecl"],["Eiffel","eiffel"],["Elixir iex session","iex"],["Elixir","elixir"],["Elm","elm"],["EmacsLisp","emacs"],["Embedded Ragel","ragel-em"],["ERB","erb"],["Erlang erl session","erl"],["Erlang","erlang"],["Evoque","evoque"],["Ezhil","ezhil"],["Factor","factor"],["Fancy","fancy"],["Fantom","fan"],["Felix","felix"],["Fish","fish"],["Fortran","fortran"],["FortranFixed","fortranfixed"],["FoxPro","foxpro"],["FSharp","fsharp","f#"],["GAP","gap"],["GAS","gas"],["Genshi Text","genshitext"],["Genshi","genshi"],["Gettext Catalog","pot"],["Gherkin","cucumber"],["GLSL","glsl"],["Gnuplot","gnuplot"],["Go","go"],["Golo","golo"],["GoodData-CL","gooddata-cl"],["Gosu Template","gst"],["Gosu","gosu"],["Groff","groff"],["Groovy","groovy"],["Haml","haml"],["Handlebars","handlebars"],["Haskell","haskell"],["Haxe","hx"],["Hexdump","hexdump"],["HTML","html"],["HTML+Django/Jinja","html+django"],["HTML+Handlebars","html+handlebars"],["HTTP","http"],["Hxml","haxeml"],["Hy","hylang"],["Hybris","hybris"],["IDL","idl"],["Idris","idris"],["Igor","igor"],["Inform 6 template","i6t"],["Inform 6","inform6"],["Inform 7","inform7"],["INI","ini"],["Io","io"],["Ioke","ioke"],["IRC logs","irc"],["Isabelle","isabelle"],["J","j"],["Jade","jade"],["JAGS","jags"],["Jasmin","jasmin"],["Java Server Page","jsp"],["Java","java"],["JavaScript","js","javascript"],["JCL","jcl"],["JSON","json"],["JSON-LD","jsonld"],["Julia console","jlcon"],["Julia","julia"],["Kal","kal"],["Kconfig","kconfig"],["Koka","koka"],["Kotlin","kotlin"],["Lasso","lasso"],["Lean","lean"],["LessCss","less"],["Lighttpd configuration file","lighty"],["Limbo","limbo"],["liquid","liquid"],["Literate Agda","lagda"],["Literate Cryptol","lcry"],["Literate Haskell","lhs"],["Literate Idris","lidr"],["LiveScript","live-script"],["LLVM","llvm"],["Logos","logos"],["Logtalk","logtalk"],["LSL","lsl"],["Lua","lua"],["Makefile","make"],["Mako","mako"],["MAQL","maql"],["Mask","mask"],["Mason","mason"],["Mathematica","mathematica"],["Matlab session","matlabsession"],["Matlab","matlab"],["MiniD","minid"],["Modelica","modelica"],["Modula-2","modula2"],["MoinMoin/Trac Wiki markup","trac-wiki"],["Monkey","monkey"],["MOOCode","moocode"],["MoonScript","moon"],["mozhashpreproc","mozhashpreproc"],["mozpercentpreproc","mozpercentpreproc"],["MQL","mql"],["Mscgen","mscgen"],["MSDOS Session","doscon"],["MuPAD","mupad"],["MXML","mxml"],["Myghty","myghty"],["MySQL","mysql"],["NASM","nasm"],["Nemerle","nemerle"],["nesC","nesc"],["NewLisp","newlisp"],["Newspeak","newspeak"],["Nginx configuration file","nginx"],["Nimrod","nimrod"],["Nit","nit"],["Nix","nixos"],["NSIS","nsis"],["NumPy","numpy"],["objdump","objdump"],["objdump-nasm","objdump-nasm"],["Objective-C","objective-c"],["Objective-C++","objective-c++"],["Objective-J","objective-j"],["OCaml","ocaml"],["Octave","octave"],["ODIN","odin"],["Ooc","ooc"],["Opa","opa"],["OpenEdge ABL","openedge"],["PacmanConf","pacmanconf"],["Pan","pan"],["ParaSail","parasail"],["Pawn","pawn"],["Perl","perl"],["Perl6","perl6"],["PHP","php"],["Pig","pig"],["Pike","pike"],["PkgConfig","pkgconfig"],["PL/pgSQL","plpgsql"],["PostgreSQL console (psql)","psql"],["PostgreSQL SQL dialect","postgresql"],["PostScript","postscript"],["POVRay","pov"],["PowerShell Session","ps1con"],["PowerShell","powershell"],["Praat","praat"],["Prolog","prolog"],["Properties","properties"],["Protocol Buffer","protobuf"],["Puppet","puppet"],["PyPy Log","pypylog"],["Python 3","python3"],["Python 3.0 Traceback","py3tb"],["Python console session","pycon"],["Python Traceback","pytb"],["Python","python","py"],["QBasic","qbasic"],["QML","qml"],["QVTO","qvto"],["Racket","racket"],["Ragel","ragel"],["RConsole","rconsole"],["Rd","rd"],["REBOL","rebol"],["Red","red"],["Redcode","redcode"],["reg","registry"],["ResourceBundle","resource"],["reStructuredText","rst"],["Rexx","rexx"],["RHTML","rhtml"],["Roboconf Graph","roboconf-graph"],["Roboconf Instances","roboconf-instances"],["RobotFramework","robotframework"],["RPMSpec","spec"],["RQL","rql"],["RSL","rsl"],["Ruby irb session","rbcon"],["Ruby","rb"],["Rust","rust"],["S","splus"],["Sass","sass"],["Scala","scala"],["Scalate Server Page","ssp"],["Scaml","scaml"],["Scheme","scheme"],["Scilab","scilab"],["SCSS","scss"],["Shen","shen"],["Slim","slim"],["Smali","smali"],["Smalltalk","smalltalk"],["Smarty","smarty"],["Snobol","snobol"],["SourcePawn","sp"],["SPARQL","sparql"],["SQL","sql"],["sqlite3con","sqlite3"],["SquidConf","squidconf"],["Stan","stan"],["Standard ML","sml"],["SuperCollider","sc"],["Swift","swift"],["SWIG","swig"],["systemverilog","systemverilog"],["TADS 3","tads3"],["TAP","tap"],["Tcl","tcl"],["Tcsh Session","tcshcon"],["Tcsh","tcsh"],["Tea","tea"],["Termcap","termcap"],["Terminfo","terminfo"],["Terraform","terraform"],["TeX","tex"],["Text only","text"],["Thrift","thrift"],["Todotxt","todotxt"],["TrafficScript","rts"],["Treetop","treetop"],["Turtle","turtle"],["Twig","twig"],["TypeScript","ts"],["UrbiScript","urbiscript"],["Vala","vala"],["VB.net","vb.net"],["VCTreeStatus","vctreestatus"],["Velocity","velocity"],["verilog","verilog"],["VGL","vgl"],["vhdl","vhdl"],["VimL","vim"],["X10","x10"],["XML","xml"],["XQuery","xquery"],["XSLT","xslt"],["Xtend","xtend"],["XUL+mozpreproc","xul+mozpreproc"],["YAML","yaml"],["YAML+Jinja","yaml+jinja"],["Zephir","zephir"]].map((function(e){var t=lt(it.a,e);return{name:t[0],id:t[1],alias:t.slice(2)}}));function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=e.toLowerCase();return ct.find((function(e){return e.id===t||e.alias.some((function(e){return e===t}))}))}}var ut=function(){return new T.ContentBlock({key:Object(T.genKey)()})};var dt=function(e,t){return e.set("blockMap",e.getBlockMap().set(t.getKey(),t))},ft=n(917),pt=n(229),ht=n(225);function gt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var vt,yt=function(e){f()(n,e);var t=mt(n);function n(){var e;return i()(this,n),(e=t.call(this)).onChange=function(t){if(t){var n=function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())};e.setState({value:t,languageItems:[].concat(gt(o.a,ct.filter(n)),gt(o.a,ct.filter((function(e){return!n(e)}))))})}},e.onSelect=function(t,n){e.props.onSelectItem(n)},e.state={languageItems:ct,rect:{}},e}return c()(n,[{key:"show",value:function(e,t){this.setState({rect:t}),this.onChange(e?e.name:"")}},{key:"hide",value:function(){this.autoComplete&&this.autoComplete.inputNode&&(this.autoComplete.inputNode.blur(),this.setState({rect:{}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,r=t.languageItems,o=t.rect,a=o.left,i=void 0===a?-999:a,l=o.top,c={left:i-180,top:void 0===l?-999:l};return Object(Y.g)(ht.a,null,Object(Y.g)("div",{style:c,className:"Editable-languageSuggestions"},Object(Y.g)(pt.b,{value:n,ref:function(t){e.autoComplete=t},onChange:this.onChange,items:r,menuProps:{menuClassName:"Editable-languageSuggestionsMenu",menuContainerClassName:"Editable-languageSuggestionsMenuContainer"},inputProps:{className:"Editable-languageSuggestionsInput",placeholder:"é€‰æ‹©è¯­è¨€",after:Object(Y.g)(ft.a,{fill:"#afbdcf"})},onSelect:this.onSelect})))}}]),n}(b.Component);function bt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ct=function(){var e={},t=null,n=Object(b.createRef)(null);return{initialize:function(t){Object.assign(e,t)},onChange:function(e){var t=e.getCurrentContent();return"code-block"===t.getLastBlock().getType()?T.EditorState.set(e,{currentContent:dt(t,ut())}):e},handleGlobalScroll:function(e){e.target.classList&&e.target.classList.contains("Editable-languageSuggestionsMenu")||n.current.hide()},handlePastedText:function(e,t,n,r){var o,a=r.setEditorState,i=n.getCurrentContent(),l=n.getSelection(),c=l.getStartKey();return o=c,"code-block"===i.getBlockForKey(o).getType()?(a(T.EditorState.push(n,T.Modifier.replaceText(i,l,e),"insert-characters")),"handled"):"not-handled"},handleReturn:function(){var t=e.getEditorState(),n=t.getSelection(),r=t.getCurrentContent(),o=n.getStartKey();return"code-block"===r.getBlockForKey(o).getType()?(e.setEditorState(Object(ot.a)(t,"\n")),"handled"):"not-handled"},draft2html:{blockToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"code-block"===o.type?{start:Object(ke.a)(vt||(vt=ye()(['<pre lang="','">'])),o.data.language?o.data.language.id:""),end:"</pre>"}:e.apply(void 0,n)}}},components:[Object(Y.g)(yt,{key:"language_suggestions",ref:n,onSelectItem:function(n){if(t){var r,o=t.querySelectorAll("[data-block]"),a=e.getEditorState(),i=a.getCurrentContent(),l=bt(o,!0);try{for(l.s();!(r=l.n()).done;){var c=r.value.getAttribute("data-offset-key").split("-")[0];i=T.Modifier.mergeBlockData(i,T.SelectionState.createEmpty(c),Le.a.Map({language:n}))}}catch(e){l.e(e)}finally{l.f()}var s=T.EditorState.push(a,i,"change-block-data");e.getEditorRef().props.onChange(s)}}})],onMouseOver:function(r){var o=r.target.closest("pre.public-DraftStyleDefault-pre");if(o){if(o===t)return;var a=o.getBoundingClientRect(),i=o.querySelector("[data-block]").getAttribute("data-offset-key").split("-")[0],l=e.getEditorState().getCurrentContent().getBlockForKey(i);t=o,n.current.show(l.getData().get("language"),{top:a.top,left:a.left+o.offsetWidth})}else{var c;t=null,null===(c=n.current)||void 0===c||c.hide()}},html2draft:{htmlToBlock:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];if("pre"===o){var i=st(a.getAttribute("lang"));return i?{type:"code-block",data:{language:i}}:{type:"code-block"}}return e.apply(void 0,n)}}},toolbar:{icon:nt.a,label:"ä»£ç å—",style:"code-block",shortcut:"âŒ˜+âŒ¥+C",section:rt.a.BLOCK_CONTENT,commandName:"toggle-block-type-code-block",priority:2},toolbarV2:{icon:nt.a,label:"ä»£ç å—",style:"code-block",shortcut:"âŒ˜+âŒ¥+C",section:W.a.BLOCK,commandName:"toggle-block-type-code-block",priority:2}}};var St=function(e,t){var n=e.getStartKey(),r=e.getStartOffset(),o=e.getEndKey(),a=e.getEndOffset();if(n!==o&&0===a){var i=t.getBlockBefore(o);return new T.SelectionState({isBackward:!1,anchorKey:n,anchorOffset:r,focusKey:i.getKey(),focusOffset:i.getLength()})}return e},Et=["BOLD","ITALIC","UNDERLINE","CODE"];var wt=function(e,t){return Et.reduce((function(e,n){return T.Modifier.removeInlineStyle(e,t,n)}),e)},Ot=function(){var e={};return{initialize:function(t){Object.assign(e,t)},keyBindingFn:function(e){if(T.KeyBindingUtil.hasCommandModifier(e)&&e.shiftKey)switch(e.keyCode){case 55:return"toggle-block-type-ordered-list-item";case 56:return"toggle-block-type-unordered-list-item";case 85:return"toggle-block-type-blockquote"}if(e.metaKey&&T.KeyBindingUtil.isOptionKeyCommand(e)||e.ctrlKey&&e.altKey)switch(e.keyCode){case 49:return"toggle-block-type-header-two";case 50:return"toggle-block-type-header-three";case 67:return"toggle-block-type-code-block"}},handleCommand:function(t){return t.startsWith("toggle-inline-style")?(n=t.slice("toggle-inline-style-".length),e.setEditorState(T.RichUtils.toggleInlineStyle(e.getEditorState(),n)),"handled"):t.startsWith("toggle-block-type")?(function(t){var n=e.getEditorState(),r=T.RichUtils.toggleBlockType(n,t).getCurrentContent();if("code-block"===t){var o=St(n.getSelection(),r),a=o.getEndKey(),i=r.getBlockForKey(a);i.getType()===t&&(r=wt(r,new T.SelectionState({anchorKey:o.getStartKey(),anchorOffset:0,focusKey:a,focusOffset:i.getLength()})))}e.setEditorState(T.EditorState.forceSelection(T.EditorState.push(n,r,"change-block-type"),n.getSelection()))}(t.slice("toggle-block-type-".length)),"handled"):"not-handled";var n},queryCommandState:function(e,t){if(t)return e.startsWith("toggle-inline-style")?t.getCurrentInlineStyle().has(e.slice("toggle-inline-style-".length)):e.startsWith("toggle-block-type")?T.RichUtils.getCurrentBlockType(t)===e.slice("toggle-block-type-".length):void 0},queryCommandEnable:function(e,t){return["toggle-inline-style-BOLD","toggle-inline-style-ITALIC"].includes(e)?!("code-block"===T.RichUtils.getCurrentBlockType(t)||"atomic"===T.RichUtils.getCurrentBlockType(t)):["toggle-block-type-header-two","toggle-block-type-header-three","toggle-block-type-ordered-list-item","toggle-block-type-unordered-list-item","toggle-block-type-blockquote"].includes(e)?"atomic"!==T.RichUtils.getCurrentBlockType(t):void 0}}},Tt=function(){var e={};return{initialize:function(t){Object.assign(e,t)},customStyleMap:{CODE:{margin:"0 2px",padding:"3px 4px",borderRadius:3,fontFamily:"Menlo, Monaco, Consolas, 'Andale Mono', 'lucida console', 'Courier New', monospace",backgroundColor:"#f6f6f6"}},onChange:function(e){if(!e.getSelection().isCollapsed())return e;var t=e.getSelection(),n=e.getCurrentContent(),r=t.getFocusOffset(),o=t.getFocusKey(),a=n.getBlockForKey(o),i=a.getInlineStyleAt(r-1),l=a.getInlineStyleAt(r),c=i.includes("CODE"),s=l.includes("CODE");if(r===a.getLength()&&c){var u=T.Modifier.insertText(n,t," ").merge({selectionAfter:t});e=T.EditorState.forceSelection(T.EditorState.set(e,{currentContent:u}),t)}return!c&&s||c&&!s?T.EditorState.setInlineStyleOverride(e,e.getCurrentInlineStyle().delete("CODE")):e},draft2html:{styleToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"CODE"===o?{start:"<code>",end:"</code>"}:e.apply(void 0,n)}}},html2draft:{htmlToStyle:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[2];return"code"===o?a.add("CODE"):e.apply(void 0,n)}}}}},At=function(){return{keyBindingFn:function(e){if(13===e.keyCode&&T.KeyBindingUtil.hasCommandModifier(e))return"command-submit"}}},xt=Object(b.forwardRef)((function(e,t){var n=Object(j.l)().trackEvent;return Object(b.useImperativeHandle)(t,(function(){return{onPaste:function(e){n({eventType:"Click",action:"Unknown",elementLocation:{type:"Input",text:e,block:{blockText:"WebEditor"}}})}}})),null})),jt=n(1518),_t=n(1137),Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowPasteRichText,n=e.disablePasteImage,r=k.a.createRef(null),o={};return{initialize:function(e){Object.assign(o,e)},handlePastedText:function(e,a,i,l){var c=l.setEditorState;if(!t)return e?(c(Object(jt.a)(i,e,null,!0)),"handled"):"not-handled";if(r.current){var s=(null==e?void 0:e.length)||0;r.current.onPaste("å­—æ•°-".concat(s))}if(a){var u=o.getEditorRef().props.html2draftMiddlewares,d=We(a,!0,n,u);return c(Object(_t.a)(i,d.blockMap,d.entityMap)),"handled"}return"not-handled"},components:[{component:Object(Y.g)(xt,{ref:r,key:"PasteEventTracker"}),priority:1}]}},Mt=n(2936),Lt=n(2937),Bt=n(2938),It=n(2939),Nt=n(2940),Dt=n(2941),Pt=n(2942),zt=n(2943),qt=Object(b.forwardRef)((function(e,t){var n=Object(j.l)().trackEvent;return Object(b.useImperativeHandle)(t,(function(){return{trackEvent:function(e){n({eventType:"Click",action:"Unknown",elementLocation:{type:"Input",text:"ConvertMarkdown-"+e,block:{blockText:"WebEditor"}}})}}})),null})),Kt="undefined"!=typeof navigator&&/Mac/i.test(navigator.userAgent),Ut=function(e){var t=e.metaKey,n=e.ctrlKey,r=e.altKey,o=e.shiftKey;return Kt?t&&r&&!o:n&&r&&!o},Ft=function(e){var t=e.metaKey,n=e.ctrlKey,r=e.altKey,o=e.shiftKey;return Kt?t&&!r&&o:n&&!r&&o};function Vt(e){var t=null,n=null,r=null;return/\*\*([^*]+)\*\*$/.test(e)&&!/\*\*\*([^*]+)\*\*$/.test(e)&&(t="change-inline-style",n=["BOLD"],r="**"),/\*([^*]+)\*$/.test(e)&&!/\*\*([^*]+)\*$/.test(e)&&(t="change-inline-style",n=["ITALIC"],r="*"),/\*\*\*([^*]+)\*\*\*$/.test(e)&&(t="change-inline-style",n=["BOLD","ITALIC"],r="***"),/`([^`]+)`$/.test(e)&&(t="change-inline-style",n=["CODE"],r="`"),/^#+ $/.test(e)&&(t="change-block-type",n="header-two"),/^##+ $/.test(e)&&(t="change-block-type",n="header-three"),/^(-|\+|\*) $/.test(e)&&(t="change-block-type",n="unordered-list-item"),/^1\. $/.test(e)&&(t="change-block-type",n="ordered-list-item"),/^> $/.test(e)&&(t="change-block-type",n="blockquote"),{changeType:t,targetType:n,hintChar:r}}var Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowHeaderThree,n=e.useV2Feature,r=e.getMarkdownEnabled,o={},a=k.a.createRef(null),i=!1;return{initialize:function(e){Object.assign(o,e)},keyBindingFn:function(e){if(n){if(Ft(e)&&76===e.keyCode)return"toggle-block-type-ordered-list-item";if(T.KeyBindingUtil.hasCommandModifier(e)&&76===e.keyCode)return"toggle-block-type-unordered-list-item"}},handleBeforeInput:function(e){if(null==r||!r())return"not-handled";if(o.getEditorState().getSelection().isCollapsed()&&[" ","*","`"].includes(e)){var t=Object(ot.a)(o.getEditorState(),e),n=t.getCurrentContent(),l=t.getSelection(),c=l.getFocusKey(),s=l.getFocusOffset(),u=n.getBlockForKey(c),d=u.getText().slice(0,s),f=Vt(d),p=f.changeType,h=f.targetType,g=f.hintChar;if(!p)return"not-handled";a.current&&a.current.trackEvent(Array.isArray(h)?h.join("-"):h);var m=t,v=m.getCurrentContent();if("change-inline-style"===p){if("atomic"===u.getType()||"code-block"===u.getType())return"not-handled";for(var y=d.length,b=d.slice(0,y-1).lastIndexOf(g),k=b;k<=y;k++)if(u.getInlineStyleAt(k).includes("CODE"))return"not-handled";var C=g.length;v=T.Modifier.replaceText(v,v.getSelectionAfter().merge({anchorOffset:b}),d.slice(b+C,y-C),m.getCurrentInlineStyle()),h.forEach((function(e){v=T.Modifier.applyInlineStyle(v,v.getSelectionAfter().merge({anchorOffset:b}),e)})),v=v.set("selectionAfter",v.getSelectionAfter().merge({anchorOffset:s-2*C,focusOffset:s-2*C})),m=T.EditorState.push(m,v,p),h.forEach((function(e){m=T.EditorState.setInlineStyleOverride(m,m.getCurrentInlineStyle().delete(e))}))}if("change-block-type"===p){if("unstyled"!==u.getType())return"not-handled";v=T.Modifier.removeRange(v,new T.SelectionState({anchorKey:c,anchorOffset:0,focusKey:c,focusOffset:s}),"backward"),v=T.Modifier.setBlockType(v,T.SelectionState.createEmpty(c).set("hasFocus",!0),h),m=T.EditorState.push(m,v,p)}return o.setEditorState(m),i=!0,"handled"}return"not-handled"},handleReturn:function(){var e=o.getEditorState(),t=e.getSelection();if(!t.isCollapsed())return"not-handled";var n=e.getCurrentContent(),r=t.getFocusKey(),a=n.getBlockForKey(r);if("unstyled"!==a.getType())return"not-handled";var i=t.getFocusOffset(),l=a.getText().slice(0,i),c=null,s=null,u=null;if(/^-{3,}$/.test(l)&&(c="atomic",u="divider"),/^```(\w*)$/.test(l)){c="code-block";var d=st(l.match(/^```(\w*)$/)[1]);d&&(s=Le.a.Map({language:d}))}if(c){var f=e,p=f.getCurrentContent();p=T.Modifier.splitBlock(p,t);var h=T.EditorState.push(f,p,"split-block");if(p=T.Modifier.removeRange(p,new T.SelectionState({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:i}),"backward"),"code-block"===c&&(p=T.Modifier.setBlockType(p,T.SelectionState.createEmpty(r).set("hasFocus",!0),c),s&&(p=T.Modifier.mergeBlockData(p,T.SelectionState.createEmpty(r).set("hasFocus",!0),s)),f=T.EditorState.push(h,p,"change-block-type")),"atomic"===c){var g=Object(me.a)(T.EditorState.push(h,p),u,"IMMUTABLE"),m=g.getCurrentContent();f=T.EditorState.forceSelection(T.EditorState.push(h,m,"insert-fragment"),g.getSelection())}return o.setEditorState(f),"handled"}return"not-handled"},handleCommand:function(e){return"backspace"===e&&i?(o.setEditorState(T.EditorState.undo(o.getEditorState())),"handled"):"not-handled"},onChange:function(e){return i=!1,e},draft2html:{styleToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"BOLD"===o?{start:"<b>",end:"</b>"}:"ITALIC"===o?{start:"<i>",end:"</i>"}:"UNDERLINE"===o?{start:"<u>",end:"</u>"}:e.apply(void 0,n)}},blockToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o,a,i,l,c,s,u=n[0];return"blockquote"===u.type?{start:"<blockquote".concat(null!=u&&null!==(o=u.data)&&void 0!==o&&o.pid?' data-pid="'.concat(null==u||null===(a=u.data)||void 0===a?void 0:a.pid,'"'):"",">"),end:"</blockquote>"}:"ordered-list-item"===u.type?{start:"<li".concat(null!=u&&null!==(i=u.data)&&void 0!==i&&i.pid?' data-pid="'.concat(null==u||null===(l=u.data)||void 0===l?void 0:l.pid,'"'):"",">"),end:"</li>",nestStart:"<ol>",nestEnd:"</ol>"}:"unordered-list-item"===u.type?{start:"<li".concat(null!=u&&null!==(c=u.data)&&void 0!==c&&c.pid?' data-pid="'.concat(null==u||null===(s=u.data)||void 0===s?void 0:s.pid,'"'):"",">"),end:"</li>",nestStart:"<ul>",nestEnd:"</ul>"}:e.apply(void 0,n)}}},html2draft:{htmlToStyle:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[2];return"b"===o?a.add("BOLD"):"i"===o?a.add("ITALIC"):"u"===o?a.add("UNDERLINE"):e.apply(void 0,n)}},htmlToBlock:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o,a=n[0],i=n[1],l=n[2],c=n[3];if("blockquote"===a||("p"===a||"div"===a)&&"blockquote"===c)return{type:"blockquote",data:{pid:null==i||null===(o=i.dataset)||void 0===o?void 0:o.pid}};if("li"===a){var s,u="ul"===l?"unordered-list-item":"ordered-list-item";return{type:u,data:{pid:null==i||null===(s=i.dataset)||void 0===s?void 0:s.pid}}}return e.apply(void 0,n)}}},toolbar:[{icon:Mt.a,label:"ç²—ä½“",style:"BOLD",shortcut:"âŒ˜+B",section:rt.a.BASIC_STYLING,commandName:"toggle-inline-style-BOLD",toolType:q.e.INLINE_STYLE,shouldActive:function(e){return e.currentStyle.has("BOLD")},priority:1},{icon:Lt.a,label:"æ–œä½“",style:"ITALIC",shortcut:"âŒ˜+I",section:rt.a.BASIC_STYLING,commandName:"toggle-inline-style-ITALIC",toolType:q.e.INLINE_STYLE,shouldActive:function(e){return e.currentStyle.has("ITALIC")},priority:2},!t&&{icon:Bt.a,label:"ä¸€çº§æ ‡é¢˜",style:"header-two",shortcut:"âŒ˜+âŒ¥+1",section:rt.a.BASIC_STYLING,commandName:"toggle-block-type-header-two",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"header-two"===e.currentBlockType},priority:3},t&&{icon:It.a,label:"ä¸€çº§æ ‡é¢˜",style:"header-two",shortcut:"âŒ˜+âŒ¥+1",section:rt.a.BASIC_STYLING,commandName:"toggle-block-type-header-two",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"header-two"===e.currentBlockType},priority:3},t&&{icon:Nt.a,label:"äºŒçº§æ ‡é¢˜",style:"header-three",shortcut:"âŒ˜+âŒ¥+2",section:rt.a.BASIC_STYLING,commandName:"toggle-block-type-header-three",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"header-three"===e.currentBlockType},priority:4},{icon:Dt.a,label:"æœ‰åºåˆ—è¡¨",style:"ordered-list-item",shortcut:"âŒ˜+â‡§+7",section:rt.a.LIST_CONTENT,commandName:"toggle-block-type-ordered-list-item",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"ordered-list-item"===e.currentBlockType},priority:1},{icon:Pt.a,label:"æ— åºåˆ—è¡¨",style:"unordered-list-item",shortcut:"âŒ˜+â‡§+8",section:rt.a.LIST_CONTENT,commandName:"toggle-block-type-unordered-list-item",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"unordered-list-item"===e.currentBlockType},priority:2},{icon:zt.b,label:"å¼•ç”¨å—",style:"blockquote",shortcut:"âŒ˜+â‡§+U",section:rt.a.BLOCK_CONTENT,commandName:"toggle-block-type-blockquote",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"blockquote"===e.currentBlockType},priority:1}].filter(Boolean),toolbarV2:[{icon:Mt.a,label:"ç²—ä½“",style:"BOLD",shortcut:"âŒ˜+B",section:W.a.TEXT_STYLE,commandName:"toggle-inline-style-BOLD",toolType:q.e.INLINE_STYLE,shouldActive:function(e){return e.currentStyle.has("BOLD")},priority:1},{icon:Lt.a,label:"æ–œä½“",style:"ITALIC",shortcut:"âŒ˜+I",section:W.a.TEXT_STYLE,commandName:"toggle-inline-style-ITALIC",toolType:q.e.INLINE_STYLE,shouldActive:function(e){return e.currentStyle.has("ITALIC")},priority:2},{name:"header",isMenuToggler:!0,label:"æ ‡é¢˜",section:W.a.TEXT_STYLE,icon:Bt.a,priority:3},{icon:It.a,parentName:"header",label:"ä¸€çº§æ ‡é¢˜",style:"header-two",shortcut:"âŒ˜+âŒ¥+1",section:W.a.TEXT_STYLE,commandName:"toggle-block-type-header-two",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"header-two"===e.currentBlockType},priority:3},{icon:Nt.a,parentName:"header",label:"äºŒçº§æ ‡é¢˜",style:"header-three",shortcut:"âŒ˜+âŒ¥+2",section:W.a.TEXT_STYLE,commandName:"toggle-block-type-header-three",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"header-three"===e.currentBlockType},priority:4},{icon:Dt.a,label:"æœ‰åºåˆ—è¡¨",style:"ordered-list-item",shortcut:"âŒ˜+â‡§+L",section:W.a.LIST,commandName:"toggle-block-type-ordered-list-item",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"ordered-list-item"===e.currentBlockType},priority:1},{icon:Pt.a,label:"æ— åºåˆ—è¡¨",style:"unordered-list-item",shortcut:"âŒ˜+L",section:W.a.LIST,commandName:"toggle-block-type-unordered-list-item",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"unordered-list-item"===e.currentBlockType},priority:2},{icon:zt.b,label:"å¼•ç”¨å—",style:"blockquote",shortcut:"âŒ˜+â‡§+U",section:W.a.BLOCK,commandName:"toggle-block-type-blockquote",toolType:q.e.BLOCK_TYPE,shouldActive:function(e){return"blockquote"===e.currentBlockType},priority:1}].filter(Boolean),components:[{component:Object(Y.g)(qt,{ref:a,key:"ConvertMarkdownTracker"}),priority:1}]}},Gt=n(2944),Wt=function(e,t){var n=(t=St(t,e)).getStartKey(),r=t.getEndKey(),o=e.getBlockMap();return o.toSeq().skipUntil((function(e,t){return t===n})).takeUntil((function(e,t){return t===r})).concat(new Me.Map([[r,o.get(r)]]))};var Zt=function(e,t,n){var r=Wt(e,t).map(n);return e.merge({blockMap:e.getBlockMap().merge(r),selectionBefore:t,selectionAfter:t})};var $t=function(e,t){return Zt(e,t,(function(e){return"atomic"===e.getType()?e:e.set("type","unstyled")}))},Yt=function(){var e={};return{initialize:function(t){Object.assign(e,t)},keyBindingFn:function(e){if(T.KeyBindingUtil.hasCommandModifier(e)&&220===e.keyCode)return"clear-format"},handleCommand:function(t){return"clear-format"===t?(function(){var t=e.getEditorState(),n=t.getSelection();if(!n.isCollapsed()){var r=t.getCurrentContent();r=$t(r,n),r=wt(r,n),e.setEditorState(T.EditorState.forceSelection(T.EditorState.push(t,r,"change-block-type"),n))}}(),"handled"):"not-handled"},toolbar:{section:rt.a.FORMAT_EDITING,shortcut:"âŒ˜+\\",icon:Gt.a,label:"æ¸…é™¤æ ¼å¼",commandName:"clear-format",priority:1},toolbarV2:{section:W.a.CONTENT_OPERATION,shortcut:"âŒ˜+\\",icon:Gt.a,label:"æ¸…é™¤æ ¼å¼",commandName:"clear-format",priority:2}}},Jt=n(24),Xt=n.n(Jt);function Qt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var en=function(e,t,n){var r=e.getBlockMap(),o=(new Me.OrderedMap).withMutations((function(e){r.entrySeq().forEach((function(r){var o=Qt(Xt.a,r,2),a=o[0],i=o[1];a===n&&e.set(t.getKey(),t),e.set(a,i)}))}));return e.set("blockMap",o)},tn=n(1138),nn=function(e){return!!e&&"atomic"===e.type},rn=function(e){return Boolean(e.data.get("isFocused"))},on=function(e){return e.getCurrentContent().getBlockForKey(e.getSelection().focusKey)},an=function(e){return e.getCurrentContent().getBlockBefore(e.getSelection().focusKey)},ln=function(e){return e.getCurrentContent().getBlockAfter(e.getSelection().focusKey)},cn=function(e){return e.getCurrentContent().blockMap.find((function(e){return nn(e)&&rn(e)}))},sn=function(e){var t=e.getSelection();return t.focusKey===t.anchorKey&&nn(on(e))},un=function(e){var t=e.getSelection();if(!t.isCollapsed())return!1;var n=on(e);return t.focusOffset===n.getLength()&&nn(ln(e))},dn=function(e){var t=e.getSelection();return!(!t.isCollapsed()||0!==t.focusOffset)&&nn(an(e))},fn=function(e){return nn(an(e))},pn=function(e){return nn(ln(e))},hn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?t.getLength():0,o=T.SelectionState.createEmpty(t.key).merge({anchorOffset:r,focusOffset:r});return T.EditorState.forceSelection(e,o)},gn=function(e,t,n){var r=e.getCurrentContent(),o=r.set("blockMap",r.blockMap.map((function(e){return nn(e)?e.merge({data:e.data.merge({isFocused:e.key===t.key&&n})}):e})));return T.EditorState.set(e,{currentContent:o})},mn=function(e,t){var n,r,o,a=function(e){return document.querySelector('[data-block][data-offset-key="'.concat(e.key,'-0-0"]'))}(t);return a&&(n=a,r=document.getSelection(),(o=document.createRange()).setStart(n,0),o.setEnd(n,0),requestAnimationFrame((function(){r.removeAllRanges(),r.addRange(o)}))),T.EditorState.forceSelection(e,T.SelectionState.createEmpty(t.key))},vn=function(){var e,t,n={};return{decorator:function(e){return function(r){var o=r.block,a=rn(o);return Object(Y.g)(e,S()({},r,{isFocused:a,className:x()(r.className,{"FocusPlugin--focused":a,"FocusPlugin--unfocused":!a}),onMouseDown:function(){t=o},onClick:function(e){e.preventDefault(),n.setEditorState(hn(n.getEditorState(),o))}}))}},onChange:function(n){var r=n.getCurrentContent(),o=n.getSelection(),a=r.getBlockForKey(o.focusKey),i=t||a;t=null;var l=n;if(nn(i)?o.hasFocus?rn(i)||(l=gn(l,i,!0),l=mn(l,i)):l=gn(l,i,!1):nn(e)&&(l=gn(l,e,!1),l=T.EditorState.forceSelection(l,o)),o.hasFocus&&["header-two","header-three"].includes(a.type)){var c=r.getBlockMap();if(Object(tn.c)(a.get("data").get("intoCatalogStatus"))===tn.a.removed){var s=r;c.forEach((function(e){if(Object(tn.c)(e.get("data").get("intoCatalogStatus"))===tn.a.toAdd){var t=e.key;s=T.Modifier.mergeBlockData(s,T.SelectionState.createEmpty(t),Le.a.Map({intoCatalogStatus:tn.a.removed}))}})),s=T.Modifier.mergeBlockData(s,T.SelectionState.createEmpty(a.key).merge({anchorOffset:a.getLength(),focusOffset:a.getLength()}),Le.a.Map({intoCatalogStatus:tn.a.toAdd})),l=T.EditorState.push(l,s,"change-block-data")}}return e=i,l},removeBlockWithOptions:function(e){var t=e.forwared,r=void 0!==t&&t,o=e.delay,a=void 0!==o&&o,i=n.getEditorState(),l=on(i);r?this.moveSelectionForward():this.moveSelectionBackward();var c=function(e,t){var n=e.getCurrentContent();if(t&&nn(t)){var r=n.merge({blockMap:n.getBlockMap().delete(t.key)});if(r!==n)return T.EditorState.push(e,r,"remove-range")}return null}(i,l);c&&(a?requestAnimationFrame((function(){n.setEditorState(T.EditorState.forceSelection(c,n.getEditorState().getSelection()))})):n.setEditorState(c))},handleKeyCommand:function(e,t){return"backspace"===e&&sn(t)?(this.removeBlockWithOptions({forwared:!1,delay:!0}),"handled"):"delete"===e&&sn(t)?(this.removeBlockWithOptions({forwared:!0,delay:!0}),"handled"):"not-handled"},handleReturn:function(){var e=n.getEditorState();if(sn(e)){var t=e.getSelection(),r=e.getCurrentContent(),o=r.getBlockAfter(t.getFocusKey());if(o===r.getLastBlock()&&0===o.getLength())n.setEditorState(T.EditorState.forceSelection(e,T.SelectionState.createEmpty(o.getKey())));else if(o){var a=ut(),i=en(r,a,o.getKey()).merge({selectionAfter:T.SelectionState.createEmpty(a.getKey())}),l=T.EditorState.push(e,i,"insert-fragment");n.setEditorState(l)}return"handled"}return"not-handled"},handleBeforeInput:function(e,t){return sn(t)?"handled":"not-handled"},keyBindingFn:function(e){90===e.keyCode&&T.KeyBindingUtil.hasCommandModifier(e)&&requestAnimationFrame((function(){var e=n.getEditorState(),t=cn(e);if(t){var r=gn(e,t,!1);r=T.EditorState.forceSelection(r,e.getSelection()),n.setEditorState(r)}}));var t=n.getEditorState();if(37===e.keyCode&&!e.shiftKey&&!T.KeyBindingUtil.hasCommandModifier(e)&&(sn(t)||dn(t)))return e.preventDefault(),"focus-move-selection-backward";if(39===e.keyCode&&!e.shiftKey&&!T.KeyBindingUtil.hasCommandModifier(e)&&(sn(t)||un(t)))return e.preventDefault(),"focus-move-selection-forward";if(8===e.keyCode&&!e.shiftKey&&!T.KeyBindingUtil.hasCommandModifier(e)){if(sn(t)&&fn(t))return e.preventDefault(),"focus-backspace-block";if(dn(t))return e.preventDefault(),"focus-move-selection-backward"}if(46===e.keyCode&&!e.shiftKey&&!T.KeyBindingUtil.hasCommandModifier(e)){if(sn(t)&&pn(t))return e.preventDefault(),"focus-delete-block";if(un(t))return e.preventDefault(),"focus-move-selection-forward"}},handleCommand:function(e){if("focus-move-selection-backward"===e){var t=n.getEditorState(),r=t.getSelection(),o=t.getCurrentContent(),a=o.getBlockForKey(r.getFocusKey());if(this.moveSelectionBackward(),a!==o.getLastBlock()&&0===a.getLength()){var i=o.merge({blockMap:o.getBlockMap().delete(a.getKey())}),l=T.EditorState.push(t,i,"remove-range");requestAnimationFrame((function(){n.setEditorState(T.EditorState.forceSelection(l,n.getEditorState().getSelection()))}))}return!0}if("focus-move-selection-forward"===e){var c=n.getEditorState(),s=c.getSelection(),u=c.getCurrentContent(),d=u.getBlockForKey(s.getFocusKey());if(this.moveSelectionForward(),d!==u.getFirstBlock()&&0===d.getLength()){var f=u.merge({blockMap:u.getBlockMap().delete(d.getKey())}),p=T.EditorState.push(c,f,"remove-range");requestAnimationFrame((function(){n.setEditorState(T.EditorState.forceSelection(p,n.getEditorState().getSelection()))}))}return!0}return"focus-backspace-block"===e?(this.removeBlockWithOptions({forwared:!1,delay:!0}),!0):"focus-delete-block"===e&&(this.removeBlockWithOptions({forwared:!0,delay:!0}),!0)},moveSelectionBackward:function(){var e=n.getEditorState(),t=e.getCurrentContent(),r=e.getSelection(),o=cn(e)||t.getBlockForKey(r.focusKey),a=t.getBlockBefore(o.key);a&&(nn(a)?n.setEditorState(mn(gn(e,a,!0),a)):n.setEditorState(hn(e,a,!0)))},moveSelectionForward:function(){var e=n.getEditorState(),t=e.getCurrentContent(),r=e.getSelection(),o=cn(e)||t.getBlockForKey(r.focusKey),a=t.getBlockAfter(o.key);a&&(nn(a)?n.setEditorState(mn(gn(e,a,!0),a)):n.setEditorState(hn(e,a,!1)))},onUpArrow:function(e,t){var n=(0,t.getEditorState)();e.shiftKey||T.KeyBindingUtil.hasCommandModifier(e)||!sn(n)&&!fn(n)||(e.preventDefault(),this.moveSelectionBackward())},onDownArrow:function(e,t){var n=(0,t.getEditorState)();e.shiftKey||T.KeyBindingUtil.hasCommandModifier(e)||!sn(n)&&!pn(n)||(e.preventDefault(),this.moveSelectionForward())},initialize:function(e){var t=e.getEditorState,r=e.setEditorState;n.getEditorState=t,n.setEditorState=r}}},yn=n(955),bn=n.n(yn),kn=n(2147),Cn=function(e){return function(t){return Object(Y.g)(e,S()({},t,t.blockProps))}};function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var En=function(e){f()(n,e);var t=Sn(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.editable,n=e.contentState,r=e.entityKey,o=e.offsetKey,a=e.children,i=e.target,l=n.getEntity(r).getData();return Object(Y.g)("a",{"data-offset-key":o,"data-editable":t,target:i,href:l.url,className:"Link ztext-link"},a)}}]),n}(k.a.Component);En.propTypes={editable:y.a.bool,contentState:y.a.object.isRequired,entityKey:y.a.string.isRequired,children:y.a.node,target:y.a.string},En.defaultProps={target:"_blank",editable:!0};var wn=En,On=n(1060),Tn=n(1396),An=n(1912),xn=/https:\/\/www.zhihu.com\/zvideo\/(\d+)($|\?|#)/;function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var _n=function(e){f()(n,e);var t=jn(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e,t=this.props,n=t.contentState,r=t.entityKey,o=t.offsetKey,a=t.className,i=t.target,l=t.onClick,c=t.onMouseDown,s=t.onRef,u=t.text,d=t.newLinkCard,f=n.getEntity(r).getData(),p=f.url,h=f.image,g=f.imageWidth,m=f.imageHeight,v=f.entityType,y=f.entityData,b=null===(e=p.match(xn))||void 0===e?void 0:e[1];return b?Object(Y.g)(Tn.a,{inEditor:"draftjs",useZVideoLinkCard:!1,className:a,onClick:l,onMouseDown:c,"data-offset-key":o,id:b}):d?Object(Y.g)(On.b,{inEditor:"draftjs",ref:s,component:"div",className:a,href:p,onClick:l,onMouseDown:c,"data-text":u,"data-offset-key":o}):Object(Y.g)(An.a,{className:a,url:p,image:h,imageWidth:g,imageHeight:m,entityType:v,entityData:y,text:u,target:i,onClick:l,onMouseDown:c,ref:s,"data-offset-key":o,component:"div"})}}]),n}(k.a.Component);_n.propTypes={editable:y.a.bool,contentState:y.a.object.isRequired,entityKey:y.a.string.isRequired};var Rn=_n,Mn=n(50),Ln=n(1394),Bn=n(27),In=Object.assign;function Nn(e){return k.a.createElement(Bn.a,In(In({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--RemoveLink24"+(t?" "+t:""))}),k.a.createElement("path",{d:"M5.327 19.183a3.005 3.005 0 010-4.25l3.28-3.279 1.612 1.613a.748.748 0 00-.135.107L7.946 15.51a.75.75 0 101.061 1.06l2.138-2.137a.75.75 0 00.107-.134l1.604 1.604-3.279 3.28a3.005 3.005 0 01-4.25 0zm8.59-2.218l-3.28 3.279a4.505 4.505 0 01-6.37-6.371l3.279-3.28L4.47 7.519a.75.75 0 011.06-1.06l12.5 12.5a.75.75 0 11-1.06 1.06l-3.053-3.053zm-3.664-9.079a.75.75 0 001.061 1.06L14.48 5.78a3.005 3.005 0 014.25 4.25l-3.166 3.166a.75.75 0 001.06 1.061l3.167-3.166A4.505 4.505 0 0013.42 4.72l-3.167 3.166zm5.825.554a.75.75 0 010 1.06l-2.105 2.106a.75.75 0 11-1.06-1.06l2.105-2.106a.75.75 0 011.06 0z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function Dn(e){return k.a.createElement(Nn,In(In({},e),{className:function(){return"ZDI ZDI--Removelink24"+(e.className?" "+e.className:"")}}))}var Pn=n(456),zn=n(1157);function qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Kn=function(){return Object(Y.g)("div",{css:function(e){return{margin:"0 8px",width:"1px",height:"20px",background:e.colors.GBK09A}}})},Un={name:"124we3h",styles:"display:flex;align-items:center;padding:7px 10px 7px 16px;"},Fn={name:"70qvj9",styles:"display:flex;align-items:center;"},Vn={name:"15fzge",styles:"margin-left:4px;"},Hn=function(e){f()(n,e);var t=qn(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.link,r=e.text,o=e.entityData,a=e.allowLinkCard,i=e.onEdit,l=e.onRef,c=e.onConvertToText,s=e.onToggle;return Object(Y.g)(Pn.a,{target:n,isOpen:t,placement:"bottom",repositionKey:r+o.url,className:"LinkBubble",onRef:l,onMouseDown:function(e){return e.preventDefault()}},Object(Y.g)(j.b,{block:"LinkBubble"},Object(Y.g)(j.f,{zaType:"Popup",zaText:"å±•ç¤ºä¸º".concat(o.isCard?"å¡ç‰‡":"é“¾æŽ¥")}),Object(Y.g)("div",{css:Un},Object(Y.g)(j.a,{as:N.c,preset:"plain",zaType:"Button",zaText:!0,onClick:function(){window.open(o.url,"_blank")}},"è®¿é—®é“¾æŽ¥"),Object(Y.g)(Kn,null),Object(Y.g)(j.a,{as:N.c,zaType:"Button",zaText:!0,preset:"plain","aria-label":"ç¼–è¾‘",onClick:i},Object(Y.g)(Ln.a,{css:function(e){return{width:"24px",height:"24px",marginRight:"4px",fill:e.colors.GBL05A}},text:!0,center:!0}),"ç¼–è¾‘é“¾æŽ¥"),Object(Y.g)(Kn,null),Object(Y.g)(j.a,{as:N.c,zaType:"Button",zaText:!0,preset:"plain",onClick:function(){c({isCard:null==o?void 0:o.isCard,link:o.url,text:r})}},Object(Y.g)(Dn,{css:function(e){return{width:"24px",height:"24px",marginRight:"4px",fill:e.colors.GBL05A}},center:!0}),"å–æ¶ˆé“¾æŽ¥"),a&&Object(Y.g)(k.a.Fragment,null,Object(Y.g)(Kn,null),Object(Y.g)(N.c,{className:"LinkBubble-button",preset:"plain",css:Fn},"å±•ç¤ºä¸ºå¡ç‰‡",Object(Y.g)(j.a,{as:zn.a,zaType:"Button",preset:"micro",checked:o.isCard,css:Vn,onChange:function(){s(o)},zaText:"å±•ç¤ºä¸ºå¡ç‰‡-".concat(Boolean(o.isCard))}))))))}}]),n}(k.a.Component),Gn=["store","getLink"];function Wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Zn=function(e){f()(n,e);var t=Wn(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={isOpen:!1,text:"",entityData:{}},e.handleClick=function(t){if(e.state.isOpen){var n=e.props.store,r=Object(Mn.findDOMNode)(n.getEditorRef());e.bubbleEl&&!e.bubbleEl.contains(t.target)&&r&&!r.contains(t.target)&&e.setState({isOpen:!1})}},e.handleRef=function(t){e.bubbleEl=t,t?document.addEventListener("click",e.handleClick):document.removeEventListener("click",e.handleClick)},e}return c()(n,[{key:"render",value:function(){var e,t=this.state,n=t.isOpen,r=t.text,o=t.entityData,a=this.props,i=(a.store,a.getLink),l=U()(a,Gn),c=i();return Object(Y.g)(Hn,S()({},l,{isOpen:n,link:c,text:r,entityData:o,onRef:this.handleRef,allowLinkCard:o.url&&(e=o.url,/^https?:/.test(e))&&this.props.allowLinkCard}))}}]),n}(k.a.Component),$n=n(2150),Yn=n(95),Jn=n(144),Xn=n(1079);function Qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var er=function(e){f()(n,e);var t=Qn(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={text:"",url:""},e.handleTextChange=function(t){e.setState({text:t.target.value})},e.handleUrlChange=function(t){e.setState({url:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.handleClose();var n=e.state.text.trim(),r=e.state.url.trim(),o=Xn.a.match(r);if(o.length){var a=o[0].url;e.props.onSubmit({url:a,text:n||r})}},e.handleClose=function(){e.props.onClose()},e.handleFormRef=function(t){t&&(e.setState({text:e.props.defaultText||"",url:e.props.defaultUrl||""}),setTimeout((function(){return e.urlInput.select()})))},e}return c()(n,[{key:"render",value:function(){var e=this,t=this.props.visible,n=this.state,r=n.text,o=n.url;return Object(Y.g)(Yn.b,{overlay:!0,title:"æ’å…¥é“¾æŽ¥",onClose:this.handleClose,maskClosable:!1,hotKeyClosable:!1},t&&Object(Y.g)("form",{className:"LinkModal-form",onSubmit:this.handleSubmit,ref:this.handleFormRef},Object(Y.g)(Jn.a,{large:!0,spread:!0,type:"text",className:"LinkModal-input",placeholder:"è¾“å…¥é“¾æŽ¥æ–‡æœ¬",value:r,onChange:this.handleTextChange,before:Object(Y.g)($n.a,null)}),Object(Y.g)(Jn.a,{large:!0,required:!0,spread:!0,type:"text",className:"LinkModal-input",placeholder:"è¾“å…¥é“¾æŽ¥åœ°å€",value:o,onChange:this.handleUrlChange,onRef:function(t){e.urlInput=t},before:Object(Y.g)(kn.a,null)}),Object(Y.g)(Yn.a,{direction:"horizontal"},Object(Y.g)(N.c,{onClick:this.handleClose,color:"grey"},"å–æ¶ˆ"),Object(Y.g)(N.c,{disabled:!Xn.a.test(o),preset:"primary",color:"blue",type:"submit"},"ç¡®è®¤"))))}}]),n}(b.Component),tr=n(118),nr=function(e,t){var n=e.getCurrentContent().getEntity(t);return n&&n.getData()},rr=function(e,t){return e.getCurrentContent().getBlockMap().findKey((function(e){return e.characterList.find((function(e){return e.getEntity()===t}))}))},or=n(1175),ar=function(e,t,n){var r=nr(e,t),o=rr(e,t);if(o&&r&&r.isCard&&n.title&&n.title!==n.url){var a={isCard:!0,url:r.url};if(n.image){var i=n.image_info||{},l=i.width,c=i.height,s="ipico",u=l/c;u>1.2?s="180x120":u<=.8&&(s="120x160"),a.image=Object(tr.imgUrl)(n.image,s),a.imageWidth=l,a.imageHeight=c}if(n.entity_type){var d=n.entity_type,f=n.entity_data;a.entityType=d,a.entityData=f}return Object(or.a)(e,n.title,a,t,o)}},ir=function(e,t){var n=e.getCurrentContent(),r=t||e.getSelection(),o=r.getStartOffset(),a=r.getEndOffset(),i=n.getBlockForKey(r.getStartKey()).getEntityAt(o),l=n.getBlockForKey(r.getEndKey()).getEntityAt(a),c=i&&i===l&&n.getEntity(i);if(c&&"link"===c.type.toLowerCase()&&!c.data.isPlainText)return i;var s=n.getBlockForKey(r.getEndKey()).getEntityAt(a>0?a-1:a),u=(i&&!l&&i===s||r.isCollapsed())&&s&&n.getEntity(s);return u&&"link"===u.type.toLowerCase()&&!u.data.isPlainText?s:null},lr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=e.getCurrentContent(),a=t||n.url,i=o,l=e;return i=i.createEntity("LINK","MUTABLE",n),i=(i=T.Modifier.replaceText(i,r||e.getSelection(),a,null,i.getLastCreatedEntityKey())).set("selectionAfter",i.getSelectionAfter().merge({hasFocus:!0})),l=T.EditorState.push(e,i,"apply-entity"),T.EditorState.forceSelection(l,i.getSelectionAfter())},cr=function(e,t,n){var r=ir(e);return r?Object(or.a)(e,t,n,r):lr(e,t,n)},sr=n(56),ur=n.n(sr),dr=n(179),fr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.image,r=void 0===n||n,o=ur.a.stringify({url:e,image:Number(r)}),a=Object(dr.a)()||"https://www.zhihu.com";return fetch("".concat(a,"/api/v3/scraper?").concat(o),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then((function(e){return e.json()}))};function pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var hr,gr=function(e){f()(n,e);var t=pr(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={isOpen:!1,entityKey:null},e.open=function(){e.setState({isOpen:!0})},e.close=function(){e.setState({isOpen:!1})},e.handleLinkSubmit=function(t){var n,r=t.text,o=t.url,a=e.state.entityKey,i=e.props,l=i.store,c=i.onSubmit,s=l.getEditorState();if(a){var u=nr(s,a);n=Object.assign(Object.assign({},u),{},{url:o}),u.url!==o&&fr(o).then((function(e){var t=ar(l.getEditorState(),a,e);t&&l.setEditorState(t)})).catch((function(){}))}else n={url:o},O.a.trackEvent(l.getEditorRef(),{id:169});l.setEditorState(cr(s,r,n)),c()},e}return c()(n,[{key:"getDefaultValues",value:function(){var e=this.props.store,t=this.state.entityKey,n=e.getEditorState(),r=n.getSelection(),o=n.getCurrentContent();if(!t)return r.focusKey!==r.anchorKey?null:{defaultText:o.getBlockForKey(r.focusKey).getText().slice(r.getStartOffset(),r.getEndOffset())};var a=nr(n,t).url,i=a,l=o.getBlockForKey(r.focusKey);return l.findEntityRanges((function(e){return e.getEntity()===t}),(function(e,t){i=l.getText().slice(e,t)})),{defaultText:i,defaultUrl:a}}},{key:"render",value:function(){var e=this.state.isOpen;return Object(Y.g)(er,S()({},this.getDefaultValues(),{onClose:this.close,onSubmit:this.handleLinkSubmit,visible:e}))}}]),n}(k.a.Component),mr=function(e,t){if(!t.isCollapsed())return!1;var n=t.focusOffset,r=e.getBlockForKey(t.focusKey),o=n>0?r.getEntityAt(n-1):null,a=o&&e.getEntity(o);if(!a||"link"!==a.getType().toLowerCase())return!1;var i=r.getEntityAt(n),l=i&&e.getEntity(i);return!l||l!==a},vr=function(e){return function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=e;if(mr(t,n)&&e.isInCompositionMode())hr=n.focusOffset,r=T.EditorState.setInlineStyleOverride(e,e.getCurrentInlineStyle().add("fakeInlineStyle"));else if(hr&&!e.isInCompositionMode()){var o=T.Modifier.removeInlineStyle(t,t.getSelectionAfter().merge({anchorOffset:hr}),"fakeInlineStyle");r=T.EditorState.set(e,{currentContent:o.set("selectionAfter",o.getSelectionAfter().merge({anchorOffset:o.getSelectionAfter().focusOffset}))}),hr=null}return r}(e)},yr=function(e,t,n){var r=n.setEditorState,o=t.getCurrentContent(),a=t.getSelection();if(!mr(o,a))return"not-handled";var i=T.Modifier.insertText(o,a,e,t.getCurrentInlineStyle(),null);return r(T.EditorState.push(t,i,"insert-characters")),"handled"},br=n(505),kr=n.n(br),Cr=/^([!#$&-;=?-[\]_a-z~]|%[0-9a-fA-F]{2})+$/,Sr=function(e){var t=e.getCurrentContent(),n=e.getSelection();if(!n.isCollapsed())return null;var r=n.focusOffset,o=n.focusKey,a=t.getBlockForKey(o),i=a.getText().slice(0,r);if(!i)return null;for(var l=[],c=r-1;c>=0&&(" "!==i[c]&&null===a.getEntityAt(c));c--)l.push(i[c]);if(!l.length)return null;l.reverse();var s=l.join(""),u=Xn.a.match(s),d=u&&u[u.length-1];if(!d||d.lastIndex!==s.length)return null;var f=d.lastIndex-d.index,p=kr()(d.url);if(p.pathname&&!Cr.test(p.pathname))return null;if(""===d.schema&&encodeURI(p.hostname)!==p.hostname)return null;if(p.hostname.endsWith(".net")&&""===d.schema&&""===p.pathname)return null;var h=T.SelectionState.createEmpty(o).merge({anchorOffset:r-f,focusOffset:r});return lr(e,d.text,{url:d.url},h)},Er=function(e,t,n){var r,o,a=e.getBlockForKey(t),i="";return a.findEntityRanges((function(e){return e.getEntity()===n}),(function(e,t){r=e,o=t,i=a.getText().slice(r,o)})),{text:i,start:r,end:o}},wr=function(e,t,n){var r,o=e.getCurrentContent(),a=e.getSelection(),i=nr(e,t),l=Er(o,a.focusKey,t),c=l.text,s=l.start,u=l.end,d=o.getBlockForKey(a.focusKey).getText()!==c,f=Object.assign(Object.assign({},i),{},{isCard:!0});r=T.Modifier.removeRange(o,T.SelectionState.createEmpty(a.focusKey).merge({anchorOffset:s,focusOffset:u}));var p=T.EditorState.acceptSelection(e,r.getSelectionAfter()),h=p.getSelection();d?(r=T.Modifier.splitBlock(r,h),p=T.EditorState.push(p,r,"split-block")):p=T.EditorState.push(p,r,"remove-range"),p=Object(me.a)(p,"LINK","IMMUTABLE",f,c);var g=(p=T.EditorState.push(e,p.getCurrentContent(),"undo")).getCurrentContent().getLastCreatedEntityKey(),m=rr(p,g),v=p.getCurrentContent().getBlockForKey(m),y=p.getCurrentContent().getBlockAfter(m);return y&&"atomic"===y.type&&(p=T.EditorState.acceptSelection(p,T.SelectionState.createEmpty(v.key).merge({hasFocus:!0,focusOffset:v.getLength()}))),fr(f.url).then((function(e){var t=ar(n.getEditorState(),g,e);t&&n.setEditorState(t)})).catch((function(){})),p},Or=function(e,t,n){var r=e.getCurrentContent(),o=e.getSelection().focusKey,a=r.getBlockForKey(o);if(!a||"atomic"!==a.type)return e;var i=a.getEntityAt(0);if(!i||i!==t)return e;var l=T.Modifier.setBlockType(r,T.SelectionState.createEmpty(o),"unstyled"),c={url:n.url},s=(l=l.createEntity("LINK","MUTABLE",c)).getLastCreatedEntityKey();return l=T.Modifier.replaceText(l,T.SelectionState.createEmpty(o).merge({focusOffset:a.getLength()}),a.getText(),null,s),T.EditorState.push(e,l,"change-block-type")},Tr=n(1117),Ar=function(e,t){var n=function(e,t){var n=e.getCurrentContent(),r=e.getSelection().focusKey,o=Er(n,r,t).end;return T.SelectionState.createEmpty(r).merge({anchorOffset:o,focusOffset:o})}(e,t),r=Object(Tr.a)(e,t,{isPlainText:!0});return T.EditorState.forceSelection(r,n)},xr=function(e,t,n){var r=e.getCurrentContent(),o=e.getSelection().focusKey,a=r.getBlockForKey(o),i=(null==n?void 0:n.text)||(null==n?void 0:n.link),l=T.Modifier.setBlockType(r,T.SelectionState.createEmpty(o),"unstyled"),c=(l=l.createEntity("LINK","MUTABLE",{isPlainText:!0})).getLastCreatedEntityKey();return l=T.Modifier.replaceText(l,T.SelectionState.createEmpty(o).merge({focusOffset:a.getLength()}),i,null,c),T.EditorState.push(e,l,"change-block-type")},jr=n(2151),_r=n.n(jr),Rr=n(385),Mr=n.n(Rr);function Lr(e,t){var n=e.pos;if(36!==e.src.charCodeAt(n))return!1;var r="$";n+=1;var o=e.src.charCodeAt(n);if(36===o){if(r="$$",n+=1,36===e.src.charCodeAt(n))return!1}else if(32===o||9===o||10===o)return!1;var a=e.src.indexOf(r,n);if(-1===a)return!1;if(92===e.src.charCodeAt(a-1))return!1;var i=a+r.length;if(1===r.length){var l=e.src.charCodeAt(a-1);if(32===l||9===l||10===l)return!1;var c=e.src.charCodeAt(i);if(c>=48&&c<58)return!1}t||(e.push(1===r.length?"inline_math":"display_math","",0).content=e.src.slice(n,a));return e.pos=i,!0}var Br=function(e){e.inline.ruler.push("texMath",Lr),e.renderer.rules.inline_math=function(e,t){return'<img eeimg="1" alt="'.concat(e[t].content,'" />')},e.renderer.rules.display_math=function(e,t){return'<img eeimg="1" alt="'.concat(e[t].content,'" />')}};function Ir(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Nr=new _r.a;Nr.use(Br);var Dr=function(e){var t;if(!e)return!1;var n=null;try{n=Nr.parse(e)}catch(e){return console.error(e),!1}return!(null===(t=n)||void 0===t||!t.length)&&(n.length%3!=0||!Mr()(n,3).every((function(e){var t,n=Ir(Xt.a,e,3),r=n[0],o=n[1],a=n[2];return"paragraph_open"===r.type&&"paragraph_close"===a.type&&"inline"===o.type&&(!(null!==(t=o.children)&&void 0!==t&&t.length)||o.children.every((function(e){return"text"===e.type||"softbreak"===e.type})))})))},Pr={link:function(e,t,n){if(e.length<4)return!1;var r,o,a=e.slice(-4),i=Ir(Xt.a,a,4),l=i[0],c=i[1],s=i[3];return"link_open"===l.type&&"text"===s.type&&" "===s.content&&"!"!==t.charAt(n-1)&&{text:c.content,url:null===(r=l.attrs)||void 0===r||null===(o=r.find((function(e){return"href"===e[0]})))||void 0===o?void 0:o[1]}},image:function(e){if(e.length<2)return!1;var t,n,r=e.slice(-2),o=Ir(Xt.a,r,2),a=o[0],i=o[1];return"image"===a.type&&"text"===i.type&&" "===i.content&&{text:a.content,url:null===(t=a.attrs)||void 0===t||null===(n=t.find((function(e){return"src"===e[0]})))||void 0===n?void 0:n[1]}},texMath:function(e,t,n){if(e.length<2)return!1;var r=e.slice(-2),o=Ir(Xt.a,r,2),a=o[0],i=o[1];return("inline_math"===a.type&&"$"!==t.charAt(n-1)||"display_math"===a.type)&&"text"===i.type&&" "===i.content&&{text:a.content}}},zr={link:"[",image:"!",texMath:"$"},qr={link:")",image:")",texMath:"$"},Kr=function(e){var t=new _r.a("zero");"texMath"===e?t.use(Br):t.enable(e);var n=-1;t.inline.ruler.before(e,"position_before",(function(t){return t.src.charAt(t.pos)===zr[e]&&(n=t.pos),!1}));return{handleBeforeInput:function(r){var o=Object(ot.a)(r.getEditorState()," "),a=o.getCurrentContent(),i=o.getSelection(),l=i.getEndKey(),c=i.getEndOffset(),s=a.getBlockForKey(l),u=s.getText();if(u.charAt(c-2)!==qr[e])return!1;var d=u.slice(0,c);try{var f,p;n=-1;var h=null===(f=t.parseInline(d))||void 0===f||null===(p=f[0])||void 0===p?void 0:p.children;if(null==h||!h.length)return!1;var g=Pr[e](h,d,n);return!!g&&{editorState:o,contentBlock:s,selection:T.SelectionState.createEmpty(l).set("anchorOffset",n).set("focusOffset",c),data:g}}catch(e){return console.error(e),!1}}}},Ur=function(){return!0},Fr=["entityKey","contentState"],Vr=function(e,t){var n=e.getCurrentContent(),r=e.getSelection();return Er(n,r.focusKey,t)},Hr=function(e){return/^https?:/.test(e)},Gr=function(e,t){var n=e.getCurrentContent();if(!t.isCollapsed())return!1;var r=n.getBlockForKey(t.focusKey);if(t.focusOffset!==r.getLength())return!1;var o=ir(e,t);if(!o)return!1;var a=n.getEntity(o);if(a&&"link"===a.type.toLowerCase()&&Hr(a.data.url)){var i=Er(n,r.key,o).text;return r.getText()===i}return!1},Wr=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},Zr={decorator:function(e){return e},allowLinkCard:!1},$r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},Zr),e);var t,n,r,o,a=Kr("link"),i={},l={},c=!1,s=function(e){c=!0,o=setTimeout((function(){c=!1,e()}),150)},u=function(){c=!1,clearTimeout(o)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.getEditorState();r=ir(e);var o=Boolean(r);if(t&&t.setState({entityKey:r}),n){var a,l=null===(a=t)||void 0===a?void 0:a.state.isOpen;n.setState({isOpen:!l&&o,entityData:o?nr(e,r):{},text:o?Vr(e,r).text:""})}},f=Ce(Cn,e.decorator),p=f(Rn);return{decorators:[{strategy:Pe("link","LINK"),component:function(e){var t=e.entityKey,n=e.contentState,r=U()(e,Fr);return n.getEntity(t).getData().isPlainText?Object(Y.g)("span",{className:"nolink"},r.children):Object(Y.g)(wn,S()({},r,{contentState:n,entityKey:t,ref:function(e){l[t]=e}}))}}],blockRendererFn:function(t,n){var r=n.getEditorState;if("atomic"===t.getType()){var o=r().getCurrentContent(),a=t.getEntityAt(0);if(!a)return console.warn("Entity not found",t),null;var i=o.getEntity(a);if("link"===i.getType().toLowerCase()){var c=i.getData();return{editable:!1,component:p,props:{data:c,entityKey:a,newLinkCard:e.newLinkCard,text:Er(r().getCurrentContent(),t.key,a).text,onRef:function(e){l[a]=e},getIsVideoAnswer:e.getIsVideoAnswer}}}}return null},components:[Object(Y.g)(gr,{key:"link_modal",store:i,onSubmit:function(){setTimeout(d)},ref:function(e){t=e}}),Object(Y.g)(Zn,{key:"link_bubble",store:i,entityKey:r,allowLinkCard:e.allowLinkCard,getLink:function(){return l[r]},onEdit:function(){t.open()},onConvertToText:function(e){var t=e.isCard,n=i.getEditorState();t?i.setEditorState(xr(n,r,e)):i.setEditorState(Ar(n,r,e))},onToggle:function(e){var t=i.getEditorState();e.isCard?(i.setEditorState(Or(t,r,e)),O.a.trackEvent(i.getEditorRef(),{id:640})):(i.setEditorState(wr(t,r,i)),O.a.trackEvent(i.getEditorRef(),{id:170}))},ref:function(e){n=e},useV2Feature:e.useV2Feature})],handleBeforeInput:function(t,n,r){if(!this.isEnabled())return"not-handled";if(" "===t){var o,l,c=Sr(n);if(c)return c=Object(ot.a)(c," "),i.setEditorState(c),O.a.trackEvent(i.getEditorRef(),{id:169}),"handled";if(null!==(o=(l=e).getMarkdownEnabled)&&void 0!==o&&o.call(l)){var s=a.handleBeforeInput(i);if(s&&s.data){var u=s.editorState,d=s.contentBlock,f=s.selection,p=s.data,h=p.url,g=p.text,m=f.getStartOffset(),v=f.getEndOffset(),y=d.getText().slice(m,v).match(/\]\( */);if(y){var b=m+y.index+y[0].length,k=d.getCharacterList().get(b).getEntity();if(k){var C=u.getCurrentContent().getEntity(k);"link"===C.type.toLowerCase()&&(h=C.data.url)}}var S=Xn.a.match(h);if(null!=S&&S.length)return i.setEditorState(lr(u,g,{url:S[0].url},f)),"handled"}}}return yr(t,n,r)},handlePastedText:function(e,t,n){var r=n.getSelection();if(r.isCollapsed())return"not-handled";if(r.focusKey!==r.anchorKey)return"not-handled";var o=Xn.a.match(e);if(!o||1!==o.length||0!==o[0].index||o[0].lastIndex!==e.length)return"not-handled";var a=n.getCurrentContent().getBlockForKey(r.focusKey).getText().slice(r.getStartOffset(),r.getEndOffset()),l=cr(n,a,{url:o[0].url});return i.setEditorState(l),setTimeout(d),"handled"},keyBindingFn:function(e){if(75===e.keyCode&&T.KeyBindingUtil.hasCommandModifier(e))return"insert-link"},isEnabled:function(){return"code-block"!==T.RichUtils.getCurrentBlockType(i.getEditorState())},handleCommand:function(n){if(!this.isEnabled())return"not-handled";if("split-block"===n){var r=i.getEditorState(),o=r.getSelection();if(e.allowLinkCard&&Gr(r,o)){var a=ir(r,o);return i.setEditorState(wr(r,a,i)),O.a.trackEvent(i.getEditorRef(),{id:170}),"handled"}var l=Sr(r);if(l){if(O.a.trackEvent(i.getEditorRef(),{id:640}),e.allowLinkCard&&Gr(l,o)){var c=l.getCurrentContent().getLastCreatedEntityKey();i.setEditorState(wr(l,c,i)),O.a.trackEvent(i.getEditorRef(),{id:170})}else{var s=T.Modifier.splitBlock(l.getCurrentContent(),l.getSelection());l=T.EditorState.push(l,s,"split-block"),i.setEditorState(l)}return"handled"}}if("insert-link"===n&&t)return t.open(),"handled";if(n.startsWith("insert-link:")){var u=n.replace("insert-link:","");if(u&&Hr(u)){var d=i.getEditorState();return i.setEditorState(lr(d,"",{url:u})),"handled"}return"not-handled"}if(n.startsWith("insert-link-card:")){var f=n.replace("insert-link-card:","");if(f&&Hr(f)){var p=i.getEditorState(),h=(p=lr(p,"",{url:f})).getCurrentContent().getLastCreatedEntityKey();return i.setEditorState(wr(p,h,i)),"handled"}return"not-handled"}return"not-handled"},onFocus:function(){s(d)},onBlur:function(){u()},onChange:function(e,t){return c||setTimeout(d),vr(e)},initialize:function(e){var t=e.getEditorRef,n=e.getEditorState,r=e.setEditorState;i.getEditorRef=t,i.getEditorState=n,i.setEditorState=r},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1],i=o.type,l=o.data;return"link"===i.toLowerCase()?l.isCard?l.image?l.entityType?bn.a.renderToStaticMarkup(Object(Y.g)("a",{href:l.url,"data-draft-node":"block","data-draft-type":"link-card","data-image":l.image,"data-image-width":l.imageWidth,"data-image-height":l.imageHeight,"data-entity-type":l.entityType,"data-entity-data":JSON.stringify(l.entityData),dangerouslySetInnerHTML:{__html:a}})):bn.a.renderToStaticMarkup(Object(Y.g)("a",{href:l.url,"data-draft-node":"block","data-draft-type":"link-card","data-image":l.image,"data-image-width":l.imageWidth,"data-image-height":l.imageHeight,dangerouslySetInnerHTML:{__html:a}})):bn.a.renderToStaticMarkup(Object(Y.g)("a",{href:l.url,"data-draft-node":"block","data-draft-type":"link-card",dangerouslySetInnerHTML:{__html:a}})):l.isPlainText?bn.a.renderToStaticMarkup(Object(Y.g)("span",{className:"nolink",dangerouslySetInnerHTML:{__html:a}})):bn.a.renderToStaticMarkup(Object(Y.g)("a",{href:l.url,dangerouslySetInnerHTML:{__html:a}})):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];return Ue(a)&&a.classList.contains("nolink")?T.Entity.create("link","MUTABLE",{isPlainText:!0}):Ue(a)&&"link-card"===a.getAttribute("data-draft-type")?T.Entity.create("link","IMMUTABLE",{url:a.getAttribute("href"),isCard:!0,image:a.getAttribute("data-image"),imageWidth:a.getAttribute("data-image-width"),imageHeight:a.getAttribute("data-image-height"),entityType:a.getAttribute("data-entity-type"),entityData:Wr(a.getAttribute("data-entity-data"))}):"a"===o?T.Entity.create("link","MUTABLE",{url:a.href}):e.apply(void 0,n)}}},toolbar:{section:rt.a.BASIC_MEDIA,label:"æ’å…¥é“¾æŽ¥",text:"é“¾æŽ¥",shortcut:"âŒ˜+K",icon:kn.a,commandName:"insert-link",priority:1},toolbarV2:{section:W.a.BASIC_MEDIA,label:"æ’å…¥é“¾æŽ¥",text:"é“¾æŽ¥",shortcut:"âŒ˜+K",icon:kn.a,commandName:"insert-link",priority:1}}};function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Jr=function(e){f()(n,e);var t=Yr(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.contentState,n=e.entityKey,r=e.children,o=e.target,a=t.getEntity(n).getData();return Object(Y.g)(k.a.Fragment,null," ",Object(Y.g)("a",{target:o,href:a.url,className:"TextLink"},Object(Y.g)(kn.c,{size:17,center:!0,style:{marginRight:4}}),r))}}]),n}(k.a.Component);Jr.propTypes={contentState:y.a.object.isRequired,entityKey:y.a.string.isRequired,children:y.a.node,target:y.a.string},Jr.defaultProps={target:"_blank"};var Xr=Jr,Qr=function(e,t,n,r){var o=e.getCurrentContent(),a=e.getSelection(),i=T.Modifier[r](o,a,t+" "),l=i.createEntity("text-link","IMMUTABLE",n),c=l.getLastCreatedEntityKey(),s=a.getStartOffset(),u=new T.SelectionState({anchorKey:a.getAnchorKey(),anchorOffset:s,focusKey:a.getAnchorKey(),focusOffset:s+t.length}),d=T.Modifier.applyEntity(l,u,c),f=T.EditorState.push(e,d,"apply-entity");return T.EditorState.forceSelection(f,i.getSelectionAfter())},eo=["entityKey","contentState"],to=function(){var e={};return{initialize:function(t){var n=t.getEditorRef,r=t.getEditorState,o=t.setEditorState;e.getEditorRef=n,e.getEditorState=r,e.setEditorState=o},decorators:[{strategy:Pe("text-link"),component:function(e){var t=e.entityKey,n=e.contentState,r=U()(e,eo);return Object(Y.g)(Xr,S()({},r,{contentState:n,entityKey:t}))}}],isEnabled:function(){return"code-block"!==T.RichUtils.getCurrentBlockType(e.getEditorState())},handlePastedText:function(t,n,r){var o=r.getSelection();if(o.focusKey!==o.anchorKey)return"not-handled";var a=Xn.a.match(t);if(!a||1!==a.length||0!==a[0].index||a[0].lastIndex!==t.length)return"not-handled";var i=r.getCurrentContent().getBlockForKey(o.focusKey).getText().slice(o.getStartOffset(),o.getEndOffset())?"replaceText":"insertText";return fr(a[0].url).then((function(t){var n=t.title,o=Qr(r,n,{url:a[0].url},i);e.setEditorState(o)})).catch((function(){var t=Qr(r,"é“¾æŽ¥",{url:a[0].url},i);e.setEditorState(t)})),"handled"},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1],i=o.type,l=o.data;return"text-link"===i.toLowerCase()?bn.a.renderToStaticMarkup(Object(Y.g)("a",{href:l.url,"data-insert-way":"force","data-draft-node":"inline","data-draft-type":"text-link",dangerouslySetInnerHTML:{__html:a}})):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[1];return Ue(o)&&"text-link"===o.getAttribute("data-draft-type")?T.Entity.create("text-link","IMMUTABLE",{url:o.href}):e.apply(void 0,n)}}}}},no=n(2199),ro=n(1006);function oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ao=function(e){f()(n,e);var t=oo(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={isModalShow:!1},e.check=function(t){var n=e.props.type;I.a.get("Editable::watermarkHintHasShown:".concat(n))?t():(e.setState({isModalShow:!0}),e.nextFunction=t)},e.handleCloseModal=function(){var t=e.props.type;e.setState({isModalShow:!1}),I.a.set("Editable::watermarkHintHasShown:".concat(t),!0),e.nextFunction()},e}return c()(n,[{key:"render",value:function(){var e=this.state.isModalShow;return e?Object(Y.g)(Yn.b,{className:"WatermarkHint-Modal",maskClosable:!1,onClose:this.handleCloseModal},e&&Object(Y.g)("div",{className:"WatermarkHint-modalContent"},Object(Y.g)("div",{className:"WatermarkHint-modalBody"},Object(Y.g)("img",{src:"//zhstatic.zhihu.com/editor/watermarkhint.png",width:"198"}),Object(Y.g)("h1",{className:"WatermarkHint-modalTitle"},"çŸ¥ä¹Žä¸Šçº¿å›¾ç‰‡æ°´å°åŠŸèƒ½"),Object(Y.g)("p",null,"ä¸ºäº†ç»´æŠ¤ä½ çš„å†…å®¹ç‰ˆæƒï¼Œå‘å¸ƒåŽå›¾ç‰‡ä¼šåœ¨å³ä¸‹è§’å¢žåŠ æ°´å°"),Object(Y.g)("p",null,"ä½ å¯ä»¥åœ¨çŸ¥ä¹Žæœ€æ–°ç‰ˆ App çš„ã€Œè®¾ç½®ã€é¡µé¢è¿›è¡Œç®¡ç†ã€‚")),Object(Y.g)(Yn.a,null,Object(Y.g)(N.c,{preset:"primary",color:"blue",onClick:this.handleCloseModal},"æˆ‘çŸ¥é“äº†")))):null}}]),n}(b.Component),io=function(e,t,n){var r=e.getCurrentContent().mergeEntityData(t,n),o=T.EditorState.set(T.EditorState.push(e,r,"apply-entity"),{lastChangeType:"apply-entity"});return T.EditorState.forceSelection(o,e.getSelection())},lo=n(1397),co=n(1254);function so(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var uo=function(e){f()(n,e);var t=so(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).isReady=!1,e.imgRef=k.a.createRef(),e.saveImageWidthHeight=function(){Object(co.c)(e.props.blockKey)},e.handleLoad=function(){var t,n;e.isReady=!0,null===(t=(n=e.props).setIsImageReady)||void 0===t||t.call(n,!0),requestAnimationFrame(e.saveImageWidthHeight)},e}return c()(n,[{key:"componentDidUpdate",value:function(e){this.isReady&&e.data.size!==this.props.data.size&&requestAnimationFrame(this.saveImageWidthHeight)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,r=e.onClick,o=e.onMouseDown,a=e.data,i=e.isBlock;return Object(Y.g)("img",{className:x()("Image",t,{"Image--isBlock":i}),ref:this.imgRef,style:n,src:Object(lo.a)(a.src),alt:a.alt,onClick:r,onMouseDown:o,onLoad:this.handleLoad,"data-size":a.size,"data-rawwidth":a.rawWidth,"data-rawheight":a.rawHeight,"data-watermark":a.watermark,"data-original-src":a.originalSrc,"data-watermark-src":a.watermarkSrc,"data-private-watermark-src":a.privateWatermarkSrc})}}]),n}(k.a.Component);uo.defaultProps={isBlock:!0};var fo=uo,po=n(1654),ho=n(382),go=n(1040),mo=["showZa"];function vo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var yo=function(e){var t=e.showZa,n=U()(e,mo);return t?Object(Y.g)(j.a,S()({shouldTrackShow:!0,zaText:!0,zaBlock:"ImageCaption",zaType:"Button"},n)):(null==n?void 0:n.children)||null},bo=function(e){f()(n,e);var t=vo(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={isCaptionEditing:!1,captionPosition:null,editingCaption:null,placeHolder:"æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰"},e.handleCaptionClick=function(t){t.preventDefault(),e.startCaptionEditing()},e.handleCaptionMouseDown=function(e){e.preventDefault()},e.handleCaptionInputChange=function(){e.editCaption()},e.handleCaptionInputKeyDown=function(t){13!==t.keyCode&&27!==t.keyCode||(t.preventDefault(),e.endCaptionEditing({save:13===t.keyCode,focus:13===t.keyCode}))},e.handleCaptionInputBlur=function(){var t=e.props,n=t.handlePreventScroll;t.useImageOperationV2&&n&&n(),e.endCaptionEditing()},e}return c()(n,[{key:"getCaptionPosition",value:function(){var e=this.caption.getBoundingClientRect();return{left:window.pageXOffset+e.left,top:window.pageYOffset+e.top,width:e.width,height:e.height}}},{key:"adjustCaptionHeight",value:function(){this.captionInput.style.height="0";var e=Math.max(this.captionInput.scrollHeight,21);this.caption.style.height="".concat(e,"px"),this.captionInput.style.height="".concat(e,"px")}},{key:"startCaptionEditing",value:function(){var e=this;this.setState({isCaptionEditing:!0,captionPosition:this.getCaptionPosition(),editingCaption:Object(ho.cutStringWidth)(this.props.data.caption||"",280)},(function(){e.captionInput.focus({preventScroll:!0}),e.props.useImageOperationV2||(e.captionInput.select(),requestAnimationFrame((function(){e.setState({captionPosition:e.getCaptionPosition()})})))}))}},{key:"editCaption",value:function(){var e=this,t=this.captionInput.value,n=Object(ho.cutStringWidth)(t.replace(/\n/g,""),280);n===t&&this.adjustCaptionHeight(),this.setState({editingCaption:n},(function(){n!==t&&e.adjustCaptionHeight()}))}},{key:"endCaptionEditing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.save,n=void 0===t||t,r=e.focus,o=void 0!==r&&r;if(this.caption.style.height=null,n){var a=this.state.editingCaption;this.props.onImageCaptionChange&&this.props.onImageCaptionChange(a,o)}this.setState({isCaptionEditing:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.isFocused,o=t.allowImageCaption,a=t.useImageOperationV2,i=this.state,l=i.isCaptionEditing,c=i.captionPosition,s=i.editingCaption,u=i.placeHolder,d=a||(n.caption||r||l);return Object(Y.g)("div",{className:"Image-captionContainer","data-size":n.size},Object(Y.g)("div",null,this.props.children),o&&d&&Object(Y.g)(yo,{showZa:a},Object(Y.g)("figcaption",{ref:function(t){t&&(e.caption=t)},className:x()("Image-caption",{"is-editing":l,"is-placeholder":!n.caption,"Image-captionV2":a}),onClick:this.handleCaptionClick,onMouseDown:this.handleCaptionMouseDown},n.caption||"æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰")),l&&Object(Y.g)(ht.a,null,Object(Y.g)(go.a,null,Object(Y.g)("div",{className:x()("Image-captionInput",{"Image-captionInputV2":a}),style:c},Object(Y.g)("textarea",{ref:function(t){return e.captionInput=t},type:"text",onFocus:function(){a&&e.setState({placeHolder:""})},placeholder:u,value:s,onChange:this.handleCaptionInputChange,onBlur:this.handleCaptionInputBlur,onKeyDown:this.handleCaptionInputKeyDown})))))}}]),n}(k.a.Component);bo.decorate=function(e){return function(t){return Object(Y.g)(bo,t,Object(Y.g)(e,t))}};var ko=bo,Co=n(300),So=n(2946),Eo=n(2947),wo=n(2948),Oo=n(2949),To=Object.assign;function Ao(e){return k.a.createElement(Bn.a,To(To({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Brush24"+(t?" "+t:""))}),k.a.createElement("path",{d:"M7.489 12.062c-.678.384-1.207.892-1.447 1.415a.752.752 0 01-.057.101c-.337.507-.385 1.022-.42 1.617l-.003.062c-.015.263-.034.59-.107.886-.087.35-.263.724-.641 1.005-.351.26-.764.326-1.04.352l-.045.004c1.105 1.301 3.252 1.99 5.307 1.99 1.173 0 2.288-.373 3.097-1.045.793-.66 1.32-1.631 1.32-2.927A4.044 4.044 0 009.41 11.48c-.523 0-1.244.2-1.92.583zm-.74-1.305c.843-.477 1.818-.778 2.66-.778a5.544 5.544 0 015.544 5.543c0 1.75-.732 3.14-1.86 4.08-1.114.926-2.583 1.392-4.057 1.392-2.414 0-5.337-.847-6.764-2.93a2.758 2.758 0 01-.314-.57 1.13 1.13 0 01-.041-.743.968.968 0 01.544-.593c.177-.078.358-.103.48-.115.12-.012.251-.016.358-.02h.018c.12-.004.221-.008.317-.017.096-.009.167-.021.219-.036.049-.014.066-.026.066-.026.018-.014.05-.037.08-.162.038-.154.05-.348.069-.674.035-.592.086-1.453.636-2.311.424-.882 1.222-1.573 2.046-2.04z",fillRule:"evenodd",clipRule:"evenodd"}),k.a.createElement("path",{d:"M18.892 4.793a.867.867 0 00-1.36-1.06l-7.084 7.487a.75.75 0 01-1.09-1.031l7.084-7.488A2.367 2.367 0 0120.157 5.6l-5.544 8.704a.75.75 0 01-1.265-.806l5.544-8.704z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function xo(e){return k.a.createElement(Ao,To(To({},e),{className:function(){return"Zi Zi--Brush"+(e.className?" "+e.className:"")}}))}function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var _o=[{name:"small",icon:So.a,text:"å±…ä¸­",condition:function(e){return e.data.rawWidth>=600}},{name:"normal",text:"å…¨å®½",icon:Eo.a},{name:"left",icon:wo.a,text:"å·¦å¯¹é½",condition:function(e){return e.allowFloatImage}},{name:"right",icon:Oo.a,text:"å³å¯¹é½",condition:function(e){return e.allowFloatImage}}],Ro=[{name:"small",icon:So.a,text:"åˆ‡æ¢ä¸ºå±…ä¸­",condition:function(e){return e.data.rawWidth>=600&&"small"!==e.data.size}},{name:"normal",text:"åˆ‡æ¢ä¸ºå…¨å®½",icon:Eo.a,condition:function(e){return"normal"!==e.data.size}}],Mo={name:"k008qs",styles:"display:flex;"},Lo={name:"k008qs",styles:"display:flex;"},Bo={name:"15y8ila",styles:"position:absolute;bottom:8px;width:100%;display:flex;justify-content:center;"},Io={name:"1baulvz",styles:"display:inline-block;"},No={name:"k008qs",styles:"display:flex;"},Do=function(e){f()(n,e);var t=jo(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).changeSize=function(t){e.props.onImageSizeChange&&e.props.onImageSizeChange(t)},e}return c()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.isFocused,o=t.handleShowImageEditor,a=t.allowImageEditor,i=t.useV2Feature,l=t.useImageOperationV2,c=t.handlePreventScroll,s=t.isImageReady,u=(l?Ro:_o).filter((function(t){return!t.condition||t.condition(e.props)})),d=Object(Y.g)(k.a.Fragment,null,i&&Object(Y.g)(j.c,{as:N.c,shouldTrackClick:!0,shouldTrackShow:l,zaText:!0,zaType:"Button",preset:"plain",className:x()("Image-editButton",{"Image-editButtonV2":l,"Image-borderNone":!u.length}),css:Mo,onClick:function(){o(n.originalSrc||n.src)}},Object(Y.g)(xo,null),n.rawWidth<180&&l?null:Object(Y.g)("span",null,l?"ç¼–è¾‘":"å›¾ç‰‡ç¼–è¾‘")),u.map((function(t){return Object(Y.g)(j.c,{as:N.c,zaType:"Button",zaText:t.text,shouldTrackClick:!0,shouldTrackShow:l,key:t.name,preset:"plain",className:x()("Image-resizerButton",{"is-active":n.size===t.name,"Image-resizerButtonV2":l}),css:Lo,onClick:function(){return e.changeSize(t.name)}},Object(Y.g)(t.icon,null),i&&Object(Y.g)("span",null,t.text))})));return Object(Y.g)(j.b,{block:"ImageTools"},Object(Y.g)("div",{className:"Image-resizerContainer",css:Object(Co.a)(Object.assign({},l&&{position:"relative",lineHeight:"normal",clear:"both"}),""),"data-size":n.size,onClick:function(e){l&&(e.stopPropagation(),c&&c())}},Object(Y.g)("div",{ref:function(t){return e.target=t}},this.props.children),l&&Boolean(s)&&(u.length>1||a&&i)&&Object(Y.g)("div",{className:"Image-resizerWrap",css:Bo,onMouseDown:function(e){return e.preventDefault()}},Object(Y.g)("div",{className:"Image-buttonWrap",css:Io,ref:function(t){return e.buttonWrap=t}},Object(Y.g)("div",{className:"Image-resizerV2",css:function(e){return{display:"flex",justifyContent:"center",background:e.colorMod(e.colors.GBK02A).alpha(.5),borderRadius:"2px"}}},d))),!l&&Object(Y.g)(Pn.a,{target:this.target,isOpen:r&&(u.length>1||a&&i),repositionKey:n.size,placement:"top",arrowed:!i,onMouseDown:function(e){return e.preventDefault()}},Object(Y.g)("div",{className:"Image-resizer",css:No},Object(Y.g)(j.f,{zaType:"Popup"}),d))))}}]),n}(k.a.Component);Do.decorate=function(e){return function(t){return Object(Y.g)(Do,t,Object(Y.g)(e,t))}};var Po=Do,zo=n(436);var qo={name:"xi606m",styles:"text-align:center;"};function Ko(e){var t=e.children,n=e.data,r=e.handleDeleteImage,o=e.handlePreventScroll,a=e.isImageReady;return Object(Y.g)("div",{className:"ImageDelete-Container",css:qo},Object(Y.g)("div",{className:"ImageDelete-Wrapper",css:Object(Co.a)(Object.assign({position:"relative",display:"inline-block"},"small"===(null==n?void 0:n.size)&&{maxWidth:"40%",margin:"0  auto","& .Image":{maxWidth:"100% !important"}}),""),onClick:function(e){e.stopPropagation(),o&&o()}},t,Boolean(a)&&Object(Y.g)(j.a,{as:"div",shouldTrackShow:!0,zaText:"åˆ é™¤",zaType:"Button",css:function(e){return{position:"absolute",top:"-12px",right:"-11px",width:"23px",height:"23px",lineHeight:"23.5px",textAlign:"center",borderRadius:"50%",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.5),color:e.colors.GBK99A,backdropFilter:"blur(27.1828px)",cursor:"pointer"}},onClick:function(e){e.preventDefault(),r&&r(e)}},Object(Y.g)(zo.a,{center:!0,width:"15px",height:"15px"}))))}Ko.decorate=function(e){return function(t){return Object(Y.g)(Ko,t,Object(Y.g)(e,t))}};var Uo=n(58);function Fo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Vo="Editor::toolbarImageEditorAttentionShown",Ho={name:"q7m2vl",styles:"white-space:nowrap;line-height:40px;font-size:14px;"};function Go(e){var t=e.children,n=Object(b.useState)(!1),r=Fo(Xt.a,n,2),o=r[0],a=r[1],i=Object(b.useRef)(null);return Object(b.useEffect)((function(){I.a.get(Vo)||(a(!0),I.a.set(Vo,!0),setTimeout((function(){a(!1)}),5e3))}),[]),Object(Y.g)(k.a.Fragment,null,Object(Y.g)("div",{className:"ImageEditorGuide-Container",ref:i},t),Object(Y.g)(Pn.a,{target:i.current,isOpen:o,placement:"top",arrowed:!0,css:function(e){return{"&.Popover-content":{background:e.colors.GBL01A},".Popover-arrow::after":{background:e.colors.GBL01A}}}},Object(Y.g)(Uo.Text,{px:"16px",color:"GBK99A",css:Ho},"ç‚¹å‡»å›¾ç‰‡å¯ä»¥è¿›è¡Œç¼–è¾‘")))}Go.decorate=function(e){return function(t){return t.data.shouldShowImageEditorGuide?Object(Y.g)(Go,t,Object(Y.g)(e,t)):Object(Y.g)(e,t)}};var Wo=n(1734);function Zo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function $o(e){var t=e.children,n=Object(b.useState)(!1),r=Zo(Xt.a,n,2),o=r[0],a=r[1];return k.a.cloneElement(t,{isImageReady:o,setIsImageReady:a})}$o.decorate=function(e){return function(t){return Object(Y.g)($o,t,Object(Y.g)(e,t))}};var Yo=n(302),Jo=n(1313);function Xo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ea(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Qo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return ea(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ta=["image/webp","image/jpg","image/jpeg","image/png","image/gif"],na=function(e){return!/(zhihu|zhimg)\.com/.test(e.src)},ra=function(e,t){return Object.keys(e).reduce((function(n,r){var o=e[r];return t(o)&&(n[r]=o),n}),{})},oa={decorator:function(e){return e},allowImageCaption:!1,loadingPreventScroll:!1},aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},oa),e);var t=Kr("image"),n={},r=Object(b.createRef)(null),a=Object(b.createRef)(null),i=Ce(Cn,e.decorator),l=Ce.apply(void 0,Qo(o.a,[i,$o.decorate,ko.decorate,e.allowResizeImage&&Po.decorate,e.allowImageEditor&&!e.useImageOperationV2&&Go.decorate,co.a.decorate,e.useImageOperationV2&&Ko.decorate].filter(Boolean)))(fo),c=i(po.a),s=function(e,t){n.setEditorState(Object(me.a)(n.getEditorState(),"image","IMMUTABLE",Object.assign({upload:e,size:"normal"},t)))},u=function(e,t){var r=n.getEditorState(),o=t.getBlockMap().findKey((function(t){return"atomic"===t.getType()&&t.getEntityAt(0)===e})),a=t.getBlockMap().delete(o),i=t.getKeyAfter(o),l=new T.SelectionState({hasFocus:!0,anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:0}),c=t.merge({blockMap:a,selectionAfter:l,selectionBefore:l});n.setEditorState(T.EditorState.push(r,c,"remove-range"))},d=function(){if(document.documentElement){if(e.loadingPreventScroll)return;e.loadingPreventScroll=!0;var t=null,n=document.documentElement.scrollTop||0;document.documentElement.style.position="fixed",document.documentElement.style.top="-".concat(n,"px"),document.documentElement.style.width="100%",document.documentElement.style.overflow="hidden",t=setTimeout((function(){document.documentElement.style.position="",document.documentElement.style.width="auto",document.documentElement.style.overflow="auto",document.documentElement.scrollTo({top:n}),e.loadingPreventScroll=!1,clearTimeout(t)}),0)}},f=function(e,t){n.setEditorState(Object(Tr.a)(n.getEditorState(),e,Object.assign(Object.assign({},t),{},{size:"normal",shouldShowImageEditorGuide:!0})))},p=function(e,t){n.setEditorState(io(n.getEditorState(),e,{error:t}))},h=function(e,t){n.setEditorState(io(n.getEditorState(),e,t))},g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n.getEditorState(),a=T.EditorState.set(io(o,e,{caption:t}),{selection:o.getSelection()});if(r){var i=a.getCurrentContent(),l=i.getBlockMap().findKey((function(t){return"atomic"===t.getType()&&t.getEntityAt(0)===e}));if(l){var c=i.getKeyAfter(l);a=T.EditorState.forceSelection(a,new T.SelectionState({hasFocus:!0,anchorKey:c,anchorOffset:0,focusKey:c,focusOffset:0}))}}n.setEditorState(a)},m=function(){a.current.value=null,e.editingContentType?r.current.check((function(){a.current.click()})):a.current.click()},v=function(e){return new Promise((function(t,n){var r=document.createElement("img");r.src=e,r.setAttribute("src",e),r.complete?t(r):r.onload=function(){t(r)},r.onerror=function(e){n(e)}}))},y=function(e,t,r){Object(co.b)(t),n.setEditorState(io(n.getEditorState(),e,{size:r}))},k=function(){var t=0,r=n.getEditorState(),o=function(e,t,o){r=Object(me.a)(r,"image","IMMUTABLE",Object.assign({upload:e,size:"normal"},t),void 0,{isBatched:!0,isLastOneOfBatch:o}),o&&n.setEditorState(r)},a=function(t,n,r){e.onImageUpload&&o({type:"file",value:t},n,r)},i=function(n){var r,o=Xo(n,!0);try{var i=function(){var o=r.value;Object(ro.b)({file:o,preset:ro.a.content}).then((function(){"image/gif"!==o.type?Object(Yo.a)(o).then((function(e){var r=++t===n.length;a(e,void 0,r)})):Object(Yo.a)(o).then((function(r){v(window.URL.createObjectURL(r)).then((function(e){var o=++t===n.length;a(r,{rawWidth:e.width,rawHeight:e.height},o)})).catch((function(){t++,e.uploadImageError("other")}))}))})).catch((function(n){t++,e.uploadImageError(n)}))};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}};return i.apply(void 0,arguments)},C=function(e){k(e.target.files)};return e.uploadManager.on("error",(function(t,n){"image"===n&&e.disableImageUpload||e.onUploadError(t,n)})),Object.assign(Object.assign({initialize:function(e){Object.assign(n,e)},insertImage:s,handlePastedFiles:function(t){if(e.disableImageUpload)return"not-handled";var n=t.length;return(t=t.filter((function(e){return ta.includes(e.type)}))).length&&k(t),t.length!==n&&e.uploadImageError("type"),"handled"},handleDroppedFiles:function(t){var n=t.length;(t=t.filter((function(e){return ta.includes(e.type)}))).length&&k(t),t.length!==n&&e.uploadImageError("type")},getImages:function(e){return Object(Jo.a)(n.editorState()).filter((function(t){if("image"===t.getType()||"IMAGE"===t.getType()){var n=t.getData();switch(e){case"upload":return Boolean(n.upload&&!n.error);case"error":return Boolean(n.error);default:return!0}}return!1}))},blockRendererFn:function(t,n){var r=n.getEditorState;if("atomic"===t.getType()){var o=t.getKey(),a=r().getCurrentContent(),i=t.getEntityAt(0);if(!i)return console.warn("Entity not found",t),null;var s=a.getEntity(i),m=s.getType();if("image"===m||"IMAGE"===m){var b=s.getData();return b.upload?{editable:!1,component:c,props:{data:b,uploadManager:e.uploadManager,disableImageUpload:e.disableImageUpload,onImageUploaded:function(e){return f(i,Object.assign({caption:b.caption},e))},onImageUploadError:function(e){return p(i,e)}}}:{editable:!1,component:l,props:{data:b,entityKey:i,blockKey:o,allowFloatImage:e.allowFloatImage,allowImageCaption:e.allowImageCaption,allowImageEditor:e.allowImageEditor,onImageLoaded:function(e){return h(i,e)},onImageCaptionChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.apply(void 0,[i].concat(t))},onImageSizeChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.apply(void 0,[i,o].concat(t))},useV2Feature:e.useV2Feature,useImageOperationV2:e.useImageOperationV2,loadImageAsync:function(e){return v(e)},handleDeleteImage:function(){return u(i,a)},handlePreventScroll:function(){return d()},handleShowImageEditor:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e).handleShowImageEditor.apply(t,[i,o].concat(r))}}}}}return null},handleCommand:function(t){return"insert-image"===t?e.disableImageUpload?(e.uploadImageError("disable-question-answer-image-upload"),"not-handled"):(m(),"handled"):"not-handled"},handleBeforeInput:function(r){var o,a;if(null===(o=(a=e).getMarkdownEnabled)||void 0===o||!o.call(a))return"not-handled";if(" "!==r)return"not-handled";if("unstyled"!==T.RichUtils.getCurrentBlockType(n.getEditorState()))return"not-handled";var i=t.handleBeforeInput(n);if(i&&i.data){var l=i.editorState,c=i.contentBlock,s=i.selection,u=i.data,d=u.url,f=u.text,p=Xn.a.match(d);if(null!=p&&p.length){var h=s.getEndOffset()-s.getStartOffset()<c.getText().length,g=T.Modifier.removeRange(l.getCurrentContent(),s,"backward"),m=T.EditorState.acceptSelection(l,g.getSelectionAfter()),v=m.getSelection();return h?(g=T.Modifier.splitBlock(g,v),m=T.EditorState.push(m,g,"split-block")):m=T.EditorState.push(m,g,"remove-range"),m=Object(me.a)(m,"image","IMMUTABLE",{upload:{type:"url",value:p[0].url},size:"normal",caption:f}),n.setEditorState(m),"handled"}}return"not-handled"},components:[e.editingContentType&&Object(Y.g)(ao,{key:"watermark_hint",type:e.editingContentType,ref:r}),Object(Y.g)("input",{key:"image_input",multiple:!0,type:"file",style:{display:"none"},accept:ta,ref:a,onChange:C})].filter(Boolean),draft2html:{entityToHTML:function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=r[0];return"image"===a.type?a.data.upload?" ":(e.useImageOperationV2&&"æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰"===a.data.caption&&(a.data.caption=""),a.data.rawWidth&&a.data.rawHeight?bn.a.renderToStaticMarkup(Object(Y.g)("img",{src:a.data.src,"data-caption":a.data.caption||"","data-size":a.data.size||"normal","data-rawwidth":a.data.rawWidth,"data-rawheight":a.data.rawHeight,"data-watermark":a.data.watermark||"","data-original-src":a.data.originalSrc||"","data-watermark-src":a.data.watermarkSrc||"","data-private-watermark-src":a.data.privateWatermarkSrc||""})):bn.a.renderToStaticMarkup(Object(Y.g)("img",{src:a.data.src,"data-caption":a.data.caption||"","data-size":a.data.size||"normal"}))):t.apply(void 0,r)}}},html2draft:{htmlToEntity:function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=r[0],i=r[1];if("img"===a){var l;if(Ke(i)){var c=i.src,s=i.getAttribute("data-size")||"normal",u=i.width,d=i.height,f=parseInt(i.getAttribute("data-rawwidth"),10),p=parseInt(i.getAttribute("data-rawheight"),10),h=i.getAttribute("data-watermark"),g=i.getAttribute("data-original-src"),m=i.getAttribute("data-watermark-src"),v=i.getAttribute("data-private-watermark-src"),y=i.getAttribute("data-caption")||"";e.useImageOperationV2&&"æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰"===y&&(y="");var b=ra({src:c,caption:y,size:s,width:u,height:d,rawWidth:f,rawHeight:p,watermark:h,originalSrc:g,watermarkSrc:m,privateWatermarkSrc:v},Boolean);(i.hasAttribute("reupload")||na(i))&&(b.upload={type:"url",value:c}),l=T.Entity.create("image","IMMUTABLE",b)}else"import_image_fail"===i.getAttribute("data-image-status")&&(l=T.Entity.create("image","IMMUTABLE",{src:i.src,error:{status:"import_image_fail",message:"å›¾ç‰‡å¯¼å…¥å¤±è´¥"}}));return l}return t.apply(void 0,r)}}}},!e.hideImageToolbar&&{toolbar:{section:rt.a.BASIC_MEDIA,label:"ä¸Šä¼ å›¾ç‰‡",icon:no.a,commandName:"insert-image",priority:2}}),!e.hideImageToolbar&&{toolbarV2:[{name:"image",isMenuToggler:!0,icon:no.a,label:"å›¾ç‰‡",Component:Wo.a,section:W.a.BASIC_MEDIA,priority:2},{section:W.a.BASIC_MEDIA,parentName:"image",label:"ä¸Šä¼ å›¾ç‰‡",text:"å›¾ç‰‡",menuItemText:"ä¸Šä¼ å›¾ç‰‡",icon:no.a,commandName:"insert-image",priority:1}]})},ia=n(1398),la=function(e){var t=e.uploadManager,n=k.a.createRef(null),r={handleShowImageEditor:function(){var e,t;return null===(t=n.current)||void 0===t?void 0:(e=t).handleShowImageEditor.apply(e,arguments)}};return{store:r,components:[{component:Object(Y.g)(ia.a,{ref:n,uploadManager:t,key:"imageEditor",handleImageEntityChange:function(e,t){var n=r.getEditorState();r.setEditorState(io(n,e,t))}}),priority:1}],initialize:function(e){Object.assign(r,e)}}},ca=n(930),sa=n(975);function ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var da={video:"è§†é¢‘",poster:"å°é¢",name:"æ ‡é¢˜"},fa=function(e){f()(n,e);var t=ua(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props.data;return Object(Y.g)("div",{className:"Editable-videoCensorList"},e.map((function(e){return Object(Y.g)("div",{className:"Editable-videoCensorItem",key:e},Object(Y.g)("span",null,"ã€Œ",da[e],"ã€"),"å®¡æ ¸æœªé€šè¿‡ï¼Œè¯·æ›´æ”¹åŽé‡æ–°æäº¤")})))}}]),n}(b.Component),pa=n(1291);function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ga=function(e){f()(n,e);var t=ha(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.onClick,o=e.onMouseDown,a=e.allowVideoTitleChange,i=e.handleVideoTitleChange,l=e.handleVideoPosterChange,c=e.isProduction,s=e.isVideoAnswer,u=e.isFullWidth,d=e.duration;return Object(Y.g)("div",{className:x()("Editable-video",n,{"Editable-video--titleError":t.censorItems&&t.censorItems.includes("name"),"Editable-video--posterError":t.censorItems&&t.censorItems.includes("poster"),"is-videoAnswer":s}),onClick:r,onMouseDown:o},Object(Y.g)(sa.b,S()({},t,t.isLens&&{playerUrl:"https://www.zhihu.com/video/".concat(t.id)},{interactive:!(!s||!u),showPlayButton:!s,isVideoAnswer:s,rightBottomButton:Object(Y.g)(pa.a,S()({triggerClassName:x()({"is-videoAnswer":s}),coverButtonText:s?"ç¼–è¾‘å°é¢":void 0,onVideoPosterChange:l,isProduction:c},t)),leftBottomButton:s&&Object(Y.g)("div",{className:"Editable-video--duration"},d)},a()&&{isVideoTitleEditable:!0,onVideoTitleChange:i})),t.censorItems&&t.censorItems.length>0&&Object(Y.g)(fa,{data:t.censorItems}))}}]),n}(k.a.Component),ma=n(1246),va=n(1133);function ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ba=function(e){f()(n,e);var t=ya(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.onClick,o=e.onMouseDown,a=e.isVideoAnswer;return Object(Y.g)("div",{className:x()("Editable-videoError",n,{"Editable-videoError--titleError":t.censorItems&&t.censorItems.includes("name"),"is-videAnswer":a}),onClick:r,onMouseDown:o},Object(Y.g)(va.a,S()({},t,{isVideoAnswer:a})),t.censorItems&&t.censorItems.length>0&&Object(Y.g)(fa,{data:t.censorItems}))}}]),n}(b.Component),ka=n(901),Ca=n(1237);function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Ea=function(e){f()(n,e);var t=Sa(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleSwitch=function(){e.input.focus()},e.handleUploaderClick=function(){e.input.click()},e.handleSubmit=function(t){t.preventDefault();var n=e.props,r=n.onSubmit,o=n.onClose,a=n.onError,i=n.onBeforeUpload,l=n.couldSuperVideoUpload;if(r){var c=e.input.files[0];c&&(i&&!i()?a&&a("video-upload-cancelled"):c.size>Ca.b&&!l?a&&a("video-size"):c.size<Ca.c?a&&a("video-uploading-entity-small"):Ca.a.some((function(e){return c.name.toLowerCase().endsWith(e)}))?Object(Ca.f)(c).then((function(e){e>Ca.d&&!l?a("video-duration"):r({value:c})})):a&&a("video-type"))}o&&o()},e.handleClose=function(){var t=e.props.onClose;t&&t()},e}return c()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.shown,r=t.onError,o=t.onClose;if(!e.shown&&n){if(!Object(Ca.h)())return r("unsupported-browser"),void o();this.input.focus(),O.a.setModule(this.root,{module:"VideoUploadCard"}),O.a.trackCardShow(this.root)}}},{key:"renderTitle",value:function(){return Object(Y.g)("p",{className:"Editable-videoModal-title"},"æœ¬åœ°ä¸Šä¼ ")}},{key:"renderFooter",value:function(){return Object(Y.g)("div",null,Object(Y.g)("p",null,"è¯·ä¸è¦æ·»åŠ æ— å…³çš„è§†é¢‘ï¼Œè¯¦æƒ…æŸ¥çœ‹"," ",Object(Y.g)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer"},"çŸ¥ä¹Žè§†é¢‘ä½¿ç”¨è§„èŒƒ"),"ã€‚"),Object(Y.g)("p",null,"ä¸Šä¼ è§†é¢‘ï¼Œå³ä»£è¡¨ä½ åŒæ„",Object(Y.g)("a",{href:"https://www.zhihu.com/terms/video",target:"_blank",rel:"noopener noreferrer"},"ã€ŠçŸ¥ä¹Žè§†é¢‘ç”¨æˆ·åè®®ã€‹"),"ã€‚"))}},{key:"render",value:function(){var e=this,t=this.props.shown;return Object(Y.g)(Yn.b,{className:"Editable-videoModal",overlay:!0,title:this.renderTitle(),footer:this.renderFooter(),onClose:this.handleClose},t&&Object(Ca.h)()&&Object(Y.g)("form",{ref:function(t){e.root=t},onSubmit:this.handleSubmit},Object(Y.g)("div",{className:"Editable-videoModal-container"},Object(Y.g)("div",{className:"Editable-videoModal-uploader",onClick:this.handleUploaderClick},Object(Y.g)("div",{className:"Editable-videoModal-uploader-icon"},Object(Y.g)(ka.a,{size:70})),Object(Y.g)("div",{className:"Editable-videoModal-uploader-text"},"é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶"),Object(Y.g)("div",{className:"Editable-videoModal-uploader-tip"},"è¯·ä¸Šä¼ æ—¶é•¿ä¸è¶…è¿‡ 60 åˆ†é’Ÿçš„è§†é¢‘"),Object(Y.g)("div",{className:"Editable-videoModal-uploader-tip"},"æœ€å¤šä¸Šä¼  10 ä¸ªè§†é¢‘"),Object(Y.g)("input",{ref:function(t){e.input=t},accept:Ca.a,type:"file",required:!0,onChange:this.handleSubmit})))))}}]),n}(b.Component);function wa(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}Ea.propTypes={shown:y.a.bool,onSubmit:y.a.func,onClose:y.a.func,onError:y.a.func,onBeforeUpload:y.a.func},Ea.defaultProps={shown:!1};var Oa=function(e,t){var n=e.onSubmit,r=e.onError,o=e.onBeforeUpload,a=e.couldSuperVideoUpload,i=Object(b.useState)(!1),l=wa(Xt.a,i,2),c=l[0],s=l[1];return Object(b.useImperativeHandle)(t,(function(){return{onClose:function(){return s(!1)},onOpen:function(){return s(!0)}}}),[]),Object(Y.g)(Ea,{shown:c,onSubmit:n,onClose:function(){return s(!1)},onError:r,onBeforeUpload:o,couldSuperVideoUpload:a})},Ta=Object(b.forwardRef)(Oa);function Aa(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var xa={decorator:function(e){return e}},ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},xa),e);var t={},n=Object(b.createRef)(null),r=!1,a=Ce(Cn,e.decorator),i=a(ga),l=a(ma.a),c=a(ba),s=function(e,n){t.getEditorRef().props.onChange(io(t.getEditorState(),e,n))},u=function(e,t){s(e,Object.assign(Object.assign({},t),{},{upload:null,error:null}))},d=function(e){s(e,{error:{status:"upload_fail"}})},f=function(e,n){var r=t.getEditorState().getCurrentContent().getEntity(e).getData();t.setEditorState(io(t.getEditorState(),e,{thumbnail:n,changedVideoPoster:!0,censorItems:r.censorItems?r.censorItems.filter((function(e){return"poster"!==e})):[]}))},p=function(e,n){var r=t.getEditorState().getCurrentContent().getEntity(e).getData();t.setEditorState(io(t.getEditorState(),e,{title:n,censorItems:r.censorItems?r.censorItems.filter((function(e){return"name"!==e})):[]}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lens";return t.getEditorState?Object(Jo.a)(t.getEditorState()).filter((function(t){if("video"===t.getType()||"embedded-video"===t.getType()){var n=t.getData();switch(e){case"upload":return Boolean(n.upload&&!n.error);case"error":return Boolean(n.error);case"error-upload":return Boolean(n.error&&"upload_fail"===n.error.status);case"error-review":return Boolean(n.error&&"reviewing_fail"===n.error.status);case"censor":return Boolean(t.data.censorItems&&t.data.censorItems.length>0);case"lens":return Boolean(n.error||n.upload||n.isLens);default:return!0}}return!1})):null},g=function(e){return h(e).size>0},m=function(n){h("lens").size>=10?e.props.onError&&e.props.onError("video-count"):(r=!0,t.getEditorRef().props.onChange(Object(me.a)(t.getEditorState(),"video","IMMUTABLE",{upload:{file:n.value}})),n.value.size>=5242880&&e.props.requestNotificationPermission())};return e.props.uploadManager.on("end",(function(){r&&(r=!1,setTimeout((function(){g()&&!g("error-upload")&&e.props.showNotification("è§†é¢‘ä¸Šä¼ æˆåŠŸ",e.location,"Success")}),0))})),e.props.uploadManager.on("error",(function(t,n){"video"===n&&e.props.showNotification("è§†é¢‘ä¸Šä¼ å¤±è´¥",location,"Fail")})),{initialize:function(e){Object.assign(t,e)},handleCommand:function(e,t){return"insert-video-card"===e?(t&&m(t),"handled"):"insert-video"===e?(n.current.onOpen(),"handled"):"not-handled"},blockRendererFn:function(t,n){var r=n.getEditorState;if("atomic"===t.getType()){var o=r().getCurrentContent(),a=t.getEntityAt(0);if(!a)return console.warn("Entity not found",t),null;var s=o.getEntity(a);if("video"===s.getType()){var h=s.getData();return h.upload?(h.uploading=!0,{editable:!1,component:l,props:Object.assign({entityKey:a,data:h,handleVideoPosterChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,[a].concat(t))},handleVideoTitleChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.apply(void 0,[a].concat(t))},onVideoUploaded:u,handleVideoUploadError:d},e.props)}):h.error?{editable:!1,component:c,props:Object.assign({entityKey:a,data:h,onVideoUploaded:u,handleVideoUploadError:d},e.props)}:(void 0!==h.uploading&&(h.uploading=!1),{editable:!1,component:i,props:Object.assign(Object.assign({entityKey:a,data:h,handleVideoPosterChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,[a].concat(t))},onVideoUploaded:u},e.props),{},{handleVideoTitleChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.apply(void 0,[a].concat(t))}})})}}return null},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"video"===o.type||"embedded-video"===o.type?o.data.upload?" ":o.data.error&&o.data.isLens?bn.a.renderToStaticMarkup(Object(Y.g)("a",{className:"unprocessable_video","data-lens-id":o.data.id,"data-lens-status":o.data.error.status,"data-description":o.data.error.message,"data-name":o.data.title,"data-lens-censor-fail-items":o.data.censorItems&&o.data.censorItems.length>0?o.data.censorItems.filter((function(e){return"video"!==e})).join(","):null})):bn.a.renderToStaticMarkup(Object(Y.g)("a",{className:"video-link",href:o.data.url,"data-src":o.data.src||"","data-name":o.data.title||"","data-poster":o.data.thumbnail||"","data-video-id":!o.data.isLens&&o.data.id||"","data-lens-id":o.data.isLens&&o.data.id||"","data-video-playable":o.data.isPlayable,"data-lens-censor-fail-items":o.data.censorItems&&o.data.censorItems.length>0?o.data.censorItems.join(","):null},o.data.title||"")):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1];if("a"===a&&(i.classList.contains("video-link")||i.classList.contains("video-box")||i.classList.contains("unprocessable_video"))){var l={title:i.getAttribute("data-name"),thumbnail:i.getAttribute("data-poster"),url:i.getAttribute("href"),src:i.getAttribute("data-src"),censorItems:[]};if(l=i.getAttribute("data-lens-id")?Object.assign(Object.assign({},l),{},{isLens:!0,id:i.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign(Object.assign({},l),{},{isLens:!1,id:i.getAttribute("data-video-id"),isPlayable:"true"===i.getAttribute("data-video-playable")}),i.hasAttribute("data-lens-status")&&(l=Object.assign(Object.assign({},l),{},{error:{status:i.getAttribute("data-lens-status"),message:i.getAttribute("data-description")}}),"reviewing_fail"===i.getAttribute("data-lens-status")&&(l=Object.assign(Object.assign({},l),{},{censorItems:["video"]}))),i.getAttribute("data-lens-censor-fail-items")){var c=i.getAttribute("data-lens-censor-fail-items").split(",");l.censorItems.includes("video")&&(c=c.filter((function(e){return"poster"!==e}))),l=Object.assign(Object.assign({},l),{},{censorItems:[].concat(Aa(o.a,l.censorItems),Aa(o.a,c))})}return T.Entity.create(l.isLens?"video":"embedded-video","IMMUTABLE",l)}return e.apply(void 0,n)}}},components:[Object(Y.g)(Ta,{ref:n,key:"videoModal_container",onSubmit:m,onError:e.props.onError,onBeforeUpload:e.props.onBeforeUpload,couldSuperVideoUpload:e.props.couldSuperVideoUpload})],getVideos:h,toolbar:{section:rt.a.BASIC_MEDIA,label:"ä¸Šä¼ è§†é¢‘",icon:ca.a,commandName:"insert-video",priority:3,shouldShow:e.props.getShowToolbarButton},toolbarV2:{section:W.a.BASIC_MEDIA,text:"è§†é¢‘",label:"ä¸Šä¼ è§†é¢‘",icon:ca.a,commandName:"insert-video",priority:3,shouldShow:e.props.getShowToolbarButton}}},_a=n(2950);function Ra(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Ma=function(e){f()(n,e);var t=Ra(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.onMouseDown;return Object(Y.g)("div",{className:x()("Editable-divider",t),onClick:n,onMouseDown:r},Object(Y.g)("hr",null))}}]),n}(k.a.Component),La={decorator:function(e){return e}},Ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},La),e);var t={},n=Ce(Cn,e.decorator),r=n(Ma),o=function(){var e=t.getEditorState(),n=Object(me.a)(e,"divider","IMMUTABLE");t.setEditorState(n)};return{initialize:function(e){Object.assign(t,e)},keyBindingFn:function(t){return e.useV2Feature&&Ut(t)&&83===t.keyCode||Ft(t)&&83===t.keyCode?"insert-divider":void 0},handleCommand:function(e){return"insert-divider"===e?(o(),"handled"):"not-handled"},blockRendererFn:function(e){if("atomic"===e.getType()){var n=t.getEditorState().getCurrentContent(),o=e.getEntityAt(0);if(!o)return console.warn("Entity not found",e),null;if("divider"===n.getEntity(o).getType())return{editable:!1,component:r}}return null},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"divider"===o.type?"<hr />":e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"hr"===o?T.Entity.create("divider","IMMUTABLE",{}):e.apply(void 0,n)}}},toolbar:{section:rt.a.STRUCTURE_STYLING,label:"æ’å…¥åˆ†å‰²çº¿",shortcut:"âŒ˜+â‡§+S",icon:_a.a,commandName:"insert-divider",priority:3},toolbarV2:{section:W.a.STRUCTURE_GENERATION,label:"æ’å…¥åˆ†å‰²çº¿",shortcut:"âŒ˜+âŒ¥+S",icon:_a.a,commandName:"insert-divider",priority:3}}},Ia=function(e){var t=e.performAction,n=e.scrapeUrl,r=void 0===n?fr:n;return{handlePastedText:function(e,n,o,a){var i=a.getEditorRef,l=a.getEditorState,c=a.setEditorState;if(n)return"not-handled";if(!(e&&Xn.a.test(e)))return"not-handled";O.a.trackEvent(i(),{id:169});var s=T.ContentState.createFromText(e),u=[];s.getBlocksAsArray().forEach((function(e){var t=e.getText(),n=Xn.a.match(t);n&&n.forEach((function(t){var n=(s=s.createEntity("LINK","MUTABLE",{url:t.url})).getLastCreatedEntityKey();s=T.Modifier.applyEntity(s,T.SelectionState.createEmpty(e.key).merge({anchorOffset:t.index,focusOffset:t.lastIndex}),n),u.push({entityKey:n,url:t.url})}))}));var d=Object(_t.a)(o,s.blockMap,s.entityMap);c(d);var f=function(e){return r(e.url,{image:!1}).then((function(t){var n=t.title;if(n&&n!==e.url){var r=l(),o=Object(or.a)(r,n,{url:e.url},e.entityKey,rr(r,e.entityKey));c(o)}})).catch((function(){}))};return t((function(){return Promise.all(u.map(f))})),"handled"}}},Na=[],Da=function(){return{handleReturn:function(e,t,n){var r=n.setEditorState;return e.shiftKey||Na.includes(T.RichUtils.getCurrentBlockType(t))?(r(T.RichUtils.insertSoftNewline(t)),"handled"):"not-handled"}}},Pa=function(e){return{onChange:function(t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t.getStartKey(),o=t.getEndKey(),a=e.getBlockMap(),i=!1,l=a.skipUntil((function(e){return e.getKey()===r})).takeUntil((function(e){var t=i;return e.getKey()===o&&(i=!0),t}));return l.map((function(e){var n=e.getKey(),a=e.getText(),i=0,l=a.length;return n===r&&(i=t.getStartOffset()),n===o&&(l=t.getEndOffset()),a=a.slice(i,l)})).join(n)}(t.getCurrentContent(),t.getSelection());return e(n),t}}},za=n(1537),qa=n.n(za),Ka=n(1307),Ua=n.n(Ka),Fa=n(82),Va=n.n(Fa),Ha=n(307),Ga=function(e,t){var n=e.getCurrentContent(),r=n,o=e.getSelection(),a=n.getBlockForKey(o.focusKey).getText();if("@"===(a&&a.charAt(o.focusOffset-1))){var i=(r=n.createEntity("mention-cancel-token","IMMUTABLE")).getLastCreatedEntityKey();o=o.merge({anchorOffset:o.anchorOffset-1}),r=T.Modifier.replaceText(n,o,"@".concat(t||""),null,i)}var l=T.EditorState.push(e,r,"cancel-mention");return document.activeElement!==document.body&&(l=T.EditorState.forceSelection(l,r.getSelectionAfter())),l},Wa=/^[?,.;:!ï¼Ÿï¼Œã€‚ï¼›ï¼šã€ï¼]$/,Za=function(e,t){var n=e.getCurrentContent(),r=n,o=e,a=e.getSelection(),i=n.getBlockForKey(a.focusKey).getText(),l=function(e){return!!i&&i.charAt(e)},c=l(a.focusOffset-1),s=l(a.focusOffset-2),u=l(a.focusOffset);"@"===c&&(a=a.merge({anchorKey:a.focusKey,anchorOffset:a.focusOffset-1,focusOffset:a.focusOffset}),r=T.Modifier.replaceText(n,a,""));var d=0!==a.anchorOffset&&("@"!==c&&" "!==c||"@"===c&&" "!==s),f=(r=(r=T.Modifier.replaceText(n,a,d?" ":"")).createEntity("mention","IMMUTABLE",t)).getLastCreatedEntityKey();return r=T.Modifier.insertText(r,r.getSelectionAfter(),"@".concat(t.name),null,f),Wa.test(u)||(r=T.Modifier.insertText(r,r.getSelectionAfter()," ")),o=T.EditorState.push(e,r,"insert-characters"),o=T.EditorState.forceSelection(o,r.getSelectionAfter())},$a=function(e){var t=e.contentState,n=e.entityKey,r=e.children,o=t.getEntity(n).getData(),a=o.id,i=o.urlToken,l=o.isOrg;return Object(Y.g)("a",{className:"member_mention",target:"_blank",rel:"noopener noreferrer","data-hash":a,href:"//www.zhihu.com/".concat(l?"org":"people","/").concat(i)},r)};$a.propTypes={entityKey:y.a.string.isRequired,contentState:y.a.object.isRequired,children:y.a.node.isRequired};var Ya=$a,Ja=function(e){var t=e.children;return Object(Y.g)("span",null,t)};Ja.propTypes={children:y.a.node.isRequired};var Xa=Ja;function Qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ei=function(e){f()(n,e);var t=Qa(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={value:"",userItems:[],styles:{}},e.handleKeyDown=function(t){var n=e.state.value,r=e.props.onCancelMention;8!==t.keyCode&&13!==t.keyCode&&32!==t.keyCode||n?27===t.keyCode&&r(n):(t.preventDefault(),r())},e.handleChange=function(t){e.safeSetState({value:t});var n=e.props,r=n.source,o=n.itemsFilter;r(t).then((function(t){e.safeSetState({userItems:o(t,u()(e))})}))},e.handleSelect=function(t,n){e.props.onSelectItem(n)},e.handleBlur=function(){e.props.onCancelMention(e.state.value)},e}return c()(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.updateStyles(),e.autoComplete&&e.autoComplete.inputNode.focus()}))}},{key:"componentWillUnmount",value:function(){this.isUnmouted=!0}},{key:"safeSetState",value:function(e){this.isUnmouted||this.setState(e)}},{key:"updateStyles",value:function(){this.safeSetState({styles:Object.assign(Object.assign({},this.calcInputPosition()),this.calcTargetFontStyles())})}},{key:"calcTargetFontStyles",value:function(){var e=this.props.target;return{fontSize:e?window.getComputedStyle(e).fontSize:"inherit"}}},{key:"calcInputPosition",value:function(){var e=this.element,t=this.props.target;if(!e||!t)return null;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{left:n.right+1,top:window.pageYOffset+n.top+(n.height-r.height)/2}}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,r=t.userItems,o=t.styles;return Object(Y.g)("div",{className:"MentionSuggestions",style:o,ref:function(t){e.element=t}},Object(Y.g)(pt.b,{value:n,ref:function(t){e.autoComplete=t},onChange:this.handleChange,items:r,menuProps:{targetContainerMinHeight:300,menuClassName:"MentionSuggestions-menu"},inputProps:{placeholder:"æƒ³ç”¨ @ æåˆ°è°ï¼Ÿ",className:"MentionSuggestions-input",onKeyDown:this.handleKeyDown},onSelect:this.handleSelect,onBlur:this.handleBlur,renderItem:function(e){return Object(Y.g)(pt.a,e)}}))}}]),n}(b.Component);ei.contextTypes={currentUser:y.a.object},ei.propTypes={source:y.a.func.isRequired,target:y.a.object,onSelectItem:y.a.func.isRequired,onCancelMention:y.a.func.isRequired},ei.defaultProps={itemsFilter:function(e,t){var n=t.currentUser,r=void 0===n?{}:n;return e.filter((function(e){return e.urlToken!==r.urlToken})).slice(0,6)}};var ti=["children"];function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ri=function(e){f()(n,e);var t=ni(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=U()(t,ti);return Object(Y.g)("span",null,Object(Y.g)("span",{ref:function(t){e.target=t}},n),this.target&&Object(Y.g)(ht.a,null,Object(Y.g)(go.a,null,Object(Y.g)(ei,S()({},r,{target:this.target})))))}}]),n}(b.Component);function oi(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}ri.propTypes={children:y.a.node};var ai=/@/g,ii={source:Ha.a},li=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Va()({},ii,e);var t={},n=function(e){var n=Object.assign({},e),r=t.getEditorState();t.setEditorState(Za(r,n))},r=function(e){var n=t.getEditorState();t.setEditorState(Ga(n,e))};return{decorators:[{strategy:Pe("mention"),component:Ya},{strategy:Pe("mention-cancel-token"),component:Xa},{strategy:function(e,n){var r=t.getEditorState().getSelection();r.hasFocus&&r.focusKey===e.key&&r.focusOffset===r.anchorOffset&&qa()(ai,e,(function(e,t){r.focusOffset===t-1&&n(e,t)}))},component:Ua()(ri,{source:e.source,onSelectItem:n,onCancelMention:r})}],initialize:function(e){var n=e.getEditorState,r=e.setEditorState;t.getEditorState=n,t.setEditorState=r},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];return"mention"===o.type?bn.a.renderToStaticMarkup(Object(Y.g)("a",{className:"member_mention",href:"/".concat(o.data.isOrg?"org":"people","/").concat(o.data.urlToken),"data-hash":o.data.id},a)):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];if("a"===o&&a.classList.contains("member_mention")){var i=a.href.split("/").slice(-2),l=oi(Xt.a,i,2),c=l[0],s=l[1];return T.Entity.create("mention","IMMUTABLE",{id:a.getAttribute("data-hash"),urlToken:s,isOrg:"org"===c})}return e.apply(void 0,n)}}}}},ci=n(2951),si=n(2952),ui=function(){var e={};return{initialize:function(t){Object.assign(e,t)},handleCommand:function(t){if("undo"===t&&e.getEditorState().getUndoStack().size>0){var n=T.EditorState.undo(e.getEditorState());return e.setEditorState(n),"handled"}if("redo"===t&&e.getEditorState().getRedoStack().size>0){var r=T.EditorState.redo(e.getEditorState());return e.setEditorState(r),"handled"}return"not-handled"},queryCommandEnable:function(e,t){return"undo"===e?!t||0!==(null==t?void 0:t.getUndoStack().size):"redo"===e?!t||0!==(null==t?void 0:t.getRedoStack().size):void 0},keyBindingFn:function(e){if(T.KeyBindingUtil.hasCommandModifier(e)&&89===e.keyCode)return"redo"},toolbarV2:[{icon:ci.a,label:"æ’¤é”€",section:W.a.CONTENT_OPERATION,shortcut:"âŒ˜+Z",priority:0,commandName:"undo",shouldDisabled:function(e){var t=e.editorState;return!t||0===(null==t?void 0:t.getUndoStack().size)}},{icon:si.a,label:"é‡åš",section:W.a.CONTENT_OPERATION,shortcut:"âŒ˜+Y",priority:1,commandName:"redo",shouldDisabled:function(e){var t=e.editorState;return!t||0===(null==t?void 0:t.getRedoStack().size)}}]}},di=function(e){var t=e.contentState,n=e.entityKey,r=e.children,o=t.getEntity(n).getData();return Object(Y.g)("a",{className:"zed-topic",target:"_blank",rel:"noopener noreferrer","data-topic-id":o.topic_id},r)};di.propTypes={entityKey:y.a.string.isRequired,contentState:y.a.object.isRequired,children:y.a.node.isRequired};var fi=di;function pi(e,t){return 0===t||"#"===e[t]}var hi=function(e,t,n){var r=t.getText();t.findEntityRanges((function(e){return!e.getEntity()}),(function(t,o){var a=r.slice(t,o);!function(e,t,n,r){for(var o,a,i=e.lastIndex;null!==(o=e.exec(t))&&e.lastIndex!==i;){i=e.lastIndex;var l=(a=n+o.index)+o[0].length;pi(t,o.index)&&r(a,l)}}(e,a,t,n)}))},gi=function(e){return function(t,n){if(null==e||!e())return hi(/(#)[\u4e00-\u9fa5a-zA-Z0-9]*/g,t,n)}},mi=n(376);function vi(e){var t=e.offsetKey,n=e.store,r=e.children;return Object(mi.a)((function(){return n.register(t),n.setLastActiveOffsetKey("init"),n.setEditorState(n.getEditorState()),function(){n.unregister(t)}})),r}var yi=function(e,t){var n,r=t.getStartKey(),o=t.getStartOffset(),a=e.getCurrentContent(),i=a.getBlockForKey(r).getText(),l=i.slice(0,o).lastIndexOf("#"),c=i.slice(l,o),s=a.getBlockForKey(t.getEndKey()).getText(),u=(n=t.getEndOffset(),!!s&&s.charAt(n));return{searchValue:c.slice(1),nextChar:u,end:o,begin:l}},bi=/^[?,.;:!ï¼Ÿï¼Œã€‚ï¼›ï¼šã€ï¼]$/,ki=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.getCurrentContent(),o=r,a=e,i=e.getSelection(),l=i.getEndOffset(),c=r.getBlockForKey(i.getEndKey()).getText(),s=function(e){return!!c&&c.charAt(e)},u=s(l-1),d=s(l-2),f=s(l),p=yi(e,i),h=p.begin,g=p.end;n&&(i=i.merge({anchorOffset:h,focusOffset:g}));var m=0!==i.anchorOffset&&("#"!==u&&" "!==u||"#"===u&&" "!==d),v=(o=(o=T.Modifier.replaceText(r,i,m?" ":"")).createEntity("topic","IMMUTABLE",t)).getLastCreatedEntityKey();return o=T.Modifier.replaceText(o,o.getSelectionAfter(),"#".concat(t.name,"#"),null,v),bi.test(f)||(o=T.Modifier.insertText(o,o.getSelectionAfter()," ")),a=T.EditorState.push(e,o,"apply-entity"),a=T.EditorState.forceSelection(a,o.getSelectionAfter())};function Ci(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Si(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ei=function(e,t){var n=e.split("-"),r=Si(Xt.a,n,3),o=r[0],a=r[1],i=r[2],l=t.split("-"),c=Si(Xt.a,l,3),s=c[0],u=c[1],d=c[2];return o===s&&Number(a)+1===Number(u)&&i===d},wi=n(949),Oi=n.n(wi),Ti=n(136),Ai=function(e){var t=e.name,n=e.type,r=void 0===n?"":n;return Object(Y.g)("div",{className:x()("TopicSuggestion-TopicItem",{"TopicSuggestion-TopicItem-new":"new"===r})},Object(Y.g)("div",{className:"text"},"#",t,"#"),"new"===r&&Object(Y.g)("span",{className:"new-topic"},"åˆ›å»ºæ–°è¯é¢˜"))},xi=function(e){var t=e.store,n=e.focusedIndex,r=e.onHandleFocusChange,o=e.onClick,a=e.suggestions,i=t.getLastActiveOffsetKey();return i?Oi()(a)?null:Object(Y.g)(Pn.a,{target:document.querySelector('[data-offset-key="'.concat(i,'"]')),isOpen:!0,placement:"bottom-left",boundary:{padding:15},repositionKey:i,className:"TopicSuggestion-Popover"},Object(Y.g)("div",{className:"TopicSuggestion-Popover-container"},a.map((function(e,t){return Object(Y.g)(Ti.b,{key:t,id:"".concat(t),tag:"div",hovered:t===n,onMouseEnter:function(){r(t)},onClick:o,onMouseDown:function(e){e.preventDefault()},role:"option"},Object(Y.g)(Ai,{name:e.name,type:e.type,key:t}))})))):null},ji=n(528);function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Ri=function(e){f()(n,e);var t=_i(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).state={focusedIndex:0,isOpen:!1,suggestions:[]},r.onEditorStateChange=function(e){var t=r.props.store,n=t.getAllSearches();if(0===n.size)return e;var o=function(e,t){var n=e.getSelection(),r=n.getAnchorKey(),o=n.getAnchorOffset();if(!n.isCollapsed()||!n.getHasFocus())return null;var a=t.map((function(e){var t=e.split("-"),n=Ci(Xt.a,t,3),r=n[0],o=n[1],a=n[2];return{blockKey:r,decoratorKey:parseInt(o,10),leafKey:parseInt(a,10)}})).filter((function(e){return e.blockKey===r})).map((function(t){return e.getBlockTree(t.blockKey).getIn([t.decoratorKey])}));if(a.every((function(e){return void 0===e})))return null;var i=a.filter(Boolean).map((function(e){var t=e.start,n=e.end;return o>=t+"#".length&&o<=n?"#":void 0})).filter(Boolean);if(i.isEmpty())return null;var l=i.entrySeq().first(),c=Ci(Xt.a,l,2);return{activeOffsetKey:c[0],activeTrigger:c[1]}}(e,n),a=t.getLastActiveOffsetKey();if(!o||!a)return r.closeDropdown(),e;if("init"===a&&(a=o.activeOffsetKey,t.setLastActiveOffsetKey(a)),a!==o.activeOffsetKey)return r.closeDropdown(),e;var i=t.getLastSearch();if(!Oi()(i)&&i.activeOffsetKey!==o.activeOffsetKey&&Ei(i.activeOffsetKey,o.activeOffsetKey))return r.closeDropdown(),t.setLastSearch(null),e;var l,c,s,u,d=yi(e,e.getSelection()).searchValue;d?null===(l=(c=r.props).fetchTopicByKeyword)||void 0===l||l.call(c,d).then((function(e){e&&(e.unshift({name:d,type:"new"}),r.setState({suggestions:e.slice(0,8)}))})):null===(s=(u=r.props).fetchRecommendTopic)||void 0===s||s.call(u).then((function(e){var t=e.slice(0,8);r.setState({suggestions:t})}));return t.setLastSearch(Object.assign(Object.assign({},o),{},{searchValue:d})),r.openDropdown(),e},r.onUpArrow=function(e){if(e.preventDefault(),r.state.suggestions.length>0){var t=r.state.focusedIndex-1;r.onTopicFocus(t<0?r.state.suggestions.length-1:t)}},r.onDownArrow=function(e){e.preventDefault();var t=r.state.focusedIndex+1;r.onTopicFocus(t>=r.state.suggestions.length?0:t)},r.onTopicSelect=function(e){r.closeDropdown();var t=ki(r.props.store.getEditorState(),e);r.props.store.setEditorState(t)},r.onTopicFocus=function(e){r.setState({focusedIndex:e})},r.commitSelection=function(){var e,t,n=r.state.suggestions[r.state.focusedIndex];return n?"new"===n.type?(null===(e=(t=r.props).addTopic)||void 0===e||e.call(t,n.name).then((function(e){e?(Object(ji.a)((function(){return Object(Y.g)(P.a,{delay:3e3,notification:{text:"åˆ›å»ºè¯é¢˜æˆåŠŸ"}})})),r.onTopicSelect({topic_id:e.topicId+"",name:e.name})):(r.props.store.setLastSearch(null),r.closeDropdown())})),"handled"):(r.onTopicSelect(n),"handled"):"not-handled"},r.openDropdown=function(){r.props.callbacks.handleReturn=r.commitSelection,r.props.callbacks.onUpArrow=r.onUpArrow,r.props.callbacks.onDownArrow=r.onDownArrow,r.onOpenChange(!0)},r.closeDropdown=function(){r.props.callbacks.handleReturn=void 0,r.props.callbacks.onUpArrow=void 0,r.props.callbacks.onDownArrow=void 0,r.onOpenChange(!1),r.onTopicFocus(0),r.setState({suggestions:[]}),r.props.store.setLastActiveOffsetKey(null)},r.props.callbacks.onChange=r.onEditorStateChange,r}return c()(n,[{key:"componentWillUnmount",value:function(){this.props.callbacks.onChange=void 0}},{key:"onOpenChange",value:function(e){this.setState({isOpen:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,r=t.focusedIndex,o=t.suggestions;return n&&Object(Y.g)(xi,{store:this.props.store,key:this.props.store.getLastSearch(),focusedIndex:r,onHandleFocusChange:function(t){return e.onTopicFocus(t)},onClick:this.commitSelection,suggestions:o})}}]),n}(b.Component),Mi=["getMarkdownEnabled"];function Li(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Bi=function(e){var t,n,r=e.getMarkdownEnabled,o=U()(e,Mi),a=Object(Me.Map)(),i={handleReturn:void 0,onChange:void 0,onUpArrow:void 0,onDownArrow:void 0},l={getEditorState:void 0,setEditorState:void 0,getAllSearches:function(){return a},register:function(e){a=a.set(e,e)},unregister:function(e){a=a.delete(e)},getLastActiveOffsetKey:function(){return t},setLastActiveOffsetKey:function(e){t=e},getLastSearch:function(){return n},setLastSearch:function(e){n=e}};return setTimeout((function(){l.setLastActiveOffsetKey(null)}),0),{decorators:[{strategy:Pe("topic"),component:fi},{strategy:gi(r),component:Ua()(vi,Object.assign({store:l},o))}],initialize:function(e){var t=e.getEditorRef,n=e.getEditorState,r=e.setEditorState;l.getEditorState=n,l.setEditorState=r,l.getEditorRef=t},components:[Object(Y.g)(Ri,S()({key:"TopicSuggestions",store:l,callbacks:i},o))],handleReturn:function(e){return i.handleReturn&&i.handleReturn(e)},onChange:function(e){return i.onChange?i.onChange(e):e},onUpArrow:function(e){if(i.onUpArrow)return i.onUpArrow(e)},onDownArrow:function(e){if(i.onDownArrow)return i.onDownArrow(e)},handleCommand:function(e){if("insert-topic"===e){var t=l.getEditorState(),n=t.getCurrentContent(),r=t.getSelection(),o=n,a=t;return o=T.Modifier.replaceText(n,r,"#"),a=T.EditorState.push(t,o,"insert-characters"),a=T.EditorState.forceSelection(a,o.getSelectionAfter()),l.setEditorState(a),"handled"}if(e.startsWith("insert-topic:")){var i=e.split("insert-topic:")[1].split("---"),c=Li(Xt.a,i,2),s=c[0],u=c[1];return l.setEditorState(ki(l.getEditorState(),{topic_id:s,name:u},!1)),"handled"}return"not-handled"},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];return"topic"===o.type?bn.a.renderToStaticMarkup(Object(Y.g)("a",{className:"zed-topic",target:"_blank",rel:"noopener noreferrer","data-topic-id":o.data.topic_id},a)):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];if("a"===o&&a.classList.contains("zed-topic")){var i=a.innerText||a.innerHTML;return T.Entity.create("topic","IMMUTABLE",{topic_id:a.getAttribute("data-topic-id"),name:i.replace(/#/g,"")})}return e.apply(void 0,n)}}}}};n(1091),n(679);function Ii(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ni(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Pi=function(e){f()(n,e);var t=Di(n);function n(e){var r,a;i()(this,n),(r=t.call(this,e)).setPlugins=function(){var e,t=r.props,n=t.allowInlineCode,a=t.allowMention,i=t.onSelectText,l=t.allowLink,c=t.allowImageEditor,s=t.getPlugins,u=t.useV2Feature,d=t.allowDivider,f=t.allowTextLink;r.plugins=[r.codePlugin,r.formatPlugin,r.mentionPlugin,n&&r.inlineCodePlugin,r.convertPlugin,r.clearFormatPlugin,r.focusPlugin].concat(function(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return Ni(t,void 0!==n&&n<r?n:r)}return e(t,n)}(o.a,s()),[r.imagePlugin,c&&u&&r.imageEditorPlugin,r.videoPlugin,d&&r.dividerPlugin,a&&r.mentionPlugin,l&&r.linkPlugin,f&&r.textLinkPlugin,r.linkTitlePlugin,r.softNewlinePlugin,Boolean(i)&&r.selectTextPlugin,u&&r.historyOperationPlugin,(null===(e=r.props.topicConfig)||void 0===e?void 0:e.allow)&&r.TopicPlugin,r.pasteHTMLPlugin]).filter(Boolean),r.draft2htmlMiddlwares=r.plugins.map((function(e){return e.draft2html})).filter(Boolean),r.html2draftMiddlewares=r.plugins.map((function(e){return e.html2draft})).filter(Boolean)},r.getExtraPluginData=function(){return r.plugins.reduce((function(e,t){var n;return Object.assign(Object.assign({},e),null==t||null===(n=t.getExtraPluginData)||void 0===n?void 0:n.call(t))}),{})},r.handleUploadManagerEnd=function(){r.cancelNotificationPermissionRequest&&r.cancelNotificationPermissionRequest()},r.handleUploadManagerError=function(e,t){"video"===t&&r.showNotification("è§†é¢‘ä¸Šä¼ å¤±è´¥",r.props.location,"Fail")},r.reset=function(){var e=T.EditorState.createWithContent(T.ContentState.createFromText(""),r.state.editorState.getDecorator());e=T.EditorState.moveFocusToEnd(e),r.editor.onChange(e)},r.resetWithValue=function(e){var t=(0,r.props.createContent)(e,r.html2draftMiddlewares),n=T.EditorState.createWithContent(t,r.state.editorState.getDecorator());r.editor.onChange(n)},r.focus=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?r.setState({editorState:T.EditorState.moveFocusToEnd(r.state.editorState)}):r.editor.focus();var t=r.props.onFocus;t&&t()},r.handleReturn=function(){var e=r.state.editorState,t=e.getSelection(),n=e.getCurrentContent(),o=t.getStartOffset(),a=t.getEndOffset(),i=t.getStartKey(),l=n.getBlockForKey(i),c=l.getType(),s=l.getDepth(),u=l.getLength(),d=t.getEndKey();if(["blockquote","ordered-list-item","unordered-list-item"].includes(c)&&0===u){var f=T.Modifier.removeRange(n,t,"backward");return f=s?f.set("blockMap",f.getBlockMap().update(i,(function(e){return e.set("depth",s-1)}))):T.Modifier.setBlockType(f,T.SelectionState.createEmpty(i),"unstyled"),r.onChange(T.EditorState.forceSelection(T.EditorState.push(e,f,"split-block"),T.SelectionState.createEmpty(i))),"handled"}if(c.startsWith("header")){var p=T.Modifier.splitBlock(n,t),h=p.getKeyAfter(i);return o!==u&&a!==u&&i===d||(p=T.Modifier.setBlockType(p,T.SelectionState.createEmpty(h),"unstyled")),r.onChange(T.EditorState.forceSelection(T.EditorState.push(e,p,"split-block"),T.SelectionState.createEmpty(h))),"handled"}return"not-handled"},r.handlePastedFiles=function(e){return r.props.allowPasteRichText?r.imagePlugin.handlePastedFiles(e):"not-handled"},r.handleDroppedFiles=function(e,t){if(r.props.allowDragAndDrop){var n=r.state.editorState,o=n.getCurrentContent().getBlockForKey(t).getLength(),a=new T.SelectionState({isCollapsed:!0,anchorKey:t,anchorOffset:o,focusKey:t,focusOffset:o});r.onChange(T.EditorState.forceSelection(n,a),(function(){r.imagePlugin.handleDroppedFiles(e)}))}},r.handleShowImageEditor=function(){var e;(e=r.imageEditorPlugin.store).handleShowImageEditor.apply(e,arguments)},r.uploadManager=r.createUploadManager(),r.codePlugin=Ct(),r.formatPlugin=Ot(),r.inlineCodePlugin=Tt(),r.submitHotkeyPlugin=At(),r.pasteHTMLPlugin=Rt({allowPasteRichText:r.props.allowPasteRichText,disablePasteImage:!r.props.allowImageUpload}),r.convertPlugin=Ht({allowHeaderThree:r.props.allowHeaderThree,useV2Feature:r.props.useV2Feature,getMarkdownEnabled:r.props.getMarkdownEnabled}),r.clearFormatPlugin=Yt(),r.focusPlugin=null!==(a=r.props.focusPlugin)&&void 0!==a?a:vn(),r.focusDecorator=Object(_.composeDecorators)(r.focusPlugin.decorator),r.linkPlugin=$r({decorator:r.focusDecorator,allowLinkCard:r.props.allowLinkCard,useV2Feature:r.props.useV2Feature,newLinkCard:r.props.newLinkCard,getIsVideoAnswer:r.props.getIsVideoAnswer,getMarkdownEnabled:r.props.getMarkdownEnabled}),r.textLinkPlugin=to(),r.imagePlugin=aa({decorator:r.focusDecorator,uploadManager:r.uploadManager,disableImageUpload:!r.props.allowImageUpload,allowImageCaption:r.props.allowImageCaption,allowResizeImage:r.props.allowResizeImage,allowFloatImage:r.props.allowFloatImage,allowImageEditor:r.props.allowImageEditor,editingContentType:r.props.editingContentType,uploadImageError:r.props.uploadImageError,onImageUpload:r.props.onImageUpload,useV2Feature:r.props.useV2Feature,hideImageToolbar:r.props.hideImageToolbar,useImageOperationV2:r.props.useImageOperationV2,handleShowImageEditor:r.handleShowImageEditor,getMarkdownEnabled:r.props.getMarkdownEnabled}),r.imageEditorPlugin=la({uploadManager:r.uploadManager}),r.videoPlugin=ja({decorator:r.focusDecorator,props:{uploadManager:r.uploadManager,loadVideo:r.props.loadVideo,onVideoPosterButtonClick:r.props.onVideoPosterButtonClick,onBeforeUpload:r.props.onBeforeVideoUpload,allowVideoTitleChange:function(){return r.props.allowVideoTitleChange},onError:r.props.loadVideo,isProduction:r.props.isProduction,requestNotificationPermission:r.requestNotificationPermission,showNotification:r.showNotification,location:r.props.location,couldSuperVideoUpload:r.props.couldSuperVideoUpload,getShowToolbarButton:r.props.getShowVideoToolbarButton}}),r.dividerPlugin=Ba({decorator:r.focusDecorator,useV2Feature:r.props.useV2Feature}),r.linkTitlePlugin=Ia({performAction:function(e){return r.performAction(e)}}),r.softNewlinePlugin=Da(),r.selectTextPlugin=Pa(r.props.onSelectText),r.mentionPlugin=li({source:r.props.mentionSource}),r.historyOperationPlugin=ui(),r.TopicPlugin=Bi(Object.assign({getMarkdownEnabled:r.props.getMarkdownEnabled},r.props.topicConfig));var l=e.defaultValue,c=e.createContent;return r.onChange=r.handleChange.bind(u()(r)),r.onBlur=r.handleBlur.bind(u()(r)),r.onGlobalScroll=w()(r.handleGlobalScroll.bind(u()(r)),100),r.onTab=r.handleTab.bind(u()(r)),r.handleKeyCommand=r.handleKeyCommand.bind(u()(r)),r.queryCommandState=r.queryCommandState.bind(u()(r)),r.queryCommandEnable=r.queryCommandEnable.bind(u()(r)),r.setPlugins(),r.state={editorKey:0,editorState:T.EditorState.createWithContent(c(l,r.html2draftMiddlewares))},r.props.getToolbarPlugins&&console.warn("Editable ç»„ä»¶çš„ getToolbarPlugins å±žæ€§å°†è¦è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ getToolbarSidePlugins æ›¿æ¢","è¯·æŸ¥é˜… http://zhdocs.io/docs/zhihu-components/#/Editable/CustomToolbar"),r}return c()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.autoFocus&&setTimeout((function(){return e.focus()})),document.addEventListener("scroll",this.onGlobalScroll,{capture:!0,passive:!0}),this.props.onReady()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.onGlobalScroll,!0)}},{key:"componentDidCatch",value:function(e,t){window.Raven&&window.Raven.captureException(e,{tags:{scope:"Editable"},extra:{info:t}}),(!this.lastErrorTime||Date.now()-this.lastErrorTime>100)&&(this.lastErrorTime=Date.now(),this.setState({editorKey:this.state.editorKey+1}))}},{key:"hasImage",value:function(e){var t;return(null===(t=this.imagePlugin)||void 0===t?void 0:t.getImages(e).size)>0}},{key:"hasVideo",value:function(e){var t;return(null===(t=this.videoPlugin.getVideos(e))||void 0===t?void 0:t.size)>0}},{key:"createUploadManager",value:function(){var e=this.props,t=e.onImageUpload,n=e.onVideoUpload,r=e.onUploadStart,o=e.onUploadEnd,a=e.isProduction,i=e.apiRoot,l=e.videoSource,c=new z.b({isProduction:a,uploadImage:t,uploadEmbeddedVideo:n,apiRoot:i,source:l});return c.on("end",this.handleUploadManagerEnd),c.on("error",this.handleUploadManagerError),r&&c.on("start",r),o&&c.on("end",o),c}},{key:"zaMock",value:function(e){var t=document.createElement("div");this.zaMockContainer.appendChild(t),e(t),this.zaMockContainer.removeChild(t)}},{key:"requestNotificationPermission",value:function(){var e=this;if(!(window.Notification&&"default"!==window.Notification.permission||this.cancelNotificationPermissionRequest)){var t=I.a.get("Editable::notification")||{};if(!(t.dismissUntil&&Date.now()<t.dismissUntil)){this.cancelNotificationPermissionRequest=function(){e.cancelNotificationPermissionRequest=null,clearTimeout(e.requestNotificationPermissionTimeout)},this.requestNotificationPermissionTimeout=setTimeout((function(){P.a.show((function(n){var r=null;return e.cancelNotificationPermissionRequest=function(){r&&O.a.trackEvent(r,{action:"Hide"}),e.cancelNotificationPermissionRequest=null,n()},Object(Y.g)(P.a,{className:"Editable-notification",style:{top:e.props.toolbarStickyOffset},notification:{text:Object(Y.g)("div",{ref:function(e){(r=e)&&(O.a.setModule(r,{module:"ConfirmBar"}),O.a.trackCardShow(r))},className:"Editable-notification-layout"},Object(Y.g)("div",{className:"Editable-notification-content"},"å¼€å¯æ¡Œé¢é€šçŸ¥ï¼Œè§†é¢‘ä¸Šä¼ å®ŒæˆåŽå°†æé†’ä½ ã€‚"),Object(Y.g)("div",{className:"Editable-notification-actions"},Object(Y.g)(N.c,{className:"Editable-notification-action",preset:"plain",color:"blue",onClick:function(){r&&O.a.trackEvent(r,{action:"Ok"}),e.cancelNotificationPermissionRequest(),I.a.set("Editable::notification",{dismissCount:0,dismissUntil:0}),window.Notification&&window.Notification.requestPermission()}},"å¼€å¯é€šçŸ¥"),Object(Y.g)(N.c,{className:"Editable-notification-action",preset:"plain",onClick:function(){var n,o;r&&O.a.trackEvent(r,{action:"Cancel"}),e.cancelNotificationPermissionRequest(),n=(t.dismissCount||0)+1,o=0,n>=1&&(o=Date.now()+864e5),n>=3&&(n=0,o=Date.now()+12096e5),I.a.set("Editable::notification",{dismissCount:n,dismissUntil:o})}},"æš‚ä¸éœ€è¦")))}})}))}),3e3)}}}},{key:"showNotification",value:function(e,t,n){var r=this;if(!window.Notification||"granted"===window.Notification.permission){this.zaMock((function(e){O.a.setModule(e,{module:"DesktopNotificationCard"}),O.a.trackCardShow(e,{},{status:{result:n}})}));var o=new Notification(e,{icon:this.props.logo,body:t});o.addEventListener("click",(function(){r.zaMock((function(e){O.a.setModule(e,{module:"DesktopNotificationCard"}),O.a.trackEvent(e,{action:"Click"},{status:{result:n}})})),window.focus(),o.close()}))}}},{key:"handleChange",value:function(e,t){var n,r=this,o=this.props,a=o.outputBlockType,i=o.onChange,l=o.getAttachment,c=o.onAnyChange,s=o.onAfterAnyChange,u=!1;if((i||c)&&(n=Je(e,a,this.draft2htmlMiddlwares,null==l?void 0:l())),i){var d=e.getCurrentContent(),f=this.state.editorState.getCurrentContent();d.equals(f)&&"apply-entity"!==e.getLastChangeType()||(i(n),u=!0)}c&&c(n),this.setState({editorState:e},(function(){if("function"==typeof t&&t(),u){var n=r.props.onAfterChange;n&&n(e)}s&&s(e)}))}},{key:"handleBlur",value:function(){if(!Boolean(document.querySelector(".Editable-mentionSuggestions"))){var e=this.props.onBlur;e&&e()}}},{key:"handleGlobalScroll",value:function(e){this.codePlugin.handleGlobalScroll(e)}},{key:"handleTab",value:function(e){this.onChange(T.RichUtils.onTab(e,this.state.editorState,4))}},{key:"blur",value:function(){this.editor.blur();var e=this.props.onBlur;e&&e()}},{key:"performAction",value:function(e){var t=this;this.performActionBegin();var n=e();return n.then((function(){return t.performActionEnd()})),n.catch((function(){return t.performActionEnd()})),n}},{key:"performActionBegin",value:function(){var e=this.props.onLoadStart;0===this.loadingCount&&e&&e(),this.loadingCount++}},{key:"performActionEnd",value:function(){var e=this.props.onLoadEnd;this.loadingCount--,0===this.loadingCount&&e&&e()}},{key:"addMedia",value:function(e,t){this.onChange(Object(me.a)(this.state.editorState,e,"IMMUTABLE",t))}},{key:"toHTML",value:function(){var e=this.props.outputBlockType;return _e(this.state.editorState.getCurrentContent(),e,this.draft2htmlMiddlwares)}},{key:"handleCommand",value:function(){var e,t=Ii(this.plugins,!0);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.handleCommand&&Re(n.handleCommand.apply(n,arguments)))return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"queryCommandState",value:function(){var e,t=Ii(this.plugins,!0);try{for(t.s();!(e=t.n()).done;){var n=e.value;try{if(n.queryCommandState&&!0===n.queryCommandState.apply(n,arguments))return!0}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"queryCommandEnable",value:function(){var e,t=Ii(this.plugins,!0);try{for(t.s();!(e=t.n()).done;){var n=e.value;try{if(n.queryCommandEnable&&!1===n.queryCommandEnable.apply(n,arguments))return!1}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}return!0}},{key:"handleKeyCommand",value:function(e){this.props.onBeforeCommand&&this.props.onBeforeCommand(e);var t=this.state.editorState;if("handled"===this.handleCommand(e))return"handled";if("backspace"===e&&t.getSelection().isCollapsed()){var n=t.getSelection(),r=t.getCurrentContent(),o=n.getStartOffset(),a=n.getStartKey(),i=r.getBlockForKey(a),l=i.getType(),c=i.getDepth(),s=r.getBlockBefore(a);if(["blockquote","ordered-list-item","unordered-list-item"].includes(l)&&0===o&&s&&"atomic"!==s.getType()){var u=s.getKey(),d=s.getLength(),f=r;return c?(f=f.set("blockMap",f.getBlockMap().update(a,(function(e){return e.set("depth",c-1)}))),this.onChange(T.EditorState.forceSelection(T.EditorState.push(t,f,"adjust-depth"),T.SelectionState.createEmpty(a)))):(f=T.Modifier.setBlockType(f,T.SelectionState.createEmpty(a),"unstyled"),f=T.Modifier.removeRange(f,new T.SelectionState({anchorKey:u,anchorOffset:d,focusKey:a,focusOffset:0}),"backward"),this.onChange(T.EditorState.forceSelection(T.EditorState.push(t,f,"remove-range"),new T.SelectionState({anchorKey:u,anchorOffset:d,focusKey:u,focusOffset:d})))),"handled"}}var p=T.RichUtils.handleKeyCommand(t,e);return p?(this.onChange(p),"handled"):"not-handled"}},{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.allowHeaderThree,a=r.allowDragAndDrop,i=r.allowToolbar,l=r.allowToolbarSticky,c=r.allowReference,s=r.allowTable,u=r.allowLink,d=r.allowDivider,f=r.allowZVideo,p=r.className,h=r.getToolbarSidePlugins,g=void 0===h?this.props.getToolbarPlugins:h,m=r.getToolbarMainPlugins,v=r.getToolbarMenuPlugins,y=r.getEditorBeforePlugins,b=r.toolbarMenuAttention,k=r.minRows,C=r.onFocus,E=(r.outputBlockType,r.placeholder),w=r.readOnly,O=r.toolbarStickyOffset,A=r.toolbarProps,_=r.editableComponent,M=r.useV2Feature,L=r.customToolbar,B=r.showToolbar,I=this.state,N=I.editorKey,P=I.editorState,z=P.getSelection(),K=P.getCurrentContent(),U=P.getCurrentInlineStyle(),F=T.RichUtils.getCurrentBlockType(P),V=!1;K.hasText()||"unstyled"!==K.getBlockMap().first().getType()&&(V=!0),this.setPlugins();var H=Object.assign(Object.assign({},_),{},{state:Object.assign(Object.assign({},null==_?void 0:_.state),this.state)}),G=null;if(i){var W=Object.assign(Object.assign({},A),{},{currentStyle:U,currentBlockType:F,onCommand:this.handleKeyCommand,queryCommandState:this.queryCommandState,queryCommandEnable:this.queryCommandEnable,toolbarMainPlugins:m&&m(H,{currentStyle:U,currentBlockType:F}),toolbarSidePlugins:g&&g(H,{currentStyle:U,currentBlockType:F}),toolbarMenuPlugins:v&&v(H,{currentStyle:U,currentBlockType:F}),toolbarMenuAttention:b,allowHeaderThree:o,allowReference:c,allowTable:s,allowLink:u,allowDivider:d,allowZVideo:f,plugins:this.plugins,editorState:P}),Z=null!=L?L:M?re:q.d;G=l?Object(Y.g)(D.a,{offset:O,container:function(){return n.root}},(function(e){var t=e.isFixed;return Object(Y.g)(Z,S()({},W,{isFixed:t}))})):Object(Y.g)(Z,W)}return Object(Y.g)(j.b,{block:"Editor"},Object(Y.g)(j.f,{zaType:"Block",as:oe.a,isFocus:z.hasFocus,ref:function(e){return n.root=e},className:x()(p,"Editable",{"Editable--hidePlaceholder":V})},B&&G,null===(e=(t=this.props).renderContentAboveDropZone)||void 0===e?void 0:e.call(t),tt(this.plugins,"componentsAboveDropZone"),Object(Y.g)(pe,{style:{minHeight:"".concat(12+26*k+14*(k-1),"px")},className:"Editable-content RichText RichText--editable RichText--clearBoth ztext",enabled:a,onClick:function(e){e.defaultPrevented||n.focus(!1)},onMouseOver:this.codePlugin.onMouseOver,onDrop:this.handleDroppedFiles},y&&y(this,{currentStyle:U,currentBlockType:F}),tt(this.plugins,"componentsBeforeEditor"),Object(Y.g)(R.a,{key:N,ref:function(e){e&&(n.editor=e)},spellCheck:!0,placeholder:E,decorators:[new he.PrismDecorator({prism:he.Prism,getSyntax:function(e){var t=e.getData().get("language");return t&&he.Prism.languages[t.id]?t.id:null}})],plugins:this.plugins,readOnly:w,editorState:P,onChange:this.onChange,onFocus:C,onBlur:this.onBlur,onTab:this.onTab,blockRenderMap:T.DefaultDraftBlockRenderMap.merge(Le.a.Map({unstyled:{element:"div",aliasedElements:["p","div"]},"header-two":{element:"h2",aliasedElements:["h1","h2"]},"header-three":{element:"h3",aliasedElements:["h3","h4","h5","h6"]},blockquote:{element:"blockquote"}})),blockStyleFn:Ze,customStyleFn:$e,handleReturn:this.handleReturn,handleKeyCommand:this.handleKeyCommand,handlePastedFiles:this.handlePastedFiles,tabIndex:0,root:this.root,draft2htmlMiddlwares:this.draft2htmlMiddlwares,html2draftMiddlewares:this.html2draftMiddlewares,uploadManager:this.uploadManager,resetWithValue:this.resetWithValue}),tt(this.plugins,"editableContentComponents")),Object(Y.g)("div",{ref:function(e){e&&(n.zaMockContainer=e)}}),tt(this.plugins,"components")))}}]),n}(b.Component);Pi.propTypes={className:y.a.string,autoFocus:y.a.bool,minRows:y.a.number,newLinkCard:y.a.bool,placeholder:y.a.string,allowToolbar:y.a.bool,allowToolbarSticky:y.a.bool,toolbarStickyOffset:y.a.number,allowPasteRichText:y.a.bool,allowDragAndDrop:y.a.bool,allowMention:y.a.bool,mentionSource:y.a.func,outputBlockType:y.a.oneOf(["p","div"]),defaultValue:y.a.oneOfType([y.a.object,y.a.string]),onChange:y.a.func,onAfterChange:y.a.func,onAnyChange:y.a.func,onAfterAnyChange:y.a.func,onFocus:y.a.func,onBlur:y.a.func,allowHeaderThree:y.a.bool,allowLinkCard:y.a.bool,allowInlineCode:y.a.bool,hideImageToolbar:y.a.bool,useImageOperationV2:y.a.bool,allowImageUpload:y.a.bool,allowImageCaption:y.a.bool,allowResizeImage:y.a.bool,allowFloatImage:y.a.bool,allowVideoTitleChange:y.a.bool,allowLink:y.a.bool,allowDivider:y.a.bool,allowVideo:y.a.bool,onReady:y.a.func,onVideoPosterButtonClick:y.a.func,onImageUpload:y.a.func,onVideoUpload:y.a.func,onSelectText:y.a.func,onSubmit:y.a.func,onError:y.a.func,onLoadStart:y.a.func,onLoadEnd:y.a.func,onUploadStart:y.a.func,onUploadEnd:y.a.func,onUploadError:y.a.func,onBeforeVideoUpload:y.a.func,onBeforeCommand:y.a.func,getToolbarMainPlugins:y.a.func,getToolbarSidePlugins:y.a.func,getToolbarPlugins:y.a.func,getToolbarMenuPlugins:y.a.func,toolbarMenuAttention:y.a.string,logo:y.a.string,location:y.a.string,readOnly:y.a.bool,editingContentType:y.a.string,couldSuperVideoUpload:y.a.bool,createContent:y.a.func,getAttachment:y.a.func,showToolbarButton:y.a.bool,getPlugins:y.a.func,apiRoot:y.a.string,customToolbar:y.a.element,showToolbar:y.a.bool,videoSource:y.a.string,allowTextLink:y.a.bool,topicConfig:y.a.object},Pi.defaultProps={autoFocus:!1,minRows:1,allowToolbar:!1,allowToolbarSticky:!1,toolbarStickyOffset:0,allowHeaderThree:!0,allowLinkCard:!1,allowInlineCode:!1,hideImageToolbar:!1,useImageOperationV2:!1,allowImageUpload:!0,allowImageCaption:!1,allowVideoTitleChange:!1,allowResizeImage:!1,allowFloatImage:!1,allowPasteRichText:!0,allowDragAndDrop:!1,allowMention:!1,allowLink:!0,allowDivider:!0,allowVideo:!0,outputBlockType:"p",readOnly:!1,couldSuperVideoUpload:!1,createContent:Ye,getShowVideoToolbarButton:function(){return!0},getPlugins:function(){return[]},onReady:L.a,showToolbar:!0,getIsVideoAnswer:function(){return!1},allowTextLink:!1,topicConfig:{allow:!1}};var zi=Pi,qi=n(2954),Ki=n(193),Ui=n.n(Ki),Fi=n(1519),Vi=n(1288),Hi=n(1653);function Gi(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Wi=function(e,t){var n=e.referenceList,r=void 0===n?[]:n,o=e.onClick,a=e.listRef,i=Object(b.useState)(r),l=Gi(Xt.a,i,2),c=l[0],s=l[1];return Object(b.useImperativeHandle)(t,(function(){return{onListChange:s}}),[]),c.length>0&&Object(Y.g)(Hi.a,{referenceList:c,onClick:o,listRef:a})},Zi=Object(b.forwardRef)(Wi),$i=function(e){var t=e.entityKey,n=e.contentState,r=e.children,o=e.editable,a=e.referenceList,i=e.onRequestEdit,l=n.getEntity(t).getData(),c=l.refKey,s=l.text,u=l.url,d=Ui()(a,"refKey").findIndex((function(e){return e.refKey===c}))+1,f=a.filter((function(e){return e.refKey===c})).findIndex((function(e){return e.entityKey===t}));return Object(Y.g)("sup",{id:"".concat(c,"_").concat(f),className:x()("Reference",{isEditable:o}),onMouseDown:function(e){return e.preventDefault()},onClick:function(){o&&i({entityKey:t,entityData:l})},style:{counterReset:"zh-ref ".concat(d)},"data-ref-key":c,"data-text":s,"data-url":u,"data-numero":d,"data-draft-node":"inline","data-draft-type":"reference"},r)};$i.defaultProps={editable:!1,referenceList:[],onRequestEdit:function(){}},$i.propTypes={editable:y.a.bool,onRequestEdit:y.a.func,contentState:y.a.object.isRequired,entityKey:y.a.string.isRequired};var Yi=$i,Ji=n(2953),Xi=n(145),Qi=n.n(Xi),el=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n.toString(16)},tl=n(160);function nl(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ol=function(e){f()(n,e);var t=rl(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={refKey:"",text:"",url:""},e.handleRefKeyChange=function(t){var n=e.props.referenceList;e.setState(t?n.find((function(e){return e.refKey===t})):{refKey:"",text:"",url:""})},e.handleTextChange=function(t){e.setState({text:t.target.value})},e.handleUrlChange=function(t){e.setState({url:t.target.value})},e.onSubmit=function(t){t.preventDefault();var n=e.state,r=n.refKey,o=n.text,a=n.url,i=a?Xn.a.match(a)[0].url:"";e.props.onSubmit({refKey:r||"ref_".concat(el("t:".concat(o,"u:").concat(a)),"_").concat(Qi()()),text:o,url:i}),e.onClose()},e.onClose=function(){e.setState({refKey:"",text:"",url:""}),e.props.onClose()},e.handleFormRef=function(t){t&&e.setState(Object.assign({},e.props.entityData))},e}return c()(n,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.referenceList,a=n.mode,i=n.shown,l=this.state,c=l.refKey,s=l.text,u=l.url;e="insert"===a?c?"æ›´æ–°æ³¨é‡Šå¹¶æ’å…¥":"æ’å…¥":"æ›´æ–°";var d=["insert"===a&&Object(Y.g)(tl.a,{key:"new",value:"",text:"æ–°æ³¨é‡Š"})].concat(nl(o.a,Ui()(r,"refKey").map((function(e,t){return Object(Y.g)(tl.a,{key:e.refKey,value:e.refKey,text:"æ³¨é‡Š ".concat(t+1)})})))).filter(Boolean);return Object(Y.g)(Yn.b,{title:"insert"===a?"æ’å…¥æ³¨é‡Š":"ç¼–è¾‘æ³¨é‡Š",className:"ReferenceModal",onClose:this.onClose,maskClosable:!1,hotKeyClosable:!1},i&&Object(Y.g)("form",{className:"ReferenceModal-form",onSubmit:this.onSubmit,ref:this.handleFormRef},Object(Y.g)("div",{className:"ReferenceModal-firstRow"},Object(Y.g)(tl.b,{large:!0,className:"ReferenceModal-select",listClassName:"ReferenceModal-selectList",text:function(e){return Object(Y.g)(k.a.Fragment,null,Object(Y.g)(Ji.a,{className:"ReferenceModal-icon"}),e)},onChange:this.handleRefKeyChange,disabled:"edit"===a},d),Object(Y.g)(Jn.a,{large:!0,spread:!0,type:"text",className:"ReferenceModal-input",placeholder:"è¾“å…¥æ³¨é‡Šæ–‡æœ¬",value:s,onChange:this.handleTextChange,before:Object(Y.g)($n.a,{className:"ReferenceModal-icon"})})),Object(Y.g)(Jn.a,{large:!0,spread:!0,type:"text",className:"ReferenceModal-input",placeholder:"è¾“å…¥é“¾æŽ¥åœ°å€",value:u,onChange:this.handleUrlChange,onRef:function(e){t.urlInput=e},before:Object(Y.g)(kn.a,{className:"ReferenceModal-icon"})}),Object(Y.g)(Yn.a,{className:"ReferenceModal-buttonGroup",direction:"horizontal"},Object(Y.g)(N.c,{onClick:this.onClose,color:"grey"},"å–æ¶ˆ"),Object(Y.g)(N.c,{preset:"primary",color:"blue",type:"submit",disabled:u&&!Xn.a.test(u)||!u&&!s},e))))}}]),n}(b.Component);ol.defaultProps={shown:!1,mode:"insert"};var al=function(e,t){var n=e.getCurrentContent(),r=e.getSelection(),o=(n=n.createEntity("reference","IMMUTABLE",t)).getLastCreatedEntityKey();n=T.Modifier.replaceText(n,r," ",null,o);var a=T.EditorState.push(e,n,"insert-characters");return r=a.getSelection(),a=T.EditorState.forceSelection(a,r)};function il(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ll=function(e){var t=e.root;return Object(Vi.d)(t),null},cl=function(e){f()(n,e);var t=il(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={form:{shown:!1,entityKey:null,entityData:{refKey:"",text:"",url:""}}},e.close=function(){e.setFormState({shown:!1,entityData:{refKey:"",text:"",url:""}})},e.handleSubmit=function(t){var n,r=e.props,o=r.store,a=r.referenceList,i=r.onReferenceListChange,l=e.state.form.entityKey,c=o.getEditorState();(n=l?Object(Tr.a)(c,l,t):al(c,t),t.refKey)&&i(a.map((function(e){return e.refKey!==t.refKey?e:(n=Object(Tr.a)(n,e.entityKey,t),t)})));o.setEditorState(n)},e.handleRequestEdit=function(t){var n=t.entityKey,r=t.entityData;e.setFormState({shown:!0,mode:"edit",entityKey:n,entityData:r})},e.handleRequestInsert=function(){e.setFormState({shown:!0,mode:"insert",entityKey:null,entityData:{refKey:"",text:"",url:""}})},e}return c()(n,[{key:"setFormState",value:function(e){this.setState({form:e})}},{key:"render",value:function(){var e=this.props.referenceList,t=this.state.form;return Object(Y.g)(ol,{mode:t.mode,shown:t.shown,referenceList:e,entityData:t.entityData,onSubmit:this.handleSubmit,onClose:this.close})}}]),n}(k.a.Component),sl=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.useV2Feature,r={},o=[],a=Object(b.createRef)(null),i={handlers:[],subscribe:function(e){return i.handlers.push(e)},unsubscribe:function(e){return i.handlers.filter((function(t){return t!==e}))},emit:function(e){var t;o=e,i.handlers.forEach((function(e){return e(o)})),null===(t=a.current)||void 0===t||t.onListChange(o)}},l=function(t){e&&e.handleRequestEdit(t)},c=Object(Fi.createSubscription)({getCurrentValue:function(){return o},subscribe:function(e,t){var n=function(){return t(o)};return e.subscribe(n),function(){return e.unsubscribe(n)}}});return{decorators:[{strategy:Pe("reference"),component:function(e){return Object(Y.g)(c,{source:i},(function(t){return Object(Y.g)(Yi,S()({},e,{editable:!0,referenceList:t,onRequestEdit:l}))}))}}],components:[Object(Y.g)(c,{key:"reference_dialog",source:i},(function(t){return Object(Y.g)(cl,{store:r,referenceList:t,onReferenceListChange:function(e){i.emit(e)},ref:function(t){return e=t}})}))],editableContentComponents:[Object(Y.g)(b.Fragment,{key:"reference"},Object(Y.g)(Zi,{ref:a}),Object(Y.g)(ll,null))],isEnabled:function(){return"code-block"!==T.RichUtils.getCurrentBlockType(r.getEditorState())},keyBindingFn:function(e){return n&&Ut(e)&&82===e.keyCode||T.KeyBindingUtil.hasCommandModifier(e)&&e.shiftKey&&57===e.keyCode?"insert-reference":void 0},handleCommand:function(t){return this.isEnabled()&&"insert-reference"===t&&e?(e.handleRequestInsert(),"handled"):"not-handled"},onChange:function(e){var t=e.getCurrentContent(),n=[];return De("reference")(t,(function(e,t){n.push(Object.assign(Object.assign({},t),{},{entityKey:e}))})),i.emit(n),e},initialize:function(e){var t=e.getEditorState,n=e.setEditorState;r.getEditorState=t,r.setEditorState=n},draft2html:{entityToHTML:function(e){return function(){for(var t=r.getEditorState().getCurrentContent(),n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=o[0];if("reference"===i.type){var l=[];De("reference")(t,(function(e,t){l.push(t)}));var c=Ui()(l,"refKey").findIndex((function(e){return e.refKey===i.data.refKey}))+1;return bn.a.renderToStaticMarkup(Object(Y.g)("sup",{"data-text":i.data.text||"","data-url":i.data.url||"","data-draft-node":"inline","data-draft-type":"reference","data-numero":c},"[",c,"]"))}return e.apply(void 0,o)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];if("sup"===o&&"reference"===a.getAttribute("data-draft-type")){var i=a.getAttribute("data-text"),l=a.getAttribute("data-url"),c=a.getAttribute("data-numero"),s=a.getAttribute("data-ref-key")||"ref_".concat(el("t:".concat(i,"u:").concat(l)),"_").concat(c);return T.Entity.create("reference","IMMUTABLE",{refKey:s,text:i,url:l})}return e.apply(void 0,n)}}},toolbar:{label:"æ’å…¥æ³¨é‡Š",shortcut:"âŒ˜+â‡§+9",icon:qi.a,commandName:"insert-reference",section:rt.a.STRUCTURE_STYLING,priority:2},toolbarV2:{label:"æ’å…¥æ³¨é‡Š",shortcut:"âŒ˜+âŒ¥+R",icon:qi.a,commandName:"insert-reference",section:W.a.STRUCTURE_GENERATION,priority:2}}},ul=n(120),dl=n.n(ul),fl=n(1735),pl=n(1020),hl=n(1395);function gl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ml=function(e){f()(n,e);var t=gl(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={enabled:e.props.initialEnabled,catalog:[]},e}return c()(n,[{key:"toggleCatalog",value:function(){this.setState({enabled:!this.state.enabled})}},{key:"onCatalogUpdate",value:function(e){this.setState({catalog:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.enabled,r=t.catalog,o=this.props,a=o.useCatalogV2,i=o.onChange,l=o.autoCalcShouldShow,c=o.maskGradientColor;if(!n)return null;var s=a?tn.b:hl.b;return Object(Y.g)(s,{catalog:r,inEditor:!0,scrollOffset:45,onChange:i,autoCalcShouldShow:l,maskGradientColor:c,onClose:function(){e.props.onCloseCatalog?e.props.onCloseCatalog():e.setState({enabled:!1})}})}}]),n}(b.Component);ml.propTypes={initialEnabled:y.a.bool,useCatalogV2:y.a.bool};var vl=ml,yl=dl()((function(e,t){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var r=Array.from(n.querySelectorAll("h2,h3")).map((function(e,n){var r,o=e.nodeName.toLowerCase(),a=Object(pl.b)(o),i=e.textContent,l=e.getAttribute("data-offset-key").split("-")[0];return null!=t&&t.getBlockForKey(l)&&(r=t.getBlockForKey(l).get("data").get("intoCatalogStatus")),{titleLevel:a,text:i,index:n,status:Object(tn.c)(r)}}));e&&e(r)}}),300),bl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isCatalogEnabled,n=e.onToggleCatalog,r=e.getShowToolbarButton,o=e.useV2Feature,a=e.useCatalogV2,i=e.onCloseCatalog,l=e.autoCalcShouldShow,c=e.maskGradientColor,s=void 0===c?"GBK10A":c,u=k.a.createRef(null),d={onCatalogChange:function(e){var t;return null===(t=u.current)||void 0===t?void 0:t.onCatalogUpdate(e)}},f=function(e,t){var n=d.getEditorState(),r=n.getCurrentContent(),o=T.Modifier.mergeBlockData(r,T.SelectionState.createEmpty(e),Le.a.Map({intoCatalogStatus:t})),a=T.EditorState.push(n,o,"change-block-data");d.getEditorRef().props.onChange(a)};return{store:d,keyBindingFn:function(e){return o&&Ut(e)&&74===e.keyCode||T.KeyBindingUtil.hasCommandModifier(e)&&e.shiftKey&&48===e.keyCode?"toggle-catalog":void 0},componentsBeforeEditor:[{component:Object(Y.g)(vl,{key:"catalog",initialEnabled:t,ref:u,useCatalogV2:a,onCloseCatalog:i,onChange:f,autoCalcShouldShow:l,maskGradientColor:s}),priority:1}],handleCommand:function(e){var t;return"toggle-catalog"===e?(null===(t=u.current)||void 0===t||t.toggleCatalog(),null==n||n(),"handled"):"not-handled"},queryCommandState:function(e){var t;if("toggle-catalog"===e)return null===(t=u.current)||void 0===t?void 0:t.state.enabled},onChange:function(e){var t=e.getCurrentContent();return yl(d.onCatalogChange,t),e},initialize:function(e){Object.assign(d,e);var t=d.getEditorState().getCurrentContent();yl(d.onCatalogChange,t)},hasCatalog:function(){var e,t;return Boolean((null===(e=u.current)||void 0===e?void 0:e.state.enabled)&&(null===(t=u.current)||void 0===t?void 0:t.state.catalog.length)>0)},toolbar:{section:rt.a.STRUCTURE_STYLING,Component:fl.a,commandName:"toggle-catalog",priority:1,shouldActive:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.state.enabled},shortcut:"âŒ˜+â‡§+0",shouldShow:r},toolbarV2:{section:W.a.STRUCTURE_GENERATION,Component:fl.a,commandName:"toggle-catalog",priority:1,shortcut:"âŒ˜+âŒ¥+J",shouldActive:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.state.enabled},shouldShow:r},draft2html:{blockToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a={"header-two":"h2","header-three":"h3"},i=a[o.type],l=Object(tn.c)(o.data.intoCatalogStatus)===tn.a.removed;return i&&l?bn.a.renderToStaticMarkup(Object(Y.g)(i,{"data-into-catalog-status":tn.a.removed},o.text)):e.apply(void 0,n)}}},html2draft:{htmlToBlock:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];if(["h1","h2","h3","h4","h5","h6"].includes(o)){var i=null==a?void 0:a.getAttribute("data-into-catalog-status");if(i)return["h1","h2"].includes(o)?{type:"header-two",data:{intoCatalogStatus:i}}:{type:"header-three",data:{intoCatalogStatus:i}}}return e.apply(void 0,n)}}}}},kl=n(2955),Cl=n(1255),Sl=function(e){var t=e.editable,n=e.entityKey,r=e.contentState,o=e.onRequestEdit,a=e.children,i=r.getEntity(n).getData().value,l=a&&b.Children.only(a[0]);return Object(Y.g)("span",{className:x()("FormulaCSR ztext-math",{isEditable:t}),"data-tex":i,onMouseDown:function(e){return e.preventDefault()},onClick:function(){if(t){var e,r=l&&l.props&&l.props.start;if(r>=0){var a=r+2;e=T.SelectionState.createEmpty(l.props.block.key).merge({anchorOffset:a,focusOffset:a})}o({entityKey:n,entitySelection:e,value:i})}}},Object(Y.g)(Cl.a,{tex:i}),Object(Y.g)("span",{className:"Formula-placeholder","data-paste-ignore":!0},l))};Sl.defaultProps={editable:!1,onRequestEdit:function(){}},Sl.propTypes={editable:y.a.bool,onRequestEdit:y.a.func,onLoaded:y.a.func,contentState:y.a.object.isRequired,entityKey:y.a.string.isRequired,children:y.a.node};var El=Sl,wl=n(219);function Ol(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Tl,Al,xl,jl={greek:function(e){return Object(Y.g)("svg",S()({xmlns:"http://www.w3.org/2000/svg",width:"46",height:"24",viewBox:"0 0 46 24"},e),Object(Y.g)("g",{fillRule:"evenodd"},Object(Y.g)("path",{fillRule:"nonzero",d:"M27.21 6.302L33 16.344H21.42l5.79-10.042zm-3.623 8.79h7.247L27.21 8.806l-3.623 6.286zM6.655 17.258C4.457 17.258 3 15.48 3 12.71c0-2.764 1.465-4.55 3.655-4.55 1.32 0 2.214.62 2.662 1.786h.13v-1.63H10.8v6.595c0 .81.227 1.05.73 1.05.14 0 .262-.01.4-.03v1.18c-.203.06-.407.08-.708.08-1.034 0-1.66-.51-1.766-1.55l-.01-.08h-.13c-.47 1.12-1.375 1.7-2.66 1.7zm7.93.325C14.52 17.91 14.29 18 14 18c-.327 0-.63-.242-.526-.655l2.135-8.483C16.12 6.785 17.48 5 19.21 5c1.36 0 2.336.942 2.336 2.082 0 1.013-.466 1.868-1.295 2.47.09.1.17.205.24.318.32.485.48 1.07.48 1.69 0 2.19-1.946 3.95-4.174 3.95-.58 0-1.132-.26-1.53-.665l-.682 2.738zm5.43-10.623c0-.55-.237-.855-.826-.855-1 0-2.05 1.303-2.49 3.053l-.88 3.566c-.04.12-.04.217-.04.393 0 .782.41 1.288 1.08 1.288.8 0 1.682-.584 2.05-1.402.3-.673.44-1.212.44-1.835 0-.466-.1-.778-.32-1.023-.34.09-.588.128-.877.128h-.07c-.175.003-.29 0-.42-.012-.527-.04-.9-.23-.9-.73 0-.52.4-.74.967-.8.156-.01.285-.02.495-.02h.05c.267 0 .574.05.845.13.55-.4.887-1.17.887-1.87zM6.762 15.995c1.637 0 2.663-1.296 2.663-3.285 0-1.957-.96-3.285-2.475-3.285-1.538 0-2.5 1.23-2.5 3.285 0 2.013.913 3.285 2.313 3.285z"}),Object(Y.g)("path",{d:"M39.914 10l2.914 3.416H37"})))},arrow:function(e){return Object(Y.g)("svg",S()({xmlns:"http://www.w3.org/2000/svg",width:"46",height:"24",viewBox:"0 0 46 24"},e),Object(Y.g)("path",{d:"M22.448 10.226h8.53c-.36-.486-.612-.918-1.062-1.746l1.476-.828c.684 1.458 1.08 2.124 1.8 3.006.666.81 1.17 1.278 2.34 2.142-1.17.864-1.674 1.332-2.34 2.142-.72.882-1.116 1.548-1.8 3.006l-1.476-.81c.594-1.08.648-1.188 1.026-1.746h-8.494V13.79h9.592c.27-.306.486-.522 1.008-.99-.216-.198-.774-.738-.99-.972h-9.61v-1.602zM17.326 7l3.092 3.092H17.9l-.014 7.56h-1.133l.006-7.56h-2.527L17.323 7zM2 12.326l3.092-3.09v2.517l7.56.013V12.9l-7.56-.007v2.525L2 12.326zM41.914 10l2.914 3.416H39",fillRule:"evenodd"}))},symbol:function(e){return Object(Y.g)("svg",S()({xmlns:"http://www.w3.org/2000/svg",width:"46",height:"24",viewBox:"0 0 46 24"},e),Object(Y.g)("path",{d:"M39.914 10l2.914 3.416H37m-25.02 2.062l-.984.98-3.507-3.493-3.51 3.492-.98-.98 3.504-3.49L3 8.494l.982-.98L7.49 11.01l3.506-3.492.983.98-3.51 3.49 3.506 3.492zm6.25-6.902c0-.64.53-1.182 1.186-1.182.655 0 1.187.543 1.187 1.182 0 .652-.532 1.182-1.187 1.182s-1.187-.53-1.187-1.182zm-3.658 2.73h9.688v1.387h-9.688v-1.386zm3.657 4.118c0-.652.53-1.182 1.183-1.182s1.187.53 1.187 1.182c0 .64-.53 1.182-1.186 1.182s-1.187-.544-1.187-1.182zM26.26 7H33v10h-6.74v-1.372h5.348v-2.95h-5.35v-1.385h5.35v-2.92h-5.35V7z",fillRule:"evenodd"}))},math:function(e){return Object(Y.g)("svg",S()({xmlns:"http://www.w3.org/2000/svg",width:"46",height:"24",viewBox:"0 0 46 24"},e),Object(Y.g)("path",{d:"M1 12.18h1.583l1.496 5.235h.12l2.87-10.79h3.65v1.47H8.19L5.17 18.988H3.12L1 12.18zm13.708 7.174c-1.222-1.993-1.945-4.104-1.945-6.713 0-2.58.723-4.72 1.945-6.7l.946.41C14.524 8.24 14 10.45 14 12.64c0 2.203.524 4.42 1.654 6.294l-.946.42zm3.1 0l-.945-.42c1.13-1.875 1.656-4.09 1.656-6.293 0-2.19-.53-4.4-1.66-6.29l.94-.4c1.23 1.98 1.95 4.12 1.95 6.7 0 2.61-.73 4.72-1.96 6.72zm13.738-4.91c-.103.618-.502 1.332-1.197 2.142-.7.81-1.56 1.22-2.58 1.236-.52 0-.99-.133-1.42-.398-.43-.265-.75-.596-.96-.993-.62.93-1.37 1.4-2.24 1.4-.55 0-1.02-.16-1.42-.48-.4-.32-.61-.76-.62-1.3 0-.42.1-.77.31-1.03.2-.266.4-.43.6-.486.19-.06.36-.09.51-.09.28 0 .51.08.68.245.18.16.263.375.263.64 0 .677-.37 1.14-1.11 1.39.165.19.46.29.89.29.19 0 .33-.016.42-.045.56-.236.975-.72 1.24-1.457.89-3.253 1.33-5.15 1.33-5.696 0-.41-.117-.707-.354-.884-.235-.173-.494-.262-.775-.262-.545 0-1.085.24-1.617.73s-.895 1.08-1.087 1.79c-.043.146-.087.227-.13.24-.045.016-.16.03-.355.046h-.09c-.22 0-.33-.06-.33-.18 0-.017.016-.1.046-.245.234-.84.69-1.583 1.37-2.23.68-.648 1.47-.97 2.374-.97 1.032 0 1.815.462 2.35 1.39.603-.913 1.3-1.37 2.08-1.37h.136c.724 0 1.24.19 1.55.575.31.38.474.79.49 1.216 0 .47-.14.85-.42 1.146-.28.294-.615.44-1 .44-.636 0-.954-.31-.954-.926 0-.297.09-.554.267-.775.18-.22.35-.365.51-.44.165-.072.26-.11.29-.11l.067-.02c0-.013-.043-.043-.13-.087-.09-.046-.21-.1-.357-.157-.15-.057-.29-.08-.42-.065-.537 0-.99.33-1.38.996-.134.24-.304.74-.51 1.5-.21.77-.415 1.56-.622 2.39-.205.825-.323 1.31-.352 1.458-.075.4-.11.685-.11.86 0 .414.11.71.33.885.222.18.473.268.754.268.59 0 1.14-.233 1.66-.704.51-.47.88-1.07 1.08-1.81.03-.13.066-.203.11-.22.045-.012.163-.03.355-.04h.31c.09.09.13.17.13.24zm.736-5.734V5H36v3.71h-3.718zm.93-.955h1.836V5.933h-1.836v1.822zM32.282 20v-3.71H36V20h-3.718zm.93-.955h1.836v-1.82h-1.836v1.82zM41.914 10l2.914 3.416H39",fillRule:"evenodd"}))},comparison:function(e){return Object(Y.g)("svg",S()({xmlns:"http://www.w3.org/2000/svg",width:"46",height:"24",viewBox:"0 0 46 24"},e),Object(Y.g)("path",{d:"M31.265 8.03c2.66 0 4.735 1.946 4.735 4.526s-2.076 4.527-4.735 4.527h-5.93V15.66h5.93c1.863 0 3.285-1.327 3.285-3.104 0-1.777-1.422-3.102-3.285-3.102h-5.93V8.03h5.93zm-7.102 3.567H20.21l-.668 1.82h4.62v1.438h-5.147l-.938 2.595-1.365-.494.782-2.1h-3.427v-1.44h3.94l.667-1.82h-4.607v-1.423H19.2l.953-2.623 1.365.494-.782 2.13h3.427v1.423zM11.523 7l.682 1.27-8.148 4.202v.056l8.148 4.203-.683 1.27L1 12.53v-.056L11.522 7zm29.39 3l2.915 3.416H38",fillRule:"evenodd"}))}},_l=(Tl=function(){return fetch("https://unpkg.zhimg.com/math-palettes@0.0.1/external.json",{mode:"cors"}).then((function(e){return e.json()}))},xl=!1,function(){return xl||(Al=Tl.apply(void 0,arguments),xl=!0),Al}),Rl=function(e){var t=e.name,n=e.slug,r=e.width,o=e.height,a=e.style;return Object(Y.g)("svg",{className:"MathToolbar-paletteIcon",width:r,height:o,style:a},Object(Y.g)("title",null,t),Object(Y.g)("use",{xlinkHref:"#".concat(n)}))},Ml=function(e){f()(n,e);var t=Ol(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.palette,r=t.palettes,o=t.onSelect,a=jl[n],i=Object(Y.g)(N.c,{className:"MathToolbar-button",preset:"plain","aria-label":n},Object(Y.g)(a,{fill:"#8590a6"}));return Object(Y.g)(wl.a,{arrowed:!0,noLayer:!0,preventCloseOnTarget:!0,placement:"top",toggler:i,ref:function(t){return e.popover=t}},Object(Y.g)("div",{className:"MathToolbar-palettes MathToolbar-palettes--".concat(n),onMouseDown:function(e){return e.preventDefault()},onMouseLeave:function(){return e.popover.close()}},r&&r[n.toUpperCase()].map((function(e){return Object(Y.g)(N.c,{key:e.math,preset:"plain",className:"MathToolbar-palettesButton",onClick:function(t){t.preventDefault(),o(e.math)}},Object(Y.g)(Rl,e))}))))}}]),n}(b.Component),Ll=function(e){f()(n,e);var t=Ol(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={svg:null,palettes:null},e}return c()(n,[{key:"componentDidMount",value:function(){var e=this;_l().then((function(t){var n=t.svg,r=t.palettes;e.setState({svg:n,palettes:r})}))}},{key:"render",value:function(){var e=this.state,t=e.svg,n=e.palettes,r=this.props.onSelect;return Object(Y.g)("div",{className:"MathToolbar",onMouseDown:function(e){return e.preventDefault()}},Object(Y.g)(Ml,{palettes:n,palette:"greek",onSelect:r}),Object(Y.g)(Ml,{palettes:n,palette:"symbol",onSelect:r}),Object(Y.g)(Ml,{palettes:n,palette:"comparison",onSelect:r}),Object(Y.g)(Ml,{palettes:n,palette:"math",onSelect:r}),Object(Y.g)(Ml,{palettes:n,palette:"arrow",onSelect:r}),Object(Y.g)("span",{hidden:!0,dangerouslySetInnerHTML:{__html:t}}))}}]),n}(b.Component);function Bl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Il=function(e,t){var n=e.value,r=e.selectionStart,o=e.selectionEnd,a=n.slice(0,r),i=n.slice(o,n.length),l=(a+t).length;return{value:a+t+i,selectionStart:l,selectionEnd:l}},Nl=function(e){f()(n,e);var t=Bl(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={value:""},e.onChange=function(t){e.setState({value:t.target.value})},e.onSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.value),e.onClose()},e.onClose=function(){e.setState({value:""}),e.props.onClose()},e.handleFormRef=function(t){t&&e.setState({value:e.props.defaultValue})},e.handleSelect=function(t){var n=Il(e.input,t),r=n.value,o=n.selectionStart,a=n.selectionEnd;e.setState({value:r},(function(){e.input.focus(),e.input.selectionStart=o,e.input.selectionEnd=a}))},e}return c()(n,[{key:"componentDidUpdate",value:function(e){!e.shown&&this.props.shown&&this.input.focus()}},{key:"render",value:function(){var e=this,t=this.props.shown,n=this.state.value;return Object(Y.g)(Yn.b,{overlay:!0,title:"æ’å…¥å…¬å¼",className:"FormulaModal",onClose:this.onClose,maskClosable:!1,hotKeyClosable:!1},t&&Object(Y.g)("form",{className:"FormulaModal-form",onSubmit:this.onSubmit,ref:this.handleFormRef},Object(Y.g)(Jn.a,{className:"FormulaModal-input",before:Object(Y.g)(Ll,{onSelect:this.handleSelect}),noPadding:!0,multiline:!0,required:!0,spread:!0,large:!0,type:"text",onRef:function(t){e.input=t},placeholder:"è¾“å…¥ TeX å…¬å¼",value:n,onChange:this.onChange}),Object(Y.g)("div",{className:"FormulaModal-formulaCSR"},n?Object(Y.g)(Cl.a,{tex:n}):Object(Y.g)("div",{className:"FormulaModal-previewText"},"é¢„è§ˆ")),Object(Y.g)(Yn.a,{className:"FormulaModal-buttonGroup",direction:"horizontal"},Object(Y.g)(N.c,{onClick:this.onClose,color:"grey"},"å–æ¶ˆ"),Object(Y.g)(N.c,{preset:"primary",color:"blue",type:"submit"},"ç¡®è®¤"))))}}]),n}(b.Component),Dl=" ";var Pl=function(e,t,n){var r=e.getCurrentContent(),o=n||e.getSelection(),a=r.getBlockForKey(o.focusKey).getText(),i=function(e){return!!a&&a.charAt(e)},l=i(o.anchorOffset-1),c=i(o.focusOffset),s=r.createEntity("formula","IMMUTABLE",{value:t}),u=s.getLastCreatedEntityKey();" "!==l?(s=T.Modifier.replaceText(s,o," "),s=T.Modifier.insertText(s,s.getSelectionAfter(),Dl,null,u)):s=T.Modifier.replaceText(s,o,Dl,null,u);var d=s.getSelectionAfter();" "!==c&&(s=T.Modifier.insertText(s,s.getSelectionAfter()," ")),d=d.merge({anchorOffset:d.anchorOffset+1,focusOffset:d.focusOffset+1});var f=T.EditorState.push(e,s,"insert-characters");return f=T.EditorState.forceSelection(f,d)};var zl,ql=function(e,t,n){var r=t.entityKey,o=t.entitySelection,a=Object(Tr.a)(e,r,{value:n});return o&&(a=T.EditorState.forceSelection(a,o)),a};function Kl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Ul=function(e){f()(n,e);var t=Kl(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={form:{entityKey:null,entitySelection:null,value:"",shown:!1}},e.close=function(){e.replaceFormState({shown:!1,value:""})},e.handleSubmit=function(t){var n,r=e.props.store,o=e.state.form,a=o.entityKey,i=o.entitySelection,l=r.getEditorState();n=a?ql(l,{entityKey:a,entitySelection:i},t):Pl(l,t),r.setEditorState(n)},e.handleRequestEdit=function(t){var n=t.entityKey,r=t.entitySelection,o=t.value;e.replaceFormState({shown:!0,entityKey:n,entitySelection:r,value:o})},e.handleRequestInsert=function(){e.replaceFormState({shown:!0,value:""})},e}return c()(n,[{key:"replaceFormState",value:function(e){this.setState({form:e})}},{key:"render",value:function(){var e=this.state.form;return Object(Y.g)(Nl,{shown:e.shown,defaultValue:e.value,onSubmit:this.handleSubmit,onClose:this.close})}}]),n}(k.a.Component),Fl=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.useV2Feature,r=t.getMarkdownEnabled,o=Kr("texMath"),a={},i=function(t){e&&e.handleRequestEdit(t)};return{decorators:[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"formula"===n.getEntity(t).getType()}),t)},component:function(e){return Object(Y.g)(El,S()({},e,{editable:!0,onRequestEdit:i}))}}],components:[Object(Y.g)(Ul,{key:"formula_dialog",store:a,ref:function(t){e=t}})],isEnabled:function(){return"code-block"!==T.RichUtils.getCurrentBlockType(a.getEditorState())},handleBeforeInput:function(e){if(null==r||!r())return"not-handled";if(" "!==e)return"not-handled";if("unstyled"!==T.RichUtils.getCurrentBlockType(a.getEditorState()))return"not-handled";var t=o.handleBeforeInput(a);if(t&&t.data){var n=t.editorState,i=t.selection,l=t.data.text;return a.setEditorState(Pl(n,l,i)),"handled"}return"not-handled"},keyBindingFn:function(e){return n&&Ut(e)&&69===e.keyCode||Ft(e)&&69===e.keyCode?"insert-formula":void 0},handleCommand:function(t){return this.isEnabled()&&"insert-formula"===t&&e?(e.handleRequestInsert(),"handled"):"not-handled"},initialize:function(e){var t=e.getEditorState,n=e.setEditorState;a.getEditorState=t,a.setEditorState=n},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"formula"===o.type?Object(ke.a)(zl||(zl=ye()(['<img eeimg="1" src="//www.zhihu.com/equation?tex=','" alt="','"/>'])),encodeURIComponent(o.data.value),o.data.value):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=n[1];return"a"===o&&a.hasAttribute("eeimg")?T.Entity.create("formula","IMMUTABLE",{value:a.getAttribute("alt")}):e.apply(void 0,n)}}},toolbar:{section:rt.a.PROFESSIONAL_MEDIA,label:"æ’å…¥å…¬å¼",shortcut:"âŒ˜+â‡§+E",icon:kl.a,commandName:"insert-formula",priority:2},toolbarV2:{section:W.a.PROFESSIONAL_MEDIA,label:"æ’å…¥å…¬å¼",shortcut:"âŒ˜+âŒ¥+E",icon:kl.a,commandName:"insert-formula",priority:2}}},Vl=n(2968);function Hl(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Gl(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Array.from({length:e}).map((function(e,r){return Array.from({length:t}).map((function(){return{isHeader:n&&0===r,content:""}}))}))}function Wl(e){return e.every((function(e){return e.every((function(e){return e.isHeader}))}))}function Zl(e,t){var n=e[t];return!!n&&n.filter((function(e){return e.isHeader})).length===n.length}function $l(e,t){var n=e.map((function(e){return e[t]}));return!!n&&n.filter((function(e){return e.isHeader})).length===n.length}function Yl(e,t,n,r){var a=Hl(o.a,e);return a.splice("before"===n?t:t+1,0,e[t].map((function(e,n){return r(e,t,n)}))),a}function Jl(e,t,n,r){return e.map((function(e,a){var i=Hl(o.a,e);return i.splice("before"===n?t:t+1,0,r(e[t],a,t)),i}))}function Xl(e,t){return e.filter((function(e,n){return n!==t}))}function Ql(e,t){return e.map((function(e){return e.filter((function(e,n){return n!==t}))}))}function ec(e,t,n){return function(e,t,n){return e.map((function(e,r){return r!==t?e:e.map((function(e,r){return n(e,t,r)}))}))}(e,t,(function(t,r,o){return $l(e,o)&&!Wl(e)?t:Object.assign(Object.assign({},t),{},{isHeader:n})}))}function tc(e,t,n){return function(e,t,n){return e.map((function(e,r){return e.map((function(e,o){return o!==t?e:n(e,r,t)}))}))}(e,t,(function(t,r){return Zl(e,r)&&!Wl(e)?t:Object.assign(Object.assign({},t),{},{isHeader:n})}))}var nc=function(e){var t=Object(b.useRef)(null),n=e.content,r=e.onChange,o=e.onClick,a=e.onFocus,i=e.onBlur;Object(b.useEffect)((function(){t.current&&!t.current.innerText&&n&&(t.current.innerText=n)}),[n]);var l=Object(b.useCallback)((function(e){if(!t.current||document.activeElement!==e.target)return!1;var n=document.getSelection().focusNode;return!t.current.contains(n)}),[]),c=Object(b.useCallback)((function(e){var t=e.target.innerText.trim();r(t),t||(e.target.innerText="")}),[r]),s=Object(b.useCallback)((function(e){e.preventDefault();var t=e.clipboardData.getData("Text");document.execCommand("insertHTML",!1,t)}),[]);return Object(Y.g)(go.a,{className:"Table-dataInputContainer",onEvent:l},Object(Y.g)("div",{ref:t,className:"Table-dataInput",contentEditable:!0,onClick:o,onInput:c,onPaste:s,onFocus:a,onBlur:i}))};var rc=function(e){var t=e.className,n=e.style,r=e.onClick,o=e.onMouseDown,a=e.onTableDataChange,i=e.onTableDataFocus,l=e.onTableDataBlur,c=e.data,s=c.size,u=void 0===s?"normal":s,d=c.rowStyle,f=void 0===d?"normal":d,p=c.tableData,h=void 0===p?[]:p;return Object(Y.g)("table",{className:x()("Table",t),style:n,onClick:r,onMouseDown:o,"data-draft-node":"block","data-draft-type":"table","data-size":u,"data-row-style":f},Object(Y.g)("tbody",null,h.map((function(e,t){return Object(Y.g)("tr",{className:"Table-row",key:t},e.map((function(e,n){var o=e.isHeader,c=e.content,s=o?"th":"td";return Object(Y.g)(s,{key:n,className:x()("Table-data",{"Table-header":o})},Object(Y.g)(nc,{content:c,onChange:function(r){a(function(e,t,n,r){return e.map((function(e,o){return o!==t?e:e.map((function(e,t){return t!==n?e:r}))}))}(h,t,n,Object.assign(Object.assign({},e),{},{content:r})))},onClick:r,onFocus:function(){i({rowIndex:t,columnIndex:n})},onBlur:l}))})))}))))},oc=n(2956),ac=n(2957),ic=n(2958),lc=n(2959),cc=n(2960),sc=n(2961),uc=n(2962),dc=n(2963),fc=n(2964),pc=n(2965),hc=[{name:"insertRowBefore",icon:oc.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"INSERT_ROW",payload:"before"})},disabled:function(e){return e.data.tableData.length>=100}},{name:"insertRowAfter",icon:ac.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"INSERT_ROW",payload:"after"})},disabled:function(e){return e.data.tableData.length>=100}},{name:"removeRow",icon:ic.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"REMOVE_ROW"})}},{name:"separator"},{name:"insertColumnBefore",icon:lc.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"INSERT_COLUMN",payload:"before"})},disabled:function(e){return e.data.tableData[0].length>=8}},{name:"insertColumnAfter",icon:cc.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"INSERT_COLUMN",payload:"after"})},disabled:function(e){return e.data.tableData[0].length>=8}},{name:"removeColumn",icon:sc.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"REMOVE_COLUMN"})}},{name:"separator"},{name:"toggleRowHeader",icon:uc.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"TOGGLE_ROW_HEADER"})},isActive:function(e){return Zl(e.data.tableData,0)}},{name:"toggleColumnHeader",icon:dc.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"TOGGLE_COLUMN_HEADER"})},isActive:function(e){return $l(e.data.tableData,0)}},{name:"toggleStriped",icon:fc.a,onClick:function(e){var t=e.data.rowStyle;(0,e.onTableToolbarCommand)({type:"SET_ROW_STYLE",payload:"striped"===t?"normal":"striped"})},isActive:function(e){return"striped"===e.data.rowStyle}},{name:"separator"},{name:"removeTable",icon:pc.a,onClick:function(e){(0,e.onTableToolbarCommand)({type:"REMOVE_TABLE"})}},{name:"separator"},{name:"changeSizeSmall",icon:So.a,isActive:function(e){return"small"===e.data.size},onClick:function(e){(0,e.onTableToolbarCommand)({type:"CHANGE_SIZE",payload:"small"})},disabled:function(e){var t=e.data;return"normal"===t.size&&t.tableData[0].length>4},text:"å±…ä¸­"},{name:"changeSizeNormal",icon:Eo.a,isActive:function(e){return"normal"===e.data.size},onClick:function(e){(0,e.onTableToolbarCommand)({type:"CHANGE_SIZE",payload:"normal"})},text:"å…¨å®½"}];function gc(e){var t=e.data,n=e.isFocused,r=e.useV2Feature,o=e.children,a=Object(b.useRef)(null);return Object(Y.g)("div",{className:"TableToolbar-container","data-size":t.size},Object(Y.g)("div",{ref:a},o),Object(Y.g)(Pn.a,{target:a.current,isOpen:n,placement:"top",arrowed:!0,onMouseDown:function(e){return e.preventDefault()}},Object(Y.g)("div",{className:"TableToolbar"},hc.map((function(t,n){var o,a,i,l;return"separator"===t.name?Object(Y.g)("div",{key:"seprator-".concat(n),className:"TableToolbar-separator"}):Object(Y.g)(N.c,{key:t.name,preset:"plain",className:x()("TableToolbar-button",{"is-active":null!==(o=null===(a=t.isActive)||void 0===a?void 0:a.call(t,e))&&void 0!==o&&o}),onClick:function(n){n.preventDefault(),t.onClick(e)},disabled:null!==(i=null===(l=t.disabled)||void 0===l?void 0:l.call(t,e))&&void 0!==i&&i},Object(Y.g)(t.icon,null),r&&t.text)})))))}gc.decorate=function(e){return function(t){return Object(Y.g)(gc,t,Object(Y.g)(e,t))}};var mc=gc,vc=n(2966),yc=n(2967);var bc=function(e){var t=e.data,n=e.data,r=n.row,o=n.column,a=e.shown,i=e.onChange,l=e.onSubmit,c=e.onClose;return Object(Y.g)(Yn.b,{overlay:!0,title:"æ’å…¥è¡¨æ ¼",className:"TableForm",onClose:function(){c()}},a&&Object(Y.g)("form",{onSubmit:function(e){e.preventDefault(),l()}},Object(Y.g)(Jn.a,{className:"TableForm-input",type:"number",min:1,max:100,required:!0,value:r,placeholder:"è¾“å…¥è¡¨æ ¼è¡Œæ•°ï¼ˆæœ€å¤§ ".concat(100," è¡Œï¼‰"),onChange:function(e){i(Object.assign(Object.assign({},t),{},{row:e.target.value}))},before:Object(Y.g)(vc.a,null)}),Object(Y.g)(Jn.a,{className:"TableForm-input",type:"number",min:1,max:8,required:!0,value:o,placeholder:"è¾“å…¥è¡¨æ ¼åˆ—æ•°ï¼ˆæœ€å¤§ ".concat(8," åˆ—ï¼‰"),onChange:function(e){i(Object.assign(Object.assign({},t),{},{column:e.target.value}))},before:Object(Y.g)(yc.a,null)}),Object(Y.g)(Yn.a,{className:"TableForm-buttonGroup",direction:"horizontal"},Object(Y.g)(N.c,{onClick:c,color:"grey"},"å–æ¶ˆ"),Object(Y.g)(N.c,{preset:"primary",color:"blue",type:"submit",disabled:!r||r>100||!o||o>8},"æ’å…¥"))))};function kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Cc={row:"",column:""},Sc=function(e){f()(n,e);var t=kc(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={shown:!1,formData:Cc},e.close=function(){e.setState({shown:!1})},e.show=function(){e.setState({shown:!0,formData:Cc})},e}return c()(n,[{key:"render",value:function(){var e=this,t=this.props.onSubmit,n=this.state,r=n.shown,o=n.formData;return Object(Y.g)(bc,{shown:r,data:o,onChange:function(t){return e.setState({formData:t})},onSubmit:function(){e.setState({shown:!1}),t(o)},onClose:function(){e.setState({shown:!1})}})}}]),n}(k.a.Component),Ec=function(e){var t=e.data,n=t.size,r=t.rowStyle,o=t.tableData;return bn.a.renderToStaticMarkup(Object(Y.g)("table",{"data-draft-node":"block","data-draft-type":"table","data-size":n,"data-row-style":r},Object(Y.g)("tbody",null,o.map((function(e,t){return Object(Y.g)("tr",{key:t},e.map((function(e,t){var n=e.isHeader,r=e.content,o=n?"th":"td";return Object(Y.g)(o,{key:t},r)})))})))))};function wc(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Oc=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({decorator:function(e){return e}},t);var n=null,r=null,a={},i=Ce(Cn,t.decorator),l=Ce.apply(void 0,[i,mc.decorate])(rc),c=function(e){var t=e.row,n=e.column,r=a.getEditorState(),o=Object(me.a)(r,"table","IMMUTABLE",{size:"normal",tableData:Gl(t,n)});a.setEditorState(o)},s=function(){t.onRemove()},u=function(e){var t=e.rowIndex,o=e.columnIndex;n=t,r=o},d=function(){n=null,r=null},f=function(e,t){a.setEditorState(io(a.getEditorState(),e,{tableData:t}))},p=function(e,t){var o,i=t.type,l=t.payload,c=a.getEditorState(),u=nr(c,e),d=u.size,f=u.tableData;if("INSERT_COLUMN"===i){if(null===n||null===r)return;var p=f,h=0===r&&$l(f,0);h&&(p=tc(p,0,!1)),p=Jl(p,r,l,(function(e){return{isHeader:e.isHeader,content:""}})),h&&(p=tc(p,0,!0));var g=p[0].length>4?"normal":d;o=io(c,e,{size:g,tableData:p})}if("INSERT_ROW"===i){if(null===n||null===r)return;var m=f,v=0===n&&Zl(f,0);v&&(m=ec(m,0,!1)),m=Yl(m,n,l,(function(e){return{isHeader:e.isHeader,content:""}})),v&&(m=ec(m,0,!0)),o=io(c,e,{tableData:m})}if("REMOVE_ROW"===i||"REMOVE_COLUMN"===i){if(null===n||null===r)return;if("REMOVE_ROW"===i&&1===f.length||"REMOVE_COLUMN"===i&&1===f[0].length)return void s();var y="REMOVE_ROW"===i?Xl(f,n):Ql(f,r);o=io(c,e,{tableData:y})}if("TOGGLE_ROW_HEADER"===i||"TOGGLE_COLUMN_HEADER"===i){var b="TOGGLE_ROW_HEADER"===i?ec(f,0,!Zl(f,0)):tc(f,0,!$l(f,0));o=io(c,e,{tableData:b})}"REMOVE_TABLE"===i&&s(),"SET_ROW_STYLE"===i&&(o=io(a.getEditorState(),e,{rowStyle:l})),"CHANGE_SIZE"===i&&(o=io(a.getEditorState(),e,{size:l})),o&&a.setEditorState(o)};return{initialize:function(e){Object.assign(a,e)},keyBindingFn:function(e){return t.useV2Feature&&Ut(e)&&84===e.keyCode||Ft(e)&&84===e.keyCode?"insert-table":void 0},components:[Object(Y.g)(Sc,{key:"table_dialog",onSubmit:c,ref:function(t){e=t}})],handleCommand:function(t){return"insert-table"===t&&e?(e.show(),"handled"):"not-handled"},blockRendererFn:function(e,o){var a=o.getEditorState;if("atomic"===e.getType()){var i=a().getCurrentContent(),c=e.getEntityAt(0);if(!c)return console.warn("Entity not found",e),null;var s=i.getEntity(c);if("table"===s.getType()){var h=s.getData();return{editable:!1,component:l,props:{data:h,focusingRowIndex:n,focusingColumnIndex:r,onTableDataFocus:u,onTableDataBlur:d,onTableDataChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,[c].concat(t))},onTableToolbarCommand:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.apply(void 0,[c].concat(t))},useV2Feature:t.useV2Feature}}}}return null},draft2html:{blockToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];if("atomic"===o.type){var i=a.getEditorState().getCurrentContent(),l=i.getBlockForKey(o.key),c=null==l?void 0:l.getEntityAt(0);if(c){var s=i.getEntity(c);if(s&&"table"===s.getType())return Ec(s)}}return e.apply(void 0,n)}},entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"table"===o.type?Ec(o):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1];if("table"===a){var l=i.getAttribute("data-size")||"normal",c=i.getAttribute("data-row-style")||"normal",s=i.querySelector("thead"),u=i.querySelector("tbody"),d=[null==s?void 0:s.children,null==u?void 0:u.children].filter(Boolean).reduce((function(e,t){return[].concat(wc(o.a,e),wc(o.a,Array.from(t)))}),[]).map((function(e){return e.children.length?Array.from(e.children).map((function(e){var t=document.createElement(e.tagName);return t.innerHTML=e.innerHTML.replace(/<br>/g,"\n"),{isHeader:"TH"===t.tagName,content:t.textContent.trim()}})):[{isHeader:!1,content:""}]}));return T.Entity.create("table","IMMUTABLE",{size:l,rowStyle:c,tableData:d})}return e.apply(void 0,n)}}},toolbar:{section:rt.a.PROFESSIONAL_MEDIA,label:"æ’å…¥è¡¨æ ¼",icon:Vl.a,shortcut:"âŒ˜+â‡§+T",commandName:"insert-table",priority:1,shouldShow:t.getShowToolbarButton},toolbarV2:{section:W.a.PROFESSIONAL_MEDIA,label:"æ’å…¥è¡¨æ ¼",icon:Vl.a,shortcut:"âŒ˜+âŒ¥+T",commandName:"insert-table",priority:1,shouldShow:t.getShowToolbarButton}}},Tc=function(e){var t=e.id,n=e.offsetKey,r=e.className,o=e.onClick,a=e.onMouseDown;return Object(Y.g)(Tn.a,{inEditor:"draftjs",useZVideoLinkCard:!1,className:r,onClick:o,onMouseDown:a,"data-offset-key":n,id:t})},Ac={decorator:function(e){return e},newLinkCard:!0},xc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},Ac),e);var t={},n=Ce(Cn,e.decorator),r=Ce(n)(Tc),o=function(e){var n=t.getEditorState(),r=e.reduce((function(e,t){return Object(me.a)(e,"zvideo-card","IMMUTABLE",t)}),n);t.setEditorState(r)};return{initialize:function(e){Object.assign(t,e)},handleCommand:function(t){if(t.startsWith("insert-zvideo-card:")){var n=JSON.parse(t.replace("insert-zvideo-card:",""));return o(n),"handled"}return"insert-zvideo"===t?(e.onInsertZVideo(),"handled"):"not-handled"},blockRendererFn:function(e){if("atomic"===e.getType()){var n=t.getEditorState().getCurrentContent(),o=e.getEntityAt(0);if(!o)return console.warn("Entity not found",e),null;var a=n.getEntity(o);if("zvideo-card"===a.getType())return{editable:!1,component:r,props:{id:a.getData()}}}return null},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=o.data;return"zvideo-card"===o.type?bn.a.renderToStaticMarkup(Object(Y.g)("a",{href:"https://www.zhihu.com/zvideo/".concat(a),"data-draft-node":"block","data-draft-type":"link-card"})):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(t){return function(){for(var n,r,o=Boolean(null===(n=(r=e).getIsVideoAnswer)||void 0===n?void 0:n.call(r)),a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];var c=i[1];if(!o&&Ue(c)&&"link-card"===c.getAttribute("data-draft-type")){var s,u=null===(s=c.getAttribute("href").match(xn))||void 0===s?void 0:s[1];if(u)return T.Entity.create("zvideo-card","IMMUTABLE",u)}return t.apply(void 0,i)}}},toolbar:{section:rt.a.BASIC_MEDIA,label:"æ’å…¥è§†é¢‘",icon:ca.a,onClick:function(e){O.a.trackEvent(e.target,{id:8619,action:"Add"})},commandName:"insert-zvideo",priority:3,shouldShow:e.getShowToolbarButton},toolbarV2:{section:W.a.BASIC_MEDIA,label:"æ’å…¥è§†é¢‘",text:"è§†é¢‘",icon:ca.a,onClick:function(e){O.a.trackEvent(e.target,{id:8619,action:"Add"})},commandName:"insert-zvideo",priority:3,shouldShow:e.getShowToolbarButton}}},jc=function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=n.getStartOffset(),o=t.getBlockForKey(n.getStartKey()).getEntityAt(r),a=o&&t.getEntity(o);return a&&"file-link-card"===a.type.toLowerCase()?o:null};function _c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Rc=function(e){f()(n,e);var t=_c(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.target,r=e.data,o=void 0===r?{}:r,a=e.onRef;return Object(Y.g)(Pn.a,{arrowed:!0,target:n,isOpen:t,placement:"bottom",className:"FileLinkCardBubble",onRef:a,onMouseDown:function(e){return e.preventDefault()}},Object(Y.g)("div",{className:"FileLinkCardBubble-content"},Object(Y.g)("a",{target:"_blank",rel:"noopener noreferrer",href:o.href,className:"FileLinkCardBubble-previewLink"},o.href)))}}]),n}(k.a.Component),Mc=n(1155);function Lc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Bc={decorator:function(e){return e}},Ic=function(e){f()(n,e);var t=Lc(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={isOpen:!1},e.handleClick=function(t){if(e.state.isOpen){var n=e.props.store,r=Object(Mn.findDOMNode)(n.getEditorRef());e.bubbleEl&&!e.bubbleEl.contains(t.target)&&r&&!r.contains(t.target)&&e.setState({isOpen:!1})}},e.handleRef=function(t){e.bubbleEl=t,t?document.addEventListener("click",e.handleClick):document.removeEventListener("click",e.handleClick)},e}return c()(n,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.getData,r=t.getTarget;return Object(Y.g)(Rc,{data:n(),isOpen:e,target:r(),onRef:this.handleRef})}}]),n}(k.a.Component),Nc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},Bc),e);var t,n,r={},o={},a=Ce(Cn,e.decorator),i=a(Mc.a),l=function(e){var t=r.getEditorState(),n=e.reduce((function(e,t){return Object(me.a)(e,"file-link-card","IMMUTABLE",t)}),t);r.setEditorState(n)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getEditorState();t=jc(e);var o=Boolean(t);return n&&n.setState({isOpen:o}),e};return{initialize:function(e){Object.assign(r,e)},handleCommand:function(e){if(e.startsWith("insert-file-link-card:")){var t=JSON.parse(e.replace("insert-file-link-card:",""));return l(t),"handled"}return"not-handled"},onChange:c,blockRendererFn:function(e){if("atomic"===e.getType()){var t=r.getEditorState().getCurrentContent(),n=e.getEntityAt(0);if(!n)return console.warn("Entity not found",e),null;var a=t.getEntity(n);if("file-link-card"===a.getType())return{editable:!1,component:i,props:{entityKey:n,component:"div",href:a.data.href,type:a.data.type,source:a.data.source,extension:a.data.extension,size:a.data.size,name:a.data.name,onRef:function(e){o[n]={node:e,data:a.data}}}}}return null},components:[Object(Y.g)(Ic,{key:"file_bubble",ref:function(e){return n=e},store:r,getData:function(){return o[t]&&o[t].data},getTarget:function(){return o[t]&&o[t].node}})],draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],a=o.type,i=o.data;return"file-link-card"===a?bn.a.renderToStaticMarkup(Object(Y.g)("a",{"data-draft-node":"block","data-draft-type":"file-link-card",href:i.href,"data-file-type":i.type,"data-file-source":i.source,"data-file-size":i.size,"data-file-extension":i.extension},i.name)):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[1];return Ue(o)&&"file-link-card"===o.getAttribute("data-draft-type")?T.Entity.create("file-link-card","IMMUTABLE",{href:o.href,type:o.dataset.fileType,source:o.dataset.fileSource,extension:o.dataset.fileExtension,size:o.dataset.fileSize,name:o.textContent}):e.apply(void 0,n)}}}}},Dc=n(1477);function Pc(e){var t=e.contentState,n=e.entityKey,r=e.className,o=e.onClick,a=e.onMouseDown,i=e.adLinkCardProps,l=void 0===i?{}:i,c=t.getEntity(n).getData().id;return Object(Y.g)("div",{className:x()("Editable-adLinkCardContainer",r),onClick:o,onMouseDown:a},Object(Y.g)(Dc.c,S()({id:c,isEditor:!0},l)))}Pc.propTypes={contentState:y.a.object.isRequired,entityKey:y.a.string.isRequired};var zc=Pc,qc={decorator:function(e){return e}},Kc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},qc),e);var t={},n=Ce(Cn,e.decorator),r=n(zc),o=function(e){var n=e.id,r=t.getEditorState(),o=Object(me.a)(r,"ad-link-card","IMMUTABLE",{id:n});t.setEditorState(o)};return{initialize:function(e){Object.assign(t,e)},handleCommand:function(e){if(e.startsWith("insert-ad-link-card:")){var t=e.replace("insert-ad-link-card:","");if(t)return o({id:t}),"handled"}return"not-handled"},blockRendererFn:function(n){if("atomic"===n.getType()){var o=t.getEditorState().getCurrentContent(),a=n.getEntityAt(0);if(!a)return console.warn("Entity not found",n),null;if("ad-link-card"===o.getEntity(a).getType())return{editable:!1,component:r,props:{entityKey:a,adLinkCardProps:e.adLinkCardProps}}}return null},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"ad-link-card"===o.type?bn.a.renderToStaticMarkup(Object(Y.g)("a",{"data-draft-node":"block","data-draft-type":"ad-link-card","data-ad-id":o.data.id})):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[1];return Ue(o)&&"ad-link-card"===o.getAttribute("data-draft-type")?T.Entity.create("ad-link-card","IMMUTABLE",{id:o.getAttribute("data-ad-id")}):e.apply(void 0,n)}}}}},Uc=function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=n.getStartOffset(),o=n.getStartKey(),a=t.getBlockForKey(o).getEntityAt(r),i=a&&t.getEntity(a);return i&&"mcn-link-card"===i.type.toLowerCase()?{entityKey:a,blockKey:o}:{entityKey:null,blockKey:null}},Fc=n(1177),Vc=n(1059);function Hc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Gc=function(e){f()(n,e);var t=Hc(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.target,r=e.data,o=e.onEdit,a=e.onRef,i=r||{},l=i.status,c=void 0===l?{}:l,s=i.goodsUrl,u=void 0===s?{}:s,d=!(c[Vc.f.Fold]||c[Vc.f.NotEditable]);return Object(Y.g)(Pn.a,{arrowed:!0,target:n,isOpen:t,placement:"bottom",className:"MCNLinkCardBubble",onRef:a,onMouseDown:function(e){return e.preventDefault()}},Object(Y.g)("div",{className:"MCNLinkCardBubble-content"},Object(Y.g)("a",{target:"_blank",rel:"noopener noreferrer",href:null==u?void 0:u.url,className:"MCNLinkCardBubble-previewLink"},"æŸ¥çœ‹å•†å“"),d&&Object(Y.g)(N.c,{preset:"plain","aria-label":"ç¼–è¾‘",onClick:function(){return o(r)},className:"MCNLinkCardBubble-button"},Object(Y.g)(Fc.a,{className:"MCNLinkCardBubble-icon",text:!0,center:!0}))))}}]),n}(k.a.Component),Wc=n(1377),Zc=n(1287);function $c(e){var t=e.onRef,n=e.contentState,r=e.entityKey,o=e.className,a=e.onClick,i=e.onMouseDown,l=e.onData,c=e.getRefetchKey,s=void 0===c?function(){}:c,u=e.mcnLinkCardProps,d=void 0===u?{}:u,f=n.getEntity(r).getData().id,p=Object(b.useCallback)((function(e){return l(e)}),[r]);return Object(Y.g)(Wc.a,null,Object(Y.g)(Zc.a,S()({component:"div",ref:t,className:o,id:f,scenes:Vc.b.Content,position:Vc.a.Editor,onClick:a,onMouseDown:i,refetchKey:s(),onData:p},d)))}$c.propTypes={editable:y.a.bool,contentState:y.a.object.isRequired,entityKey:y.a.string.isRequired};var Yc=$c;function Jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Xc={decorator:function(e){return e}},Qc=function(e){f()(n,e);var t=Jc(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={isOpen:!1},e.handleClick=function(t){if(e.state.isOpen){var n=e.props.store,r=Object(Mn.findDOMNode)(n.getEditorRef());e.bubbleEl&&!e.bubbleEl.contains(t.target)&&r&&!r.contains(t.target)&&e.setState({isOpen:!1})}},e.handleRef=function(t){e.bubbleEl=t,t?document.addEventListener("click",e.handleClick):document.removeEventListener("click",e.handleClick)},e}return c()(n,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.onEdit,r=t.getData,o=t.getTarget;return Object(Y.g)(Gc,{isOpen:n&&e,data:r(),target:o(),onRef:this.handleRef,onEdit:n})}}]),n}(k.a.Component),es=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign(Object.assign({},Xc),e);var t,n,r,o={},a={},i=Ce(Cn,e.decorator),l=Ce(i,co.a.decorate)(Yc),c=function(e){var t=e.id,n=o.getEditorState(),r=Object(me.a)(n,"mcn-link-card","IMMUTABLE",{id:t});o.setEditorState(r)},s=function(){a[t].refetchKey=Qi()("mcn-link-card-refetch-key"),t&&Object(co.b)(n),o.setEditorState(T.EditorState.forceSelection(o.getEditorState(),o.getEditorState().getSelection()))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.getEditorState(),a=Uc(e),i=a.entityKey,l=a.blockKey;t=i,n=l;var c=Boolean(t);return r&&r.setState({isOpen:c}),e};return{initialize:function(e){Object.assign(o,e)},handleCommand:function(e){if(e.startsWith("insert-mcn-link-card:")){var t=e.replace("insert-mcn-link-card:","");return t?(c({id:t}),"handled"):"not-handled"}return e.startsWith("edit-mcn-link-card:")&&e.replace("edit-mcn-link-card:","")?(s(),"handled"):"not-handled"},onChange:u,blockRendererFn:function(t){var n=t.getKey();if("atomic"===t.getType()){var i=o.getEditorState().getCurrentContent(),c=t.getEntityAt(0);if(!c)return console.warn("Entity not found",t),null;if("mcn-link-card"===i.getEntity(c).getType())return{editable:!1,component:l,props:{entityKey:c,blockKey:n,getRefetchKey:function(){var e;return null===(e=a[c])||void 0===e?void 0:e.refetchKey},onRef:function(e){a[c]||(a[c]={node:null,data:{}}),a[c].node=e},onData:function(e){a[c].data=Object.assign({id:null==e?void 0:e.id,status:(null==e?void 0:e.status)||""},(null==e?void 0:e.goods)||{}),requestAnimationFrame((function(){Object(co.c)(n)})),r&&r.forceUpdate()},mcnLinkCardProps:e.mcnLinkCardProps}}}return null},components:[Object(Y.g)(Qc,{key:"mcn_bubble",ref:function(e){return r=e},store:o,getData:function(){return a[t]&&a[t].data},getTarget:function(){return a[t]&&a[t].node},onEdit:e.onEdit})],draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"mcn-link-card"===o.type?bn.a.renderToStaticMarkup(Object(Y.g)("a",{"data-draft-node":"block","data-draft-type":"mcn-link-card","data-mcn-id":o.data.id})):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[1];return Ue(o)&&"mcn-link-card"===o.getAttribute("data-draft-type")?T.Entity.create("mcn-link-card","IMMUTABLE",{id:o.getAttribute("data-mcn-id")}):e.apply(void 0,n)}}}}},ts=n(1256),ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n={originData:{}},r=Ce(Cn,e.decorator||function(e){return e})(ts.b),o=function(e){var n=e.id,r=t.getEditorState(),o=Object(me.a)(r,ts.a.TYPE,"IMMUTABLE",{id:n});t.setEditorState(o)};return{initialize:function(e){Object.assign(t,e)},handleCommand:function(e){if(e.startsWith(ts.a.WebInsertCommand)){var t=e.replace(ts.a.WebInsertCommand,"");if(t)return o({id:t}),"handled"}return"not-handled"},blockRendererFn:function(o){if("atomic"===o.getType()){var a=t.getEditorState().getCurrentContent(),i=o.getEntityAt(0);if(!i)return console.warn("Entity not found",o),null;var l=a.getEntity(i);if(l.getType()===ts.a.TYPE)return{editable:!1,component:r,props:{entityKey:i,id:l.data.id,eduCardProps:e.eduCardProps,originData:n.originData[i],onData:function(e){n.originData[i]||(n.originData[i]=e)}}}}return null},draft2html:{entityToHTML:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return o.type===ts.a.TYPE?bn.a.renderToStaticMarkup(Object(Y.g)("a",{"data-draft-node":"block","data-draft-type":"edu-card","data-edu-card-id":o.data.id})):e.apply(void 0,n)}}},html2draft:{htmlToEntity:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[1];return Ue(o)&&o.getAttribute("data-draft-type")===ts.a.TYPE?T.Entity.create(ts.a.TYPE,"IMMUTABLE",{id:o.getAttribute(ts.a.IDAttr)}):e.apply(void 0,n)}}}}},rs=n(919),os=n(99),as=n(932),is=n(77),ls=n.n(is),cs=function(e){return ls()((function(t){var n=Object(j.l)().trackEvent;return Object(Y.g)(e,S()({trackEvent:n},t))}),e)},ss=n(491);function us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var ds=[".docx"],fs=[".markdown",".mdown",".mkdn",".md"],ps=[].concat(ds,fs),hs=function(e){return{isMd:fs.some((function(t){return e.toLowerCase().endsWith(t)})),isDoc:ds.some((function(t){return e.toLowerCase().endsWith(t)}))}},gs=function(e){f()(n,e);var t=us(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={step:0,file:null},e.handleSessionStart=function(){e.setState({step:1})},e.handleSessionError=function(){e.setState({step:2}),e.clearSession()},e.handleSessionComplete=function(t){var n,r=e.props,o=r.onComplete,a=r.onClose;e.clearInput(),e.clearSession(),o(t,hs((null===(n=e.state.file)||void 0===n?void 0:n.name)||"")),a()},e.uploadFile=function(t){var n=e.props.uploadManager;e.session=n.getSession("document",t);var r=e.session;r.addListener("start",e.handleSessionStart),r.addListener("error",e.handleSessionError),r.addListener("complete",e.handleSessionComplete),r.state.error||r.start()},e.handleUploaderClick=function(){e.props.trackEvent({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:0===e.state.step?"æ–‡æ¡£å¯¼å…¥-é€‰æ‹©æ–‡æ¡£":"æ–‡æ¡£å¯¼å…¥-é‡æ–°ä¸Šä¼ "}}),e.input.value=null,e.input.click()},e.handleSubmit=function(t){t.preventDefault();var n=e.props.onError,r=e.input.files[0];r&&(r.size>e.fileSizeLimit?n&&n("doc-size",{message:"æ–‡æ¡£æœ€å¤§ ".concat(Math.floor(e.fileSizeLimit/1048576),"MBï¼Œè¯·é‡æ–°ä¸Šä¼ ")}):ps.some((function(e){return r.name.toLowerCase().endsWith(e)}))?(e.setState({file:r}),e.uploadFile(r)):n&&n("doc-type",{message:"æš‚ä¸æ”¯æŒè¯¥æ–‡ä»¶æ ¼å¼"}))},e.handleClose=function(){var t=e.props.onClose;e.clearInput(),e.clearSession(),e.props.trackEvent({eventType:"Click",action:"Close",elementLocation:{type:"Button",text:"æ–‡æ¡£å¯¼å…¥-å…³é—­å¼¹çª—"}}),t()},e.clearSession=function(){var t=e.session;t&&(t.removeListener("start",e.handleSessionStart),t.removeListener("error",e.handleSessionError),t.removeListener("complete",e.handleSessionComplete),t.abort())},e.clearInput=function(){e.input.value=null},e}return c()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.shown&&e.shown&&this.setState({step:0,file:null})}},{key:"componentWillUnmount",value:function(){this.clearSession()}},{key:"renderTitle",value:function(){return Object(Y.g)("p",{className:"Editable-docModal-title"},"æ–‡æ¡£å¯¼å…¥")}},{key:"renderFooter",value:function(){return Object(Y.g)("ol",null,Object(Y.g)("li",null,"1ã€.doc æ ¼å¼å·²ä¸‹çº¿ï¼Œå»ºè®®è½¬æˆ .docx æ ¼å¼å¯¼å…¥ï¼Œæ•ˆæžœæœ€å¥½"),Object(Y.g)("li",null,"2ã€docx æ–‡ä»¶ä¸­çš„å…¬å¼ä¸æ”¯æŒå¯¼å…¥ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥å…¬å¼æˆ–é€šè¿‡ md æ–‡ä»¶å¯¼å…¥"),Object(Y.g)("li",null,"3ã€ç›®å‰å¯¹ markdown è¯­æ³•çš„æ”¯æŒå¯å‚è€ƒå¸®åŠ©æ–‡æ¡£ï¼Œä¸æ”¯æŒçš„è¯­æ³•æš‚æ— æ³•è§£æž"),Object(Y.g)("li",null,"4ã€æ–‡æ¡£è¶Šå¤§ï¼Œè§£æžæ—¶é—´è¶Šé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…"),Object(Y.g)("li",null,"5ã€è‹¥æ–‡æ¡£ä¸­å­˜åœ¨ç¼–è¾‘å™¨æ‰€ä¸æ”¯æŒçš„æ–‡æœ¬æ ·å¼ï¼ˆä¾‹å¦‚è¡¨æ ¼ï¼‰ï¼Œå°†ä»¥çº¯æ–‡æœ¬å±•ç¤º"),Object(Y.g)("li",null,"6ã€ä¸èƒ½ä¿è¯æ‰€æœ‰æ ¼å¼ï¼ˆä¾‹å¦‚å…¬å¼ã€ä»£ç ï¼‰éƒ½èƒ½æ­£ç¡®å¯¼å…¥ã€‚å»ºè®®æ£€æŸ¥ã€ç¡®è®¤æ— è¯¯åŽå‘å¸ƒ"))}},{key:"fileSizeLimit",get:function(){var e,t,n;return(null===(e=(t=this.props).getDocPluginProps)||void 0===e||null===(n=e.call(t))||void 0===n?void 0:n.fileSizeLimit)||10485760}},{key:"render",value:function(){var e,t,n=this,r=this.props.shown,o=this.state,a=o.step,i=o.file;return Object(Y.g)(Yn.b,{className:"Editable-docModal",overlay:!0,title:this.renderTitle(),footer:0===a&&this.renderFooter(),onClose:this.handleClose,maskClosable:!1},r&&Object(Y.g)(j.f,{as:"form",zaType:"Popup",zaText:"æ–‡æ¡£å¯¼å…¥å¼¹çª—",ref:function(e){n.root=e},onSubmit:this.handleSubmit},0===a&&Object(Y.g)("div",{className:"Editable-docModal-container"},Object(Y.g)("div",{className:"Editable-docModal-uploader",onClick:this.handleUploaderClick},Object(Y.g)("div",{className:"Editable-docModal-uploader-icon"},Object(Y.g)(as.b,{size:52})),Object(Y.g)("div",{className:"Editable-docModal-uploader-text"},"é€‰æ‹©è¦å¯¼å…¥çš„æ–‡æ¡£"),Object(Y.g)("div",{className:"Editable-docModal-uploader-tip"},"æ–‡æ¡£æœ€å¤§ ".concat(Math.floor(this.fileSizeLimit/1048576),"MBï¼Œæ”¯æŒ docxã€md æ ¼å¼")))),(1===a||2===a)&&Object(Y.g)("div",{className:"Editable-docModal-fileName"},Object(Y.g)(rs.a,{text:!0}),(e=i.name,(t=Object(ho.stringWidth)(e))<41?e:"".concat(Object(ho.cutStringWidth)(e,28),"â€¦").concat(e.split(Object(ho.cutStringWidth)(e,t-12))[1]))),1===a&&Object(Y.g)("div",{className:"Editable-docModal-loading"},Object(Y.g)(ss.a,null)),2===a&&Object(Y.g)("div",{className:"Editable-docModal-fail"},Object(Y.g)(j.f,{zaType:"Text",zaText:"æ–‡æ¡£å¯¼å…¥-æŽ¥å£å¤±è´¥",className:"Editable-docModal-failHint"},"æ–‡æ¡£å¯¼å…¥å¤±è´¥ï¼Œè¯·é‡æ–°ä¸Šä¼ "),Object(Y.g)(N.c,{className:"Editable-docModal-retryButton",preset:"primary",color:"blue",onClick:function(){n.handleUploaderClick()}},"é€‰æ‹©æ–‡æ¡£")),Object(Y.g)("input",{ref:function(e){n.input=e},accept:ps,type:"file",required:!0,onChange:this.handleSubmit})))}}]),n}(b.Component);gs.propTypes={shown:y.a.bool,onComplete:y.a.func.isRequired,onClose:y.a.func.isRequired,onError:y.a.func,trackEvent:y.a.func,getDocPluginProps:y.a.func},gs.defaultProps={shown:!1};var ms=cs(gs);function vs(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ys=function(e,t){var n=e.getUploadManager,r=e.onError,o=e.onComplete,a=e.getDocPluginProps,i=Object(b.useState)(!1),l=vs(Xt.a,i,2),c=l[0],s=l[1],u=Object(os.a)((function(){return s(!1)})),d=Object(os.a)((function(){return s(!0)}));return Object(b.useImperativeHandle)(t,(function(){return{onOpen:d,onClose:u}}),[d,u]),Object(Y.g)(j.b,{block:"EditorInsertDoc"},Object(Y.g)(ms,{shown:c,uploadManager:null==n?void 0:n(),onComplete:o,onError:r,onClose:u,getDocPluginProps:a}))};ys.propType={uploadManager:y.a.object.isRequired,onError:y.a.func.isRequired,onComplete:y.a.func.isRequired};var bs=Object(b.forwardRef)(ys),ks=n(218);var Cs={name:"95m317",styles:"top:126px;"},Ss=function(e){var t=e.onError,n=e.allowImageUpload,r=e.getDocPluginProps,o=e.getMarkdownEnabled,a=k.a.createRef(null),i={},l=function(e){var t=e.text,n=e.btnText,r=e.onClick;return Object(ji.a)((function(e){return Object(Y.g)(P.a,{css:Cs,delay:5e3,notification:{text:t,key:"notificationMarkdown",timeStamp:(new Date).getDate()},actions:Object(Y.g)(N.c,{preset:N.b.Link,color:N.a.Blue,onClick:function(){e(),r()}},n)})}))};return{initialize:function(e){Object.assign(i,e)},handleCommand:function(e){var t;return"insert-doc"===e?(null===(t=a.current)||void 0===t||t.onOpen(),"handled"):"not-handled"},handlePastedText:function(e,t){var r,c={text:"æš‚ä¸æ”¯æŒç›´æŽ¥è¯†åˆ« markdown è¯­æ³•ï¼Œå»ºè®®ä½¿ç”¨æ–‡æ¡£å¯¼å…¥ä¸Šä¼ ",btnText:"æ–‡æ¡£å¯¼å…¥",onClick:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.onOpen()}};if(null!=o&&o())if(t){var s=i.getEditorRef().props.html2draftMiddlewares,u=We(t,!0,!n,s);r=!1,u.getBlockMap().forEach((function(e){"unstyled"===e.getType()&&Dr(e.getText())&&(r=!0)})),r&&l(c)}else Dr(e)&&l(c);return"not-handled"},components:[Object(Y.g)(bs,{key:"doc_modal",getUploadManager:function(){var e;return null===(e=i.getEditorRef())||void 0===e?void 0:e.props.uploadManager},onError:t,onComplete:function(e,t){var r=i.getEditorRef().props.html2draftMiddlewares,a=We(e.html,!0,!n,r,t),c=a.blockMap,s=a.entityMap;i.getEditorRef().props.onChange(Object(_t.a)(i.getEditorState(),c,s)),!t.isMd||null!=o&&o()||(i.getEditorRef().props.handleCommand("toggle-markdown-enabled"),l({text:"è¯†åˆ«åˆ°å¯¼å…¥å†…å®¹ä¸º Markdown æ–‡ä»¶ï¼Œå·²ä¸ºä½ åˆ‡æ¢æˆ Markdown æ¨¡å¼",btnText:"ç‚¹æ­¤å–æ¶ˆ",onClick:function(){return i.getEditorRef().props.handleCommand("toggle-markdown-enabled")}})),e.message&&ks.a.alert(Object(Y.g)("div",{style:{textAlign:"center"}},e.message),{title:"å¯¼å…¥æç¤º",text:{ok:"æˆ‘çŸ¥é“äº†"}})},getDocPluginProps:r,ref:a})],toolbar:{section:rt.a.MENU,label:"æ–‡æ¡£å¯¼å…¥",commandName:"insert-doc",icon:rs.a,onClick:function(e){O.a.trackEvent(e.target,{id:1184,action:"Click",name:"æ–‡æ¡£å¯¼å…¥"})}}}},Es=n(5),ws=n(1400),Os=n(1524),Ts=n(929),As=n(1522),xs=n(1538);function js(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var _s={name:"9y6172",styles:"user-select:none;"},Rs={name:"1vs9cou",styles:"opacity:0.6;"},Ms={name:"9y6172",styles:"user-select:none;"},Ls={name:"1x02pr2",styles:"& .Modal-title{margin-top:34px;margin-bottom:16px;}& .Modal-content{margin-top:16px;padding:0;}"},Bs={name:"nuo349",styles:"&.ModalButtonGroup--vertical{margin-top:30px;margin-bottom:20px; .Button{width:360px;}.Button + .Button{margin-top:10px;}}"};var Is=function(e){var t=e.canPlay,n=e.children,r=e.handleRemoveVideo,o=Object(b.useState)(!1),a=js(Xt.a,o,2),i=a[0],l=a[1],c=Object(b.useState)(!1),s=js(Xt.a,c,2),u=s[0],d=s[1];return Object(Y.g)(Uo.Box,{width:i?"100%":"256px"},Object(Y.g)(Uo.Box,{css:function(e){return{borderTopLeftRadius:2,borderTopRightRadius:2,borderBottom:"none",border:"1px solid ".concat(e.colors.GBK09A)}}},Object(Y.g)(Uo.Flex,{alignItems:"center",height:"28px",px:"12px"},Object(Y.g)(Uo.Flex,{alignItems:"center",css:function(e){return{cursor:t?"pointer":"not-allowed",color:t?e.colors.GBL05A:e.colorMod(e.colors.GBL05A).alpha(.3)}},onClick:function(){return t&&l(!i)}},i?Object(Y.g)(Ts.a,{size:16}):Object(Y.g)(As.a,{size:16}),Object(Y.g)(Uo.Text,{fontSize:"12px",ml:"8px",css:_s},i?"æŸ¥çœ‹å›¾ç‰‡":"æ’­æ”¾è§†é¢‘")),r&&Object(Y.g)(xs.a,{css:function(e){return{width:16,height:16,marginLeft:"auto",color:e.colors.GBL05A,cursor:"pointer"}},onClick:function(){return d(!0)}})),k.a.cloneElement(k.a.Children.only(n),{isFullWidth:i})),Object(Y.g)(Uo.Flex,{css:function(e){return{height:20,marginTop:"5px",color:e.colors.GBK06A,marginLeft:"3px"}},alignItems:"center"},Object(Y.g)(ws.a,{size:16,css:Rs}),Object(Y.g)(Uo.Text,{fontSize:"13px",ml:"4px",css:Ms},"å›žç­”ä¸­çš„è§†é¢‘ä¹Ÿä¼šåŒæ—¶æµé€š")),Object(Y.g)(Yn.b,{title:"åˆ é™¤è§†é¢‘",maskClosable:!1,onClose:function(){return d(!1)},css:Ls},u&&Object(Y.g)(k.a.Fragment,null,Object(Y.g)(Uo.Text,{textAlign:"center",color:"GBL05A"},"ç§»é™¤åŽå°†æ— æ³•æ’¤é”€ï¼Œç¡®è®¤ç§»é™¤è¯¥è§†é¢‘ï¼Ÿ"),Object(Y.g)(Yn.a,{css:Bs},Object(Y.g)(N.c,{preset:"primary",color:"blue",onClick:r},"ç¡®å®š"),Object(Y.g)(N.c,{onClick:function(){return d(!1)}},"å–æ¶ˆ")))))},Ns=n(1017),Ds=n(1253);function Ps(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var zs={name:"70qvj9",styles:"display:flex;align-items:center;"},qs=function(e){var t=e.zvideoType,n=e.onZvideoTypeChange;return Object(Y.g)(Uo.Flex,{alignItems:"center",height:"50px",css:function(e){return{borderBottom:"1px solid ".concat(e.colors.GBK10A)}}},Object(Y.g)(Uo.Text,{fontSize:"14px",color:"GBK04A",fontWeight:"bold"},"è§†é¢‘ç±»åž‹"),Object(Y.g)(Uo.Flex,{ml:"auto"},Ca.e.map((function(e){var r=e.value,o=e.label;return Object(Y.g)("label",{key:r,css:zs},Object(Y.g)(Ns.a,{size:16,checked:r===t,onChange:function(){return n(r)},css:function(e){return{marginLeft:16,marginRight:8,fontSize:14,color:e.colors.GBK03A}}}),o)}))))},Ks={name:"1vs9cou",styles:"opacity:0.6;"},Us={name:"9y6172",styles:"user-select:none;"},Fs={name:"1hyfx7x",styles:"display:none;"};var Vs=function(e){var t=e.uploadManager,n=e.onError,r=e.videoAnswerEditable,o=e.data,a=e.onDataChange,i=e.duration,l=e.onDurationChange,c=e.zvideoType,s=e.onZvideoTypeChange,u=Object(b.useRef)(),d=Object(b.useState)(),f=Ps(Xt.a,d,2),p=f[0],h=f[1];Object(b.useEffect)((function(){!i&&o&&o.id&&Object(Ds.a)("https://lens.zhihu.com/api/v4/videos/".concat(o.id)).then((function(e){return Object(Es.camelizeKeys)(e)})).then((function(e){if(!e.error){var t,n,r=(t=e.playlist,(n=["lD","sD","hD","fHD"].find((function(e){return Boolean(t[e])})))?t[n].duration:null);r&&l(r)}})).catch((function(){}))}),[i,JSON.stringify(o),l]);var g=Object(b.useCallback)((function(e){Object(Ca.h)()?Ca.a.some((function(t){return e.name.toLowerCase().endsWith(t)}))?(h(e),Object(Ca.f)(e).then((function(e){l(e)})),a({upload:{file:e},uploading:!0})):null==n||n("video-type"):null==n||n("unsupported-browser")}),[n,l,a]),m=Object(b.useCallback)((function(e){e.preventDefault();var t=se(e);g(t[0])}),[g]),v=Object(b.useCallback)((function(e,t){a(Object.assign(Object.assign(Object.assign({},o),t),{},{upload:null,error:null,uploading:!1}))}),[a,JSON.stringify(o)]),y=Object(b.useCallback)((function(){a(Object.assign(Object.assign({},o),{},{error:{status:"upload_fail"},uploading:!1}))}),[a,JSON.stringify(o)]),C=Object(b.useCallback)((function(){null!=o&&o.uploading&&t&&t.getSession("video",p).abort(),a(null)}),[a,JSON.stringify(o),t]),S=Object(b.useCallback)((function(e){a(Object.assign(Object.assign({},o),{},{changedVideoPoster:!0,thumbnail:e}))}),[a,JSON.stringify(o)]);return o?o.upload?Object(Y.g)(k.a.Fragment,null,Object(Y.g)(Is,{handleRemoveVideo:C},Object(Y.g)(ma.a,{isVideoAnswer:!0,uploadManager:t,data:o,coverButtonText:"ç¼–è¾‘å°é¢",onVideoUploaded:v,onVideoUploadError:y,handleVideoPosterChange:S})),Object(Y.g)(qs,{zvideoType:c,onZvideoTypeChange:s})):o.error?Object(Y.g)(k.a.Fragment,null,Object(Y.g)(Is,{handleRemoveVideo:C},Object(Y.g)(ba,{data:o,isVideoAnswer:!0})),Object(Y.g)(qs,{zvideoType:c,onZvideoTypeChange:s})):Object(Y.g)(k.a.Fragment,null,Object(Y.g)(Is,{canPlay:!0,handleRemoveVideo:r&&C},Object(Y.g)(ga,{isVideoAnswer:!0,data:o,duration:Object(Os.a)(i),allowVideoTitleChange:function(){return!1},handleVideoPosterChange:S})),r&&Object(Y.g)(qs,{zvideoType:c,onZvideoTypeChange:s})):Object(Y.g)(Uo.Flex,{alignItems:"center",justifyContent:"center",height:"190px",css:function(e){return{boxSizing:"border-box",border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:"2px",cursor:"pointer"}},onClick:function(){return u.current.click()},onDragEnter:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()},onDrop:m},Object(Y.g)(Uo.Flex,{alignItems:"center",justifyContent:"center",size:"64px",css:function(e){return{borderRadius:"50%",backgroundColor:e.colors.GBK10A}}},Object(Y.g)(ka.a,{css:function(e){return{color:e.colors.GBL05A,width:36,height:36}}})),Object(Y.g)(Uo.Box,{ml:"20px"},Object(Y.g)(Uo.Flex,null,Object(Y.g)(Uo.Text,{fontSize:"18px",lineHeight:"25px",fontWeight:"bold",mb:"6px",css:function(e){return{color:e.colors.GBK03A}}},"æ·»åŠ è§†é¢‘æ–‡ä»¶"),Object(Y.g)(Uo.Flex,{alignItems:"center",css:function(e){return{height:20,color:e.colors.GBK06A,marginLeft:"13px",marginTop:"5px"}}},Object(Y.g)(ws.a,{size:16,css:Ks}),Object(Y.g)(Uo.Text,{fontSize:"13px",ml:"4px",css:Us},"å›žç­”ä¸­çš„è§†é¢‘ä¹Ÿä¼šåŒæ—¶æµé€š"))),Object(Y.g)(Uo.Text,{fontSize:"14px",lineHeight:"20px",css:function(e){return{color:e.colors.GBL05A,a:{textDecoration:"underline"}}}},"è¯·ä¸è¦æ·»åŠ æ— å…³çš„è§†é¢‘ï¼Œè¯¦æƒ…æŸ¥çœ‹"," ",Object(Y.g)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()}},"çŸ¥ä¹Žè§†é¢‘ä½¿ç”¨è§„èŒƒ"),Object(Y.g)("br",null),"ä¸Šä¼ è§†é¢‘ï¼Œå³ä»£è¡¨ä½ åŒæ„",Object(Y.g)("a",{href:"https://www.zhihu.com/terms/video",target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()}},"ã€ŠçŸ¥ä¹Žè§†é¢‘ç”¨æˆ·åè®®ã€‹"))),Object(Y.g)("input",{ref:u,type:"file",onChange:function(){return g(u.current.files[0])},css:Fs}))},Hs=["link","file-link-card","image","formula","reference","divider"],Gs=function(e){var t=e.getBlockMap();return t.forEach((function(n){n.findEntityRanges((function(t){var n=t.getEntity();if(!n)return!1;var r=e.getEntity(n).getType().toLowerCase();return!Hs.includes(r)}),(function(r,o){var a=n.getKey();if("atomic"!==n.getType()){var i=new T.SelectionState({anchorKey:a,anchorOffset:r,focusKey:a,focusOffset:o});e=T.Modifier.setBlockType(e,i,"unstyled"),e=T.Modifier.removeRange(e,i,"backward")}else{var l=t.remove(a);e=e.merge({blockMap:l})}}))})),e},Ws=function(e){var t=e.getIsVideoAnswer,n={};return{initialize:function(e){Object.assign(n,e)},handlePastedText:function(e,r,o,a){var i=a.setEditorState;if(t()){var l=n.getEditorRef().props.html2draftMiddlewares;if(r){var c=Gs(We(r,!0,void 0,l));return i(Object(_t.a)(o,c.blockMap,c.entityMap)),"handled"}}return"not-handled"}}},Zs=function(){var e={};return{initialize:function(t){Object.assign(e,t)},handleCommand:function(t){var n=t.match(/insert-text:([\W\w]+)$/);if(n){var r=n[1],o=e.getEditorState();return o.getSelection().isCollapsed()?e.setEditorState(Object(ot.a)(o,r)):e.setEditorState(Object(jt.a)(o,r)),"handled"}return"not-handled"}}},$s=n(979);function Ys(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var Xs={name:"16iox1a",styles:"margin:16px 20px 14px;"},Qs=function(e){f()(n,e);var t=Js(n);function n(e){var r;i()(this,n),(r=t.call(this,e)).externalPlugins=r.props.createEditorPlugins({getUploadManager:function(){return r.uploadManager}}),r.getPlugins=function(){var e,t,n=r.props,a=n.allowReference,i=n.getPlugins;return[r.submitHotkeyPlugin,r.convertPlugin,r.tablePlugin,a&&r.referencePlugin,r.catalogPlugin,r.formulaPlugin,r.zvideoLinkCardPlugin,r.fileLinkCardPlugin,r.adLinkCardPlugin,r.mcnLinkCardPlugin,r.eduLinkPlugin,r.docPlugin,r.videoAnswerPlugin,r.insertTextPlugin].concat(Ys(o.a,null!==(e=r.externalPlugins)&&void 0!==e?e:[]),Ys(o.a,null!==(t=null==i?void 0:i({getUploadManager:function(){return r.uploadManager}}))&&void 0!==t?t:[])).filter(Boolean)},r.getIsVideoAnswer=function(){var e=r.props,t=e.videoAnswerPublished,n=e.videoAnswerEditable;return t||n},r.getFileLinkCards=function(){return Object(Jo.a)(r.EditableCore.state.editorState).filter((function(e){return"file-link-card"===e.getType()}))},r.getADLinkCards=function(){return Object(Jo.a)(r.EditableCore.state.editorState).filter((function(e){return"ad-link-card"===e.getType()}))},r.getFeeConsultCards=function(){return Object(Jo.a)(r.EditableCore.state.editorState).filter((function(e){return"ad-link-card"===e.getType()&&e.data.id.startsWith("fee_")}))},r.getMCNLinkCards=function(){return Object(Jo.a)(r.EditableCore.state.editorState).filter((function(e){return"mcn-link-card"===e.getType()}))},r.getTopics=function(){var e=Object(T.convertToRaw)(r.EditableCore.state.editorState.getCurrentContent());return Object.values(e.entityMap).filter((function(e){return"topic"===e.type}))},r.hasImage=function(e){var t;return(null===(t=r.imagePlugin)||void 0===t?void 0:t.getImages(e).size)>0},r.hasVideo=function(e){var t,n;return(null===(t=r.EditableCore.videoPlugin)||void 0===t||null===(n=t.getVideos(e))||void 0===n?void 0:n.size)>0},r.hasCatalog=function(){var e;return null===(e=r.catalogPlugin)||void 0===e?void 0:e.hasCatalog()},r.hasFileLinkCard=function(){return r.getFileLinkCards().size>0},r.hasADLinkCard=function(){return r.getADLinkCards().size>0},r.hasFeeConsultCard=function(){return r.getFeeConsultCards().size>0},r.hasMCNLinkCard=function(){return r.getMCNLinkCards().size>0},r.toHTML=function(){return r.EditableCore.toHTML()},r.focus=function(){return r.EditableCore.focus()},r.blur=function(){return r.EditableCore.blur()},r.resetWithValue=function(){var e;return(e=r.EditableCore).resetWithValue.apply(e,arguments)},r.reset=function(){return r.EditableCore.reset()},r.handleVideoDurationChange=function(e){r.setState({videoDuration:e})},r.syncChange=function(e){var t=e.videoData,n=e.zvideoType,o=r.EditableCore.state.editorState,a=r.props,i=a.onChange,l=a.outputBlockType,c=r.getAttachment(t,n);null==i||i(Je(o,l,r.draft2htmlMiddlwares,c))},r.handleVideoDataChange=function(e){r.setState(Object.assign({videoData:e},null===e&&{zvideoType:null,videoDuration:null})),null!=e&&e.error||null!=e&&e.uploading||r.syncChange({videoData:e})},r.handleZvideoTypeChange=function(e){r.setState({zvideoType:e}),r.syncChange({zvideoType:e})},r.handleCommand=function(){var e;return(e=r.EditableCore).handleCommand.apply(e,arguments)},r.queryCommandState=function(){var e;return(e=r.EditableCore).queryCommandState.apply(e,arguments)},r.queryCommandEnable=function(){var e;return(e=r.EditableCore).queryCommandEnable.apply(e,arguments)},r.handleKeyCommand=function(e){r.props.onBeforeCommand&&r.props.onBeforeCommand(e);var t=r.EditableCore.state.editorState;if("handled"===r.handleCommand(e))return"handled";if("command-submit"===e){var n=r.props,o=n.onSubmit,a=n.outputBlockType;return o&&o(Je(t,a,r.draft2htmlMiddlwares,r.getAttachment())),"handled"}return"not-handled"},r.getAttachment=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.videoData,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.state.zvideoType;if(!e)return null;var n=r.props.isLegacyVideoAnswer;return{type:n?"zvideo":"video",videoId:e.id,imageUrl:e.thumbnail,isOriginal:t&&t===$s.f.original}},r.checkVideoStatus=function(){var e=r.state.videoData;return{isUploading:null==e?void 0:e.uploading,hasError:null==e?void 0:e.error}},r.clearAllContent=function(){r.setState({videoData:null,zvideoType:null,videoDuration:null},r.reset)},r.onChange=function(){var e;(e=r.EditableCore).onChange.apply(e,arguments)},r.onBlur=function(){var e;(e=r.EditableCore).onBlur.apply(e,arguments)},r.onToggleCatalog=function(){setTimeout((function(){r.forceUpdate()}),0),O.a.trackEvent(r.root,{id:9743,action:"Click",name:r.props.editingContentType})},r.updateAttachment=function(e){var t=r.EditableCore.state.editorState,n=r.props.outputBlockType;r.onChange(Je(t,n,r.draft2htmlMiddlwares,e))},r.getEditorState=function(){return r.EditableCore.state.editorState},r.focusPlugin=vn(),r.submitHotkeyPlugin=At(),r.referencePlugin=sl({useV2Feature:r.props.useV2Feature}),r.catalogPlugin=bl({isCatalogEnabled:r.props.catalogEnabled,onToggleCatalog:r.onToggleCatalog,getShowToolbarButton:function(){return!!r.props.useCatalogV2||r.props.allowCatalog},useV2Feature:r.props.useV2Feature,useCatalogV2:r.props.useCatalogV2,onCloseCatalog:r.props.onCloseCatalog,autoCalcShouldShow:r.props.autoCalcCatalogShouldShow,maskGradientColor:r.props.maskGradientColor}),r.formulaPlugin=Fl({useV2Feature:r.props.useV2Feature,getMarkdownEnabled:r.props.getMarkdownEnabled||Ur}),r.fileLinkCardPlugin=Nc({decorator:r.focusPlugin.decorator}),r.zvideoLinkCardPlugin=xc({decorator:r.focusPlugin.decorator,newLinkCard:r.props.newLinkCard,onInsertZVideo:function(){return r.props.onInsertZVideo(u()(r))},getShowToolbarButton:function(){return r.props.allowZVideo},getIsVideoAnswer:r.getIsVideoAnswer}),r.adLinkCardPlugin=Kc({decorator:r.focusPlugin.decorator,adLinkCardProps:r.props.adLinkCardProps}),r.mcnLinkCardPlugin=es({decorator:r.focusPlugin.decorator,onEdit:r.props.onMCNLinkCardEdit&&function(e){return r.props.onMCNLinkCardEdit(u()(r),e)},mcnLinkCardProps:r.props.mcnLinkCardProps}),r.eduLinkPlugin=ns({decorator:r.focusPlugin.decorator,eduCardProps:r.props.eduCardProps}),r.tablePlugin=Oc({decorator:r.focusPlugin.decorator,onRemove:function(){r.focusPlugin.removeBlockWithOptions({forwared:!1,delay:!0})},getShowToolbarButton:function(){return r.props.allowTable},useV2Feature:r.props.useV2Feature}),r.docPlugin=Ss({onError:r.props.onError,allowImageUpload:r.props.allowImageUpload,html2draftMiddlewares:r.html2draftMiddlewares,getDocPluginProps:function(){return r.props.docPluginProps},getMarkdownEnabled:r.props.getMarkdownEnabled||Ur}),r.videoAnswerPlugin=Ws({getIsVideoAnswer:r.getIsVideoAnswer}),r.insertTextPlugin=Zs(),r.getCreateContent=function(){var e=r.props,t=e.videoAnswerPublished,n=e.videoAnswerEditable;return t||n?function(){return Gs(Ye.apply(void 0,arguments))}:Ye},r.renderContentAboveDropZone=function(){var e,t=r.props,n=t.videoAnswerPublished,o=t.videoAnswerEditable,a=t.onError,i=r.state,l=i.videoData,c=i.videoDuration,s=i.zvideoType;return(n||o)&&Object(Y.g)("div",{css:Xs},Object(Y.g)(Vs,{uploadManager:null===(e=r.EditableCore)||void 0===e?void 0:e.uploadManager,onError:a,videoAnswerEditable:o,data:l,onDataChange:r.handleVideoDataChange,duration:c,onDurationChange:r.handleVideoDurationChange,zvideoType:s,onZvideoTypeChange:r.handleZvideoTypeChange}))},r.getExtraPluginData=function(){return r.EditableCore.getExtraPluginData()};var a=e.defaultVideo;return r.state={videoData:a?{id:a.videoId,thumbnail:a.imageUrl||a.thumbnail,isLens:!0}:null,videoDuration:null==a?void 0:a.duration,zvideoType:"boolean"==typeof(null==a?void 0:a.isOriginal)?a.isOriginal?$s.f.original:$s.f.reprint:null},r}return c()(n,[{key:"componentDidUpdate",value:function(e){var t=this;!this.props.catalogEnabled==!!e.catalogEnabled&&this.handleKeyCommand("toggle-catalog");var n=e.videoAnswerEditable,r=this.props,o=r.videoAnswerEditable,a=r.onChange,i=r.outputBlockType;!n&&o?this.EditableCore.setState({editorState:T.EditorState.set(this.EditableCore.state.editorState,{currentContent:Gs(this.EditableCore.state.editorState.getCurrentContent())})},(function(){null==a||a(Je(t.EditableCore.state.editorState,i,t.EditableCore.draft2htmlMiddlwares,t.getAttachment()))})):n&&!o&&(null==a||a(Je(this.EditableCore.state.editorState,i,this.EditableCore.draft2htmlMiddlwares,null)))}},{key:"render",value:function(){var e=this,t=this.props,n=t.allowHeaderThree,r=t.allowDragAndDrop,o=t.allowToolbarSticky,a=t.allowLink,i=t.allowDivider,l=t.className,c=t.getToolbarSidePlugins,s=void 0===c?this.props.getToolbarPlugins:c,u=t.getToolbarMainPlugins,d=t.getToolbarMenuPlugins,f=t.getEditorBeforePlugins,p=t.toolbarMenuAttention,h=t.minRows,g=t.onFocus,m=t.outputBlockType,v=t.placeholder,y=t.readOnly,b=t.toolbarStickyOffset,k=t.toolbarProps,C=t.autoFocus,S=t.newLinkCard,E=t.allowPasteRichText,w=t.allowMention,O=t.mentionSource,T=t.defaultValue,A=t.onChange,x=t.onAnyChange,j=t.onAfterAnyChange,_=t.onAfterChange,R=t.onBlur,M=t.allowToolbar,L=t.allowLinkCard,B=t.allowInlineCode,I=t.allowImageUpload,N=t.allowImageCaption,D=t.allowResizeImage,P=t.allowFloatImage,z=t.allowVideoTitleChange,q=t.allowVideo,K=t.allowImageEditor,U=t.onReady,F=t.onVideoPosterButtonClick,V=t.onImageUpload,H=t.onVideoUpload,G=t.onSelectText,W=t.onSubmit,Z=t.onError,$=t.onLoadStart,J=t.onLoadEnd,X=t.onUploadStart,Q=t.onUploadEnd,ee=t.onUploadError,te=t.onBeforeVideoUpload,ne=t.onBeforeCommand,re=t.logo,oe=t.location,ae=t.editingContentType,ie=t.couldSuperVideoUpload,le=t.videoAnswerPublished,ce=t.videoAnswerEditable,se=t.allowZVideo,ue=t.apiRoot,de=t.useV2Feature,fe=t.uploadImageError,pe=t.customToolbar,he=t.showToolbar,ge=t.hideImageToolbar,me=t.useImageOperationV2,ve=t.videoSource,ye=t.getMarkdownEnabled,be=t.allowTextLink,ke=t.topicConfig,Ce=le||ce;return Object(Y.g)(zi,{renderContentAboveDropZone:this.renderContentAboveDropZone,createContent:this.getCreateContent(),getAttachment:this.getAttachment,ref:function(t){return t&&(e.EditableCore=t)},getPlugins:this.getPlugins,className:l,autoFocus:C,minRows:h,newLinkCard:S,placeholder:v,allowToolbarSticky:o,allowToolbar:M,toolbarStickyOffset:b,allowPasteRichText:E,allowDragAndDrop:r,allowMention:w,mentionSource:O,outputBlockType:m,defaultValue:T,onChange:A,onAfterChange:_,onAnyChange:x,onAfterAnyChange:j,onFocus:g,onBlur:R,allowHeaderThree:n,allowLinkCard:L,allowInlineCode:B,allowImageUpload:I,allowImageCaption:N,allowImageEditor:K,allowResizeImage:D,allowFloatImage:P,allowVideoTitleChange:z,allowLink:a,allowDivider:i,allowVideo:!Ce&&q,onReady:U,onVideoPosterButtonClick:F,onImageUpload:V,onVideoUpload:H,onSelectText:G,onSubmit:W,onError:Z,onLoadStart:$,onLoadEnd:J,onUploadStart:X,onUploadEnd:Q,onUploadError:ee,onBeforeVideoUpload:te,onBeforeCommand:ne,getEditorBeforePlugins:f,getToolbarMainPlugins:u,getToolbarSidePlugins:s,getToolbarMenuPlugins:d,toolbarMenuAttention:p,hideImageToolbar:ge,editableComponent:this,logo:re,location:oe,readOnly:y,editingContentType:ae,couldSuperVideoUpload:ie,toolbarProps:k,getShowVideoToolbarButton:function(){return!se&&!Ce&&q},focusPlugin:this.focusPlugin,handleKeyCommand:this.handleKeyCommand,apiRoot:ue,useV2Feature:de,useImageOperationV2:me,uploadImageError:fe,customToolbar:pe,showToolbar:he,getIsVideoAnswer:this.getIsVideoAnswer,videoSource:ve,getMarkdownEnabled:ye||Ur,allowTextLink:be,topicConfig:ke})}}]),n}(b.Component);Qs.propTypes=Object.assign(Object.assign({},zi.propTypes),{},{adLinkCardProps:y.a.object,onMCNLinkCardEdit:y.a.func,mcnLinkCardProps:y.a.object,allowReference:y.a.bool,allowTable:y.a.bool,allowZVideo:y.a.bool,allowCatalog:y.a.bool,catalogEnabled:y.a.bool,useCatalogV2:y.a.bool,onInsertZVideo:y.a.func,loadVideo:y.a.func,defaultVideo:y.a.object,apiRoot:y.a.string,uploadImageError:y.a.func.isRequired,createEditorPlugins:y.a.func.isRequired,docPluginProps:y.a.object,getMarkdownEnabled:y.a.func,allowTextLink:y.a.bool,topicConfig:y.a.object}),Qs.defaultProps=Object.assign(Object.assign({},zi.defaultProps),{},{allowReference:!1,allowTable:!1,allowZVideo:!1,allowCatalog:!1,catalogEnabled:!1,useCatalogV2:!1,createEditorPlugins:function(){return[]}});t.default=Qs},965:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return r.call(e,t)}function a(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function i(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var l=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,c=new RegExp(l.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),s=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,u=n(1730);var d=/[&<>"]/,f=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function h(e){return p[e]}var g=/[.?*+^$[\]\\(){}|-]/g;var m=n(1089);t.lib={},t.lib.mdurl=n(1312),t.lib.ucmicro=n(1533),t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=o,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(l,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(c,(function(e,t,n){return t||function(e,t){var n=0;return o(u,t)?u[t]:35===t.charCodeAt(0)&&s.test(t)&&a(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?i(n):e}(e,n)}))},t.isValidEntityCode=a,t.fromCodePoint=i,t.escapeHtml=function(e){return d.test(e)?e.replace(f,h):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return m.test(e)},t.escapeRE=function(e){return e.replace(g,"\\$&")},t.normalizeReference=function(e){return e=e.trim().replace(/\s+/g," "),"á¹¾"==="áºž".toLowerCase()&&(e=e.replace(/áºž/g,"ÃŸ")),e.toLowerCase().toUpperCase()}},979:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c}));var r={reprint:"reprint",original:"original"},o=[{value:r.reprint,label:"è½¬è½½"},{value:r.original,label:"åŽŸåˆ›"}],a=[".3gp",".asf",".avi",".dat",".f4v",".flv",".m4v",".mkv",".mov",".mp4",".mp4v",".mpe",".mpeg",".mpg",".ra",".ram",".rm",".rmvb",".vob",".webm",".wm",".wmv"],i=2147483648,l=102400,c=3600}}]);
//# sourceMappingURL=main.shared_46cb054461b350cea992d7e0ca21d6bd7c24ff94.6b9b0640d8c856fed0c2.js.map