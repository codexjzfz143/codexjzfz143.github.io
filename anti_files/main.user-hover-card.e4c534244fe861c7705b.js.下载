(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{1013:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return s}));var a={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga",course:"km_course"},r=(Object.assign(Object.assign({},a),{},{album_chapter:a.album,album_video_chapter:a.album,album_paid_column:a.album,paid_column_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,web_literature:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_chapter:a.publication,publication_paid_magazine:a.publication,magazine_section:a.publication,paid_answer:a.album,assessment:a.album,playlet:a.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画",course:"课程",class:"盐选专栏"}),o={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",assessment:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书",course:"课程",class:"盐选专栏"},i={live:a.live,album:a.album,album_chapter:a.album,album_paid_column:a.album,album_video_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,paid_column_chapter:a.album,assessment:a.album,publication:a.publication,publication_chapter:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_paid_magazine:a.publication,special:a.publication,web_literature:a.publication,magazine_section:a.publication,manga:a.publication,course:a.course},c=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","assessment","special"],l={PaidAnswer:"PaidAnswer",PaidPost:"PaidPost",Answer:"Answer",Post:"Post",Conversation:"Conversation"},s={paid_magazine:"PaidMagazine",paid_column:"PaidColumn",paid_column_chapter:"PaidColumn",album:"RemixAlbum",ebook:"EBook",instabook:"InstaBook",literature:"Literature",training:"Training",training_bundle:"TrainingBundle",special:"Special",ebook_audio:"AudioBook",live:"Live",publication:"EBook",web_literature:"EBook",album_chapter:"RemixAlbum",album_paid_column:"RemixAlbum",album_video_chapter:"RemixAlbum",manga:"Manga",free_conversation:"FreeConversation",event:"Event",Onebox:"OneBox",paid_answer:"Answer"}},1014:function(e,t,n){var a,r,o;r=[t],void 0===(o="function"==typeof(a=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var a={get passive(){n=!0}};window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}function r(e){return l.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))}function o(e){var t=e||window.event;return!!r(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)}function i(){setTimeout((function(){void 0!==p&&(document.body.style.paddingRight=p,p=void 0),void 0!==d&&(document.body.style.overflow=d,d=void 0)}))}var c="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),l=[],s=!1,u=-1,d=void 0,p=void 0;e.disableBodyScroll=function(e,a){if(c){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!l.some((function(t){return t.targetElement===e}))){var i={targetElement:e,options:a||{}};l=[].concat(t(l),[i]),e.ontouchstart=function(e){1===e.targetTouches.length&&(u=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,a,i,c;1===t.targetTouches.length&&(a=e,c=(n=t).targetTouches[0].clientY-u,r(n.target)||(a&&0===a.scrollTop&&0<c||(i=a)&&i.scrollHeight-i.scrollTop<=i.clientHeight&&c<0?o(n):n.stopPropagation()))},s||(document.addEventListener("touchmove",o,n?{passive:!1}:void 0),s=!0)}}else{h=a,setTimeout((function(){if(void 0===p){var e=!!h&&!0===h.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(p=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===d&&(d=document.body.style.overflow,document.body.style.overflow="hidden")}));var f={targetElement:e,options:a||{}};l=[].concat(t(l),[f])}var h},e.clearAllBodyScrollLocks=function(){c?(l.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),s&&(document.removeEventListener("touchmove",o,n?{passive:!1}:void 0),s=!1),l=[],u=-1):(i(),l=[])},e.enableBodyScroll=function(e){if(c){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,l=l.filter((function(t){return t.targetElement!==e})),s&&0===l.length&&(document.removeEventListener("touchmove",o,n?{passive:!1}:void 0),s=!1)}else(l=l.filter((function(t){return t.targetElement!==e}))).length||i()}})?a.apply(t,r):a)||(e.exports=o)},1037:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(14),r=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(0),u=n(3),d=n.n(u),p=n(95),f=n(35),h=n(436),b=n(1161),m=n(1150);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=v(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.memberHashId,n=e.isModalShow,a=e.handleCloseModal;return Object(l.b)(p.b,{className:"ChatBoxModal",spread:!0,onClose:a,contentClassName:"ChatBoxModal-content",closeButton:Object(l.b)(f.c,{preset:"plain",className:"ChatBoxModal-closeButton",onClick:a,"aria-label":"关闭",children:Object(l.b)(h.a,{className:"ChatBoxModal-closeIcon"})}),children:n&&Object(l.b)(b.a,{senderId:t,entryName:"ChatBoxModal",children:Object(l.b)(m.a,{type:"default",senderId:t,className:"Chat-ChatBox"},t)})})}}]),n}(s.Component);g.propTypes={memberHashId:d.a.string,handleCloseModal:d.a.func,isModalShow:d.a.bool}},1041:function(e,t,n){"use strict";n.r(t);var a=n(36),r=n(14),o=n(15),i=n(16),c=n(17),l=n(8),s=n(1),u=n(440),d=n(1143),p=n(1745),f=n(1404),h=n(1081),b=n(121),m=n.n(b),v=n(0),g=n(20),O=n(48),j=n(58),y=n(19),w=n(23),x=n(1073),C=n(442),k=n(57),B=n(969),N=n(32),R=n(174),_=n(1262),S=n(158),M=n(980),E=n(1296),P=n(157),T=["toggler","user","id","urlToken","mutuals","onRef","currentUser"];function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var A=function(e,t){return e.map((function(e){return t[e]})).slice(0,3)},I=Object(k.isBrowser)()?m()(A,(function(e,t){return"".concat(e.join(","),"-").concat(t.length)})):A,z=[];var L=function(e){return Object(s.b)(j.Flex,Object.assign({css:{"&:not(:last-child)":{marginBottom:8}}},e))},U=function(e){Object(i.a)(n,e);var t=F(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoading:!1,childModalOpened:!1},e.loadUserProfile=function(){var t=e.props,n=t.id,a=t.urlToken;return(0,t.dispatch)(Object(S.j)(a||n,!1))},e.load=function(){var t=e.props,n=t.id;(t.urlToken||n)&&(e.setState({isLoading:!0}),e.loadUserProfile().then((function(){return e.setState({isLoading:!1})})),e.loadMutuals())},e.loadMutuals=function(){var t=e.props,n=t.user,a=t.dispatch,r=t.mutuals,o=void 0===r?[]:r,i=t.currentUser;return!o.length&&i&&n?a(Object(S.g)(n.urlToken,"mutuals")):Promise.resolve()},e.track=function(){var t=e.props.user;e.hoverCardElement&&t&&(w.a.setModule(e.hoverCardElement,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:t.id}}}),w.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(o.a)(n,[{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.toggler,i=r.user,c=r.id,l=r.urlToken,b=r.mutuals,m=void 0===b?[]:b,v=r.onRef,g=r.currentUser,y=Object(a.default)(r,T),w=i||{},k=w.isOrg,R=w.headline,S=w.avatarUrl,F=w.badge,A=w.badgeV2,I=w.answerCount,z=w.articlesCount,U=w.followerCount,Z=w.employments,D=w.coverUrl,H=w.gender,V=w.isFollowed,G=w.isFollowing,W=this.state,q=W.isLoading,K=W.childModalOpened,J=m.length,Y=Object(u.e)(A||F),Q=Y.bestAnswerer,X=Y.identity,$="//www.zhihu.com/".concat(k?"org":"people","/").concat(l||c),ee=g&&i&&g.urlToken===i.urlToken,te=J>0&&!ee,ne=Z&&Z[0];if(null!=X&&X.length)t=Object(s.c)(L,{children:[Object(s.b)("a",{href:"".concat(N.H,"/account/verification/intro"),target:"_blank",rel:"noopener noreferrer",css:{marginRight:".3em"},children:Object(s.b)(u.a,{})}),Object(s.b)("div",{children:X.slice(0,2).map((function(e){return e.description})).join("，")})]});else if(ne){var ae=ne.company,re=ne.job;t=Object(s.c)(L,{children:[(ae||re)&&Object(s.b)(j.Box,{as:"span",mr:".3em",color:"GBL05A",children:Object(s.b)(p.a,{text:!0,center:!0})}),Object(s.c)("div",{children:[ae&&ae.name,ae&&re&&Object(s.b)(j.Box,{display:"inline-block",width:"1px",height:"10px",mx:"8px",bg:"GBK09A"}),re&&re.name]})]})}else t=null;return Object(s.c)(d.b,Object.assign(Object.assign({toggler:o,onOpen:this.handleOpen,isLoading:q,globalClose:!K,stickHover:K,preventCloseOnTarget:!0},y),{},{ref:function(e){v&&"function"==typeof v&&v(e),n.hoverCardElement=e},children:[Object(s.b)(d.a,{coverUrl:D,title:Object(s.c)("span",{css:{display:"flex"},children:[Object(s.b)(B.a,{user:i,noHoverCard:!0}),Object(s.b)(E.a,{isFollowed:V,isFollowing:G})]}),subtitle:R&&Object(s.b)(C.a,{inline:!0,html:R}),avatarUrl:S}),(t||Q||te)&&Object(s.c)("div",{children:[t,Boolean(null==Q||null===(e=Q.topics)||void 0===e?void 0:e.length)&&Object(s.c)(L,{children:[Object(s.b)("span",{css:{marginRight:".3em"},children:Object(s.b)(u.b,{})}),Object(s.c)("div",{children:[Object(s.b)(M.a,{expandable:!1,noHoverCard:!0,topics:Q.topics,user:i}),"的优秀答主"]})]}),te&&Object(s.c)(L,{color:"GBL05A",children:[Object(s.b)(j.Box,{mr:".3em",children:Object(s.b)(f.a,{text:!0,center:!0})}),Object(s.b)("div",{children:Object(s.c)(h.CJKSpace,{children:[m.map((function(e,t){return Object(s.c)(O.Link,{to:"//www.zhihu.com/".concat(k?"org":"people","/").concat(e.urlToken),target:"_blank",children:[e.name,t<J-1&&"、"]},t)})),"也关注了",N.S[H]]})})]})]}),Object(s.c)("div",{children:[Object(s.c)(x.a,{children:[Object(s.b)(x.a.Item,{tag:P.a,preset:"plain",to:"".concat($,"/answers"),name:"回答",value:I,target:"_blank"}),Object(s.b)(x.a.Item,{tag:P.a,preset:"plain",to:"".concat($,"/posts"),name:"文章",value:z,target:"_blank"}),Object(s.b)(x.a.Item,{tag:P.a,preset:"plain",to:"".concat($,"/followers"),name:"关注者",value:U,target:"_blank"})]}),i&&!ee&&Object(s.b)(_.a,{className:"HoverCard-buttons",user:i,onModalOpen:function(){n.hoverCardElement.style.opacity="0",n.setState({childModalOpened:!0})},onModalClose:function(){return n.setState({childModalOpened:!1})}})]})]}))}}]),n}(v.PureComponent);t.default=Object(y.compose)(R.a,Object(g.connect)((function(e,t){var n=t.id,a=t.urlToken,r=e.entities,o=e.people.mutualsByUser,i=r.users[a]||Object.values(r.users).find((function(e){return e.id===n}))||t.user,c=o[a||n]||{ids:z,isFetching:!1},l=c.ids,s=c.isFetching;return{user:i,mutuals:I(l,r.users),isFetching:s}})))(U)},1061:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Vip24"+(t?" "+t:""))}),r.a.createElement("path",{fill:"url(#a)",d:"M21.351 4.858a3.114 3.114 0 011.577 2.702v8.88a3.114 3.114 0 01-1.577 2.702l-7.774 4.44a3.184 3.184 0 01-3.155 0l-7.773-4.44A3.114 3.114 0 011.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 013.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 00-2.32 0L5.124 6.762a2.283 2.283 0 00-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 002.32 0l5.716-3.255a2.283 2.283 0 001.16-1.982V8.744c0-.817-.443-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 01-.893-.887V8.771l2.466 2.12z"}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"a",x1:"3.479",x2:"21.812",y1:"4.463",y2:"21.357",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:"#F2D9B6"}),r.a.createElement("stop",{offset:"1",stopColor:"#BF8B43"}))));var t}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--VIP"+(e.className?" "+e.className:"")}}))}},1073:function(e,t,n){"use strict";var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(25),l=n.n(c),s=n(29),u=n.n(s),d=n(18),p=n.n(d),f=n(30),h=n.n(f),b=n(49),m=n.n(b),v=n(3),g=n.n(v),O=n(0),j=n(12),y=n.n(j),w=n(154),x=n(35),C=n(9),k=["className","tag","name","value"],B=["className","divider","children","items"];function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}function R(e){var t=e.className,n=e.tag,a=e.name,r=e.value,o=h()(e,k),i="div";return n?i=n:o.href?i="a":o.onClick&&(i=x.c),Object(C.g)(i,m()({className:y()("NumberBoard-item",t)},o),Object(C.g)("div",{className:"NumberBoard-itemInner"},Object(C.g)("div",{className:"NumberBoard-itemName"},a),Object(C.g)("strong",{className:"NumberBoard-itemValue",title:r},Object(w.formatNumber)(r))))}var _=function(e){l()(n,e);var t=N(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.divider,a=e.children,r=e.items,o=h()(e,B);return Object(C.g)("div",m()({className:y()("NumberBoard",t,{"NumberBoard--divider":n})},o),a||r.map((function(e){return Object(C.g)(R,m()({key:e.name},e))})))}}]),n}(O.Component);_.propTypes={divider:g.a.bool},_.defaultProps={divider:!1},_.Item=R;var S=_;t.a=S},1081:function(e,t,n){e.exports=n(220),e.exports.CJKSpace=n(1317).CJKSpace},1092:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--CheckBoxOnFill24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M3 5.4A2.4 2.4 0 015.4 3h13.2A2.4 2.4 0 0121 5.4v13.2a2.4 2.4 0 01-2.4 2.4H5.4A2.4 2.4 0 013 18.6V5.4zm8.145 8.184L9.04 11.481a.75.75 0 00-1.06 1.06l2.628 2.63c.002 0 .004.003.005.004a.75.75 0 001.06 0l4.746-4.745a.75.75 0 00-1.061-1.06l-4.214 4.214z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--CheckboxOn"+(e.className?" "+e.className:"")}}))}},1093:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--CheckBoxOff24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M18.6 4.5H5.4a.9.9 0 00-.9.9v13.2a.9.9 0 00.9.9h13.2a.9.9 0 00.9-.9V5.4a.9.9 0 00-.9-.9zM5.4 3A2.4 2.4 0 003 5.4v13.2A2.4 2.4 0 005.4 21h13.2a2.4 2.4 0 002.4-2.4V5.4A2.4 2.4 0 0018.6 3H5.4z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--CheckboxOff"+(e.className?" "+e.className:"")}}))}},1111:function(e,t,n){"use strict";var a,r=n(30),o=n.n(r),i=n(290),c=n.n(i),l=n(1),s=n(9),u=["className","duration","count","fill","childWidth","gap"],d=Object(s.h)(a||(a=c()(["\n0%, 100% {transform: translateY(-100%);}\n50% {transform: translateY(100%);}\n"])));t.a=function(e){var t=e.className,n=e.duration,a=void 0===n?.8:n,r=e.count,i=void 0===r?4:r,c=e.fill,s=e.childWidth,p=void 0===s?6:s,f=e.gap,h=void 0===f?12:f,b=o()(e,u),m=(p+h)*i-h;return Object(l.b)("div",Object.assign(Object.assign({className:"BounceLoading ".concat(t||""),css:{position:"relative"},style:{width:m,height:3*p}},b),{},{children:Array(i).fill(0).map((function(e,t){return Object(l.b)("span",{className:"BounceLoading-child",css:function(e){return{position:"absolute",backgroundColor:e.colors.GBL01A,borderRadius:"50%",transformOrigin:"center",animationIterationCount:"infinite",animationName:d,animationTimingFunction:"ease-in-out",animationFillMode:"both"}},style:{top:p,left:(p+h)*t,width:p,height:p,backgroundColor:c,animationDuration:"".concat(a,"s"),animationDelay:"".concat(-a/i/2*t,"s")}},"circle-".concat(t))}))}))}},1143:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return y}));var a=n(24),r=n.n(a),o=n(30),i=n.n(o),c=n(1),l=n(1111),s=n(936),u=n(450),d=n(670),p=n(12),f=n.n(p),h=n(0),b=n(58),m=n(286),v=["size","isLoading"];function g(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var O=Object(u.a)(b.Box),j=function(e){var t=e.className;return Object(c.b)(O,{initial:!1,animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},width:"120px",height:"80px",display:"flex",justifyContent:"center",alignItems:"center",className:t,children:Object(c.b)(l.a,{})})},y=Object(h.forwardRef)((function(e,t){var n=e.size,a=e.isLoading,o=i()(e,v),l="large"===n,u=Object(d.a)(),p=u.colors,m=u.colorMod,y=u.isDarkMode,w=Object(h.useState)(a),x=g(r.a,w,1)[0],C={boxShadow:y?"0 1px 3px ".concat(m(p.GBK02B).alpha(.3)):"0 5px 20px ".concat(m(p.GBK02B).alpha(.1)),borderRadius:"2px",backgroundColor:p.GBK99A};return Object(c.c)(s.a,Object.assign(Object.assign({globalClose:!0,arrowed:!1,toggleEvent:"hover",placement:"bottom-left",css:{background:"transparent",boxShadow:"none"}},o),{},{children:[a&&Object(c.b)(j,{css:C}),a||Object(c.b)(O,{ref:t,initial:{opacity:x?0:1},animate:{opacity:1},transition:{duration:.3},maxHeight:"600px",width:l?"400px":"360px",children:Object(c.b)(b.Box,{p:"0 12px 16px",fontSize:"14px",bg:"GBK99A",css:Object.assign(Object.assign({},C),{},{".HoverCard-item":{padding:"8px 0",lineHeight:"1.75",borderBottom:"1px solid cc(GBK10A)","&:last-child":{padding:"8px 16px",textAlign:"center",border:"0"},".Icon":{marginRight:"8px"},".HoverCard-buttons":{marginTop:"16px",".Button":{width:"144px"}}}}),children:h.Children.map(o.children,(function(e){return Boolean(e)&&("string"==typeof e?Object(c.b)("div",{className:"HoverCard-item",children:e}):Object(h.cloneElement)(e,{className:f()("HoverCard-item",e.props.className)}))}))})})]}))}));y.defaultProps={size:"default"};var w=function(e){var t=e.className,n=e.children;return Object(c.b)(b.Text,{overflow:"hidden",css:{textOverflow:"ellipsis",whiteSpace:"nowrap"},className:t,children:n})},x=function(e){var t=e.title,n=e.subtitle,a=e.attrInfo,r=e.coverUrl,o=e.avatarUrl,i=e.avatarFit;return Object(c.c)(b.Box,{mt:o&&!r?"20px":0,children:[Boolean(r)&&Object(c.b)(b.Box,{height:"100px",mx:"-12px",overflow:"hidden",css:{borderRadius:"2px 2px 0 0 "},children:Object(c.b)(b.Image,{size:"100%",src:r,alt:"cover",css:{objectFit:"cover"}})}),Object(c.c)(b.Flex,{py:"8px",alignItems:"center",sx:{boxSizing:"border-box",position:"relative",borderBottom:"1px solid",borderBottomColor:"GBK10A",marginTop:o?0:"20px"},children:[Boolean(o)&&Object(c.b)(m.b,{size:68,url:o,css:function(e){return{objectFit:i,position:"absolute",top:"-20px",border:"2px solid ".concat(e.colors.GBK99A)}}}),Object(c.c)(b.Flex,{flexDirection:"column",minHeight:"42px",pb:"2px",ml:o?"84px":"0",justifyContent:"center",overflow:"hidden",flex:"1",children:[Object(c.b)(w,{css:{fontSize:"16px",fontWeight:500},children:t}),Boolean(n)&&Object(c.b)(w,{css:{marginTop:"4px",fontWeight:400},children:n})]}),Boolean(a)&&Object(c.b)(b.Box,{sx:{marginLeft:"10px",color:"GBL05A",whiteSpace:"nowrap",".Icon":{marginRight:"8px"}},children:a})]})]})}},1159:function(e,t,n){"use strict";var a=n(14),r=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),p=n(20),f=n(19),h=n(12),b=n.n(h),m=n(1520),v=n(35),g=n(216),O=n(943),j=n(293),y=n(86),w=n(934),x=n(23),C=n(31),k=n(1037),B=n(32);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var R=function(e){Object(o.a)(n,e);var t=N(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={modalShown:!1},e.handleSendMessage=function(){var t=e.props,n=t.onModalOpen,a=t.user.allowMessage,r=t.dispatch,o=t.doNotCheckAllowMessageSetting;a||void 0===a&&o?(e.setState({modalShown:!0}),n&&n()):r(Object(C.h)(B.Z.blocked,"red")),x.a.trackEvent(Object(y.a)(e),{action:"Message",element:"Button",is_intent:!0})},e.handleCloseModal=function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,a=e.color,r=e.icon,o=e.label,i=e.className,c=e.tooltip,s=e.tooltipPreset,u=e.authRequired,d=this.state.modalShown,p="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return Object(l.c)(l.a,{children:[Object(l.b)(v.c,{preset:n,color:a,className:i,icon:r,label:o,onClick:u(this.handleSendMessage,p?B.bb.serviceAccountMessage:B.bb.message),"data-tooltip":c,"aria-label":c,"data-tooltip-preset":s}),Object(l.b)(k.a,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:d})]})}}]),n}(d.Component);R.propTypes={onModalOpen:u.a.func,onModalClose:u.a.func},R.defaultProps={preset:"outline",color:"grey",icon:w.a,label:"发私信",doNotCheckAllowMessageSetting:!1};var _=Object(f.compose)(g.a,Object(p.connect)())(R),S=n(158);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var E=function(e){Object(o.a)(n,e);var t=M(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={reportModalShown:!1},e.handleShieldUser=function(){var t=e.props,n=t.user.urlToken,a=t.updateUserBlocking,r=t.showNotification;a(n,!1).then((function(){return r("屏蔽已取消")}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.user,r=a.urlToken,o=a.isBlocking,i=a.isOrg,c=t.canShowMutualFollowStatus,s=t.className,u=t.buttonClassName,d=t.onModalOpen,p=t.onModalClose,f=t.authRequired,h=this.state.reportModalShown,g=b()("MemberButtonGroup",s);return o?Object(l.c)("div",{className:g,children:[Object(l.c)(v.c,{className:u,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[Object(l.b)(m.a,{center:!0,text:!0})," 已屏蔽"]}),!i&&Object(l.c)(v.c,{className:u,onClick:f((function(){e.setState({reportModalShown:!0}),d&&d()}),B.bb.report),children:["举报用户",Object(l.b)(j.a,{shown:h,onClose:function(){e.setState({reportModalShown:!1}),p&&p()},type:"member",urlToken:r,zaEnabled:!0})]})]}):Object(l.c)("div",{className:g,children:[Object(l.b)(O.a,{id:r,type:n.type,gender:n.gender,isFollowing:n.isFollowing,isFollowed:n.isFollowed,canShowMutualFollowStatus:c,className:u,preset:O.a.PRESETS.primary}),Object(l.b)(_,{user:n,className:u,onModalOpen:d,onModalClose:p})]})}}]),n}(d.Component);E.propTypes={user:u.a.object.isRequired,buttonClassName:u.a.string,onModalOpen:u.a.func,onModalClose:u.a.func};t.a=Object(f.compose)(g.a,Object(p.connect)(null,{updateUserBlocking:S.p,showNotification:C.h}))(E)},1178:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ExclamationCircleFill24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zM12 7a1 1 0 011 1v4.5a1 1 0 11-2 0V8a1 1 0 011-1zm0 10.5a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Alert"+(e.className?" "+e.className:"")}}))}},1262:function(e,t,n){"use strict";var a=n(1),r=n(3),o=n.n(r),i=n(12),c=n.n(i),l=n(19),s=n(48),u=n(35),d=n(23),p=n(43),f=n(216),h=n(1159),b=n(32);function m(e){var t=this,n=e.user,r=e.user.isOrg,o=e.className,i=e.buttonClassName,l=e.onModalOpen,s=e.onModalClose,f=e.authRequired,m=e.router,v=c()("ProfileButtonGroup",o);return Object(p.p)(n)?Object(a.b)("div",{className:v,children:Object(a.c)(u.c,{color:"blue",className:i,onClick:f((function(){d.a.trackEvent(t,{action:"OpenUrl",element:"Link"},{link:{url:"".concat(location.origin,"/people/edit")}}),m.push("/people/edit")}),b.bb.editProfile),children:["编辑",r?"机构":"个人","资料"]})}):Object(a.b)(h.a,{user:n,canShowMutualFollowStatus:!0,className:v,buttonClassName:i,onModalOpen:l,onModalClose:s})}m.propTypes={user:o.a.object.isRequired,buttonClassName:o.a.string,onModalOpen:o.a.func,onModalClose:o.a.func},t.a=Object(l.compose)(s.withRouter,f.a)(m)},1296:function(e,t,n){"use strict";var a=n(14),r=n(15),o=n(16),i=n(17),c=n(8),l=n(1);function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var u=function(e){Object(o.a)(n,e);var t=s(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?Object(l.b)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null}}]),n}(n(0).Component);t.a=u},1317:function(e,t,n){"use strict";var a=n(0),r=n(688),o="element",i="text",c="empty",l="fragment",s=function(e,t){return function e(n){var r,s=n.node;return n.type=(r=s,a.isValidElement(r)?o:function(e){return"string"==typeof e||"number"==typeof e}(r)?i:function(e){return null==e||"boolean"==typeof e}(r)?c:Array.isArray(r)?l:void 0),n.type===o?n.children=a.Children.map(s.props.children,(function(t){return e({node:t,parent:n})})):n.type===l&&(n.children=a.Children.map(s,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},u=function e(t,n){return[t].concat(null==(a=n(t))?[]:function(t){return e(t,n)}(a));var a},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&r(String(e.node),String(n.node))){var a=(c=n,l=u(e,(function(e){return e.parent})),s=u(c,(function(e){return e.parent})),d=l.findIndex((function(e){return s.includes(e)})),[l[d],l[d-1]]);i=a[1],(o=a[0]).children.splice(o.children.indexOf(i)+1,0,{node:" "}),t=!0}var o,i,c,l,s,d;return n})),t},p=function(e){if(!e)return null;var t=[],n=s(e,(function(e){e.type===i&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===l?a.Children.map(t.children.map(e),(function(e){return e})):a.createElement(t.node.type,t.node.props,a.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},f=function(e){var t=e.component,n=e.children;return a.createElement(t,{children:p(n)})};f.defaultProps={component:a.Fragment||"span"},t.CJKSpace=f},1404:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--UsersFill24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M4.5 8A5.5 5.5 0 0110 2.5 5.5 5.5 0 0115.5 8a5.5 5.5 0 01-5.5 5.5A5.5 5.5 0 014.5 8zm-.602 7.738c.965-1.075 2.418-1.574 4.19-1.325 1.263.178 2.56.178 3.825 0 1.77-.249 3.224.25 4.189 1.325.628.7 1.212 1.69 1.657 2.656.442.961.78 1.973.868 2.733.07.6-.424 1.023-.927 1.023H2.3c-.503 0-.997-.423-.927-1.023.088-.76.426-1.772.868-2.733.444-.967 1.029-1.956 1.657-2.656zm12.312-2.046a.743.743 0 01-.309-.24.747.747 0 01.081-.995c.338-.335.655-.827.92-1.37.441-.906.652-1.98.59-3.065-.036-.607-.135-1.289-.302-1.782a.75.75 0 011.42-.48c.228.672.34 1.503.379 2.176.076 1.327-.178 2.658-.739 3.809a7.991 7.991 0 01-.594 1.028c.89.564 1.632 1.316 2.22 2.083.768 1.002 1.308 2.075 1.585 2.907a.75.75 0 11-1.423.474c-.223-.668-.682-1.595-1.352-2.468-.667-.87-1.507-1.643-2.476-2.077z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Users"+(e.className?" "+e.className:"")}}))}},1520:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ForbidFill24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M16.346 18.113a7.5 7.5 0 01-10.46-10.46l10.46 10.46zm1.767-1.767L7.654 5.886a7.5 7.5 0 0110.46 10.46zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Ban"+(e.className?" "+e.className:"")}}))}},1745:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--BriefcaseFill24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M21.5 8.199V18.8c0 .939-.768 1.699-1.715 1.699H4.215c-.947 0-1.715-.76-1.715-1.699V8.2c0-.938.768-1.699 1.715-1.699h15.572A1.707 1.707 0 0121.5 8.199zM6.944 11.5a.75.75 0 000 1.5h10.112a.75.75 0 000-1.5H6.944z",fillRule:"evenodd",clipRule:"evenodd"}),r.a.createElement("path",{d:"M6.75 5c0-.966.784-1.75 1.75-1.75h7c.966 0 1.75.784 1.75 1.75v2a.75.75 0 01-1.5 0V5a.25.25 0 00-.25-.25h-7a.25.25 0 00-.25.25v2a.75.75 0 01-1.5 0V5z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Company"+(e.className?" "+e.className:"")}}))}},943:function(e,t,n){"use strict";var a=n(14),r=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),p=n(19),f=n(20),h=n(12),b=n.n(h),m=n(383),v=n.n(m),g=n(932),O=n(35),j=n(23),y=n(51),w=n(451),x=n(216),C=n(65),k=n(982),B=n(126),N=n(134),R=n(226),_=n(380),S=n(445),M=n(188),E=n(455),P=n(32),T=n(77),F=n.n(T),A=function(e){return F()((function(t){var n=t.type,a=void 0===n?"":n,r=t.id,o=void 0===r?"":r;return a&&"people"===a||"rewardPeople"===a?Object(l.b)(y.b,{content:{type:"User",token:o,id:o},children:Object(l.b)(e,Object.assign({},t))}):Object(l.b)(e,Object.assign({},t))}),e)};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var z={default:"default",primary:"primary"},L=function(e){Object(o.a)(n,e);var t=I(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).zaRef=Object(d.createRef)(),e.state={hovered:!1,isFetching:!1},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e.toggleFollow=function(t){var n=e.props,a=n.isFollowing,r=n.type,o=n.id,i=n.zaId,c=n.useCustomZa,l=n.onFollowButtonClick,s=!a;if(!c){j.a.trackEvent(t.target,Object.assign({action:s?"Follow":"UnFollow",element:"Button",element_name:P.fb[r]},i&&{id:i}));var u=s?"关注":"取消关注";e.zaRef.current.trackEvent({action:s?"Follow":"UnFollow",eventType:"Click",elementLocation:{type:"Button",text:u},block:u})}var d="toggleFollow".concat(r.slice(0,1).toUpperCase()).concat(r.slice(1)),p=e.props[d](o,s);v()(p)&&(e.setState({isFetching:!0}),p.then((function(){e.setState({isFetching:!1}),l&&l()})).catch((function(){return e.setState({isFetching:!1})})))},e.handleToggleFollow=function(t){var n=e.props,a=n.authRequired,r=n.globalAuthRequired,o=n.ua;a?a(e.toggleFollow,P.bb.follow,!0)(t):o.Zhihu?e.toggleFollow(t):r(e.toggleFollow,P.bb.follow)(t)},e.handleClick=function(t){e.setState({hovered:!1});var n=e.props.onClick;n&&!n(t)||(e.handleToggleFollow(t),t.stopPropagation())},e.getButtonPresetAndColor=function(e,t){var n=e.isFollowing,a=e.preset,r=e.getButtonPresetAndColor;return r&&"function"==typeof r?r(e,t):n?{preset:"primary",color:"grey"}:{preset:a,color:"blue"}},e.getButtonInner=function(e,t){var n=e.isFollowing,a=e.canShowMutualFollowStatus,r=e.isFollowed,o=e.children,i=e.type,c=e.gender,s=e.entityHidden,u=e.getButtonInner;if(u&&"function"==typeof u)return u(e,t);var d=t.hovered;return n?{inner:d?"取消关注":a&&r?"互相关注":"已关注"}:o?{inner:o}:"people"===i||"rewardPeople"===i?{inner:[Object(l.b)(g.a,{className:"FollowButton-icon",text:!0,center:!0},"icon"),"关注".concat("number"==typeof c&&-1!==c?P.S[c]:"")]}:{inner:"关注".concat(s?"":w.b[i])}},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.className,a=e.isMobile,r=e.disabled,o=this.getButtonPresetAndColor(this.props,this.state),i=o.preset,c=o.color,s=this.getButtonInner(this.props,this.state).inner,u=this.state.isFetching;return Object(l.c)(O.c,Object.assign(Object.assign({onRef:t,preset:i,color:c,onClick:this.handleClick,className:b()("FollowButton",n)},!a&&{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),{},{disabled:r||u,children:[Object(l.b)(y.e,{ref:this.zaRef}),s]}))}}]),n}(d.Component);L.propTypes={preset:u.a.oneOf(Object.values(z)),type:u.a.oneOf(w.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,zaId:u.a.number,useCustomZa:u.a.bool},L.defaultTypes={preset:z.default},L.PRESETS=z;t.a=Object(p.compose)(A,Object(x.b)("globalAuthRequired"),Object(f.connect)((function(e){return{ua:e.env.userAgent,isMobile:Object(C.d)(e,{includeTablet:!0})}}),{toggleFollowQuestion:N.rb,toggleFollowCollection:R.f,toggleFollowColumn:_.e,toggleFollowRoundtable:S.m,toggleFollowTopic:M.N,toggleFollowPeople:B.c,toggleFollowRewardPeople:E.o,toggleFollowClub_mask:k.a}))(L)},949:function(e,t,n){var a=n(674),r=n(298),o=n(296),i=n(104),c=n(191),l=n(297),s=n(295),u=n(381),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||o(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(s(e))return!a(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},958:function(e,t,n){"use strict";var a=n(36),r=n(1),o=n(20),i=n(886),c=n(65),l=n(0),s=n(73),u=n.n(s),d=n(48),p=n(47),f=n(23),h=n(99),b=n(439),m=["isPinProfile","user","isPinDaily","onClick","children"];function v(e,t){var n=e.isPinProfile,o=e.user,i=e.isPinDaily,c=e.onClick,l=void 0===c?u.a:c,s=e.children,v=Object(a.default)(e,m),g=o.id,O=o.urlToken,j=o.isOrg,y=o.url,w=o.maskLevel,x="//www.zhihu.com/".concat(j?"org":"people","/").concat(O||g),C="zhihu://pin".concat(y,"/moments"),k=Object(h.a)((function(e){i&&"A"===e.target.nodeName&&f.a.trackEvent(e.target,{id:2065}),n&&(e.preventDefault(),Object(p.a)("base/openURL").dispatch({url:C})),w&&e.preventDefault(),l(e)}));return Object(r.b)(b.a,{zaText:!0,zaBlock:"User",children:Object(r.b)(d.Link,Object.assign(Object.assign({ref:t,to:x,href:x,target:"_blank",onClick:k,className:"UserLink-link","data-za-detail-view-element_name":"User"},v),{},{children:s}))})}var g=Object(l.forwardRef)(v),O=n(948),j=["user","noHoverCard","noLink","children"];t.a=function(e){var t=e.user,l=e.noHoverCard,s=e.noLink,u=e.children,d=Object(a.default)(e,j),p=t.id,f=t.urlToken,h=!Object(O.a)(t)||s,b=Object(o.useSelector)((function(e){return Object(c.d)(e,{includeTablet:!0})})),m=null!=l?l:b,v=Object(i.a)((function(){return Promise.all([n.e(5),n.e(19),n.e(153)]).then(n.bind(null,1041))}),!m);if(h)return u||null;var y=Object(r.b)(g,Object.assign(Object.assign({},d),{},{user:t,children:u}));return m||!v?y:Object(r.b)(v,{toggler:y,id:p,urlToken:f,user:t})}},969:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(36),r=n(1),o=n(12),i=n.n(o),c=n(440),l=n(948),s=n(977),u=n(956),d=n(958),p=["className","showVipIcon","vipIconZaViewName","user","noBadge","noVipBadge","children","badgeProps"];function f(e){var t,n,o=e.className,f=e.showVipIcon,h=e.vipIconZaViewName,b=e.user,m=void 0===b?{}:b,v=e.noBadge,g=e.noVipBadge,O=void 0!==g&&g,j=e.children,y=e.badgeProps,w=void 0===y?{}:y,x=Object(a.default)(e,p),C=Object(l.a)(m),k=C&&!v,B=(null===(t=m.vipInfo)||void 0===t?void 0:t.isVip)&&!O,N=C&&f&&(null===(n=m.vipInfo)||void 0===n?void 0:n.vipIcon);return Object(r.c)("span",{className:i()("UserLink",o),children:[Object(r.b)(d.a,Object.assign(Object.assign({},x),{},{user:m,children:j||m.name})),k&&Object(r.b)(c.c,Object.assign({css:{marginLeft:".3em"},isOrg:m.isOrg,badge:m.badgeV2||m.badge,linkify:!0,enableTooltip:!0},w)),B&&Object(r.b)(s.a,{vipInfo:m.vipInfo,css:{marginLeft:".3em"}}),N&&Object(r.b)(u.a,{vipIcon:m.vipInfo.vipIcon,zaViewName:h})]})}},977:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(14),r=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(0),u=n(12),d=n.n(u);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var f=function(e){Object(o.a)(n,e);var t=p(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return Object(l.b)("div",{className:d()("Badge",t),children:n})}}]),n}(s.Component),h=n(36),b=n(51),m=n(1061),v=n(991),g=n(670),O=["vipInfo"];function j(e){var t=e.vipInfo,n=Object(h.default)(e,O),a=function(e){var t=e.vipIcon,n=e.imageToken,a=e.nightModeToken,r=Object(g.a)().isDarkMode,o=t||{},i=o.url,c=o.nightModeUrl;return r?a?"https://picx.zhimg.com/".concat(a):c:n?"https://picx.zhimg.com/".concat(n):i}(t);return Object(l.c)(b.a,Object.assign(Object.assign({as:"span",rel:"noopener noreferrer",zaBlock:"VipBadge",zaType:"Button",zaEventType:"Click",onClick:v.a.show,css:{cursor:"pointer",display:"inline-flex",alignItems:"center"}},n),{},{children:["​",a?Object(l.b)("img",{src:a,alt:"",css:{width:"1em",height:"1em"}}):Object(l.b)(m.b,{css:{height:"1em",width:"1em"}})]}))}var y=Object(s.memo)(j);t.b=f},978:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(24),r=n.n(a),o=n(0),i=n(12),c=n.n(i),l=n(1092),s=n(1093),u=n(9);function d(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var p=function(e){var t=e.style,n=e.className,a=e.id,i=e.name,p=e.size,f=void 0===p?20:p,h=e.checked,b=e.onChange,m=e.disabled,v=Object(o.useState)(!1),g=d(r.a,v,2),O=g[0],j=g[1];return Object(u.g)("label",{style:t,className:c()("Checkbox",n,{"Checkbox--focused":O,"Checkbox--disabled":m})},h?Object(u.g)(l.a,{size:f,className:"Checkbox-iconOn"}):Object(u.g)(s.a,{size:f,className:"Checkbox-iconOff"}),Object(u.g)("input",{className:"Checkbox-input",id:a,name:i,type:"checkbox",checked:h,onFocus:function(){return j(!0)},onBlur:function(){return j(!1)},onChange:b,disabled:m}))}},980:function(e,t,n){"use strict";var a=n(14),r=n(15),o=n(86),i=n(16),c=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),p=n(0),f=n(48),h=n(35),b=n(981),m=n(32);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=v(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={expanded:!1},e.onExpand=e.handleExpand.bind(Object(o.a)(e)),e}return Object(r.a)(n,[{key:"handleExpand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.topics,n=e.user,a=e.ellipsisLength,r=e.expandable,o=e.privacyEnabled,i=e.showPrivacyPage,c=this.state.expanded,l="等 ".concat(t.length," 个"),u=t;return c||(u=t.slice(0,a)),0===t.length?null:Object(s.c)("span",{children:[u.map((function(e,t){return Object(s.c)("span",{children:[Object(s.b)(b.a,{showPrivacyPage:o&&i,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:Object(s.b)("span",{className:"ProfileMainPrivacy-pointerWrapper",children:e.name}),children:Object(s.b)(f.Link,{to:"".concat(m.G,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id),children:e.name})}),t<u.length-1?"、":" "]},t)})),!c&&t.length>a&&(r?Object(s.b)(h.c,{preset:"plain",onClick:this.onExpand,children:l}):l),"话题"]})}}]),n}(p.Component);g.propTypes={topics:d.a.array.isRequired,user:d.a.object,ellipsisLength:d.a.number,expandable:d.a.bool,noHoverCard:d.a.bool,privacyEnabled:d.a.bool,showPrivacyPage:d.a.bool},g.defaultProps={ellipsisLength:3,expandable:!0,noHoverCard:!1},t.a=g},981:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),r=n(0),o=n(457),i=function(e){var t=e.children,n=e.showPrivacyPage,i=e.authWrapperClassName,c=e.authChild,l=r.Children.only(t),s=c?r.Children.only(c):l;return n?Object(a.b)(o.a,{wrapperClassName:i,loginButton:s}):l}},982:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(2),r=n(6),o=n(31),i=n(32),c=Object(r.a)("user",["UPDATE_FOLLOWERS_PIN"]).UPDATE_FOLLOWERS_PIN;function l(e,t,n){return function(r,l){var s=l(),u=s.entities.users,d=s.currentUser,p=u[e];return r(n?Object(o.h)(i.Z.blocked,"red"):{urlToken:d,userUrlToken:e,expect:t,API:{types:c,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:Object(a.a)({},e,{isFollowing:t})},failure:{users:Object(a.a)({},e,p)},success:function(t){return{users:Object(a.a)({},e,t)}}}})}}},992:function(e,t,n){"use strict";var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(25),l=n.n(c),s=n(29),u=n.n(s),d=n(18),p=n.n(d),f=n(3),h=n.n(f),b=n(0),m=n.n(b),v=n(12),g=n.n(v),O=n(1014),j=n(118),y=n(94),w=n.n(y),x=n(225),C=n(9);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var B={top:10,left:20},N={top:0,left:0};var R=function(e){l()(n,e);var t=k(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).scrollerRef=m.a.createRef(),e.state={transEnded:!1,rect:null,translate:null,scale:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,a=t.data,r=n.getBoundingClientRect(),o=r.left,i=r.top,c=r.width,l=r.height,s=a.width,u=a.height,d={left:o,top:i,width:c,height:l},p=1;return s>u?(d.height=l,p=l/u,d.width=s*p,d.left=o+(c-d.width)/2,d.top=i+(l-d.height)/2):s<u&&(d.width=c,p=c/s,d.height=u*p,d.left=o+(c-d.width)/2,d.top=i+(l-d.height)/2),d},e.handleClick=function(t){t.stopPropagation(),e.setState({translate:null,scale:null})},e.handleTransitionEnd=function(){var t=e.state,n=t.translate,a=t.scale,r=e.props.onClose;n&&a?(e.setState({transEnded:!0}),e.scrollerRef.current.style.overflow="auto"):r()},e}return i()(n,[{key:"originalSrc",get:function(){return this.props.img.dataset.original}},{key:"currentSrc",get:function(){var e=this.props.img;return e.currentSrc||e.src}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.img,n=e.isOriginalUrl;this.originalSrc!==this.currentSrc&&((new Image).src=this.originalSrc);this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this;Object(O.disableBodyScroll)(this.scrollerRef.current);var t=this.props.img;setTimeout((function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:t.dataset.rawwidth||t.naturalWidth})))}))}},{key:"componentWillUnmount",value:function(){Object(O.enableBodyScroll)(this.scrollerRef.current)}},{key:"computeTransition",value:function(e,t){var n,a=this.props,r=a.transitionType,o=a.data,i=w()(navigator.userAgent).Mobile?N:B,c=i.top,l=i.left,s=window,u={left:0,top:0,width:s.innerWidth,height:s.innerHeight},d=function(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}(u),p={width:u.width-2*l,height:u.height-2*c},f={},h={};return 1===r?(f.width=p.width>o.width?o.width:p.width,n=f.width/o.width,f.height=o.height*n,h={x:(p.width-f.width)/2+l,y:f.height<p.height?(p.height-f.height)/2+c:B.top}):(f.width=p.width>t.width?t.width:p.width,n=f.width/e.width,f.height=e.height*n,h={x:d.x-e.width/2,y:(f.height<p.height?d.y:B.top+f.height/2)-e.height/2}),{translate:h,scale:n}}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.img,r=n.isOriginalUrl,o=n.data,i=n.transitionType,c=n.className,l=this.state,s=l.translate,u=l.scale,d=l.rect,p=l.transEnded,f=s&&u,h=1,b="";if(1===i){var m=(w()(navigator.userAgent).Mobile?N:B).left;e=Math.min(window.innerWidth-2*m,o.width);var v=d.width/e;b=f?"translate(".concat(s.x,"px, ").concat(s.y,"px) scale(1) "):"translate(".concat(d.left,"px, ").concat(d.top,"px) scale(").concat(v,") "),h=f?1:0}else b=f?"translate(".concat(s.x,"px ,").concat(s.y,"px) scale(").concat(u,") "):"translate(".concat(d.left,"px,").concat(d.top,"px)");return Object(C.g)(x.a,null,Object(C.g)("div",{className:g()("ImageView",c,{"is-active":f}),style:{paddingBottom:B.top},onClick:this.handleClick},Object(C.g)("div",{className:"ImageView-inner",ref:this.scrollerRef},Object(C.g)("img",{ref:function(e){t.imgEl=e},src:!1===r?Object(j.imgUrl)(a.dataset.original,"r"):p&&this.originalSrc||this.currentSrc,className:g()("ImageView-img",{"ImageView-transformOrigin":1===i}),style:{width:e||d.width,transform:b,opacity:h},onTransitionEnd:this.handleTransitionEnd,alt:"preview"}))))}}]),n}(b.Component);R.propTypes={img:h.a.object.isRequired,onClose:h.a.func.isRequired};t.a=R}}]);
//# sourceMappingURL=main.user-hover-card.e4c534244fe861c7705b.js.map