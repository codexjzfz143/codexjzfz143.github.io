(window.webpackJsonp=window.webpackJsonp||[]).push([[15,112],{1e3:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ee}));var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(34),s=n(36),u=n(1),d=n(1340),f=n(884),b=n(99),p=n(42),h=n(1116),m=n(12),v=n.n(m),g=n(1588),O=n.n(g),j=n(3),y=n.n(j),w=n(0),C=n(20),k=n(19),x=n(23),S=n(51),A=n(35),T=n(459),R=n(289),E=n(975),I=n(1180),N=n(945),B=n(39),z=n.n(B),P=n(68),_=n(2943);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var M=function(e){Object(o.a)(n,e);var t=L(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,r=e.onSelect,a=e.content,o=this.hintInfo,i=o&&"danger"===o.type;return Object(u.c)("div",{className:v()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:i,children:[Object(u.b)("span",{className:"SharePopover-arrow"}),Object(u.c)("div",{role:"button",tabIndex:0,className:v()("SharePopover-content",{"SharePopover-content--danger":i}),onClick:function(){i||r(a)},children:[Object(u.b)(_.b,{className:"SharePopover-quote",size:24}),Object(u.b)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),o&&Object(u.b)("span",{className:"SharePopover-hint",children:o.text})]})]})}}]),n}(w.Component);M.propTypes={content:y.a.string,top:y.a.number,visible:y.a.bool};var D=M,U=n(91),F=n(1651),V=n(500);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var G=function(e){Object(o.a)(n,e);var t=q(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,r=t.actived;return Object(u.b)("div",{className:"TopicSelect",children:Object(u.b)(V.a,{actived:r,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(w.Component);function H(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var K=function(e){Object(o.a)(n,e);var t=W(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return Object.assign(Object.assign({},e),{},{topics:t})}))},e.handleSubmit=function(){var t=H(l.a,e.state.topics,1)[0].urlToken;(0,e.props.onSubmit)(t)},e}return Object(a.a)(n,[{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,r=e.currentUser,a=e.title,o=e.url,i=e.onClose,c=e.content,l=e.visible;return Object(u.b)(U.b,{onClose:i,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:l&&Object(u.c)(w.Fragment,{children:[Object(u.b)(F.a,{type:t,author:n,member:r,title:a,url:o,content:c,theme:"scroll"}),Object(u.b)(G,{onChange:this.handleChangeTopics}),Object(u.b)("div",{className:"AbstractForm-footer",children:Object(u.b)(A.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}}]),n}(w.Component);K.propTypes={type:y.a.string.isRequired,author:y.a.object,currentUser:y.a.object,title:y.a.string.isRequired,content:y.a.string.isRequired,url:y.a.string.isRequired,visible:y.a.bool.isRequired,onClose:y.a.func.isRequired,onSubmit:y.a.func.isRequired};var Z=n(188),Q=n(1341),Y=n(174);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var X=function(e){Object(o.a)(n,e);var t=J(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;x.a.trackCardShow(null,{id:6115}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return Object.assign(Object.assign({},e),{},{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){x.a.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,r=n.type,a=n.objectId,o=n.createAbstract,i=e.state.content;x.a.trackEvent(null,{id:6117,action:"Submit"}),o({type:r,token:a,topicId:t,content:i}).then((function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:i,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}return Object(a.a)(n,[{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object(Q.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}},{key:"componentDidMount",value:function(){var e,t,n,r;this.removeMouseUpListener=(e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,r=function(){var r=Object(P.a)(z.a.mark((function r(a){var o,i;return z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}));case 2:(o=r.sent)?(i=a.target===e?a.offsetY:a.offsetY+a.target.offsetTop+30,t(o,i)):n();case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),null==e||e.addEventListener("mouseup",r),function(){return null==e?void 0:e.removeEventListener("mouseup",r)})}},{key:"componentWillUnmount",value:function(){this.removeMouseUpListener()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,r=e.content,a=e.abstractModalVisible,o=this.props,i=o.type,c=o.author,l=o.currentUser,s=o.title,d=o.url,f=o.isCopyable;return this.hasAddBaikeSummaryPermission?Object(u.c)(w.Fragment,{children:[Object(u.b)(D,{top:n,visible:t,content:r,isCopyable:this.isAuthor||f,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(u.b)(K,{type:i,onSubmit:this.handleCreateAbstract,author:c,visible:a,onClose:this.handleAbstractModalClose,currentUser:l,title:s,url:d,content:r})]}):null}}]),n}(w.Component);X.propTypes={type:y.a.string.isRequired,author:y.a.object.isRequired,currentUser:y.a.object,title:y.a.string.isRequired,url:y.a.string.isRequired,objectId:y.a.number.isRequired,isCopyable:y.a.bool},X.defaultProps={isCopyable:!0};var $=Object(k.compose)(Y.a,Object(C.connect)(null,{createAbstract:Z.d}))(X),ee=n(1421),te=n(950),ne=n(86),re=n(555),ae=n(43),oe=n(1151);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var ce=function(e){Object(o.a)(n,e);var t=ie(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(ne.a)(e)),e.handleCopy=e.handleCopy.bind(Object(ne.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(ne.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(a.a)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],a=["",""];return r=n?r.concat(a):a.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("\n");return r?a+e:e+a}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("<br />");return"<div>".concat(r?a+e:e+a,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),a=this.getRange(r),o=a.toString().trim(),i=this.getRangeHtml(a);if(o&&!(o.length<128)){var c=o.length>=512,l=this.getCopyHtml(i,t,n,c),s=this.getCopyText(o,t,n,c),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+l),u.setData("text/plain",s),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=l;var f=d.firstChild;f.style.position="fixed",f.style.left="-9999px",document.body.appendChild(f),r.selectAllChildren(f),setTimeout((function(){document.body.removeChild(f),r.removeAllRanges(),r.addRange(a)}),200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),a=r.toString().trim(),o=this.randomRange(44,66);if(!(a.length<=o)){e.preventDefault(),e.stopPropagation();var i,c=r.getBoundingClientRect(),l=window.pageYOffset,s=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var f=this.props.viewPort,b=c.top+l,p=c.bottom+l,h=l+f.top+52,m=l+f.bottom-52;p<h?i=h-52:p<m?i=p:(d="top",i=b>h&&b<m?b:m+52)}var v=-1!==s?s+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,a=n.type,o=n.id,i=n.question,c=n.reshipmentSettings,l=n.relationship,s=(l=void 0===l?{}:l).isAuthor,d=l.isAuthorized,f=t.isCurrentUser,b="";if("article"===a?b="https://zhuanlan.zhihu.com/p/".concat(o):"answer"===a&&(b="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(o)),!f&&!s)switch(c){case"disallowed":this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!d){this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(o),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,b,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,r=e.tag,a=e.html,o=e.children,i=e.onClick,c=e.className,l=e.itemProp,s=e.style,d=e.prefix,f=e.ecommerce,b=e.shouldShowCatalog,p=e.shouldCatalogCollapse,h=e.richContentKey,m=e.isCurrentUser,v=e.isNovel,g=e.isExpanded,O=e.entityWords,j=e.isVideoAnswer,y=this.state,w=y.tipShown,C=y.tipContent,k=y.tipX,x=y.tipY,S=y.tipPosition;return Object(u.c)("div",{ref:t,onClick:i,className:c,style:s,children:[d,Object(u.b)(oe.a,{entityWords:O,richContentKey:h,sourceId:n.id,sourceType:n.type,itemProp:l,tag:r,html:a,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:f,shouldShowCatalog:b,useCatalogV2:!0,isAuthor:m,isNovel:v,isExpanded:g,shouldCatalogCollapse:p,isVideoAnswer:j}),o,Object(u.b)(re.a,{shown:w,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:k,y:x,position:S,content:C,className:"CopyrightRichText-tooltip"})]})}}]),n}(w.Component);ce.propTypes={onRef:y.a.func,viewPort:y.a.object};var le=Object(k.compose)(Object(C.connect)((function(e,t){return{isCurrentUser:Object(ae.j)(e,t.data.author)}})))(ce),se=n(1107),ue=n(443),de=n(1263);function fe(e){for(var t=e.replace(/(<noscript>).*?(<\/noscript>)/g,""),n=[],r=/<\s*img.*?>/g,a=/(zh-lightbox-thumb)|(Slideshow-swiperImage)/,o=/(data-original=").*?"/,i=null;i=null===(c=r.exec(t))||void 0===c?void 0:c[0];){var c;if(a.test(i)){var l=o.exec(i);l&&n.push(l[0].split("data-original=")[1].replace(/"|\\/g,""))}}return n}var be,pe,he,me,ve,ge=n(65),Oe=n(613),je=n(1815),ye=function(){var e=Object(S.k)({action:"ReadFinished",elementLocation:{type:"Text",text:"阅读完成",block:{blockText:"阅读完成"}}});return Object(u.b)("span",{ref:e})},we=n(217),Ce=n(48),ke=n(220),xe=n.n(ke),Se=n(154),Ae=n(159);function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var Re=function(e){Object(o.a)(n,e);var t=Te(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,a=e.onClick,o=e.videoPlayCount,i=e.ipInfo;return Object(u.c)("div",{className:"ContentItem-time",children:[Object(u.b)(Ce.Link,{to:t,target:"_blank",onClick:a,children:Object(u.b)("span",{"data-tooltip":xe()(be||(be=Object(we.a)(["发布于",""])),Object(Ae.toDateTimeString)(n)),"aria-label":xe()(pe||(pe=Object(we.a)(["发布于",""])),Object(Ae.toDateTimeString)(n)),children:r!==n?xe()(he||(he=Object(we.a)(["编辑于",""])),Object(Ae.toDateTimeString)(r)):xe()(me||(me=Object(we.a)(["发布于",""])),Object(Ae.toDateTimeString)(n))})}),Boolean(i)&&xe()(ve||(ve=Object(we.a)(["・",""])),i),Boolean(o)&&Object(u.c)("span",{css:{marginTop:10,marginLeft:5},children:["· ",Object(Se.cnNiceNumber)(o),"次播放"]})]})}}]),n}(w.Component);Re.propTypes={href:y.a.string,created:y.a.number,updated:y.a.number,videoPlayCount:y.a.number,onClick:y.a.func,ipInfo:y.a.string};var Ee=Re,Ie=new Set([106713022,429615779,435773734,426291898,250310031,414291487,409115369,446861209,247003387,73377905,254989758,35134669,36249462,435345603,182387634,140256060,437667891,153624684,47216571,1009993776,1166287748,150785754,573667246,345093461,2051581556,423418617,24921526,427937981,119180585,442812865,175851487,285113967,807213480,415830436,125852644,399866520,269912473,736404714,630788898,217627201,32718846,233425911,1965977070,1703482555,425876259,376921084,477237451,430849009,409175983,395659900,404407636,33593650,29355234,45519587,477365726,407347055,128506044,324992390,391677046,399503822,540487048,514491508,340627548,433773279,125028091,126685323,1073936835,128655569,1782124590,431426144,198577418,449399100,2074550774,342658316,429187404,275411797,121202894,356603699,211168793,1182049284,88545788,435377412,142918293,112180819,107952366,394146559,239506554,243404812,967162682,416311991,108937963,503648342,37744326,338336040,742041726,2142758456,13098904,435935045,181579258,17350640]),Ne=["children","onChange"],Be=["url","hasVideo","duration","isVideoAnswer","onCoverImageLoad"];function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function Pe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var _e=/.*?(class="link-box")/;var Le=function(e){var t=e.children,n=e.onChange,r=Object(s.default)(e,Ne),a=Object(f.a)(r),o=Pe(l.a,a,2),i=o[0],c=o[1],d=Object(b.a)(n);return Object(w.useEffect)((function(){d(c)}),[d,c]),Object(u.b)("span",{ref:i,children:t})},Me=function(e){Object(o.a)(n,e);var t=ze(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state=Object.assign(Object.assign({},e.getInitTruncatedState(e.props)),{},{shouldSticky:!1,offset:0,prevImgUrls:[]}),e.richContentRef=Object(w.createRef)(),e.zaRef=Object(w.createRef)(),e.truncateContent=function(){var t=e.props,n=t.isMobile,r=t.onToggleExpend,a=n?400:800,o=e.props.expandedHeight||a;(!e.content||e.content.scrollHeight<o)&&(e.setState({isTruncated:!1,isExpanded:!1}),null==r||r(!1,{trackUserAction:!1})),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,r=t.allowCollapseWithEmptyExcerpt,a=t.html,o=t.expanded,i=t.cover,c=t.unescapable,l=t.limit,s=t.limitWithImage,u=t.truncateHTMLOptions,d=t.truncateDisabled,f=!0,b=e.state.truncatedContent;if((n||r)&&(_e.test(n)||d))b=n;else if(!c){var p=i?s:l,h=e.truncate(a,p,u);f=h.isTruncated,b=h.content}return{isTruncated:f,isExpanded:a&&o,truncatedContent:b,previewImg:null}},e.checkOpenInAppStyle=function(e){},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.trackExpand=function(t){var n=e.props.expandButtonZaType,r=t?"阅读全文":"收起阅读全文";e.zaRef.current.trackEvent({eventType:"Click",action:t?"Expand":"Collapse",elementLocation:{type:n||"Card",text:r},block:r})},e.handleExpand=function(t){var n,r,a,o,i,c,l=e.props.zaIds.expand;null!=t&&t.target&&(((null===(o=a=t.target.textContent)||void 0===o?void 0:o.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(a=null));(x.a.trackEvent(e.richContentRef.current,Object.assign(Object.assign({action:"Expand"},a&&{name:a}),l&&{id:l})),Ie.has(null===(n=e.props)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.id))&&p.b.increment("RichContent.Expand.afterZALog.".concat(a||"default",".").concat(l||"default",".").concat(null===(i=e.props)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.id,".count"));var s=e.props.onExpand;if(s)s(t);else{var u=e.props,d=u.onToggleExpend,f=u.data,b=f.type,h=f.id;u.currentUser&&Object(de.c)("article"===b?"post":b,h,de.a);d&&(d(!0),e.trackExpand(!0)),e.setState({isExpanded:!0},(function(){"article"===b&&Object(N.onViewedOnce)(e.richContentRef.current,(function(){x.a.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;x.a.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});t&&(t(!1),e.trackExpand(!1)),e.setState({isExpanded:!1},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n,r,a=e.props,o=a.ua,i=a.isMobile,c=e.state,l=c.isExpanded,s=c.isTruncated,u=c.prevImgUrls,d=s&&!l,f=t.target;d||"IMG"!==f.tagName||!f.classList.contains("zh-lightbox-thumb")&&!f.classList.contains("Slideshow-swiperImage")||(i&&o.MQQBrowser&&null!==(n=window.browser)&&void 0!==n&&null!==(r=n.app)&&void 0!==r&&r.openPhotoBrowser?setTimeout((function(){window.browser.app.openPhotoBrowser(u,O()(u,(function(e){return e===f.dataset.original})),0)}),0):e.setState({previewImg:f}))},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleBodyInViewChange=function(t){var n=t;n!==e.state.shouldSticky&&(e.setState({shouldSticky:n}),n||e.checkOpenInAppStyle(!1))},e.handleTrunObserve=function(t){var n=e.props,r=n.data,a=(r.type,r.id,n.updateReadStatus,n.html),o=t[0],i=o.intersectionRatio,c=o.isIntersecting;e.truncateComputed||(i>0||c||!a)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,r=t.before,a=t.unescapable,o=e.state,i=o.isExpanded,c=o.isTruncated;return!r&&!n||a?c&&!i:!i},e}return Object(a.a)(n,[{key:"abstractProps",get:function(){var e=this.props.data,t=e.id,n=e.type,r=e.author,a=e.question;return{objectId:t,type:n,author:r,title:(a=void 0===a?{}:a).title,url:e.url,isCopyable:e.isCopyable}}},{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign(Object.assign({},this.updateStateInBrowser()),{},{viewPort:{top:148,bottom:window.innerHeight-56}}),(function(){var t,n;null===(t=(n=e.props).onToggleExpend)||void 0===t||t.call(n,e.state.isExpanded,{trackUserAction:!1})})),Object(N.onViewedOnce)(this.richContentRef.current,(function(){var t=e.props,n=t.data,r=n.type,a=n.id,o=t.expanded;t.currentUser&&o&&Object(de.c)("article"===r?"post":r,a,de.a)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){var n=e.ua,r=e.html,a=e.isMobile;if(this.state.isExpanded&&!t.isExpanded){var o=this.richContentRef.current.getBoundingClientRect();o.top<this.props.topExcludedHeight&&(this.rect=o,this.scroll=window.pageYOffset)}a&&!this.state.isExpanded&&t.isExpanded&&n.MQQBrowser&&this.setState({prevImgUrls:fe(r)})}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,a=n.bottom,o=n.height,i=this.richContentRef.current.offsetHeight,c=window.innerHeight,l=a<c?i-o:r-(c-i);window.scrollTo(0,this.scroll+l),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,a=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:a?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(I.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,a=t.noCollapsed,o=t.expandText,i=void 0===o?"展开阅读全文":o,c=t.onClick,l=t.videoData,s=t.needExpandArrow,d=void 0===s||s,f=t.forceSticky,b=this.state,p=b.isExpanded,m=b.isTruncated,v=b.shouldSticky,g=b.offset;if(!p)return[r&&m&&!l&&Object(u.c)(A.c,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand,children:[i,d&&Object(u.b)(h.a,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&Object(u.b)(te.a,{children:n},"actions")];var O=(n||!a)&&Object(u.c)(te.a,{className:"RichContent-actions",children:[n,!a&&Object(u.c)(A.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[Object(u.b)("span",{className:"RichContent-collapsedText",children:"收起"}),Object(u.b)(h.a,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return(f||v)&&O?Object(u.b)(R.a,{offset:g,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:O}):O}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,a=t.data,o=t.itemProp,i=void 0===o?"text":o,c=t.expandText,l=void 0===c?"阅读全文":c,s=t.onClick,d=t.prefix,f=t.unescapable,b=(t.isSearchContent,t.collapsedHeight),p=t.ecommerce,m=t.canAbstract,g=t.richContentKey,O=t.shouldCatalogCollapse,j=t.isNovel,y=t.entityWords,w=t.isVideoAnswer,C=this.state,k=C.truncatedContent,x=C.previewImg,S=C.viewPort,R=C.contentCollapsed,E=C.isExpanded,I=this.isCollapsed(),N=I?k||r:n,B={},z=Object(u.c)(le,Object.assign(Object.assign(Object.assign({entityWords:y,richContentKey:g&&String([g,I]),itemProp:i,className:v()("RichContent-inner",{"RichContent-inner--collapsed":R}),style:I&&f?{maxHeight:b}:null,tag:"span",onRef:function(t){e.content=t},isExpanded:E,data:a,html:N,viewPort:S,prefix:d},I&&{onClick:s||this.handleExpand}),B),{},{ecommerce:p,shouldCatalogCollapse:O,shouldShowCatalog:Object(ee.a)(a)&&(E||f&&!I),isNovel:j,isVideoAnswer:w,children:[m&&Object(u.b)($,Object.assign({},this.abstractProps)),!f&&I&&Object(u.c)(A.c,{preset:"plain",className:"ContentItem-more",children:[l,Object(u.b)(h.a,{className:"ContentItem-arrowIcon",center:!0})]}),Object(u.b)(je.a,{img:x,onClose:function(){return e.setState({previewImg:null})}})]}),I);return f?Object(u.b)(T.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:z}):z}},{key:"render",value:function(){var e=this.props,t=e.unescapable,r=e.after,a=e.before,o=e.extra,i=e.cover,c=e.onCoverImageLoad,l=e.hasVideo,s=e.renderCanExpandExtra,d=e.className,f=e.videoData,b=e.handleClickVideoMoreButton,p=e.duration,h=e.isVideoAnswer,m=this.state.isExpanded,g=this.isCollapsed(),O=f?Object(u.c)(u.a,{children:[Object(u.b)(se.a,{data:f}),Object(u.b)("p",{className:"RichContent-videoMore",onClick:b,children:"点击查看全文"})]}):this.renderText(),j=Object(u.b)(Le,{rootMargin:"-".concat(240,"px 0px"),onChange:this.handleBodyInViewChange,children:O});return Object(u.c)("div",{className:v()("RichContent",d,{"is-collapsed":g,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[Object(u.b)(S.e,{ref:this.zaRef}),Object(u.b)(ue.c,{input:"o",action:this.toggle}),!g&&a,!t&&g&&i&&Object(u.b)(n.Cover,{url:i,onCoverImageLoad:c,hasVideo:l,onClick:this.handleExpand,duration:p,isVideoAnswer:h}),j,o||"function"==typeof s&&s(m,this.handleExpand),!g&&Object(u.c)(u.a,{children:[r,Object(u.b)(ye,{root:this.richContentRef})]}),this.renderActions()]})}}]),n}(w.Component);Me.propTypes={enableConvert:y.a.bool,unescapable:y.a.bool,expanded:y.a.bool,noCollapsed:y.a.bool,limit:y.a.number,limitWithImage:y.a.number,collapsedHeight:y.a.number,html:y.a.string,excerpt:y.a.string,allowCollapseWithEmptyExcerpt:y.a.bool,truncateDisabled:y.a.bool,before:y.a.node,after:y.a.node,prefix:y.a.node,extra:y.a.node,renderCanExpandExtra:y.a.func,topExcludedHeight:y.a.number,onPositionStatusChange:y.a.func,type:y.a.string,data:y.a.object,canAbstract:y.a.bool,cover:y.a.string,hasVideo:y.a.bool,truncateHTMLOptions:y.a.object,expandText:y.a.string,onToggleExpend:y.a.func,videoData:y.a.object,handleClickVideoMoreButton:y.a.func,zaIds:y.a.shape({expand:y.a.number}),forceSticky:y.a.bool},Me.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{},forceSticky:!1},Me.Cover=function(e){var t=e.url,n=e.hasVideo,r=e.duration,a=e.isVideoAnswer,o=e.onCoverImageLoad,i=Object(s.default)(e,Be);return Object(u.c)("div",Object.assign(Object.assign({className:v()("RichContent-cover",{"RichContent-cover--mobile":!1})},i),{},{children:[Object(u.c)("div",{className:"RichContent-cover-inner",children:[Object(u.b)(d.a,{src:t,width:190,height:105,alt:"cover",onLoad:o}),r&&Object(u.b)("div",{className:"RichContent-cover-mask"}),r&&Object(u.b)("div",{className:"RichContent-cover-duration",children:r})]}),a&&Object(u.b)(d.a,{alt:"",width:64,height:18,css:{position:"absolute",left:0,top:0,objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&Object(u.b)(E.a,{className:"RichContent-cover-play"})]}))};t.b=Object(k.compose)(Y.a,Object(C.connect)((function(e){return{ua:Object(ge.m)(e),isMobile:Object(ge.d)(e)}}),{updateReadStatus:Oe.b}))(Me)},1003:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return C}));var r=n(26),a=n.n(r),o=n(24),i=n.n(o),c=n(64),l=n(0),s=n(77),u=n.n(s),d=n(190),f=n.n(d),b=n(5);function p(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var h=[["REACTION_AGREE_DISAGREE","isBlockingVote"],["REACTION_ATTENTION_QUESTION","isBlockingFollowQuestion"],["REACTION_BIND_TOPIC","isBlockingBindTopic"],["REACTION_COLLECT","isBlockingCollect"],["REACTION_COMMENT","isBlockingComment"],["REACTION_GOOD_QUESTION","isBlockingLikeQuestion"],["REACTION_GRATITUDE","isBlockingLike"],["REACTION_REWARD","isBlockingReward"],["REACTION_SHARE","isBlockingShare"],["REACTION_VOTE","isBlockingPoll"],["REACTION_FORWARD","isBlockingForward"],["REACTION_ANSWER_NEWEST_LIST","isBlockingAnswerNewestList"]],m={isBlockingVote:!1,isBlockingLike:!1,isBlockingCollect:!1,isBlockingComment:!1,isBlockingShare:!1,isBlockingFollowQuestion:!1,isBlockingLikeQuestion:!1,isBlockingBindTopic:!1,isBlockingPoll:!1,isBlockingReward:!1,isBlockingForward:!1,isBlockingAnswerNewestList:!1};function v(e){return h.map((function(t){var n=p(i.a,t,2),r=n[0],a=n[1];return e===r||e===Object(b.camelize)(r)?a:""})).filter(Boolean)[0]}function g(e){return!!(null==e?void 0:e.reactionInstruction)}function O(e,t){if(g(e))return e.reactionInstruction;if("string"==typeof t){var n=f()(e,t);if(g(n))return n.reactionInstruction}if(Array.isArray(t))for(var r=0;r<t.length;r++){var a=f()(e,t[r],null);if(g(a))return a.reactionInstruction}}var j=Object(l.createContext)({getBlockStrategies:function(){return m}}),y=function(e){var t=e.data,n=e.dataPath,r=e.passThrough;return Object(c.jsx)(j.Provider,{value:Object(l.useState)({getBlockStrategies:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dataPath,r=O(e,n),o=Object.assign({},m);return r?[Object.keys(r).reduce((function(e,t){return"HIDE"===r[t]?Object.assign(Object.assign({},e),{},a()({},v(t),!0)):e}),o),e]:[o,e]}(t,{dataPath:n}),o=p(i.a,e,2),c=o[0],l=o[1];return r?r(c,l):c}})[0],children:e.children})},w=function(){return{blockStrategies:(0,Object(l.useContext)(j).getBlockStrategies)()}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return u()((function(n){var r=e.dataPath,a=e.passThrough;return Object(c.jsx)(y,{data:n,dataPath:r,passThrough:a,children:Object(c.jsx)(t,Object.assign({},n))})}),t)}}var k=function(e){return u()((function(t){var n=w().blockStrategies;return Object(c.jsx)(e,Object.assign(Object.assign({},t),{},{blockStrategies:n}))}),e)}}).call(this,n(222))},1004:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(51),b=n(2421),p=n(35),h=n(23),m=n(154),v=n(443);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var O=function(e){Object(o.a)(n,e);var t=g(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).buttonRef=Object(d.createRef)(),e.handleClick=function(t){var n=e.props,r=n.zaInfos,a=r.toggleComment,o=r.getCommentAction,i=n.positionStatus,c=n.onClick,l=n.commentsShown;if(h.a.trackEvent(e.buttonRef.current,Object.assign({action:o?o(!l):"Comment",element:"Button",is_intent:!0},a&&{id:a})),c){var s="fixed"===i?"fixed":"bottom",u={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(t instanceof KeyboardEvent),commentPattern:s};t instanceof KeyboardEvent&&"bottom"===s&&e.buttonRef.current.focus(),c(t,u)}},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.count,a=t.commentsShown,o=t.commentClosed;a?e="收起评论":e=r&&!o?"".concat(Object(m.formatNumber)(r)," 条评论"):"添加评论";return Object(l.c)(d.Fragment,{children:[Object(l.b)(v.c,{input:"c",action:this.handleClick}),Object(l.b)(f.a,{as:p.c,zaAction:a?"Collapse":"Expand",zaText:a?"收起评论":"展开评论",zaBlock:a?"收起评论":"展开评论",zaType:"Button",onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:b.a,label:e})]})}}]),n}(d.Component);O.propTypes={commentsShown:u.a.bool,count:u.a.number,zaInfos:u.a.shape({id:u.a.number,getCommentAction:u.a.func}),onInstance:u.a.func},O.defaultProps={zaInfos:{},onInstance:function(){return null}};t.a=O},1027:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(51),o=n(77),i=n.n(o),c=function(e){return function(t){return i()((function(n){var o=n.zaInfos,i=void 0===o?{}:o;return Object(r.b)(a.b,Object.assign(Object.assign({},"function"==typeof e?e(n):e),{},{children:Object(r.b)(a.f,Object.assign(Object.assign({zaType:"Card"},void 0!==i.index&&{view:{elementLocation:{card:{index:Number(i.index)}}}}),{},{children:Object(r.b)(t,Object.assign({},n))}))}))}),t)}}},1050:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(0),u=n(3),d=n.n(u),f=n(12),b=n.n(f);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e,t){var n=t?e.replace(/<.+?>/g,""):e;return Array.from(n).length},m=function(e,t,n){var r=h(e,n);if(0===r)return{ok:!1,message:null};var a=r-t;return a>0?{ok:!1,message:"已超过 ".concat(a," 个字")}:a>=-10?{ok:!0,message:"还可以输入 ".concat(-a," 个字")}:{ok:!0,message:null}};(function(e){Object(o.a)(n,e);var t=p(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).check="title"===e.props.type?function(e){return m(e,100)}:function(e){return m(e,1e5,!0)},e.state=e.check(e.props.content),e.compareState=function(t){var n=t.ok,r=t.message;return e.state.message!==r||e.state.ok!==n},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.onStatusChange(this.state.ok)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.onStatusChange,r=t.content;if(e.content!==r){var a=this.check(e.content);this.compareState(a)&&(n(a.ok),this.setState(a))}}},{key:"shouldComponentUpdate",value:function(e,t){return this.compareState(t)}},{key:"render",value:function(){var e=this.state,t=e.ok,n=e.message,r=b()("WriteIndex-LengthStatus",{"WriteIndex-LengthStatus-warning":!t});return n&&Object(l.b)("div",{className:r,children:n})}}]),n}(s.Component)).propTypes={content:d.a.string,type:d.a.oneOf(["content","title"]).isRequired,onStatusChange:d.a.func.isRequired}},1065:function(e,t,n){"use strict";var r=n(1200);n.d(t,"getReferencedContent",(function(){return r.d})),n.d(t,"isCoCreateRelation",(function(){return r.e})),n.d(t,"isReferenceRelation",(function(){return r.f}));var a=n(1796);n.d(t,"CoCreationLabel",(function(){return a.a}));var o=n(1797);n.o(o,"CancelCoCreation")&&n.d(t,"CancelCoCreation",(function(){return o.CancelCoCreation})),n.o(o,"CoCreationLinkCard")&&n.d(t,"CoCreationLinkCard",(function(){return o.CoCreationLinkCard})),n.o(o,"CreationRelationshipBar")&&n.d(t,"CreationRelationshipBar",(function(){return o.CreationRelationshipBar})),n.o(o,"renderDualAuthor")&&n.d(t,"renderDualAuthor",(function(){return o.renderDualAuthor}));var i=n(1888);n.d(t,"CreationRelationshipBar",(function(){return i.a}));var c=n(1798);n.d(t,"CoCreationLinkCard",(function(){return c.a}));var l=n(1799);n.d(t,"renderDualAuthor",(function(){return l.a}));var s=n(1903);n.d(t,"CancelCoCreation",(function(){return s.a}))},1066:function(e,t,n){"use strict";e.exports=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}},1067:function(e,t,n){"use strict";var r=n(1344),a=[],o=[],i=r.makeRequestCallFromTimer((function(){if(o.length)throw o.shift()}));function c(e){var t;(t=a.length?a.pop():new l).task=e,r(t)}function l(){this.task=null}e.exports=c,l.prototype.call=function(){try{this.task.call()}catch(e){c.onerror?c.onerror(e):(o.push(e),i())}finally{this.task=null,a[a.length]=this}}},1075:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(2),a=n(14),o=n(15),i=n(16),c=n(17),l=n(8),s=n(36),u=n(1),d=n(0),f=n(19),b=n(20),p=n(38),h=n(175),m=n(226),v=n(216),g=["ids"],O=["currentUser","authRequired"];function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var y=function(){return n.e(129).then(n.bind(null,1290)).then((function(e){return e.FavlistsModal}))},w={ids:[],isFetching:!1,isDrained:!1},C=Object(p.createSelector)((function(e){return e.favlists[e.currentUser]||w}),(function(e){return e.entities.favlists}),(function(e,t){var n=e.ids,r=Object(s.default)(e,g);return Object.assign(Object.assign({},r),{},{items:n.map((function(e){return t[e]}))})}));var k=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onFavlistAdd=function(){for(var t=e.props,n=t.type,r=t.id,a=t.onFavlistAdd,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return a.apply(void 0,i.concat([{type:n,id:r}]))},e.onLoad=function(){var t=e.props,n=t.onLoad,a=t.type,o=t.id,i=t.onUpdateReaction;return n(a,o).then((function(e){i({contentType:a,contentId:o,relations:e.payload.data.reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(r.a)({},t.id,t.isFavorited))}),{})})}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.authRequired,r=Object(s.default)(e,O);return Object(u.b)(h.a,Object.assign(Object.assign({getComponent:y},r),{},{authRequired:n,isUserActive:Boolean(null==t?void 0:t.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),n}(d.Component),x=Object(f.compose)(v.a,Object(b.connect)((function(e,t){var n=t.id,r=t.type,a=e.favlists.relations,o=e.currentUser,i=C(e);return{isFetching:i.isFetching,isDrained:i.isDrained,items:i.items,relations:a["".concat(r,"_").concat(n)],zaEnabled:!0,urlToken:o}}),(function(e,t){return{onUpdateFav:function(){return e(m.g.apply(void 0,arguments))},onFavlistAdd:t.onFavlistAdd||function(){return e(m.a.apply(void 0,arguments))},onLoad:function(){return e(m.d.apply(void 0,arguments))},onUpdateReaction:function(){return e(m.h.apply(void 0,arguments))}}})))(k)},1081:function(e,t,n){e.exports=n(220),e.exports.CJKSpace=n(1317).CJKSpace},1101:function(e,t,n){"use strict";n.d(t,"a",(function(){return wr}));var r=n(34),a=n(4),o=n(14),i=n(15),c=n(86),l=n(16),s=n(17),u=n(8),d=n(9),f=n(1),b=n(1003),p=n(924),h=n(927),m=n(1177),v=n(1777),g=n(916),O=n(12),j=n.n(O),y=n(62),w=n.n(y),C=n(3),k=n.n(C),x=n(0),S=n.n(x),A=n(20),T=n(48),R=n(58),E=n(19),I=n(38),N=n(23),B=n(51),z=n(35),P=n(175),_=n(91),L=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}];function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var D=function(e){Object(l.a)(n,e);var t=M(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,a=e.className;return Object(f.b)("div",{className:j()("RadioButtons",a),children:t.map((function(e,t){var a=e.value,o=e.text,i=e.placeholder;return Object(f.c)("label",{className:"RadioButtons-item",children:[Object(f.b)("span",{className:"RadioButtons-text",children:o}),Object(f.b)("input",{type:"radio",className:"RadioButtons-input",value:a,checked:n===a,onChange:function(){return r(a,i)}})]},t)}))})}}]),n}(x.PureComponent);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}D.propTypes={options:k.a.arrayOf(k.a.shape({value:k.a.string,text:k.a.string,placeholder:k.a.string})).isRequired,value:k.a.string,onChange:k.a.func,className:k.a.string};var F=function(){return Promise.all([n.e(119),n.e(121),n.e(17),n.e(20),n.e(139)]).then(n.bind(null,3005))},V=L.map((function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}})),q=function(e){Object(l.a)(n,e);var t=U(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},e.handleReasonCodeChange=function(t,n){e.setState({selectedReasonCode:Number(t),selectedReasonPlaceholder:n||""}),e.input&&e.input.resetWithValue(n||"")},e.handleAddAnnotation=function(){var t=e.props,n=t.addAnnotation,r=t.type,a=t.urlToken,o=t.showNotification,i=t.onClose;n(r,a,e.state.selectedReasonCode,e.input.toHTML()).then((function(){i(),o&&o("标记内容成功")}))},e.handleReasonDescriptionChange=function(t){e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state,i=o.selectedReasonCode,c=o.isReasonDescriptionEmpty,l=o.selectedReasonPlaceholder,s=function(e){var t=L.find((function(t){return t.code===e}));return t&&t.description}(i),u=32300===i;return Object(f.b)(_.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:a,children:r&&Object(f.c)("div",{children:[Object(f.c)("div",{className:"AddAnnotationModal-body",children:[Object(f.b)(D,{options:V,onChange:this.handleReasonCodeChange,value:String(i)}),i&&Object(f.c)("div",{children:[Object(f.c)("div",{className:"AddAnnotationModal-description",children:[s,"（",u?"必填":"选填","）"]}),Object(f.b)(P.a,{getComponent:F,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:l,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange})]})]}),Object(f.b)(_.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup",children:Object(f.b)(z.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&c,children:"标记"})})]})})}}]),n}(x.PureComponent);q.propTypes={addAnnotation:k.a.func.isRequired,onClose:k.a.func.isRequired,shown:k.a.bool.isRequired,type:k.a.oneOf([0,1,2]).isRequired,urlToken:k.a.oneOfType([k.a.number,k.a.string]),showNotification:k.a.func,className:k.a.string};var G=n(57),H=n(94),W=n.n(H),K=n(144);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Q=function(e){Object(l.a)(n,e);var t=Z(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isReasonDescriptionEmpty:!0},e.handleCancelAnnotation=function(){var t=e.props,n=t.cancelAnnotation,r=t.type,a=t.urlToken,o=t.showNotification,i=t.onClose;n(r,a,32305,e.input.value).then((function(){i(),o&&o("撤销标记成功")}))},e.handleReasonDescriptionChange=function(t){return e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state.isReasonDescriptionEmpty;return Object(f.b)(_.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:a,children:r&&Object(f.c)("div",{className:"CancelAnnotationModal",children:[Object(f.b)(K.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),Object(f.c)(_.a,{direction:"horizontal",children:[Object(G.isBrowser)()&&!W()(window.navigator.userAgent).Mobile&&Object(f.b)(z.c,{onClick:n,size:"spread",children:"取消"}),Object(f.b)(z.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:o,children:"撤销标记"})]})]})})}}]),n}(x.PureComponent);Q.propTypes={cancelAnnotation:k.a.func.isRequired,onClose:k.a.func.isRequired,shown:k.a.bool.isRequired,type:k.a.oneOf([0,1,2]).isRequired,urlToken:k.a.oneOfType([k.a.number.isRequired,k.a.string.isRequired]),showNotification:k.a.func,className:k.a.string};var Y=n(499),J=n(437),X=n(218),$=n(939),ee=n(136),te=n(41),ne=n.n(te),re=n(1802),ae=n(1276),oe=n(1803),ie=n(1421),ce=n(1065),le=n(1200),se=n(99),ue=n(287),de=n(1600),fe=n(65),be=n(32),pe=n(378),he=n(1277),me=Object(T.withRouter)((function(e){var t=e.parent,n=t.type,r=t.id,a=t.question,o=e.location.pathname,i=Object(fe.p)(),c=Object(A.useSelector)((function(e){var t=null==o?void 0:o.includes("/answer/"),n=!t&&(null==o?void 0:o.includes("/question/"));return Object(fe.k)(e,{type:t?"answer":n?"question":"",id:r||(null==a?void 0:a.id)})})),l=Object(se.a)((function(e,t){e&&e.stopPropagation(),be.E&&i||("zvideo"!==n?c?location.href="zhihu://".concat(n,"/").concat(r,"?utm_app_name=zhihu_check"):(Object(ue.e)(Object(pe.a)({type:n,id:r},{launch_button:t})),e.preventDefault()):Object(ue.e)(Object(pe.a)({type:n,id:r},{launch_button:t})))}));return Object(f.b)("div",{className:"CommentsForOia",children:Object(f.b)(de.b,{css:{margin:0},showInteractions:!1,resourceType:n,resourceId:String(r),showCommentInput:!1,openInApp:function(e){return l(e,he.b.comment_list)},customHeader:function(){return null},customFooter:function(e){return e<=2||be.E?null:Object(f.b)(z.c,{color:"blue",preset:"primary",onClick:function(e){return l(e,he.b.comment_more)},children:"打开 App 查看更多评论"})}})})})),ve=n(161),ge=n(468),Oe=n(1021),je=n(1485),ye=n(1899),we=n(1129),Ce=n(1348),ke=n(1426),xe=n(216),Se=n(1601),Ae=n(92),Te=n(2),Re=n(5),Ee=n(46),Ie=n(6),Ne=Object.assign({},Object(Ie.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),Be=function(e){return e===be.e?"answers":e===be.g?"pins":e===be.f?"articles":null},ze=n(173),Pe=n(43),_e=n(31),Le=n(134),Me=n(455),De=n(266),Ue=n(1272),Fe=n(1027),Ve=n(1639),qe=n(1423),Ge=n(1373),He=n(1628),We=n(1806),Ke=n(961),Ze=n(1900),Qe=n(1449),Ye=n(1004),Je=n(963),Xe=n(27),$e=Object.assign;function et(e){return S.a.createElement(Xe.a,$e($e({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ArrowTurnRight24"+(t?" "+t:""))}),S.a.createElement("path",{d:"M14.528 4.47a.75.75 0 10-1.06 1.06l4.723 4.72H10c-2.125 0-3.699.54-4.643 2.114-.87 1.45-1.107 3.651-1.107 6.636a.75.75 0 001.5 0c0-3.015.263-4.814.893-5.864C7.2 12.21 8.125 11.75 10 11.75h8.187l-4.717 4.718a.75.75 0 101.06 1.06l6-6a.75.75 0 00-.008-1.068l-5.994-5.99z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function tt(e){return S.a.createElement(et,$e($e({},e),{className:function(){return"Zi Zi--Jump"+(e.className?" "+e.className:"")}}))}var nt=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,a=r.url,o=r.message;return Object(f.c)("a",{className:j()("CommercialQuestionTail",t),href:a,children:[o,Object(f.b)(tt,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})},rt=n(1026),at=n(950),ot=n(95),it=n(157),ct=n(1773),lt=n.n(ct),st=n(2450),ut=n.n(st),dt=n(1774),ft=n.n(dt),bt=n(2451),pt=n.n(bt),ht={answerAdmireCouldOpen:{image:ut.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:ut.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:pt.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:pt.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:ft.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:ft.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}};var mt=function(e){var t=e.notification,n=void 0===t?{}:t,r=e.className,a=e.onRead,o=e.onUseAdmire,i=e.onUseRecommend,c=Object.keys(n).find((function(e){return n[e]})),l=ht[c]||{},s=l.title,u=l.image,d=l.content,b=l.buttonText,p=l.buttonLink,h=l.detailViewName,m=l.cardShowId,v=l.buttonClickId,g=l.readAlwaysId,O=l.readNextId;return Object(x.useEffect)((function(){c&&N.a.trackCardShow(null,{id:m,name:h})}),[c,m,h]),Object(f.b)(ot.b,{className:j()("CreatorRightsNotification",r),onClose:function(){a("next"),N.a.trackEvent(null,{id:O,name:h})},children:c&&Object(f.c)(x.Fragment,{children:[Object(f.b)("img",{className:"CreatorRightsNotification-background",src:lt.a,alt:"blue background"}),Object(f.b)("img",{className:"CreatorRightsNotification-liukanshan",src:u,alt:"liukanshan image"}),Object(f.b)("div",{className:"CreatorRightsNotification-title",children:s}),Object(f.b)("div",{className:"CreatorRightsNotification-content",children:d}),Object(f.c)(ot.a,{className:"CreatorRightsNotification-buttonGroup",children:[p?Object(f.b)(it.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:p,target:"_blank",onClick:function(){a("current"),N.a.trackEvent(null,{id:v,name:h})},children:b}):Object(f.b)(z.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){a("current"),N.a.trackEvent(null,{id:v,name:h}),"answerAdmireCouldUse"===c&&o(),"recommendationCouldUse"===c&&i()},children:b}),Object(f.b)(z.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){a("always"),N.a.trackEvent(null,{id:g,name:h})},children:"不再提醒"})]})]})})},vt=n(1165),gt=n(1075),Ot=n(1366),jt=n(1374),yt=n(1644),wt=function(e){var t=e.show,n=e.onCancel,r=e.onSubmit,a=Object(B.l)().trackEvent;return Object(f.b)(yt.a,{className:"SkipModal",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:t&&Object(f.c)(B.f,{zaType:"Block",zaBlock:"expandBlockModal",zaText:"展开阅读全文弹窗",children:[Object(f.b)("div",{className:"title",children:"即将打开“知乎App”继续阅读"}),Object(f.c)("div",{className:"button_container",children:[Object(f.b)(z.c,{preset:"plain",onClick:function(){a({eventType:"Click",block:"expandModal_cancel",elementLocation:{type:"Button"}}),n()},children:"取消"}),Object(f.b)(z.c,{preset:"primary",onClick:function(){a({eventType:"Click",action:"OpenUrl",block:"expandModal_open",elementLocation:{type:"Button"}}),r()},children:"打开App"})]})]})})},Ct=n(1264),kt=n(513),xt=function(e){var t=e.show,n=e.children,r=e.className,a=Object(x.useRef)();return Object(x.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(kt.a)(a.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),Object(f.b)("div",{className:r,children:Object(f.c)("div",{ref:a,children:[Object(f.b)("div",{className:j()({"ModalLoading-background":t})}),Object(f.c)("div",{className:j()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,Object(f.b)(Ct.a,{})]})]})})},St=n(155),At=n(1450),Tt=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"有问题，就会有回答",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],Rt={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},Et=function(e){var t=e.show,n=e.onCancel,r=e.onSubmit,a=e.id,o=e.type,i=Object(St.b)(),c=i.origin.toLowerCase(),l=i.Android?Rt.chrome.imageSrc:Rt.safari.imageSrc,s=ne.a.get("question:firstCheckedTrue");Object(x.useEffect)((function(){s&&t&&!i.Wechat&&(location.href="zhihu://".concat(o,"/").concat(a))}),[s,t,o,a,i.Wechat]);var u="";return u=i.UC?"uc":i.Wechat?"wx":i.MQQBrowser?"qq":/huawei|honor/g.test(c)?"huawei":/chrome/g.test(c)||/crios/g.test(c)?"chrome":i.Safari?"safari":"default",Tt[1].title=Rt[u].title,Tt[1].imageSrc="default"===u?l:Rt[u].imageSrc,Object(f.c)(yt.a,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&Object(f.b)(At.a,{className:"ModalWrap-body"}),Object(f.c)("div",{className:"ModalWrap-content",children:[Object(f.b)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),Tt.map((function(e,t){return Object(f.c)("div",{className:"ModalWrap-item",children:[e.imageSrc&&Object(f.b)("div",{className:"ModalWrap-itemImg",children:Object(f.b)("img",{src:e.imageSrc,alt:""})}),Object(f.c)("div",{className:"ModalWrap-itemContent",children:[Object(f.b)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&Object(f.b)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),Object(f.b)("div",{className:"ModalWrap-itemBtn",role:"button",tabIndex:0,onClick:function(){return function(e){0===e?(ne.a.set("question:firstCheckedTrue","true"),r()):n()}(t)},children:e.button})]},t)}))]})]})},It=n(49),Nt=n.n(It),Bt=n(78),zt=n.n(Bt),Pt=n(22),_t=n.n(Pt),Lt=n(28),Mt=n.n(Lt),Dt=n(29),Ut=n.n(Dt),Ft=n(18),Vt=n.n(Ft),qt=n(25),Gt=n.n(qt),Ht=n(196),Wt=n.n(Ht),Kt=n(47),Zt=n(460),Qt=n(994),Yt=n(89),Jt=n(45),Xt=n(1012);function $t(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}function en(e){var t=e.logoUrl,n=e.productName,r=e.productDesc,a=e.link,o=void 0===a?"":a,i=e.btnText,c=void 0===i?"":i,l=e.className,s=void 0===l?"":l,u=e.productNameMaxLength,d=void 0===u?6:u,f=e.productDescMaxLength,b=void 0===f?15:f,p=e.btnTextMaxLength,h=void 0===p?4:p,m=e.type,v="".concat("pc"===m?"pc":"app","_EAnswerCard");return S.a.createElement("a",{ref:e.cardRef,onClick:e.onClick,href:o,target:"_blank",className:j()("".concat(v),s)},S.a.createElement(B.f,{zaType:"Card",zaBlock:"advertPluginCard"}),S.a.createElement(Xt.a,{src:t,className:"".concat(v,"-image"),alt:"logo"}),S.a.createElement("div",{className:"".concat(v,"-content")},S.a.createElement("div",{className:j()("".concat(v,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(d+1,"em")}},$t(n,d)),r&&S.a.createElement("div",{className:"".concat(v,"-content-desc"),style:{maxWidth:"".concat(b+1,"em")}},$t(r,b))),S.a.createElement("div",{className:"".concat(v,"-button"),style:{maxWidth:"".concat(h+1,"em")},onClick:e.onBtnClick},$t(c,h)),"app"===m&&S.a.createElement("div",{className:"app_EAnswerCard-bottom-close",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),t.onClose()}(t,e)}},"×"))}var tn=n(515),nn=function(e){function t(e){var n;return _t()(this,t),(n=Ut()(this,Vt()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,N.a.trackCardShow(e,{id:5642}),Object(Zt.h)(e,{trackMethod:Zt.i,tracks:t}))},n.addDSCListener=function(){try{var e=n.props.data.pluginType;if(/^android/i.test(e)){n.appPromotionUrl=null,n.downloadInfo=null,n.landingUrl=Object(Jt.f)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".landingUrl"),"");var t=Object(Jt.f)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".downloadInfo"),"{}"),r=Object(Jt.f)(JSON.parse(t.adjson||"{}"),"ads[0].creatives[0].asset.app_promotion_url","");r&&(tn.a({app_promotion_url:n.appPromotionUrl},"ad/getDownloadStatus").then((function(e){var t=e.status,r=e.data;t||console.log("下载插件 ad/getDownloadStatus 调用失败！"),n.setState({status:r.status})})).catch(console.log),n.appPromotionUrl||Kt.a.listen("ad/downloadStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=void 0===t?"error":t;n.setState({status:r})}))),n.appPromotionUrl=r,n.downloadInfo=t}}catch(e){console.log(e)}},n.onBtnClick=function(e){"pc"!==Object(Jt.i)().os&&n.appPromotionUrl&&n.downloadInfo&&(e.stopPropagation(),e.preventDefault(),n.sendClickTrack(),tn.a(n.downloadInfo,"ad/downloadApk"))},n.sendClickTrack=function(){N.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(Zt.a)({trackMethod:Zt.i,tracks:n.track.click})},n.handleClick=function(e){e.stopPropagation(),n.sendClickTrack(),"pc"!==Object(Jt.i)().os&&n.landingUrl&&n.downloadInfo&&(e.preventDefault(),tn.a(n.downloadInfo,"ad/open"))},n.sessionId=Wt()(),n.init(e),n.viewShow=!1,n.state={status:"ready"},n}return Gt()(t,e),Mt()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=(n[t.pluginType]||{}).trackUrl,i=void 0===o?{}:o,c=Object(Jt.i)(),l={xSuger:a,sessionId:this.sessionId,os:c.os,cardType:"".concat(c.os,"_download")};this.track=Object(Jt.w)(i,l)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Jt.i)();N.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.track.view),this.addDSCListener()}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,a=t.plugin,o=t.className,i=void 0===o?"":o,c=t.pluginType,l=(a[c]||{}).plugin,s=(void 0===l?{}:l)[c],u=Object(Jt.i)(),d=this.state.status,f=void 0===d?"ready":d,b={className:i,type:"pc"===u.os?"pc":"app",btnText:s.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4,onClose:this.props.onClose};return/^ios/i.test(c)?(b.logoUrl=s.icon,b.productName=s.name,s.score>0&&(b.productDesc="Appstore 评分：".concat(s.score)),b.link=s.landingUrl):/^android/i.test(c)&&(b.logoUrl=s.icon||r.avatarUrl||"",b.productName=s.name,b.link=s.landingUrl,b.onBtnClick=this.onBtnClick,Yt.d[f]&&(b.btnText=Yt.d[f])),b.link?S.a.createElement(B.c,Nt()({as:en,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},b)):null}}]),t}(S.a.Component);nn.propTypes={data:k.a.object.isRequired};var rn=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?S.a.createElement(Qt.a,null,S.a.createElement(nn,e)):null},an=function(e){function t(e){var n;return _t()(this,t),(n=Ut()(this,Vt()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,N.a.trackCardShow(n.card,{id:5642}),Object(Zt.h)(e,{trackMethod:Zt.i,tracks:t}))},n.handleClick=function(e){e.stopPropagation(),N.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(Zt.a)({trackMethod:Zt.i,tracks:n.track.click});var t=Object(Jt.f)(n.props.data,"plugin.leads.plugin.leads",{}),r=n.props.data,a=r.contentType,o=r.contentToken;t.isCanvas&&(e.preventDefault(),t.creativeId=Object(Jt.h)(),tn.a(t,"ad/openForm"));var i=t.cardType,c=t.hashId;if("message"===i){e.preventDefault();var l={inbox_id:c,initial_message:"",auto_focus:!0,title:"",source_type:a,source_id:o};tn.a(l,"base/openInbox")}},n.isHiddenEcommerceAd=function(e){return!(!e.isCanvas||e.adjson)||!(e.isCanvas||e.token||e.landingUrl)},n.sessionId=Wt()(),n.init(e),n.viewShow=!1,n}return Gt()(t,e),Mt()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=t.pluginType,i=Object(Jt.f)(e.data,"plugin.leads.plugin.leads",{}).cardType,c=(n[o]||{}).trackUrl,l=void 0===c?{}:c,s=Object(Jt.i)().os,u={xSuger:a,sessionId:this.sessionId,os:s,cardType:i};this.track=Object(Jt.w)(l,u)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Jt.i)();N.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.track.view);var n=Object(Jt.f)(this.props.data,"plugin.leads.plugin.leads",{}),r=n.isCanvas,a=n.adjson;r&&tn.a({adjson:a},"ad/preload")}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,a=t.plugin,o=void 0===a?{}:a,i=t.className,c=void 0===i?"":i,l=t.pluginType,s=Object(Jt.f)(o,"".concat(l,".plugin.").concat(l),{});return this.isHiddenEcommerceAd(s)?null:S.a.createElement(B.c,Nt()({as:en,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},{className:c,type:"app",logoUrl:r.avatarUrl,productName:r.name,productNameMaxLength:13,productDesc:s.desc,productDescMaxLength:15,link:s.landingUrl||"javascript:",btnText:s.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick,onClose:this.props.onClose}))}}]),t}(S.a.Component);an.propTypes={data:k.a.object.isRequired};var on=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?S.a.createElement(Qt.a,null,S.a.createElement(an,e)):null},cn=function(e){function t(){var e,n;_t()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Ut()(this,(e=Vt()(t)).call.apply(e,[this].concat(a)))).state={display:!1},n.onClose=function(){n.setState({display:!0})},n.getContent=function(e){var t=e.data;if(!t||!t.plugin)return null;var r=(t=Object(Jt.c)(Object(Re.camelizeKeys)(t))).plugin,a=Object(Jt.i)();if(r.androidDownload||r.iosDownload){var o="".concat(a.os,"Download");if("pc"===a.os)o=("mac"===a.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"]).find((function(e){return r[e]}))||"";return S.a.createElement(rn,Nt()({},e,{data:zt()({},t,{pluginType:o}),onClose:n.onClose}))}return r.leads&&"pc"!==a.os?S.a.createElement(on,Nt()({},e,{data:zt()({},t,{pluginType:"leads"}),onClose:n.onClose})):null},n}return Gt()(t,e),Mt()(t,[{key:"render",value:function(){var e=this.props.data,t=this.state.display;return e&&e.plugin&&!t?S.a.createElement(S.a.Fragment,null,this.getContent({data:e})):null}}]),t}(S.a.Component),ln=n(221),sn=n(597);function un(e){var t=e.loadBrandContentPlugin,n=e.contentType,r=e.contentToken,a=e.author,o=e.plugin,i=Object(x.useCallback)((function(){t(n,r)}),[n,r,t]),c="organization"===a.userType&&!o;if(Object(x.useEffect)((function(){c&&i()}),[c,i]),!o)return null;var l={contentType:n,contentToken:r,suger:{},author:a,plugin:o,visible:!0};return Object(f.b)("div",{className:"OrgEquityPlugin",children:Object(f.b)(cn,{data:l})})}un.propTypes={contentType:k.a.oneOf(["answer","article"]).isRequired,contentToken:k.a.oneOfType([k.a.number,k.a.string]).isRequired,author:k.a.object.isRequired};var dn=Object(E.compose)(Object(ln.a)(null),Object(A.connect)((function(e,t){var n=t.contentType,r=t.contentToken;return{plugin:Object(sn.c)(e,{contentType:n,contentToken:r})}}),{loadBrandContentPlugin:sn.b}))(un),fn=n(293);function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var pn=function(e){Object(l.a)(n,e);var t=bn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.activateReward;return Object(f.c)("div",{className:"Reward",children:[Object(f.b)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),Object(f.b)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})}}]),n}(x.Component);function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}pn.propTypes={activateReward:k.a.func};var mn=function(e){Object(l.a)(n,e);var t=hn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.totalMoney,n=e.showRewarders;return Object(f.b)("div",{children:Boolean(t)&&Object(f.b)("div",{className:"Reward-money",children:Object(f.c)("span",{onClick:n,role:"button",tabIndex:0,children:["¥ ",t.toFixed(2)]})})})}}]),n}(x.Component);mn.propTypes={totalMoney:k.a.number,showRewarders:k.a.func};var vn=n(1487);function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var On=function(e){Object(l.a)(n,e);var t=gn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,a=e.voteupCount,o=e.isRewardList,i=e.onClose,c=e.notice;return Object(f.b)(_.b,{size:"fullPage",onClose:i,children:t&&Object(f.b)(vn.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:a,onLoad:n,isRewardList:o,notice:c,type:"rewardPeople"})})}}]),n}(x.Component);On.propTypes={onLoad:k.a.func,modalShown:k.a.bool};var jn=n(154),yn=n(40);function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Cn=function(e){Object(l.a)(n,e);var t=wn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hoverName:""},e.hoverUser=function(t){e.setState({hoverName:t.target.dataset.name})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,a=t.rewardMemberCount,o=t.onUserClick,i=this.state.hoverName,c=n.slice(0,5);return Object(f.c)("div",{className:"Reward-count",children:[Object(f.b)("p",{className:"Reward-User-text",onClick:r,children:"".concat(Object(jn.formatNumber)(a)," 人已赞赏")}),Object(f.c)("div",{children:[c.map((function(t,n){return Object(f.b)(T.Link,{to:"//".concat(yn.a.wwwHost,"/").concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:o,children:Object(f.b)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)})),a>6&&Object(f.c)("span",{className:"Reward-MoreUser",onClick:r,children:[Object(f.b)("i",{}),Object(f.b)("i",{}),Object(f.b)("i",{})]})]})]})}}]),n}(x.Component);Cn.propTypes={users:k.a.array,handleListShown:k.a.func,rewardMemberCount:k.a.number,onUserClick:k.a.func},Cn.defaultProps={users:[]};var kn=Object(J.b)({module:"UserList",moduleName:"*** 人已赞赏"})(Cn);function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Sn=function(e){Object(l.a)(n,e);var t=xn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,a=e.users,o=e.onUserClick;return t?Object(f.b)(kn,{users:a,onUserClick:o,handleListShown:n,rewardMemberCount:t}):Object(f.b)("div",{className:"Reward-countZero",children:r?null:"还没有人赞赏，快来当第一个赞赏的人吧！"})}}]),n}(x.Component);function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}Sn.propTypes={rewardMemberCount:k.a.number,handleListShown:k.a.func,isAuthor:k.a.bool,users:k.a.array,onUserClick:k.a.func};var Tn=function(e){Object(l.a)(n,e);var t=An(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Object(f.c)("div",{children:[Object(f.b)("div",{className:"Reward-tagline",children:t||be.p}),Object(f.b)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})}}]),n}(x.Component);function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}Tn.propTypes={onClick:k.a.func,tagline:k.a.string};var En=function(){return n.e(129).then(n.bind(null,3037)).then((function(e){return e.TipjarDialog}))},In=function(e){Object(l.a)(n,e);var t=Rn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={TipjarRender:!1,modalShown:!1},e.onSubmitReward=function(t){ne.a.set("isRewardable",!0),e.updateReward(t)},e.onPaySuccess=function(){var t=e.props,n=t.reward,r=t.currentUser,a=t.id,o=t.type,i=n[o][a].users,c=[r];Array.isArray(i)&&(i.push(r),c=i),e.props.onRewardSuccess(c,a,o),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")},e.onLoad=function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()},e.onLoadArticleRewardUser=function(){var t=e.props.id;e.props.getArticleRewardUser(t)},e.onLoadArticleRewardUserDetails=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)},e.onLoadRewardUser=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then((function(t){var n=t.payload.data;if(n.length>0){var r={};n.forEach((function(e){r[e.urlToken]=e})),e.props.updateEntitiesUsers(r)}}))},e.handleListShown=function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})},e.handleListHide=function(){e.setState({modalShown:!1})},e.updateReward=function(t){var n=e.props,r=n.type,a=n.id,o=n.rewardInfo.canOpenReward;if("article"===r){var i=!!o||void 0;e.props.updateArticleReward(a,t,i)}else e.props.updateAnswerReward(a,t)},e.activateReward=function(){e.onSubmitReward(be.p)},e.showRewarders=function(){e.setState({modalShown:!0})},e.addReward=e.props.authRequired((function(t,n){var r=e.props,a=r.id;"article"===r.type?e.props.createArticleTipjar(a,t):e.props.createTipjar(a,t,n)}),void 0,_e.b),e.handleRewardButtonClick=function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})},e.colseTijarDialog=function(){e.setState({TipjarRender:!1})},e.removeTradeNumber=function(){var t=e.props,n=t.id,r=t.type;e.props.removeTradeNumber(n,r)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isAuthor,r=e.isMobile,a=e.id,o=e.reward,i=e.author,c=e.type,l=e.ua,s=e.rewardInfo,u=s.canOpenReward,d=s.isRewardable,b=s.tagline,p=s.rewardTotalMoney,h=s.rewardMemberCount,m=e.onRewardUserClick,v=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var g=this.state,O=g.TipjarRender,j=g.modalShown;if(n&&u)return Object(f.b)("div",{children:Object(f.b)(pn,{activateReward:this.activateReward})});if(d){var y=o&&o[c][a]||{},w=y.tradeNumber,C=y.users,k=y.notice,x=Object(f.b)(On,{modalShown:j,items:C,voteupCount:h,onLoad:this.onLoad,isRewardList:n,notice:k,onClose:this.handleListHide}),S=Object(f.b)(Sn,{rewardMemberCount:h,handleListShown:this.handleListShown,onUserClick:m,users:C,isAuthor:n});if(!n)return Object(f.c)("div",{className:"Reward",children:[Object(f.b)(Tn,{tagline:b,onClick:this.handleRewardButtonClick}),S,x,Object(f.b)(P.a,{getComponent:En,author:i,tagline:b,isMobile:r,ua:l,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:w,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:O,type:c,balanceEnable:v})]});var A=(Number(p)||0)/100;return Object(f.c)("div",{className:"Reward",children:[Object(f.b)(mn,{tagline:b,totalMoney:A,showRewarders:this.showRewarders}),x,S]})}return null}}]),n}(x.Component);In.propTypes={reward:k.a.object,isAuthor:k.a.bool,author:k.a.object,id:k.a.number,rewardInfo:k.a.object,currentUser:k.a.object,ua:k.a.object,type:k.a.string,isMobile:k.a.bool,balanceEnable:k.a.bool,onRewardButtonClick:k.a.func,onRewardUserClick:k.a.func,onRewardUserMoreClick:k.a.func},In.defaultProps={rewardInfo:{},type:"answer",balanceEnable:!0};var Nn=Object(E.compose)(xe.a,Object(A.connect)(null,{updateAnswerReward:Ae.E,updateArticleReward:Me.l,createArticleTipjar:Me.b,getRewardUserDetails:Me.i,getPagingArticleRewardUser:Me.f,getPagingArticleRewardUserDetails:Me.g,getArticleRewardUser:Me.e,updateEntitiesUsers:Me.m,getRewardUser:Me.h,createTipjar:Me.c,removeTradeNumber:Me.k,onRewardSuccess:Me.j,showNotification:_e.h}))(In),Bn=n(1e3),zn=n(993),Pn=(n(1807),n(36)),_n=n(1081);function Ln(e){var t=e.markInfo,n=be.J[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return r?Object(f.b)("a",{href:r,children:n}):Object(f.b)("span",{children:n})}var Mn=n(1886),Dn=["id","voteupCount","markInfos","actorToken","action","concernedUpvoters"];function Un(e){var t=e.markInfos,n=Object(x.useMemo)((function(){return t.filter((function(e){return be.J[e.markType]})).map((function(e,t){return Object(f.c)(x.Fragment,{children:[0!==t&&"、",Object(f.b)(Ln,{markInfo:e})]},t)}))}),[t]);return n.length?Object(f.c)(_n.CJKSpace,{children:["收录于",n]}):null}function Fn(e){var t=e.id,n=e.voteupCount,r=e.markInfos,a=e.actorToken,o=e.action,i=e.concernedUpvoters,c=Object(Pn.default)(e,Dn),l=Object(x.useMemo)((function(){var e;return null!==(e=null==i?void 0:i.filter((function(e){return a!==e.urlToken})))&&void 0!==e?e:[]}),[i,a]);return Object(b.b)().blockStrategies.isBlockingVote?null:Object(f.b)(J.a,{trackCardShow:!0,view:{id:8257},children:Object(f.c)(R.Text,Object.assign(Object.assign({color:"GBL05A",fontSize:14,mt:"16px"},c),{},{children:[r&&Object(f.c)(f.a,{children:[Object(f.b)(Un,{markInfos:r}),Boolean(n)&&" · "]}),Object(f.b)("span",{onClick:function(){return N.a.trackEvent(null,{id:8258,action:"Click"})},children:Object(f.b)(Mn.a,{id:t,type:"answer",voteupCount:n,upvotedFollowees:l,too:"voted"===o})})]}))})}var Vn=n(1869),qn=n(1808),Gn=n(1561),Hn=function(){return Object(f.c)("div",{className:"SelfVisibleLable-wrap",children:[Object(f.b)(Gn.a,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})},Wn=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,a=t.relationship,o=(a=void 0===a?{}:a).isAuthor,i=t.visibleOnlyToAuthor;return o&&i?Object(f.b)(Hn,{}):"org"!==r||n?null:Object(f.c)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",Object(f.b)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},Kn=function(e){var t=e.isNormal,n=void 0===t||t,r=e.collapsedBy,a=e.suggestEdit,o=e.collapseReason,i=e.isCollapsed,c=e.question,l=(c=void 0===c?{}:c).brand,s=(l=void 0===l?{}:l).isPuQuestion;return!n&&null!=a&&a.unnormalDetails?{abnormalDetailProps:{abnormalDetail:a.unnormalDetails}}:("community"===r||s)&&i?{collapseReasonProps:{collapseReason:o}}:null},Zn=function(e){var t=e.answer,n=e.canCollapse,r=e.hideCommercialInviteLabel,a=t.collapsedBy,o=t.relevantInfo,i=(o=void 0===o?{}:o).relevantType,c=o.brandSpecialExtra,l=void 0===c?{}:c;if(Object(Ae.k)(t)||Object(Ae.l)(t)||"org"===a&&!n){if("brand_special"===i&&!r)return{type:"answer",data:l};if("brand_best"===i)return{data:l}}return null},Qn=function(e){var t=e.annotationDetail,n=e.isNormal,r=void 0===n||n,a=e.collapsedBy;return r&&"community"!==a&&t?{annotationDetail:t}:null},Yn=n(1478);function Jn(e){var t=e.questionId,n=e.title,r=e.href,a=e.zaTitleId,o=e.showStickyMark,i=e.showHeightLight,c=e.onClick;return Object(f.c)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(f.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),Object(f.b)("meta",{itemProp:"name",content:n}),o&&Object(f.b)(Yn.a,{}),Object(f.b)(T.Link,Object.assign(Object.assign({to:r,target:"_blank","data-za-detail-view-element_name":"Title"},a&&{"data-za-detail-view-id":a}),{},{onClick:c,children:i?Object(f.b)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n}))]})}Jn.propTypes={questionId:k.a.number.isRequired,title:k.a.string.isRequired,href:k.a.string.isRequired,zaTitleId:k.a.number,showStickyMark:k.a.bool,onClick:k.a.func};var Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,r=t.unescapable,a=e.labelInfo,o=e.hermesLabel;return Object(f.b)(x.Fragment,{children:!n&&!r&&Object(f.b)(Ot.a,{labelInfo:a||o})})},$n=n(1593),er=n(1809),tr=n(968),nr=n(1872),rr=n(1810),ar=(n(1811),function(e,t){return null!=e&&e.plainText?"".concat(e.plaintext," · "):Object(ce.isReferenceRelation)(t)?"引用创作 · ":null});function or(e){var t=e.videoId,n=e.zvideoId,r=e.title,a=e.playCount,o=void 0===a?0:a,i=e.voteupCount,c=void 0===i?0:i,l=e.isComplete,s=void 0!==l&&l,u=e.startTime,d=void 0===u?0:u,b=e.creationReferences,p=e.creationRelationship,h=e.shouldExpandState,m=e.itemId,v=e.itemType,g=Number(d/1e3),O=Object(x.useRef)({currentTime:0}),j=Object(x.useRef)(Object(tr.c)(t,"*",!0));Object(x.useEffect)((function(){var e=j.current.subscribeMessage((function(e,t){e===tr.b.DOM.TIMEUPDATE&&(O.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return Object(f.c)("div",{className:"VideoAnswerPlayer",children:[Object(f.b)("div",{className:"VideoAnswerPlayer-video",children:Object(f.b)(nr.a,{itemId:m,itemType:v,videoId:t,zaProps:{type:"Answer",token:m}})}),h&&Object(f.c)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){var e=(O.current.currentTime+g).toFixed(1);window.open("https://".concat(yn.a.wwwHost,"/zvideo/").concat(n,"?playTime=").concat(e))},children:[Object(f.c)("div",{className:"VideoAnswerPlayer-state",children:[Object(f.b)("div",{className:"VideoAnswerPlayer-state--title",children:r}),Object(f.c)("div",{className:"VideoAnswerPlayer-state--data",children:[ar(b,p),Object(jn.cnNiceNumber)(o),"播放",c>0?" · ".concat(Object(jn.cnNiceNumber)(c),"赞同"):null]})]}),!s&&Object(f.c)("div",{className:"VideoAnswerPlayer-action",children:[Object(f.b)(rr.a,{style:{marginRight:"6px"}}),"完整版"]})]})]})}var ir=function(e){var t=e.shouldExpand,n=e.showPlayer,r=e.campaign,a=e.answer,o=e.videoAnswerData,i=e.meta,c=e.videoRef,l=e.alwaysShowVolumeButton,s=e.hideCoCreationFeature,u=e.isRecommend,d=!s&&Object(ce.isCoCreateRelation)(null==o?void 0:o.creationRelationship);return Object(f.c)(f.a,{children:[n&&(u?Object(f.b)(or,Object.assign({itemId:a.id,itemType:a.type,videoRef:c,alwaysShowVolumeButton:l,shouldExpandState:t},o)):Object(f.b)(er.a,Object.assign({itemId:a.id,itemType:a.type,videoRef:c,alwaysShowVolumeButton:l,shouldExpandState:t},o))),i,t&&Object(f.c)(R.Flex,{mt:"14px",children:[d&&Object(f.b)(ce.CoCreationLabel,{mr:"12px"}),Object(f.b)($n.a,{my:"0px"})]}),t&&r&&Object(f.b)(jt.a,{item:Object.assign(Object.assign({},a),{},{campaign:r,collapseReason:null,type:"zvideo"})})]})},cr=n(299),lr=n(1164),sr={up:1,neutral:0,down:-1};function ur(e){var t=e.id,n=e.voteupCount,r=e.voting,a=e.isOwner,o=e.answer,i=e.currentUser,c=e.disabled,l=Object(A.useDispatch)();Object(x.useEffect)((function(){!c&&i&&l(Object(cr.b)(["opposeRight"]))}),[c,i,l]);var s=Object(x.useCallback)((function(e){l(Object(Ae.H)(o.id,sr[e],{zVideoId:t}))}),[t,l,o.id]);return Object(f.b)(lr.a,{type:"zvideo",count:n,voting:r,onVote:s,isOwner:a})}function dr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var br=function(e){return"plain"===e||"special-plain"===e},pr=br,hr=function(e){return"special-plain"===e},mr={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},vr=function(e){var t;if(e.videoAnswerData)return e;if(null!==(t=e.attachment)&&void 0!==t&&t.video){var n=e.attachment.video,r=n.title,a=n.subVideoId,o=n.parentVideoId,i=n.zvideoId,c={videoId:a,zvideoId:i,title:r,playCount:n.playCount,voteupCount:n.voteupCount,isComplete:!i||o===a,startTime:n.startTime,creationReferences:n.creationReferences};return Object.assign(Object.assign({},e),{},{videoAnswerData:c})}return e};function gr(e){var t=Object(Ce.a)(e);return t?e.videoAnswerData&&"object"==typeof e.videoAnswerData?Object.assign(Object.assign({},e),{},{creationRelationship:t,videoAnswerData:Object.assign(Object.assign({},e.videoAnswerData),{},{creationRelationship:t})}):Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var Or=["zhi-hu-ri-bao-51-41"],jr=Object(I.createSelector)((function(e,t){return Object.assign(Object.assign({},t.answerFromProps?t.answer:e.entities.answers[t.answer.id]||t.answer),{},{videoAnswerData:t.answer.videoAnswerData})}),(function(e,t){return e.entities.questions[t.answer.question.id]}),(function(e,t){return t?Object.assign(Object.assign({},e),{},{question:Object.assign(Object.assign({},e.question),t)}):e})),yr=function(e){Object(l.a)(n,e);var t=fr(n);function n(){var e,r,i,l,s,u,d,b;Object(o.a)(this,n);for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];return(e=t.call.apply(t,[this].concat(h))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:e.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1,skipModalShow:!1,autoExpand:!1,shownLoadingBar:!1,wxIsReady:!1},e.answerFormRef=Object(x.createRef)(),e.rewardContainerRef=Object(x.createRef)(),e.richContentRef=Object(x.createRef)(),e.zaRef=Object(x.createRef)(),e.loadEntityWords=w()((function(){var t=e.props,n=t.answer,r=(n=void 0===n?{}:n).id;(0,t.loadAnswerEntityWords)(r)})),e.handleLoadedNext=function(){e.setState({wxIsReady:!0}),e.state.shownLoadingBar&&e.createOpenInAppHandler(e.state.autoExpand?"expand_answer2":"expand_answer1")(),e.setState({shownLoadingBar:!1})},e.showOiaModal=function(){var t=e.props,n=t.blockReading,r=t.itemProp,a=t.isBaidu;("mainEntityOfPage"===r||"acceptedAnswer"===r)&&!a&&!document.referrer.includes("sm.cn")&&n&&e.setState({showWechatExpand:!0,autoExpand:!0})},e.onCloseReward=function(){var t=e.props.answer.id;ne.a.set("isRewardable",!1),e.props.updateAnswerReward(t,"")},e.openModal=function(t,n){e.setState(Object.assign({},n))},e.openDeleteModal=function(){setTimeout((function(){e.setState({deleteModalShown:!0})}))},e.closeModal=function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t()},e.closeDeleteModal=function(){e.setState({deleteModalShown:!1})},e.disableAuth=(r=e.props,i=r.router,l=(i=void 0===i?{}:i).location,s=(l=void 0===l?{}:l).pathname,u=r.isBaidu,d=r.isMobile,b=r.currentUser,d&&!b&&!u&&!s.startsWith("/topic")),e.loadAnswerConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,r=t.answer,a=t.loadAnswerConcernedVoters,o=t.currentUser;!n&&o&&a(r.id)},e.handleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.trackUserAction,a=void 0===r||r,o=e.props,i=o.onToggleExpand,c=o.trackPromotionClick;i&&i(t),t&&e.loadAnswerConcernedVoters(),a&&t&&c&&c(),e.setState({contentExpanded:t})},e.handleReshipmentSettings=function(t){var n=e.props,r=n.answer.id,a=n.updateAnswerReshipmentSettings,o=n.fillCurrentUserIfNeeded;"need_payment"===t?Promise.resolve(o(["caEnabled"])).then((function(){e.props.currentUser.caEnabled?a(r,t):window.open("/copyright/invite")})):a(r,t)},e.handleLoadAnswerForSettings=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerForSettings)(n)},e.handleDeleteAnswer=function(){var t=e.props,n=t.answer.id;(0,t.deleteAnswer)(n)},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleCollapseModalShow=function(){e.setState({collapseModalShown:!0})},e.handleCollapseModalHide=function(){e.setState({collapseModalShown:!1})},e.handleUpdateAnswerCollapsed=function(){var t=e.props,n=t.answer,r=n.id,a=n.collapsedBy,o=t.updateAnswerCollapsed,i=t.showNotification;return"community"===a?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):o(r)},e.handleUpdateAnswerStick=function(){var t=e.props,n=t.answer.id;return(0,t.updateAnswerStick)(n)},e.handleRestoreAnswer=function(){var t=e.props,n=t.answer,r=n.id,a=n.question;(0,t.restoreAnswer)(a.id,r)},e.handleClickCommentsPreview=function(t){var n=e.props,r=n.isMobile,a=n.relatedTo;r&&"answer"===a&&(t.stopPropagation(),e.setState({commentsShown:!0}))},e.openInApp=function(){Object(ge.a)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"评论弹层",noEnteringSignin:Boolean(e.props.currentUser)})},e.handleCommentModalMount=function(t){var n=function(t){t.stopPropagation(),e.openInApp()};return null==t||t.addEventListener("click",n),function(){return null==t?void 0:t.removeEventListener("click",n)}},e.setEditingState=function(t,n){"function"==typeof e.props.onEditingStateChange&&e.props.onEditingStateChange(t),e.setState({editing:t},n)},e.handleStartEditAnswer=function(){var t=e.props,n=t.draftStatus,r=t.hasPublishingDraft,a=t.isMobile,o=t.isAnswerPage,i=t.showNotification,c=t.answer,l=c.author,s=c.id,u=c.question.id,d=c.question,f=Object(oe.a)(d);Object(oe.b)(l)&&""!==f?i(f,"red"):n&&n.loading?X.a.alert("草稿正在加载中……"):r?X.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):a?e.context.startAddAnswer(e.props.answer.id):o?Object(ae.d)()?Object(ae.h)(u,s):e.setEditingState(!0,(function(){var t,n;null===(t=e.answerFormRef.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)})):Object(ae.h)(u,s)},e.handleCancelEditAnswer=function(){e.setEditingState(!1);var t=e.props,n=t.onCloseEditing,r=t.onCloseComment;"function"==typeof r&&r(),"function"==typeof n&&n()},e.handleSubmitAnswer=function(t){var n=e.props,r=n.answer.id,a=n.updateAnswer;return e.handleCancelEditAnswer(),a(r,t).then((function(t){return N.a.trackEvent(e.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),t}))},e.handleReportOpen=function(){var t=e.props.zaInfos.report;N.a.trackEvent(e.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},t&&{id:t})),e.props.authRequired((function(){return e.setState({reportModalShown:!0})}),be.bb.report)()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleFavlistsShown=function(t){var n=e.props,r=n.shouldOia,a=n.zaInfos.favlists;N.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},a&&{id:a})),r?e.createOpenInAppHandler("collect_answer")(t):e.disableAuth?e.handleToggleGuide():e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),be.bb.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;N.a.trackEvent(e.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.handleShowAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!0})},e.handleCloseAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!1})},e.handleShowCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!0})},e.handleCloseCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleClickVideoMoreButton=function(){e.setState({shouldShowVideoDetails:!1})},e.startEditing=function(){var t=e.props,n=t.isAuthor,r=t.editable;t.currentUser&&n&&r&&e.handleStartEditAnswer()},e.addRewardTagline=function(t){var n=e.props.answer.id;Object(Me.a)(t,n)},e.createOpenInAppHandler=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.props,a=r.answer,o=a.type,i=a.id,l=r.blockReading,s=r.isSpecialQuestionOrAnswer,u=r.currentUser,d=r.relatedTo;return function(r,a){if(r&&r.preventDefault(),"answer"===d)if(l&&N.a.trackEvent(Object(c.a)(e),{id:5550,action:"Click"},{button:{text:"openapp"}}),s)location.href="zhihu://".concat(o,"/").concat(i,"?utm_app_name=zhihu_check");else{var f=he.a[a]||he.a[t],b=Object.assign(Object.assign({},l&&{yyb_ckey:"CK1430255776739"}),{},{preventToOIA:n});he.b[f]&&(b.launch_button=he.b[f]);var p=be.P[a]||be.P[t];Object(ge.a)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:p,noEnteringSignin:Boolean(u)},b)}}},e.renderLabels=function(){var t=e.props.answer,n=t.isNormal;if((void 0===n||n)&&e.isPaidAnswer)return{labels:[],editingLabels:[]};var r=e.props,a=r.useNewLabels,o=r.canCollapse,i=r.relatedTo,c=r.showReviewingLabel,l=r.hideCommercialInviteLabel,s=e.state,u=s.contentExpanded,d=s.editing,b=Wn({answer:t,canCollapse:o,showReviewingLabel:c}),p=Kn(t),h=Zn({answer:t,canCollapse:o,hideCommercialInviteLabel:l}),m=Qn(t);if(!a){var v=Object(f.b)(jt.a,Object.assign(Object.assign({useOldLabels:!0,item:{isLabeled:!0}},p),{},{commercialProps:h,annotationProps:m,showLegacyPositiveLabel:Object(Ae.l)(t),editing:d}));return{labels:[b,v],editingLabels:[v]}}if(b||p)return{labels:[b,Object(f.b)(jt.a,Object.assign({item:{isLabeled:!0}},p),"labels")],editingLabels:[]};var g=[Object(f.b)(jt.a,{item:t,commercialProps:h,annotationProps:m,editing:d},"labels")];return{labels:u||i?g:[],editingLabels:g}},e.renderPrefix=function(){var t=e.props,n=t.answer,r=t.relatedTo,a={contentExpanded:e.state.contentExpanded,unescapable:Boolean(r)};return e.isVideoAnswer&&!e.contentDisplayed&&e.coCreate?Object(f.b)(ce.CoCreationLabel,{mb:"4px"}):Xn(n,a)},e.renderVoteButton=function(){var t=e.props,n=t.answer,r=t.shouldOia,a=t.zaInfos,o=a.voteUp,i=a.voteDown,c=t.isMuteSpecial,l=t.isMuteFreeze,s=t.isAuthor,u=t.currentUser,d=e.state.positionStatus,b=n.question,p=b.questionType,h=b.isMuted,m=n.relationship,v=(m=void 0===m?{}:m).isRecognized,g=m.voting,O=n.attachment,j=n.voteupCount,y="commercial"===p&&h||c||l;return e.isLegacyVideoAnswer?Object(f.b)(ur,{answer:n,id:O.attachmentId,voteupCount:j,voting:g,isOwner:s,disabled:y,currentUser:u}):Object(f.b)(qn.a,Object.assign(Object.assign({answer:n,disabled:y,isOwner:s},r&&{onClick:e.createOpenInAppHandler("vote_answer")}),{},{disableAuth:e.disableAuth,isRecognized:v,handleToggleGuide:e.handleToggleGuide,positionStatus:d,zaIds:{voteUp:o,voteDown:i}}),"vote")},e.renderAuthorInfo=function(){var t=e.props,n=t.preset,r=t.relatedTo,a=t.answer,o=a.id,i=a.author,c=a.creationRelationship;if(e.coCreate){var l=!hr(n);return Object(ce.renderDualAuthor)(n,i,c,l)}return!hr(n)&&Object(f.b)(Ke.a,{className:j()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":r}),preset:pr(n)?"plain":"default",author:i,relatedTo:r,id:o,userLinkV2:!0},"authorInfo")},e.renderMetaAndBeforeContent=function(){var t,n,r=e.props,o=r.preset,i=r.answer.creationRelationship,c=e.renderAuthorInfo(),l=e.renderAnswerExtraInfo(),s=e.renderLabels().labels,u=null==i||null===(t=i.coCreation)||void 0===t?void 0:t.refBy,d=null==i||null===(n=i.reference)||void 0===n?void 0:n.refBy,b=e.contentDisplayed&&(u||d)&&Object(f.b)(R.Box,{my:"16px",children:Object(f.b)(ce.CoCreationLinkCard,{type:"answer",coCreationRefBy:u,referenceRefBy:d})});return br(o)?[[c].concat(dr(a.a,s),[b]),l]:[[c].concat(dr(a.a,s),[b,l]),null]},e}return Object(i.a)(n,[{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}},{key:"isVideoAnswer",get:function(){var e=this.props.answer.attachment;return 2===(null==e?void 0:e.type)||"zvideo"===(null==e?void 0:e.type)||"video"===(null==e?void 0:e.type)}},{key:"isLegacyVideoAnswer",get:function(){var e=this.props.answer.attachment;return"zvideo"===(null==e?void 0:e.type)}},{key:"isAuthorInGeneral",get:function(){var e=this.props,t=e.isAuthor,n=e.isSubAuthor,r=e.hideCoCreationFeature;return t||n&&!r}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,a=t.editing,o=t.loadVideoDetails,i=t.isSearchSpecialSource,c=t.isMobile,l=t.isWechat,s=this.state.shareVideoQuery;if(s&&o(s).then((function(){e.setState({shouldShowVideoDetails:!0})})),n&&(this.loadAnswerConcernedVoters(),this.loadEntityWords()),r&&setTimeout((function(){return e.setState({commentsShown:Boolean(r)})})),a&&this.startEditing(),c&&!i&&this.showOiaModal(),c&&l)if(document.addEventListener("WeixinJSBridgeReady",(function(){e.handleLoadedNext()})),"complete"===document.readyState)this.handleLoadedNext();else{window.addEventListener("load",(function t(){window.removeEventListener("load",t),e.handleLoadedNext()}))}}},{key:"componentDidUpdate",value:function(e,t){!t.contentExpanded&&this.state.contentExpanded&&this.loadEntityWords(),!this.props.editing||e.editing||this.state.editing||this.startEditing()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,a=n.commentPermission,o=e.answer,i=o.reshipmentSettings,c=o.commentPermission;!r&&i&&!a&&c&&setTimeout((function(){return t.settingsTogglerEl.click()}))}},{key:"getShareVideoId",value:function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null}},{key:"renderReshipmentSettings",value:function(e){var t=this,n=this.props.currentUser;return Object.keys(mr).map((function(r){return"need_payment"===r&&null!=n&&n.isOrg?null:Object(f.b)(Ue.a,{onClick:function(){return t.handleReshipmentSettings(r)},checked:r===e,children:mr[r]},r)}))}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=e.actor,r=e.action,a=e.concernedUpvoters,o=e.isHuman,i=e.useNewLabels,c=e.isMobile,l=t.id,s=t.voteupCount,u=t.markInfos,d=t.isNormal;if(!((!o||!c)&&(void 0===d||d)))return null;var b=(null==u?void 0:u.length)>0&&!i;return b||s?Object(f.b)(Fn,{id:l,voteupCount:s,markInfos:b&&u,actorToken:null==n?void 0:n.urlToken,action:r,concernedUpvoters:a},"AnswerItemExtraInfo"):null}},{key:"renderSettings",value:function(){var e=this,t=this.props,n=t.answer,r=n.id,a=n.collapsedBy,o=n.reshipmentSettings,i=n.commentPermission,c=n.question.questionType,l=n.rewardInfo,s=(l=void 0===l?{}:l).isRewardable,u=void 0!==s&&s,d=n.relevantInfo,b=n.creationRelationship,h=t.answer,m=t.canCollapse,v=t.isMobile;if(!t.currentUser||!this.isAuthorInGeneral)return null;var g=Object(f.c)(f.a,{children:[this.renderReshipmentSettings(o),Object(f.b)(ee.a,{}),Object(f.b)(we.c,{className:"AnswerItem-selectMenuItem",target:h,onChange:this.props.updateAnswerCommentPermission,current:i}),Object(f.b)(ee.a,{}),u&&Object(f.b)(ee.b,{onClick:this.onCloseReward,children:"关闭赞赏"}),Object(f.b)(ee.b,{onClick:this.openDeleteModal,children:"删除"}),"commercial"===c&&m&&"nobody"===a&&(!d||"brand_special"!==d.relevantType)&&[Object(f.b)(ee.a,{},"MenuDivider"),Object(f.b)(ee.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"},"MenuItem")]]});if(o&&i){var O,j,y=null==b||null===(O=b.coCreation)||void 0===O||null===(j=O.bizInfo)||void 0===j?void 0:j.canCancelPermission;return Object(f.b)(ee.c,{arrowed:Boolean(y),toggler:Object(f.b)(z.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:p.a,label:!v&&"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:y?Object(f.b)(ee.b,{children:Object(f.b)(ce.CancelCoCreation,{contentType:"answer",contentId:r})}):g},"settings")}return Object(f.b)(z.c,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:p.a,label:!v&&"设置"},"settings")}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Object(f.b)(ee.b,{onClick:function(){N.a.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank",children:"申请授权"}):"disallowed"===t?Object(f.b)(ee.b,{tag:"a",target:"_blank",href:"/term/zhihu-terms#sec-licence-6",children:"禁止转载"}):null}},{key:"renderOptions",value:function(){var e=this;if(!this.props.currentUser||this.isAuthorInGeneral)return null;var t=this.props,n=t.answer,r=t.canCollapse,a=t.renderExtraOptions,o=t.permission.canBrandAdminEdit,i=t.isMobile,c=t.isAuthor,l=n.id,s=n.reshipmentSettings,u=n.collapsedBy,b=n.question,p=b.questionType,m=b.brand,v=(m=void 0===m?{}:m).isPuQuestion,g=n.annotationAction,O=void 0===g?[]:g,j=n.annotationDetail,y={toggler:Object(f.b)(z.c,{preset:"plain",className:"OptionsButton",icon:h.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},w="commercial"===p,C="nobody"!==u;return c?null:Object(d.e)(ee.c,Object.assign(Object.assign({},y),{},{key:"options"}),i&&Object(f.b)(Ve.a,{answer:n}),r&&!w&&Object(f.b)(ee.b,{onClick:C?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow,children:C?"取消隐藏":"隐藏"}),o&&w&&!C&&!v&&Object(f.b)(ee.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"}),O&&O.some((function(e){return be.d.add===e}))&&!j&&Object(f.b)(ee.b,{onClick:this.handleShowAddAnnotationModal,children:"标记内容"}),O&&O.some((function(e){return be.d.cancel===e}))&&j&&Object(f.b)(ee.b,{onClick:this.handleShowCancelAnnotationModal,children:"撤销标记"}),Object(f.b)(B.a,{zaAction:"Report",zaType:"Button",zaModuleId:"click_report",as:ee.b,onClick:this.handleReportOpen,children:"举报"}),this.renderReshipment(l,s),a&&a({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,a=e.id,o=e.createdTime,i=e.updatedTime,c=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(r,"/answer/").concat(a),dateCreated:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:c}}(this.props.answer);return Object.keys(e).map((function(t){return Object(f.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,r=(n=void 0===n?{}:n).winnersAnswerTokens,a=n.prizes;if(!n.status)return null;var o=["一","二","三"],i=null;return a&&r&&r.forEach((function(e,n){e.includes(t)&&null===i&&(i=a&&a[1]&&a[1].name?"得".concat(o[n],"等奖"):"奖")})),i&&Object(f.c)("div",{className:"AnswerItem-brandQuestionPrizeTip",children:["该回答在有奖问答中获",i]})}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,a=t.isBrandAnswer,o=n.question;return(r||e)&&(o&&"commercial"===o.questionType||a)?Object(f.b)(Ze.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e,t,n,r=this.props,a=r.shouldOia,o=r.answer,i=o.id,c=o.createdTime,l=o.updatedTime,s=o.question.id,u=o.playCount,d=o.attachment,b=o.ipInfo,p=u||(null==d||null===(e=d.zvideo)||void 0===e?void 0:e.playCount)||(null==d||null===(t=d.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.playCount)||0,h="".concat(be.H,"/question/").concat(s,"/answer/").concat(i);return Object(f.b)(Bn.a,Object.assign(Object.assign(Object.assign({created:c,updated:l,href:h},this.isVideoAnswer&&p>0&&{videoPlayCount:Number(p)}),a&&{onClick:this.createOpenInAppHandler("click_answer")}),{},{ipInfo:b}))}},{key:"contentDisplayed",get:function(){var e=this.props.relatedTo,t=this.state.contentExpanded;return Boolean(e||t)}},{key:"coCreate",get:function(){var e=this.props,t=e.answer.creationRelationship,n=e.hideCoCreationFeature;return Boolean(!n&&Object(ce.isCoCreateRelation)(t))}},{key:"render",value:function(){var e,t,n,a=this,o=this.props,i=o.answer,c=o.reward,l=o.answer,s=l.id,u=l.isNormal,d=void 0===u||u,b=l.isDelete,p=l.question,h=l.rewardInfo,O=void 0===h?{}:h,y=l.question,w=y.title,C=y.id,k=y.questionType,x=y.commercial,S=y.brand,A=(S=void 0===S?{}:S).isPuQuestion,T=l.author,E=l.excerpt,I=l.content,N=l.enableConvert,P=l.editableContent,_=l.commentCount,L=l.adminClosedComment,M=l.collapsedBy,D=l.isSticky,U=l.thumbnail,F=l.thumbnailExtraInfo,V=l.reviewInfo,G=(V=void 0===V?{}:V).isReviewing,H=V.editType,W=l.relevantInfo,K=(W=void 0===W?{}:W).relevantType,Z=l.annotationDetail,Y=l.paidInfo,J=void 0===Y?{}:Y,ee=l.creatorRightsNotification,te=l.attachment,ne=l.vessayInfo,ae=l.videoAnswerData,oe=o.relatedTo,ce=o.editable,le=o.byComment,se=o.draft,ue=o.expanded,de=o.lastreadTouchable,fe=o.canCollapse,he=o.canStick,ge=o.itemProp,we=void 0===ge?"answer":ge,Ce=o.addAnnotation,xe=o.cancelAnnotation,Se=o.showNotification,Ae=o.dataZaIndex,Te=o.blockReading,Re=o.isWechat,Ee=o.isHuaweiBrowser,Ie=o.isHonor,Ne=o.lessExcerpt,Be=o.isHuman,ze=o.ua,Pe=o.shouldSpecialOia,_e=o.shareVideoDetail,Le=o.trackPromotionClick,Me=o.formatContent,De=o.zaInfos,Ue=De.expand,Fe=De.title,Ke=De.thank,Ze=De.toggleComment,Xe=De.share,$e=De.getCommentAction,et=o.handleToggleSticky,tt=o.renderActionButtons,ot=o.permission.canBrandAdminEdit,it=o.readContentRightsNotification,ct=o.ecommerce,lt=o.isMobile,st=o.canAbstract,ut=o.isBaidu,dt=o.isMuteSpecial,ft=o.isMuteFreeze,bt=o.isAuthor,pt=o.isTopic,ht=o.xiaomi,Ot=o.showCommentForOia,jt=o.pathname,yt=o.richContentKey,Ct=o.useVessayV2,kt=o.shouldAlwaysShowPlayer,St=o.isShenma,At=o.isRecommend,Tt=o.videoRef,Rt=o.alwaysShowVolumeButton,It=o.showHeightLight,Nt=void 0!==It&&It,Bt=o.truncateDisabled,zt=void 0!==Bt&&Bt,Pt=o.forceCommentOia,_t=void 0!==Pt&&Pt,Lt=o.hideCoCreationFeature,Mt=o.entityWords,Dt=o.isAnswerPage,Ut=o.currentUser,Ft=o.blockStrategies,Vt=Object(qe.b)([Object(qe.a)(Ft)],tt),qt="function"==typeof et,Gt="".concat(be.H,"/question/").concat(C,"/answer/").concat(s),Ht=this.state,Wt=Ht.reportModalShown,Kt=Ht.deleteModalShown,Zt=Ht.collapseModalShown,Qt=Ht.favlistsShown,Yt=Ht.editing,Jt=Ht.commentsShown,Xt=Ht.commentsAutoFocus,$t=Ht.commentPattern,en=Ht.addAnnotationModalShown,tn=Ht.cancelAnnotationModalShown,nn=Ht.positionStatus,rn=Ht.shareVideoQuery,an=Ht.shouldShowVideoDetails,on=Ht.contentExpanded,cn=Ht.showWechatExpand,ln=Ht.skipModalShow,sn=Ht.autoExpand,un=Ht.shownLoadingBar,bn=Ht.wxIsReady,pn=null==te||null===(e=te.video)||void 0===e?void 0:e.campaign,hn=rn&&an?{title:_e.title,thumbnail:_e.coverUrl,isLens:!0,id:rn,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(rn)}:null;if(b)return Object(f.c)("div",{className:"AnswerItem-deleted",children:["你已经删除了该问题的回答，如果需要修改，请先  ",Object(f.b)("a",{role:"button",tabIndex:0,onClick:this.handleRestoreAnswer,children:"撤销删除"})]});var mn=!this.isVideoAnswer||!(G&&"create"===H),vn="commercial"===k,gn="nobody"!==M,On=U||(null==te||null===(t=te.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.thumbnail);if(Yt){var jn,yn=He.a,wn=Object(f.c)("div",{children:[Object(f.c)(R.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},{background:e.colors.GBK99A}]},children:[Object(f.b)("div",{css:function(e){return[{fontWeight:"bold",fontSize:15,color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)},{borderBottom:"none",paddingLeft:20}]},children:this.isVideoAnswer?"本回答为视频回答":"本回答为图文回答"}),Object(f.b)(We.a,{handleClick:null===(jn=this.answerFormRef.current)||void 0===jn?void 0:jn.toggleFullscreen})]}),Object(f.b)(yn,{className:"AnswerItem-form",isReediting:!0,imperativeRef:this.answerFormRef,question:p,answer:i,defaultValue:P,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:O.isRewardable,addRewardTagline:this.addRewardTagline,useMediumEditor:!0})]});return Dt?Object(f.b)(re.a,{children:Object(f.b)($.d,{css:{overflow:"visible"},children:Object(f.c)("div",{css:function(e){return{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:[Object(f.b)(Oe.a,{}),wn]})})}):wn}var Cn=this.renderMetaAndBeforeContent(),kn=dr(r.a,Cn,2),xn=kn[0],Sn=kn[1],An="mainEntityOfPage"===we||"acceptedAnswer"===we,Tn=Pe&&!An,Rn=!hn&&this.renderEditTime(),En=J.type,In=J.content,Pn=this.isPaidAnswer,_n=Pn?In:I,Ln=!oe&&Object(f.b)(Jn,{questionId:C,title:w,href:Gt,zaTitleId:Fe,showStickyMark:qt&&this.props.isSticky,showHeightLight:Nt,onClick:Le}),Mn=d||bt,Dn=ht&&jt.match(/\/question\/\d+$/g),Un=Me?Me(_n||E,i):_n||E||"",Fn=Boolean(N||(null==ne?void 0:ne.enableVideoTranslate)),qn=ae&&(kt||this.contentDisplayed),Gn=At&&this.isVideoAnswer,Hn=lt&&"answer"===oe;return Object(f.c)(at.e,{onRef:function(e){return a.contentItem=e},className:"AnswerItem","data-za-index":Ae,"data-zop":JSON.stringify({authorName:T.name,itemId:s,title:w,type:"answer"}),data:i,link:Gt,meta:Gn?null:xn,title:Ln,lastreadTouchable:de,name:s,itemProp:we,itemType:"http://schema.org/Answer",itemScope:!0,children:[d&&(!pt||on)&&Object(f.b)(Vn.b,{answer:i}),this.renderMeta(),vn&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),Mn?Object(f.c)(f.a,{children:[this.isVideoAnswer&&Object(f.b)(ir,Object.assign(Object.assign({shouldExpand:this.contentDisplayed,showPlayer:qn,campaign:pn,answer:i,videoAnswerData:ae,videoRef:Tt,alwaysShowVolumeButton:Rt},Gn?{meta:xn}:{}),{},{hideCoCreationFeature:Lt,isRecommend:At})),Object(f.c)(Bn.b,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({entityWords:Mt,richContentKey:yt,className:j()({"RichContent-mobileBaidu":ut,"RichContent-hasCatalog":Object(ie.a)(i,"answer"),"AnswerItem-highlight":Nt}),truncateDisabled:zt,imperativeRef:this.richContentRef,canAbstract:st,onToggleExpend:this.handleExpand},Tn&&{expandText:"阅读全文"}),Te&&An&&{expandText:"展开阅读全文"}),lt&&Be&&!An&&{collapsedHeight:180}),{},{cover:this.isVideoAnswer&&kt?null:On,hasVideo:!kt&&Boolean(F&&"video"===F.type)||this.isVideoAnswer,videoData:hn,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(oe),expanded:ue,onPositionStatusChange:this.handlePositionStatusChange,before:Sn,excerpt:Me?Me(E,i):E,html:Un,prefix:this.renderPrefix(),isNovel:"interactive_novel"===En,ecommerce:ct,forceSticky:Hn,isVideoAnswer:this.isVideoAnswer,after:Object(f.c)("div",{children:[Object(f.b)(Vn.a,{answer:i,ua:ze}),Object(f.b)(nt,{className:"AnswerItem-CommercialQuestionTail",commercial:x}),!lt&&on&&Object(f.b)(dn,{contentType:"answer",contentToken:s,author:T}),Rn,Ut&&bt&&ce&&Object(f.b)(ve.a,{children:Object(f.c)("a",{className:"AnswerItem-editButton",role:"button",tabIndex:0,onClick:this.handleStartEditAnswer,children:[Object(f.b)(m.a,{text:!0,center:!0})," ",Object(f.c)("span",{className:"AnswerItem-editButtonText",children:["修改",se&&se.editableContent&&"（有未发布的编辑草稿）"]})]})}),!lt&&Ut&&Object(f.b)(Nn,{imperativeRef:this.rewardContainerRef,reward:c,currentUser:Ut,rewardInfo:O,isAuthor:bt,id:s,author:T,ua:ze,balanceEnable:!1})]}),data:i,onClick:Te&&An?function(){(Dn||Re||St)&&lt?(a.setState({autoExpand:!1}),a.richContentRef.current.handleExpand()):lt?be.E?(a.setState({autoExpand:!1}),a.richContentRef.current.handleExpand()):a.setState({skipModalShow:!0,autoExpand:!1}):a.setState({showWechatExpand:!0,autoExpand:!1})}:Tn?be.E&&lt?function(){a.richContentRef.current.handleExpand()}:a.createOpenInAppHandler("expand_answer"):a.disableAuth&&Te&&a.handleToggleGuide},Ne?{limit:74}:{}),this.coCreate?{limitWithImage:74}:{}),{},{zaIds:{expand:Ue},children:[mn&&ot&&vn&&gn&&!A&&Object(f.b)(z.c,{className:j()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===M}),onClick:this.handleUpdateAnswerCollapsed,children:"公开回答"}),mn&&he&&!gn&&"brand_special"!==K&&Object(f.b)(z.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick,children:D?"取消精选":"设为精选"}),!this.props.isBaidu&&Vt({componentList:[{name:"vote",component:mn&&this.renderVoteButton()},{name:"comment",component:mn&&!(lt&&"answer"!==oe)&&Object(f.b)(Ye.a,Object.assign(Object.assign({onInstance:function(e){return a.commentButton=e},onClick:this.openModal},(lt&&Be&&Pe||_t)&&{onClick:function(e){Hn?a.openModal(e,{commentsShown:!0}):a.createOpenInAppHandler("comment_answer")}}),{},{commentsShown:Jt,commentClosed:L,count:_,positionStatus:nn,zaInfos:{toggleComment:Ze,getCommentAction:$e}}),"comment")},{name:"share",component:mn&&!lt&&Object(f.b)(zn.a,{disabled:dt||ft,id:s,type:"answer",title:w,authorName:T&&T.name,href:Gt,positionStatus:nn,zaShareId:Xe},"share")},{name:"favlist",component:mn&&!(lt&&"answer"!==oe)&&(!Ut||!Ut.isOrg)&&Object(f.b)(vt.a,{onRef:function(e){return a.favButtonRef=e},onClick:this.handleFavlistsShown,label:lt?"":"收藏",disabled:dt||ft},"favlist")},!lt&&{name:"thank",component:mn&&!bt&&Object(f.b)(Ve.a,Object.assign({zaInfo:Ke,answer:i,disabled:dt||ft},this.isLegacyVideoAnswer&&{zVideoId:te.attachmentId}),"thank")},{name:"sticky",component:!lt&&qt&&bt&&Object(ke.a)(Ut)&&Object(f.b)(z.c,{preset:"plain",onClick:et,icon:this.props.isSticky?v.b:g.b,label:this.props.isSticky?"取消置顶":"置顶"},"sticky")},{name:"vessay",component:!lt&&bt&&Fn&&Object(f.b)(ye.a,{type:"answer",id:s,useVessayV2:Ct,isAuthor:bt},"vessay")},{name:"options",component:lt&&Be||mn&&this.renderOptions()},{name:"settings",component:lt&&Be||this.renderSettings()},{name:"annotation",component:!on&&Object(f.b)(Ge.a,{annotationDetail:Z},"annotation")}]})]}))]}):Rn,Mn&&!Pn&&Object(f.b)(Qe.a,{content:_n,type:"answer",urlToken:String(s)}),Ot&&jt.startsWith("/question")&&Hn&&Object(f.b)("div",{role:"tablist",tabIndex:0,onClick:this.handleClickCommentsPreview,onKeyDown:function(e){"Enter"===e.key&&a.handleClickCommentsPreview(e)},children:Object(f.b)(me,{parent:i})}),Object(f.b)(B.e,{ref:this.zaRef}),Object(f.b)(Je.a,Object.assign({shown:Jt,parent:i,byComment:le,commentPattern:$t,autoFocus:Xt,onClose:this.closeModal,useBizComment:!0},Hn&&{onMount:this.handleCommentModalMount})),Object(f.b)(fn.a,{type:"answer",urlToken:s,shown:Wt,onClose:this.handleReportHide,zaEnabled:!0}),Object(f.b)(q,{addAnnotation:Ce,onClose:this.handleCloseAddAnnotationModal,shown:en,type:be.e,urlToken:s,showNotification:Se}),Object(f.b)(Q,{cancelAnnotation:xe,onClose:this.handleCloseCancelAnnotationModal,shown:tn,type:be.e,urlToken:s,showNotification:Se}),Ut&&bt&&Object(f.b)(rt.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:Kt,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),fe&&Object(f.b)(rt.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:Zt,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Object(f.b)(gt.a,{id:s,type:"answer",shown:Qt,onClose:this.handleFavlistHide,zaEnabled:!0}),lt&&this.state.guideShown&&Object(f.b)(je.a,{redirectUrl:Gt,buttons:[Re?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],urlScheme:Object(pe.a)({type:"answer",id:s}),onClose:this.handleToggleGuide}),Object(f.b)(mt,{notification:ee,onRead:function(e){it("answer",s,e)},onUseAdmire:function(){a.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var e=a.props.postToolsRecommend;X.a.confirm(Object(f.b)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then((function(){return e("answer",String(s))}),(function(){}))}}),Object(f.b)(Et,{show:cn&&!Dn&&lt&&!Re&&!be.E,id:i.id,type:i.type,onCancel:function(){a.setState({showWechatExpand:!1},(function(){sn||a.richContentRef.current.handleExpand()}))},onSubmit:function(){a.setState({showWechatExpand:!1}),Re?bn?a.createOpenInAppHandler(sn?"expand_answer2":"expand_answer1")():a.setState({shownLoadingBar:!0}):a.createOpenInAppHandler(sn?"expand_answer2":"expand_answer1")()}}),Object(f.b)(wt,{show:ln&&!be.E,id:i.id,type:i.type,onCancel:function(){a.setState({skipModalShow:!1},(function(){a.richContentRef.current.handleExpand()}))},onSubmit:function(){a.createOpenInAppHandler("expand_answer",Ee||Ie)()}}),Object(f.b)(xt,{show:un&&lt})]})}}]),n}(x.PureComponent);yr.contextTypes={startAddAnswer:k.a.func},yr.propTypes={relatedTo:k.a.oneOf(["question","answer"]),editable:k.a.bool,preset:k.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:k.a.bool,shareVideoDetail:k.a.object,formatContent:k.a.func,renderExtraOptions:k.a.func,zaInfos:k.a.object,onToggleExpand:k.a.func,useNewLabels:k.a.bool,renderActionButtons:k.a.func,canAbstract:k.a.bool,trackPromotionClick:k.a.func,isSearchSpecialSource:k.a.bool,hideCommercialInviteLabel:k.a.bool,hideCoCreationFeature:k.a.bool},yr.defaultProps={editable:!1,canAbstract:!1,isSearchSpecialSource:!1,preset:"primary",zaInfos:{},renderActionButtons:Ve.b,shouldAlwaysShowPlayer:!1,hideCoCreationFeature:!1};var wr=Object(E.compose)(Object(Fe.a)((function(e){var t=e.answer;return{content:{type:"Answer",token:String(t.id)}}})),Object(J.b)((function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=void 0===a?{}:a;return Object.assign(Object.assign(Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},o.index&&{index:o.index}),o.cardShow&&{view:{id:o.cardShow}}),{},{trackCardShow:r})})),T.withRouter,xe.a,Object(b.d)({dataPath:"answer"}),b.c,Object(A.connect)((function(e,t){var n,r,a=e.entities.drafts,o=void 0===a?{}:a,i=e.question,c=(i=void 0===i?{}:i).draftStatus,l=e.answers,s=(l=void 0===l?{}:l).paidContent,u=void 0===s?{}:s,d=l.entityWords,f=void 0===d?{}:d,b=e.reward,p=e.switches,h=e.video,m=(h=void 0===h?{}:h).shareVideoDetail,v=e.env,g=v.edition,O=v.userAgent,j=t.answer,y=t.relatedTo,w=t.location.pathname,C=w.split("/"),k=!1,x=!0;!C[1]||"org"!==C[1]&&"people"!==C[1]||(k=C[2]&&-1!==Or.indexOf(C[2]),x=!1);var S=Object(E.compose)(gr,vr)(jr(e,t)),A=Object(Pe.b)(e),T=["question","answer"].includes(y),R=Object(fe.c)(e)&&T,I=Object(fe.j)(e),N=O.Mobile,B=O.Qzone,z=N&&I&&!B,P=Object(le.c)(S.creationRelationship),_=Object(Pe.j)(e,P),L=(null!==(n=null===(r=j.relationship)||void 0===r?void 0:r.isAuthor)&&void 0!==n?n:Object(Pe.j)(e,j.author))&&!_;return{entityWords:f[j.id],draft:j&&o["question_".concat(j.question.id)],draftStatus:null==c?void 0:c[j.question.id],answer:S,ua:Object(fe.m)(e),pathname:w,xiaomi:g.xiaomi,isShenma:g.shenma||/quark/gi.test(e.env.userAgent.origin)||O.UC,reward:b,switches:p,isHuman:R,shouldOia:Object(fe.i)(e)&&!k,shouldSpecialOia:Object(fe.j)(e)&&!k,isSpecialQuestionOrAnswer:Object(fe.k)(e,{type:T&&y,id:T?"answer"===y?j.id:j.question.id:""}),useVessayV2:Object(fe.a)(e,Se.b)===Se.a,isMobile:Object(fe.d)(e),isWechat:e.env.userAgent.Wechat,isHuaweiBrowser:/huaweibrowser/gi.test(e.env.userAgent.origin)||/huawei/gi.test(e.env.userAgent.origin)&&!e.env.userAgent.UC&&!e.env.userAgent.Wechat&&!e.env.userAgent.MQQBrowser&&!/quark/gi.test(e.env.userAgent.origin)&&!/baidu/gi.test(e.env.userAgent.origin),isHonor:/honor/gi.test(e.env.userAgent.origin)&&/MQQBrowser/gi.test(e.env.userAgent.origin),concernedUpvoters:Object(Ae.f)(e,{id:j.id}),currentUser:A,shareVideoDetail:m,isBrandAnswer:Object(Ae.j)(j),permission:Object(Le.bb)(e),ecommerce:Object(Y.c)(e,{type:"answer",urlToken:String(j.id)}),isBaidu:Object(fe.i)(e)&&g.baidu,showCommentForOia:Object(fe.i)(e),blockReading:z,paidContent:u,isMuteSpecial:Object(Le.D)(S.question),isMuteFreeze:Object(Le.C)(S.question),isAuthor:L,isSubAuthor:_,isQuestionPage:x}}),{updateAnswerReshipmentSettings:Ae.D,updateAnswerCommentPermission:Ae.C,updateAnswerCollapsed:Ae.B,updateAnswerStick:Ae.F,deleteAnswer:Ae.h,restoreAnswer:Ae.y,updateAnswer:Ae.A,loadAnswerForSettings:Ae.s,showNotification:_e.h,addAnnotation:function(e,t,n,r){return{API:{types:Ne.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(Ee.a)(Object(Re.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=Be(e);return r?Object(Te.a)({},r,Object(Te.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,r){return{API:{types:Ne.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(Ee.a)(Object(Re.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=Be(e);return r?Object(Te.a)({},r,Object(Te.a)({},t,Object.assign(Object.assign({},n),{},{annotationDetail:null}))):null}}}},addRewardTagline:Me.a,updateAnswerReward:Ae.E,loadAnswerConcernedVoters:Ae.o,fillCurrentUserIfNeeded:Pe.f,loadVideoDetails:De.d,readContentRightsNotification:ze.bd,postToolsRecommend:ze.Wc,showMobileSignInModal:Le.ib,loadAnswerEntityWords:Ae.q}),Ot.c)(yr)},1123:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(32),a=50,o={expand:2765,title:2812,voteUp:2756,voteDown:2761,toggleComment:2757,share:2758,favlists:2759,thank:2767,options:2760,report:2796,ignore:2821,follow:2797,getCommentAction:function(e){return e?"Expand":"Collapse"}},i=r.i+10},1151:function(e,t,n){"use strict";var r=n(4),a=n(34),o=n(36),i=n(1),c=n(24),l=n.n(c),s=n(99),u=n(73),d=n.n(u),f=n(0),b=n.n(f),p=n(50),h=n(47),m=n(439),v=n(155),g=n(670);function O(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var j=function(e,t){if(null==e||!e.length)return function(e){return e};return(t||{}).hasSorted?function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{val:0};if(!n)return n;if(e.length===r.val)return n;for(var a=n.length,o=0,i=0,c=e[r.val],l=c.mention,s=c.matchorder,u=s-1;i<=a;){if(-1===(i=n.indexOf(l,i)))return n;o+=1;var d=i+l.length;if(o-1===u){r.val++;var f=t(n.slice(0,i),r),b='<span data-search-entity="'.concat(r.val-1,'">').concat(l,"</span>"),p=t(n.slice(d),r);return f+b+p}i=d}return n}:function(t){return t?e.reduce((function(e,t,n){var r=t.matchorder,a=t.mention;return function(e,t,n,r){if(null==e||!e.length)return e;for(var a=e.length,o=0,i=0;i<=a;){if(-1===(i=e.indexOf(t,i)))return e;if((o+=1)-1===n)return e.slice(0,i)+r+e.slice(i+t.length);i+=t.length}return e}(e,a,r-1,'<span data-search-entity="'.concat(n,'">').concat(a,"</span>"))}),t):t}},y=function(e){var t=e.size,n=e.className;return Object(i.b)("svg",{width:t,height:t,viewBox:"0 0 10 10",className:n,children:Object(i.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.64422 2.0701C5.43934 2.02495 5.22835 2.00107 5.01435 2.00024L5.01881 1C6.77895 1.00679 8.38723 2.18375 8.8647 3.96569C8.96467 4.33879 9.00845 4.71371 9.00122 5.08146L8.00058 5.08592C8.00545 4.91135 7.99501 4.73455 7.96827 4.55722C7.92244 4.24814 7.82948 3.95442 7.69691 3.68362C7.48242 3.24345 7.16768 2.87255 6.78903 2.59189C6.45425 2.34299 6.06581 2.16222 5.64422 2.0701ZM1.13729 6.03624C0.659821 4.2543 1.46415 2.43088 2.98508 1.54493L3.48906 2.40894C3.17129 2.59405 2.89522 2.83372 2.67003 3.11208C2.36422 3.48898 2.14798 3.94151 2.05373 4.43727C1.99759 4.72965 1.98457 5.0335 2.0198 5.33994C2.06383 5.73147 2.18322 6.10019 2.36312 6.43126C2.40015 6.49969 2.43967 6.56631 2.48152 6.63103L1.61207 7.12786C1.40517 6.79796 1.24334 6.43202 1.13729 6.03624ZM2.90011 8.40484L3.39642 7.53631C3.69079 7.72299 4.0199 7.85981 4.37186 7.9349C4.70489 8.0066 5.05386 8.02217 5.40538 7.97391C5.73677 7.92924 6.051 7.83047 6.33889 7.68677C6.78065 7.46729 7.15162 7.14642 7.43027 6.76141C7.55152 6.59389 7.65528 6.41424 7.7398 6.22551L8.60733 6.73154C8.11978 7.74635 7.20905 8.55042 6.03627 8.86467C4.92852 9.16149 3.80474 8.96295 2.90011 8.40484ZM4.08193 5.92023C3.83814 5.67643 3.70117 5.34577 3.70117 5.00099C3.70117 4.65621 3.83814 4.32555 4.08193 4.08175C4.32573 3.83795 4.65639 3.70099 5.00117 3.70099C5.34595 3.70099 5.67661 3.83795 5.92041 4.08175C6.16421 4.32555 6.30117 4.65621 6.30117 5.00099C6.30117 5.34577 6.16421 5.67643 5.92041 5.92023C5.67661 6.16402 5.34595 6.30099 5.00117 6.30099C4.65639 6.30099 4.32573 6.16402 4.08193 5.92023Z",fill:"currentColor"})})},w=function(e){var t=e.size,n=e.className;return Object(i.b)("svg",{width:t,height:t,viewBox:"0 0 15 15",className:n,children:Object(i.b)("path",{d:"M10.89 9.477l3.06 3.059a1 1 0 0 1-1.414 1.414l-3.06-3.06a6 6 0 1 1 1.414-1.414zM6 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",fill:"currentColor"})})},C=function(e){var t=e.word,n=e.sourceType,r=e.sourceId,a=e.link,o=void 0===a?{linkType:0,linkUrl:"",topicToken:""}:a,c=e.attachedInfoBytes,l=e.entityAB,u=e.hasKnowledgeTopic,d=e.onClick,b=Object(g.a)().colors,p=Object(v.b)(),O=p.Zhihu||p.ZhihuHybrid,j=0!==o.linkType,C=1===o.linkType,k=O&&(!j||C)&&"1"===l,x=Object(f.useMemo)((function(){return j?o.linkUrl:function(e,t,n){var r=new URLSearchParams({q:e,search_source:"Entity",hybrid_search_source:"Entity",hybrid_search_extra:JSON.stringify({sourceType:t,sourceId:n})});return"https://www.zhihu.com/search?".concat(r.toString())}(t,n,r)}),[o,t,n,r]),S=Object(s.a)((function(e){k&&(e.preventDefault(),function(e,t,n,r,a){var o=0===t.linkType?"/search/".concat(encodeURIComponent(e)):"/knowledge/".concat(t.topicToken),i=new URLSearchParams({sourceType:n,sourceId:r}),c="https://www.zhihu.com/appview/entity-word".concat(o,"?").concat(i.toString()),l=new URLSearchParams({url:c,show_header:"false",show_drag:"true",enable_close:"true",min_percent:"1",title:e,enable_drag:String(Boolean(a.iOS))});Object(h.a)("base/openURL").dispatch({url:"zhihu://popup_container?".concat(l.toString())})}(t,o,n,r,p)),d(e,o,x)}));if(!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=0===t.linkType,o=1===t.linkType;return e?"0"===r?a:!n||o:a}(O,o,u,l||"0"))return Object(i.b)(f.Fragment,{children:t});var A=j?y:w;return Object(i.c)(m.b,{as:O?"span":"a",shouldTrackShow:!0,zaText:t,zaBlock:j?"KnowledgeEntity":"SearchEntity",extra:{attachedInfoBytes:c},"data-za-not-track-link":!0,css:{color:b.GBL07A,textDecoration:"none",cursor:"pointer",":active":{padding:"3.5px 0",backgroundColor:b.GBK09A,borderRadius:"4px"}},href:x,target:"_blank",onClick:S,children:[t,Object(i.b)(A,{size:"10px",css:{position:"relative",verticalAlign:"top",top:"4px"}})]})},k=function(e,t){var n=t.type,r=t.sourceId,a=t.entityWords,o=void 0===a?[]:a,c=t.entityAB,u=t.onClick,b=void 0===u?d.a:u,h=Object(f.useState)(null),m=O(l.a,h,2),v=m[0],g=m[1],j=Object(s.a)(b);return Object(f.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("span[data-search-entity]"));if(t.length){var a=!1,l=t.map((function(e){var t,n=e.getAttribute("data-search-entity"),r=o[Number(n)]||{},i=r.mention,c=r.link,l={word:i,link:c,attachedInfoBytes:r.attachedInfoBytes};1===(null==c?void 0:c.linkType)&&(a=!0);var s=document.createElement("span");return null===(t=e.parentNode)||void 0===t||t.replaceChild(s,e),{data:l,target:s}})).map((function(t,o){var l=t.data,s=t.target;return e.contains(s)?Object(p.createPortal)(Object(i.b)(C,Object.assign({sourceType:n,sourceId:r,entityAB:c,hasKnowledgeTopic:a,onClick:j},l),o),s):null}));g(l)}}}),[e]),v},x=n(19),S=n(499),A=n(118),T=function(e){var t=Object(v.b)(),n=Object(f.useCallback)((function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var r=e.target;if("img"===r.tagName.toLowerCase()&&(r.src.includes("zhimg")||!r.src.includes("equation"))&&(!r.classList.contains("ztext-gif")||r.parentNode.classList.contains("isPlaying"))){var a=Array.from(n.querySelectorAll(["img"])).filter((function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")})),o=a.indexOf(r);if(-1!==o){e.preventDefault();var i=a.map((function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""})).map((function(e){return Object(A.imgUrl)(e,Object.assign({quality:""},e.endsWith("webp")&&{extension:"jpg"}))}));Object(h.a)("base/openImage").dispatch({images:i,index:o})}}}}(n,{root:e})}),[e,t.ZhihuHybrid]);Object(f.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},R=n(161),E=n(905),I=n(1060),N=n(3),B=n.n(N),z=n(886),P=n(9);function _(e){var t=e.id,r=e.parentType,a=e.parentId,o=e.suger,i=e.data,c=e.isEditor,l=void 0!==c&&c,s=Object(z.a)((function(){return n.e(50).then(n.bind(null,3047))}),t),u=Object(z.a)((function(){return n.e(81).then(n.bind(null,3036))}),t);return t.startsWith("fee_")&&u?Object(P.g)(u,{id:t,isEditor:l}):s?Object(P.g)(s,{id:t,parentType:r,urlToken:a,suger:o,data:i,isEditor:l}):null}_.propTypes={id:B.a.string.isRequired,parentType:B.a.oneOf(["answer","article"]),parentId:B.a.string,suger:B.a.object,data:B.a.object,isEditor:B.a.bool};var L=Object(I.h)({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:_}),M=n(30),D=n.n(M),U=n(58),F=n(51),V=n(12),q=n.n(V),G=n(1031),H=n(1173),W=n(1116),K=n(1525),Z=n(933),Q=n(259),Y=n(955),J=n(23),X=n(377),$=n.n(X),ee=n(1875);function te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=Object.prototype.hasOwnProperty,ae=Object.getOwnPropertySymbols,oe=Object.prototype.propertyIsEnumerable,ie=Object.assign,ce=function e(t){var n=t.size,r=t.text,a=t.center,o=function(e,t){var n={};for(var r in e)re.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&ae){var a,o=te(ae(e),!0);try{for(o.s();!(a=o.n()).done;){r=a.value;t.indexOf(r)<0&&oe.call(e,r)&&(n[r]=e[r])}}catch(e){o.e(e)}finally{o.f()}}return n}(t,["size","text","center"]);r&&(n="1.2em");var i=b.a.createElement("svg",ie(ie({},o),n&&{width:n,height:n}));return a?b.a.createElement("span",{style:e.strutStyle},"​",i):i};ce.defaultProps={fill:"currentColor"},ce.strutStyle={display:"inline-flex",alignItems:"center"};var le=ce,se=Object.assign;var ue=function(e){return b.a.createElement(le,se(se({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Catalog24"+(e.className?" ".concat(e.className):"")}),b.a.createElement("path",{d:"M10 5a1 1 0 011-1h10a1 1 0 110 2H11a1 1 0 01-1-1zm4 6a1 1 0 100 2h7a1 1 0 100-2h-7zm0 7a1 1 0 100 2h7a1 1 0 100-2h-7zm-8.335.25a.915.915 0 01-.915-.915V12.75H10a.75.75 0 000-1.5H4.75V6.665c0-.505.41-.915.915-.915H7a.75.75 0 000-1.5H5.665A2.415 2.415 0 003.25 6.665v10.67a2.415 2.415 0 002.415 2.415H10a.75.75 0 000-1.5H5.665z"}))},de=["children","pl","targetId","handleScroll","index"],fe=["className"],be=["className"],pe=["children","targetId","active","setCursor"],he=["children","pl","targetId","handleScroll","handleAction","index","status","className","isCollapsed","inEditor","active"],me=["className"],ve=["className"],ge=["isCollapsed","inEditor","catalogRef","contentRoot","catalogLength","contentRootLeft","shouldCollapse"];function Oe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var je=function(e){var t=e.children,n=e.pl,r=e.targetId,a=e.handleScroll,o=e.index,c=D()(e,de);return Object(i.b)(U.Text,Object.assign(Object.assign({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},c),{},{children:Object(i.c)(U.Flex,{pl:n,css:{cursor:"pointer",alignItems:"center"},"data-catalog-target-id":r,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){a(e,o)},children:[Object(i.b)(U.Text,{css:[Object(G.a)(1),{pointerEvents:"none",wordBreak:"break-all"}],dangerouslySetInnerHTML:{__html:t}}),Object(i.b)(H.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})]})}))},ye=function(e){var t=e.className,n=D()(e,fe);return Object(i.b)(je,Object.assign({className:q()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},n))},we=Object(f.forwardRef)((function(e,t){var n=e.isFold,r=e.onClick,a=n?W.a:K.a,o=n?"展开目录":"收起目录";return Object(i.c)(i.a,{children:[Boolean(n)&&Object(i.b)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(i.c)(U.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:{cursor:"pointer"},onClick:r,children:[o,Object(i.b)(a,{size:18,css:{marginTop:"1px"}})]})]})})),Ce={1:ye,2:function(e){var t=e.className,n=D()(e,be);return Object(i.b)(je,Object.assign({className:q()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"0px"}}},n))}},ke=function(e){var t=e.catalog,n=e.className,r=e.canFold,a=e.inEditor,o=e.scrollOffset,c=void 0===o?0:o,l=r&&!a&&(null==t?void 0:t.length)>3,s=Object(f.useCallback)((function(e,t){if(a){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var r=Array.from(n.querySelectorAll("h2,h3"))[t];r&&requestAnimationFrame((function(){return Object(I.g)(r,c)}))}}}),[a,c]);return null!=t&&t.length?Object(i.c)(U.Box,{className:q()(n,"Catalog"),mb:"48px",css:{"& .Catalog-wrapper":{position:"relative"}},"data-za-detail-view-name":"正文",children:[Object(i.b)("h2",{css:{marginBottom:"18px !important",marginTop:"0px !important"},children:"目录"}),Object(i.c)(U.Box,{className:"Catalog-wrapper",children:[Object(i.b)(U.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:l?"84px":"auto",children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,a=e.index,o=Ce[t]||ye;return Object(i.b)(o,{targetId:r,handleScroll:s,index:a,children:n},String([r,a]))}))}),Boolean(l)&&Object(i.b)(we,{isFold:!0})]})]}):a?Object(i.c)(U.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(i.b)(U.Box,{size:"160px",mb:"10px",children:Object(i.b)(U.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(i.b)(U.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center",children:"在内容中设置标题将会在此处同步展示"})]}):null},xe=function(e){var t=e.contentHTML,n=Object(f.useState)(!0),r=Oe(l.a,n,2),a=r[0],o=r[1],c=Object(s.a)((function(){o(!a)}));return Object(i.c)(F.b,{block:"ZTextCatalog",children:[Object(i.b)(F.f,{as:U.Flex,zaType:"Block",className:"Catalog-content",flexDirection:"column",css:{fontSize:"12px",overflow:"hidden"},style:{height:a?"84px":"auto"},dangerouslySetInnerHTML:{__html:t}}),Object(i.b)(F.a,{as:we,zaType:"Button",zaAction:a?"Expand":"Collapse",isFold:a,onClick:c})]})},Se=function(e){var t=e.root,n=Object(f.useState)(null),r=Oe(l.a,n,2),a=r[0],o=r[1];return Object(f.useEffect)((function(){if(t){var e=t.querySelector(".Catalog-wrapper");if(e&&e.querySelector(".bottom-shadow")){var n=e.querySelector(".Catalog-content").innerHTML,r=document.createElement("div");r.className="Catalog-wrapper",e.parentNode.replaceChild(r,e),o(Object(p.createPortal)(Object(i.b)(xe,{contentHTML:n}),r))}}}),[t]),a},Ae="removed",Te="added",Re=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,Ee={h2:1,h3:2},Ie=function(e,t){return"h_".concat(e||"editor","_").concat(t)},Ne=function(e){return e.replace(I.m,"").replace(/<[^>]*>/g,"")},Be=function(e){return Ee[e]},ze=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var r=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(Re,(function(e,a){var o,i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=Ne(c),s=Be(a),u=Ie(t,r.length),d=(null===(o=e.match(/(data-into-catalog-status=\\{0,1}"\S{1,}\\{0,1}")/))||void 0===o||null===(i=o[0])||void 0===i?void 0:i.indexOf(Ae))>-1?Ae:"";return r.push({text:l,titleLevel:s,Tag:a,targetId:u,status:d}),n({text:l,titleLevel:s,targetId:u,Tag:a,originText:c,status:d})})),{catalog:r,html:e}},Pe=function(e){var t=e.originText,n=e.targetId,r=e.Tag,a=e.status;return Object(Y.renderToStaticMarkup)(Object(i.b)(r,{id:n,"data-into-catalog-status":a,dangerouslySetInnerHTML:{__html:t}}))},_e=function(e){return function(t,n){var r=n.sourceId,a=n.theme,o=n.shouldShowCatalog,c=n.shouldFoldCatalog;if(!t)return t;if(!o)return t;var l=ze(t,r,Pe),s=l.catalog,u=l.html;return s.length?e?u:Object(Y.renderToStaticMarkup)(Object(i.b)(Q.a,{theme:a,children:Object(i.b)(ke,{catalog:s,canFold:c})})).concat(u):u}},Le=function(e,t,n){var r=Object(F.l)().trackEvent,a=Object(f.useCallback)((function(a){!function(e,t,n,r){if(!e.defaultPrevented){var a=e.target.getAttribute("data-catalog-target-id");if(a){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),J.a.trackEvent(e.target);var o=t.querySelector("#"+a);o&&(e.preventDefault(),Object(I.g)(o,10+r,!1))}}}(a,t||e,r,n)}),[e,t,r,n]);Object(f.useEffect)((function(){if(e)return e.addEventListener("click",a),function(){e.removeEventListener("click",a)}}),[e,a])},Me=function(e){var t=e.children,n=e.targetId,r=e.active,a=e.setCursor,o=D()(e,pe);return Object(i.b)(F.a,Object.assign(Object.assign({as:U.Text,zaType:"Text",color:r?"GBL01A":"GBK02A",fontWeight:r?"bold":"normal",css:{fontSize:"14px"}},o),{},{children:Object(i.c)(U.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(){var e=document.querySelector("#"+n);a(n),e&&Object(I.g)(e)},children:[Object(i.b)(U.Text,{css:Object(G.a)(1),children:t}),Object(i.b)(Z.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})}))},De=function(e){return Object(i.b)(Me,Object.assign({},e))},Ue={1:De,2:function(e){return Object(i.b)(Me,Object.assign({pl:"20px"},e))}},Fe=function(e){var t=e.catalog,n=e.className,r=Object(f.useState)(null),a=Oe(l.a,r,2),o=a[0],c=a[1];return Object(f.useEffect)((function(){if(null!=t&&t.length){var e=null,n=Object(I.k)();t.forEach((function(t){var r=document.querySelector("#"+t.targetId);(null==r?void 0:r.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),c(e)}}),[]),null!=t&&t.length?Object(i.b)(F.b,{block:"Popup",children:Object(i.b)(F.f,{zaType:"Popup",as:U.Box,className:q()(n),children:Object(i.b)(U.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,a=Ue[t]||De;return Object(i.b)(a,{targetId:r,active:o===r,setCursor:c,children:n},r)}))})})}):null},Ve=function(e){var t=e.className,n=e.shown,r=e.onClose,a=e.zaContent,o=e.catalog;return Object(i.b)(ee.a,{wrapperClassName:"CatalogModal-wrapper",className:q()("CatalogModal",t),title:"目录",onClose:r,children:n&&Object(i.b)(Fe,{css:{paddingBottom:"16px"},catalog:o,zaContent:a})})},qe=function(e){var t=e.children,n=e.pl,r=e.targetId,a=e.handleScroll,o=e.handleAction,c=e.index,l=e.status,s=e.className,u=e.isCollapsed,d=e.inEditor,f=e.active,b=D()(e,he);return Object(i.b)(F.a,Object.assign(Object.assign({as:U.Text,zaType:"Text",className:q()(s,"Catalog-Title"),flexShrink:0,display:"flex",alignItems:"center",color:"GBL05A",fontSize:"12px",height:"20px",lineHeight:"20px",pl:"30px",css:function(e){return{position:"relative",height:"30px",lineHeight:"30px","&.Catalog-FirstLevelTitle, &.Catalog-SecondLevelTitle":{position:"relative",height:"30px",color:f?e.colors.GBL01A:e.colors.GBL05A,"&::before":{content:'" "',position:"absolute",backgroundColor:f?e.colors.GBL01A:e.colors.GBL05A,display:"inline-block",borderRadius:"50%",top:"12px",marginRight:"12px"},"&:hover::before":{backgroundColor:e.colors.GBL01A}},"&.Catalog-FirstLevelTitle::before":{left:u?"78px":"16px",width:"6px",height:"6px"},"&.Catalog-SecondLevelTitle::before":{left:u?"79px":"17px",width:"4px",height:"4px"},".Catalog-TitleIcon":Object.assign({position:"absolute",right:"10px",width:"12px",height:"12px",objectFit:"contain"},("toAdd"!==l||!t)&&{display:"none"}),"&::after":{content:'" "',display:"block",position:"absolute",left:u?"81px":"19px",top:0,transform:"translateX(-50%)",width:"2px",height:"40px",marginTop:"12px",background:e.colorMod(e.colors.GBL05A).alpha(.12)},"&:last-child":{"&::after":{height:0}}}}},b),{},{onClick:function(e){a(e,c)},children:!u&&Object(i.c)(U.Flex,{px:"10px",ml:n,css:function(e){return Object.assign(Object.assign({cursor:"pointer",alignItems:"center",width:"100%"},"toAdd"===l&&Boolean(t)&&{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px"}),{},{"&:hover":{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px",".Catalog-TitleIcon":{display:"block"}}})},"data-catalog-target-id":r,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",children:[Object(i.b)(U.Text,{css:[Object(G.a)(1),{pointerEvents:"none",wordBreak:"break-all",width:"calc(100% - 22px)"}],dangerouslySetInnerHTML:{__html:t}}),d&&("toAdd"===l?Object(i.b)(U.Image,{src:"https://pic3.zhimg.com/v2-b01c062116d91b98059d7c90bb1139d2.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),o(e,c,Te)}}):Object(i.b)(U.Image,{src:"https://pic2.zhimg.com/v2-4bf4e045dbe37447d257b72b5a79b05c.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),o(e,c,Ae)}}))]})}))},Ge=function(e){var t=e.className,n=D()(e,me);return Object(i.b)(qe,Object.assign({className:q()(t,"Catalog-FirstLevelTitle"),fontWeight:"500",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))},He={1:Ge,2:function(e){var t=e.className,n=D()(e,ve);return Object(i.b)(qe,Object.assign({className:q()(t,"Catalog-SecondLevelTitle"),pl:"10px",fontWeight:"400",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))}},We=function(){return Object(i.c)(U.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(i.b)(U.Box,{size:"160px",mb:"10px",children:Object(i.b)(U.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(i.b)(U.Text,{color:"GBK05A",fontSize:"12px",lineHeight:"19px",textAlign:"center",children:"在内容中设置标题会在此展示"})]})},Ke=function(e){var t=e.isCollapsed,n=e.isCollapsedChange,r=e.contentRootLeft,a=e.inEditor,o=e.onClose,c=e.setShownCatalogModal,l=e.shouldCollapse;return Object(i.c)(U.Flex,{px:"10px",py:"8px",bg:"GBK99A",alignItems:"center",justifyContent:"space-between",color:"GBL05A",css:Object.assign({width:"100%",height:"40px",borderRadius:t?!a&&!l&&r>=190?"4px 0px 0px 4px":"0px 4px 4px 0px":"4px",zIndex:"1",boxShadow:"0px 1px 3px rgba(18, 18, 18, 0.1)"},t&&(l||r<190)?{position:"relative",top:"50px"}:{position:"sticky",top:"0"}),children:[Object(i.c)(U.Flex,{alignItems:"center",children:[Object(i.b)(ue,{size:15,text:!0,center:!0}),Object(i.b)(F.c,{as:U.Text,zaType:"Button",zaText:!0,shouldTrackShow:!0,shouldTrackClick:t,ml:"10px",fontSize:"14px",css:t&&{cursor:"pointer",whiteSpace:"nowrap"},onClick:function(){t&&(l||r<190?c(!0):n(!1))},children:t&&!a&&!l&&r>=190?"展开目录":"目录"})]}),a&&Object(i.b)(U.Image,{src:"https://pic1.zhimg.com/v2-6264c104a2b3efcd0bd3c4876232aec3.png",onClick:o,css:{width:"15px",height:"15px",cursor:"pointer"}}),!a&&!t&&Object(i.b)(F.a,{as:U.Text,zaType:"Button",zaText:"收起目录",p:"2px 6px",bg:"GBK10A",color:"GBL05A",fontSize:"12px",lineHeight:"16px",css:{borderRadius:"10px",cursor:"pointer"},onClick:function(){n(!0)},children:"收起"})]})},Ze=function(e){var t,n,r=e.isCollapsed,a=e.inEditor,o=e.catalogRef,c=e.contentRoot,s=e.catalogLength,u=e.contentRootLeft,d=e.shouldCollapse,b=D()(e,ge),p=Object(f.useState)(0),h=Oe(l.a,p,2),m=h[0],v=h[1];return Object(f.useEffect)((function(){var e,t=null===(e=o.current)||void 0===e?void 0:e.clientHeight;a||v(-t)}),[o,a,u]),Object(f.useEffect)((function(){if(a)if(0===s)-267!==m&&v(-267);else{var e=76+34*s,t=parseInt(getComputedStyle(o.current).maxHeight),n=-Math.min(t,e);m!==n&&v(n)}}),[a,s,o,m]),a||c?(a?(t=180,n=-180):u<190||d?(t=76,n=-20):r?(t=100,n=-120):n=-(t=Math.min(u-40,250))-30,Object(i.b)(F.b,{block:a?"EditPage":"AnswerPage",children:Object(i.b)(F.f,Object.assign({ref:o,zaType:"Block",as:U.Box,css:{position:"sticky",top:0,width:t,marginLeft:n,marginBottom:m,zIndex:1}},b))})):null},Qe=function(e){var t=e.catalogContainerRef,n=e.isShowScrollerArrow,r=e.catalog,a=e.isCollapsed,o=e.cursor,c=e.handleScroll,s=e.handleAction,u=e.inEditor,d=e.maskGradientColor,b=Object(f.useState)(!1),p=Oe(l.a,b,2),h=p[0],m=p[1],v=Object(f.useState)(!1),g=Oe(l.a,v,2),O=g[0],j=g[1],y=$()((function(){var e;(null===(e=t.current)||void 0===e?void 0:e.scrollTop)<20?m(!1):m(!0);var n=t.current||{},r=n.scrollHeight,a=n.clientHeight,o=n.scrollTop;j(!(r-a-o<20))}),100);return Object(f.useEffect)((function(){var e=t.current;if(e)return e.addEventListener("scroll",y),function(){return e.removeEventListener("scroll",y)}}),[t,y]),Object(i.b)(U.Box,{mt:"20px",ref:t,css:function(e){return Object.assign({maxHeight:"calc(100vh - 200px)",overflow:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},n&&{"&::before, &::after":{content:'" "',position:"absolute",width:"calc(100% - 15px)",height:"36px",pointerEvents:"none",marginLeft:"15px",zIndex:1,transition:"opacity .2s ease-in-out"},"&::before":{opacity:h?1:0,top:"60px",background:"linear-gradient(180deg, ".concat(e.colors[d]," 0%, ").concat(e.colorMod(e.colors[d]).alpha(0)," 100%)")},"&::after":{opacity:O?1:0,bottom:"20px",background:"linear-gradient(180deg, ".concat(e.colorMod(e.colors[d]).alpha(0)," 0%, ").concat(e.colors[d]," 100%)")}})},children:Object(i.b)(U.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",children:r.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,l=e.status,d=e.index,f=He[t]||Ge;return l!==Ae?Object(i.b)(f,{targetId:r,handleScroll:c,handleAction:s,index:d,status:l,isCollapsed:a,inEditor:u,active:o===(r||d),children:n},String([r,d])):null}))})})},Ye=function(e){var t=e.catalog,n=e.className,r=e.inEditor,a=e.scrollOffset,o=void 0===a?0:a,c=e.onClose,s=e.contentRoot,u=e.onChange,d=e.catalogRef,b=e.shouldCollapse,p=e.maskGradientColor,h=void 0===p?"GBK10A":p,m=Object(f.useRef)(),v=Object(f.useRef)(),g=d||m,O=Object(f.useState)(!r),j=Oe(l.a,O,2),y=j[0],w=j[1],C=Object(f.useState)(0),k=Oe(l.a,C,2),x=k[0],S=k[1],A=Object(f.useState)(!1),T=Oe(l.a,A,2),R=T[0],E=T[1],N=Object(f.useState)(null),B=Oe(l.a,N,2),z=B[0],P=B[1],_=Object(f.useState)(!1),L=Oe(l.a,_,2),M=L[0],D=L[1];Le(null==g?void 0:g.current,s,o);var U=Object(f.useCallback)((function(e,t){if(r){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(I.g)(a,o)}))}}}),[r,o]),F=Object(f.useCallback)((function(e,n,r){var a=document.querySelector(".DraftEditor-editorContainer");if(a){var o=Array.from(a.querySelectorAll("h2,h3"))[n].getAttribute("data-offset-key").split("-")[0];t[n].status=Ae,u(o,r)}}),[t,u]);Object(f.useEffect)((function(){if(!b&&s){var e=s.getBoundingClientRect().left;S(e),e>=190&&w(!1)}}),[s,b]);var V=null==v?void 0:v.current;Object(f.useEffect)((function(){V&&V.scrollHeight>V.clientHeight&&D(!0)}),[V]);var G=Object(f.useMemo)((function(){return null==t?void 0:t.filter((function(e){return e.status!==Ae}))}),[t]),H=G.length,W=$()((function(){var e,n,a;if(!H||r||y||(n=null,a=Object(I.k)(),t.forEach((function(e){if(e.status!==Ae){var t=document.querySelector("#"+e.targetId);(null==t?void 0:t.getBoundingClientRect().top)<=a+2&&(n=e.targetId)}})),n!==z&&P(n)),null!=g&&g.current){var o=null!=s?s:null==g||null===(e=g.current)||void 0===e?void 0:e.parentElement;if(o&&null!=g&&g.current){var i=o.getBoundingClientRect(),c=i.bottom,l=i.height,u=getComputedStyle(o),d=u.paddingTop,f=u.marginTop,b=g.current.getBoundingClientRect(),p=b.bottom,h=b.height;c-p<Math.min(0,l-(h+parseInt(d)+parseInt(f)))?g.current.style.visibility="hidden":g.current.style.visibility="visible"}}}),100);return Object(f.useEffect)((function(){return document.addEventListener("scroll",W),function(){document.removeEventListener("scroll",W)}}),[s,W]),r||H&&s?Object(i.c)(Ze,{catalogRef:g,catalogLength:H,inEditor:r,isCollapsed:y,contentRoot:s,contentRootLeft:x,shouldCollapse:b,className:q()(n,"Catalog","isCatalogV2",{isCollapsed:y}),pb:"20px","data-za-detail-view-name":"正文",children:[Object(i.b)(Ke,{inEditor:r,isCollapsed:y,contentRootLeft:x,setShownCatalogModal:E,shouldCollapse:b,isCollapsedChange:w,onClose:c}),(x>=190||b||r)&&(H?Object(i.b)(Qe,{catalogContainerRef:v,isShowScrollerArrow:M,catalog:t,isCollapsed:y,cursor:z,handleScroll:U,handleAction:F,inEditor:r,maskGradientColor:h}):Object(i.b)(We,{})),Object(i.b)(Ve,{shown:R,catalog:G,onClose:function(){return E(!1)}})]}):null},Je=n(154),Xe=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];function $e(e){var t=e.className,n=e.isDirectory,r=void 0!==n&&n,a=e.extension,o=function(e){return"https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(e,".svg")}(r?"folder":function(e){var t=Xe.find((function(t){return t.extensionList.includes(e)}));return t?t.type:"other"}(a));return Object(P.g)("img",{className:q()("FileExtensionIcon",t),src:o})}var et={baidu:"百度网盘"};function tt(e){var t=e.component,n=void 0===t?"a":t,r=e.className,a=e.href,o=e.type,i=void 0===o?"file":o,c=e.name,l=e.extension,s=e.size,u=e.source,d=e.onRef,b=e.onClick,p=e.onMouseDown,h=Number(s);return Object(P.g)(n,{className:q()("FileLinkCard",r),href:a,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:d,onClick:b,onMouseDown:p},Object(P.g)($e,{className:"FileLinkCard-icon",isDirectory:"directory"===i,extension:l}),Object(P.g)("div",{className:"FileLinkCard-info"},Object(P.g)("div",{className:"FileLinkCard-name"},c),Object(P.g)("div",{className:"FileLinkCard-meta"},Boolean(h)&&Object(P.g)("div",{className:"FileLinkCard-size"},Object(Je.unitPrefix)(h)),Boolean(h)&&u&&Object(P.g)(f.Fragment,null," · "),u&&Object(P.g)("div",{className:"FileLinkCard-source"},function(e){return et[e]||e}(u)))))}var nt=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,rt=function(e){return e?e.replace(nt,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(I.l)(t,{decodeValue:!0}),a=r.href,o=void 0===a?"":a,i=r["data-file-type"],c=r["data-file-extension"],l=r["data-file-size"],s=r["data-file-source"],u=Object(I.i)(n);return Object(Y.renderToStaticMarkup)(Object(P.g)(tt,{href:o,name:u,type:i,extension:c,size:l,source:s}))})):e},at=function(e){return{alignItems:"center",backgroundColor:e.colorMod(e.colors.GBK10A).alpha(.88),borderRadius:"12px",boxSizing:"border-box",display:"flex",margin:"1em auto",maxWidth:"100%",overflow:"hidden",padding:"12px",position:"relative",width:"390px"}},ot=function(e){return Object.assign({color:e.colors.GBK02A,fontSize:"15px",fontWeight:500,lineHeight:"21px"},Object(G.a)(2))},it=function(e){return{color:e.colors.GBK06A,fontSize:"12px",display:"flex",lineHeight:"14px",marginTop:"5px"}},ct=n(1255),lt=n(26),st=n.n(lt),ut=n(884),dt=n(1667);function ft(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var bt,pt,ht,mt="https://pic1.zhimg.com/v2-cf70d0759d787c70091857151c1cad4a.jpeg",vt={"img[data-uncomfortable]":{content:"url(".concat((bt=16/9*194,pt=194,ht='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(bt," ").concat(pt,'">')+'<foreignObject width="'.concat(bt,'" height="').concat(pt,'">\n      <div xmlns="http://www.w3.org/1999/xhtml" style="font-size: 13px; font-family: -apple-system, BlinkMacSystemFont, Microsoft YaHei, sans-serif; color: #fff; width:100%; height:').concat(pt,'px;">\n        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">\n          ').concat('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="currentColor"><path d="M8 3.65a7 7 0 00-1.353.128.65.65 0 11-.25-1.275A8.3 8.3 0 018 2.35c2.387 0 4.172.954 5.357 2.125C14.511 5.615 15.15 7.022 15.15 8c0 .621-.257 1.391-.699 2.134a7.076 7.076 0 01-1.403 1.68l.495.46a.65.65 0 11-.886.951l-.998-.929a.645.645 0 01-.104-.097L9.73 10.501a.647.647 0 01-.29.301 3.15 3.15 0 01-4.313-4.094.647.647 0 01.234-.275L3.908 5.08a5.774 5.774 0 00-1.283 1.522C2.282 7.198 2.15 7.707 2.15 8c0 .522.41 1.616 1.407 2.6.965.954 2.43 1.75 4.443 1.75.468 0 .905-.043 1.311-.12a.65.65 0 01.243 1.277A8.322 8.322 0 018 13.65c-2.387 0-4.172-.954-5.357-2.125C1.49 10.385.85 8.978.85 8c0-.598.238-1.333.648-2.046A7.054 7.054 0 012.95 4.188l-.547-.509a.65.65 0 11.886-.951l8.8 8.194a5.793 5.793 0 001.244-1.453c.372-.624.516-1.163.516-1.469 0-.522-.41-1.616-1.407-2.6-.965-.954-2.43-1.75-4.443-1.75zM6.29 7.296a1.85 1.85 0 002.534 2.36l-2.535-2.36zM8 4.85a.65.65 0 100 1.3 1.85 1.85 0 011.843 1.694.65.65 0 101.296-.11A3.15 3.15 0 008 4.85z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>','\n          <div style="margin: .6em 0 1.2em">该图片有可能会引起不适</div>\n          <button style="padding: 4px 1em; font-size: 1.1em; color: inherit; background: none; border: 1px solid rgba(255,255,255,.5); border-radius: 9999px;">继续查看</button>\n        </div>\n      </div>\n    </foreignObject>')+"</svg>","data:image/svg+xml,".concat(encodeURIComponent(ht).replace(/\(/g,"%28").replace(/\)/g,"%29"))),")"),width:"100%",height:194,background:"url(".concat(mt,") no-repeat rgba(191, 191, 191, 0.7)"),backgroundSize:"cover",cursor:"pointer!important"}},gt=function(e){var t=e.node,n=e.onClick,r=t.dataset.original||t.dataset.thumbnail,a=Object(ut.a)({once:!0,rootMargin:"1000px"}),o=ft(l.a,a,2),c=o[0],s=o[1];return Object(i.c)("div",{ref:c,css:{position:"relative",width:"100%",height:194,overflow:"hidden",background:"url(".concat(mt,") no-repeat rgba(191, 191, 191, 0.7)"),backgroundSize:"cover"},children:[Object(i.b)("img",{src:s?Object(A.imgUrl)(r,"m"):"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'></svg>",width:"100%",height:"100%",alt:"",css:st()({position:"absolute",display:"none"},"@supports (backdrop-filterX: blur(0px))",{display:"block"})}),Object(i.c)(F.f,{as:U.Flex,zaType:"Image",zaModuleId:"special_picture",zaAction:"Refresh",shouldTrackClick:!0,tabIndex:0,role:"button",onClick:n,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),n(e))},flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"13px",color:"#fff",height:"100%",css:st()({},"@supports (backdrop-filterX: blur(0px))",{backdropFilter:"blur(50px)"}),children:[Object(i.b)(dt.a,{size:18}),Object(i.b)(U.Text,{m:".6em 0 1.2em",children:"该图片有可能会引起不适"}),Object(i.b)(U.Text,{p:"4px 1em",fontSize:"1.1em",css:{border:"1px solid rgba(255,255,255,.5)",borderRadius:9999},children:"继续查看"})]})]})},Ot=n(1287),jt=n(1377),yt=n(64);function wt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ct=Object(I.h)({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:Ot.a}),kt=function(e){var t=e.contentType,n=e.token,r=e.root,a=e.mcnLinkCardProps,o=e.isAuthor,i=e.urlOrigin,c=void 0===i?"":i,s=Object(f.useState)(null),u=wt(l.a,s,2),d=u[0],b=u[1],p=Object(f.useState)(!1),h=wt(l.a,p,2),m=h[0],v=h[1];return Object(f.useEffect)((function(){var e=r&&r.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&Object(I.j)("".concat(c,"/api/v4/mcn/v2/linkcards?content_type=").concat(t,"&token=").concat(n)).then((function(e){var t=e.data;t&&(b(t),v(!0))})).catch((function(){v(!0)}))}),[r]),m&&Object(yt.jsx)(jt.a,{children:Object(yt.jsx)(Ct,Object.assign(Object.assign({},a),{},{originalData:d,root:r,isAuthor:o}))})},xt=n(945),St=n(5),At=n(949),Tt=n.n(At);function Rt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Et=Object(I.h)({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,r=Object(f.useRef)(!1),a=Object(f.useState)({}),o=Rt(l.a,a,2),i=o[0],c=o[1],s=Object(f.useState)(!1),u=Rt(l.a,s,2),d=u[0],b=u[1];return Object(f.useEffect)((function(){Object(I.j)("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then((function(e){var n=Object(St.camelizeKeys)(e)||{},r=n.title,a=n.desc,o=n.cover,i=n.button,l=n.resourceId,s=n.resourceName,u=n.price,d=n.error,f={};!Tt()(e)&&Tt()(d)&&(f=st()({},t,{id:t,skuId:l,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:r,subtitle:a,price:{price:u},goodsImg:{imgUrl:o,imgShape:"rectangle",cornerText:s},goodsUrl:{url:null==i?void 0:i.url},btnText:"去查看"}})),c(f),b(!0)})).catch((function(){b(!0)}))}),[]),d&&!Tt()(i)?Object(yt.jsx)(jt.a,{children:Object(yt.jsx)(Ot.a,Object.assign(Object.assign({id:t,ref:function(e){e&&!e.classList.contains("GoodsRecommendCard-placeholder")&&!1===r.current&&(J.a.setModule(e,{module:"Content"},{card:{content:{id:t}}}),Object(xt.onViewedOnce)(e,(function(){J.a.trackCardShow(e,{id:7203})})),r.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:i},{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1}),{},{onClick:function(e){J.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}}))}):null}}),It=n(193),Nt=n.n(It),Bt=function(e){var t=e.referenceList,n=e.onClick,r=e.listRef;return Object(P.g)(f.Fragment,null,Object(P.g)("h2",null,"参考"),Object(P.g)("ol",{className:"ReferenceList",onClick:n,ref:r},Nt()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),r=n.length>1?Object(P.g)(b.a.Fragment,null,Object(P.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(P.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(P.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(P.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(P.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},r,e.text&&Object(P.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(P.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))},zt=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,Pt=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,r=[];return n=n.replace(zt,(function(e,n){var a=Object(I.l)(n,{decodeValue:!0}),o=a["data-text"],i=void 0===o?"":o,c=a["data-url"],l=void 0===c?"":c,s=a["data-numero"],u=t?"ref_".concat(t,"_").concat(s):"ref_".concat(s),d=r.filter((function(e){return e.refKey===u})),f="".concat(u,"_").concat(d.length);r.push({refKey:u,text:i,url:l,numero:s});var b=[i,l].filter(Boolean).join(" ");return Object(Y.renderToStaticMarkup)(Object(P.g)("sup",{"data-text":i,"data-url":l,"data-numero":s,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":b,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(P.g)("a",{id:f,href:"#".concat(u),"data-reference-link":!0,"aria-labelledby":u},"[",s,"]")))})),r.length?n=n.concat(Object(Y.renderToStaticMarkup)(Object(P.g)(Bt,{referenceList:r}))):n}(t,e)}},_t=function(e,t){var n=Object(s.a)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var r=e.target.getAttribute("href"),a=t.querySelector(r);if(a){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);a.focus({preventScroll:!0}),Object(I.g)(a),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(f.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},Lt=n(1396),Mt=n(1256),Dt=n(469);var Ut=function(e){var t=this;return e.length?function(n,r){for(var a=e.length-1,o=n;a>=0;)o=e[a].call(t,o,r),a--;return o}:d.a},Ft=n(1630),Vt=n(40),qt=n(1028),Gt=["root","parentType","parentId"];function Ht(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Wt=function(e){var t=e.root,n=e.parentType,r=e.parentId,c=Object(o.default)(e,Gt),l=Object(f.useState)(),u=Ht(a.a,l,2),d=u[0],b=u[1];Object(qt.a)({videoId:null==d?void 0:d.videoId,iframeRef:null==d?void 0:d.videoIframeRef});var p=Object(s.a)((function(e){var t="";return[Ft.a.zvideo,Ft.a.answer].includes(n)&&(t="?".concat(new URLSearchParams([["itemId",r],["itemType",n]]).toString())),"https://".concat(Vt.a.videoHost,"/video/").concat(e).concat(t)})),h=Object(s.a)((function(e){var t=e.videoId,n=e.videoIframeRef;t&&null!=n&&n.current&&b({videoId:t,videoIframeRef:n})}));return Object(i.b)(i.a,{children:Object(i.b)(Lt.b,Object.assign(Object.assign({onLinkCardPlayerLoaded:h,getVideoUrl:p,useZVideoLinkCard:!1},c),{},{root:t}))})},Kt=["onRef","htmlProcessors","linkCardInfo","zvideoLinkCardProps","adLinkCardProps","mcnLinkCardProps","eduCardProps","mkSkuLinkCardProps","html","sourceId","shouldShowCatalog","shouldCatalogCollapse","shouldFoldCatalog","referenceLinkProps","useCatalogV2","isAuthor","maskGradientColor","isVideoAnswer"];function Zt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Qt=function(e){var t=e.onRef,n=e.htmlProcessors,c=void 0===n?[]:n,l=e.linkCardInfo,s=e.zvideoLinkCardProps,u=e.adLinkCardProps,d=e.mcnLinkCardProps,b=e.eduCardProps,p=e.mkSkuLinkCardProps,h=e.html,m=e.sourceId,v=e.shouldShowCatalog,O=e.shouldCatalogCollapse,j=e.shouldFoldCatalog,y=e.referenceLinkProps,w=e.useCatalogV2,C=e.isAuthor,k=e.maskGradientColor,x=e.isVideoAnswer,S=void 0!==x&&x,A=Object(o.default)(e,Kt),T=u||{},R=T.parentType,N=T.parentId,B=Object(f.useState)(null),z=Zt(a.a,B,2),P=z[0],_=z[1],M=Object(g.a)(),D=Object(Dt.a)(),U=Ut([].concat(Zt(r.a,c),[Pt(),rt,ct.b,_e(w)]));Object(Lt.c)(P,s,l),_t(P,y),Le(P);var F=Object(f.useMemo)((function(){return ze(h,m)}),[h,m]).catalog;return Object(i.c)(i.a,{children:[Object(ct.c)(P),v&&j&&Object(i.b)(Se,{root:P}),Object(i.b)(L,Object.assign(Object.assign({},u),{},{root:P})),Object(i.b)(Et,Object.assign(Object.assign({},p),{},{root:P})),Object(i.b)(Wt,Object.assign(Object.assign({parentId:N,parentType:R,isVideoAnswer:S},s),{},{root:P})),kt({root:P,mcnLinkCardProps:d,contentType:R,token:N,isAuthor:C}),Object(Mt.c)({root:P,createLinkCardPortal:I.h,eduCardProps:b}),v&&w&&(null==F?void 0:F.length)>0&&Object(i.b)(Ye,{catalog:F,inEditor:!1,scrollOffset:52,contentRoot:P,shouldCollapse:O,maskGradientColor:k}),Object(i.b)(I.f,Object.assign({ref:Object(E.a)(t,_),css:function(e){return Object.assign(Object.assign({},function(e){return{".FileLinkCard":at(e),".FileLinkCard-icon":{flexShrink:0,height:"30px",width:"30px"},".FileLinkCard-info":{marginLeft:"12px"},".FileLinkCard-name":ot(e),".FileLinkCard-meta":it(e),".FileLinkCard-source":{whiteSpace:"pre"}}}(e)),D&&vt)},html:U(h,{sourceId:m,theme:M,shouldShowCatalog:v,shouldFoldCatalog:j,linkCardInfo:l})},A))]})},Yt=n(42);function Jt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Xt={},$t=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),r=n.split("."),o=Jt(a.a,r,2),i=o[0],c=o[1],l=i.split("_"),s=Jt(a.a,l,2)[1],u="webp"===c||"gif"===c?c:"image",d=Object(Yt.e)({appName:"heifetz"})("".concat(u,".").concat(s,".unknown.RichText"));switch(e){case"loadstart":Xt[n]=Date.now();break;case"load":if(Xt[n]){var f="".concat(d,".success");Yt.b.increment({raw:"".concat(f,".count")}),Yt.b.timing(f,Date.now()-Xt[n]),delete Xt[n]}break;case"timeout":Xt[n]&&(Yt.b.increment({raw:"".concat(d,".timeout.count")}),delete Xt[n]);break;case"error":Xt[n]&&(Yt.b.increment({raw:"".concat(d,".failure.count")}),delete Xt[n])}};function en(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var tn=function(e){return Object(i.b)(I.a,Object.assign(Object.assign({onLoadStateChange:$t},e),{},{useMp4:!0}))},nn=function(e){var t=e.node,n=Object(Dt.a)(),r=t.dataset.thumbnail,o=n&&"uncomfortable"in t.dataset,c=function(){return r?"load-gif":"load-image"},l=Object(f.useState)(o?"uncomfortable":c()),s=en(a.a,l,2),u=s[0],d=s[1];return"load-image"===u?Object(i.b)(I.d,{node:t,onLoadStateChange:$t}):"load-gif"===u?Object(i.b)(I.c,{node:t,Component:tn}):"uncomfortable"===u?Object(i.c)(i.a,{children:[Object(i.b)(I.e,{node:t,style:{display:"none"}}),Object(i.b)(gt,{node:t,onClick:function(){delete t.dataset.uncomfortable,d(c())}})]}):null},rn=n(20),an=n(163),on=n.n(an),cn=n(1814);function ln(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var sn=function(e){var t=e.goodsCardId,r=e.handleClose,a=Object(rn.useSelector)((function(e){return e.currentUser})),o=Object(z.a)((function(){return n.e(82).then(n.bind(null,3032))})),c=Object(cn.a)(),l=Object(s.a)((function(e){var t=e.id,n=e.sourceId,r=e.url,a=e.app_schema_ios,o=e.app_schema_android;c({id:t,source:n,url:r,appSchemaIos:a,appSchemaAndroid:o})}));return t?Object(i.b)(o,{showModal:Boolean(t),id:t,userId:a,clientId:on.a.get("_zap"),onClose:r,onSelectCard:l}):null};function un(e){var t=e.content,n=e.className,r=Object(v.b)(),a={"KfeCollection-NovelDisplayBlock-Dark":Object(g.a)().isDarkMode,"KfeCollection-NovelDisplayBlock-Pc":!r.Mobile};return Object(f.useEffect)((function(){var e=Array.from(document.querySelectorAll('img[data-novel="role-image"]')),t=r.Mobile?"openInApp":"zh-lightbox-thumb";e.forEach((function(e){e.className="".concat(e.className," ").concat(t)}))}),[r.Mobile]),b.a.createElement("div",{className:q()("KfeCollection-NovelDisplayBlock",n,a),dangerouslySetInnerHTML:{__html:t}})}un.propTypes={content:B.a.string.isRequired};var dn=un;function fn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var bn=function(e){var t=e.className,n=e.html,r=e.lazyLoadImageProps,o=Object(f.useState)(null),c=fn(a.a,o,2),l=c[0],s=c[1];return Object(I.n)(l,r),Object(i.b)("div",{ref:s,children:Object(i.b)(dn,{className:t,content:n})})},pn=n(904);function hn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var mn=n(947);function vn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var gn=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),r=document.createElement("span");return e.parentNode.replaceChild(r,e),{target:r,data:{id:t,name:n}}},On=function(e){var t=Object(f.useState)(null),n=vn(a.a,t,2),r=n[0],o=n[1];return Object(f.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(gn).map((function(e,t){var n=e.data,r=e.target;return Object(p.createPortal)(Object(i.c)(mn.a,{user:n,children:["@",n.name]},t),r)}));o(n)}}}),[e]),r},jn=n(1107);function yn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var wn=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,r={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};r=e.getAttribute("data-lens-id")?Object.assign(Object.assign({},r),{},{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign(Object.assign({},r),{},{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(r=Object.assign(Object.assign({},r),{},{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var a=document.createElement("div");return e.parentNode.replaceChild(a,e),{target:a,data:r}},Cn=function(e,t){var n=t.hideWatermark,r=Object(f.useState)(null),o=yn(a.a,r,2),c=o[0],l=o[1];return Object(f.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var r=t.map(wn).map((function(e,t){var r=e.data,a=e.target;return Object(p.createPortal)(Object(i.b)(jn.a,{data:r,hideWatermark:n},t),a)}));l(r)}}}),[e,n]),c},kn=["className","ecommerce","html","shouldShowCatalog","sourceId","sourceType","isExpanded","entityWords","isVideoAnswer","hideWatermark"],xn=["isNovel"];function Sn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var An=function(e){var t=e.root,r=e.ecommerce,a=e.sourceType,o=e.sourceId,c=e.entityWords,l=e.hideWatermark;return Object(i.c)(i.a,{children:[Cn(t,{hideWatermark:l}),On(t),Object(i.b)(R.a,{target:"ecommercePortal",replacement:null,children:Object(S.d)(t,{ecommerce:r,getComponent:function(){return Promise.resolve().then(n.bind(null,1629))}})}),k(t,{type:a,sourceId:o,entityWords:c})]})},Tn=function(e){var t=e.className,n=e.ecommerce,c=e.html,l=e.shouldShowCatalog,u=e.sourceId,d=e.sourceType,b=e.isExpanded,p=void 0===b||b,h=e.entityWords,m=e.isVideoAnswer,v=e.hideWatermark,g=Object(o.default)(e,kn),O=Object(f.useState)(null),y=Sn(a.a,O,2),w=y[0],C=y[1],k=Object(f.useMemo)((function(){return c?x.compose.apply(void 0,Sn(r.a,[j(h)].filter(Boolean)))(c):""}),[c,h]);T(w),function(e){var t=Object(f.useState)(!1),n=hn(a.a,t,2),r=n[0],o=n[1],i=Object(F.l)().trackEvent,c=Object(s.a)(Object(pn.a)((function(){document.getSelection().toString()&&i({eventType:"Click",elementLocation:{moduleId:"text_select",type:"Text"}})}),1e3)),l=Object(s.a)((function(){document.addEventListener("selectionchange",c)})),u=Object(s.a)((function(){document.getSelection().toString()&&(i({eventType:"Click",elementLocation:{moduleId:"text_copy",type:"Text",text:r?"快捷键复制":"右键复制"}}),o(!1))})),d=Object(s.a)((function(e){"c"!==e.key&&67!==e.keyCode||!e.ctrlKey&&!e.metaKey||o(!0)}));Object(f.useEffect)((function(){if(e)return e.addEventListener("selectstart",l),e.addEventListener("copy",u),document.addEventListener("keydown",d),function(){e.removeEventListener("selectstart",l),e.removeEventListener("copy",u),document.removeEventListener("keydown",d),document.removeEventListener("selectionchange",c)}}),[e,u,d,c,l])}(w);var S=function(){var e=Object(f.useState)(null),t=ln(a.a,e,2),n=t[0],r=t[1];return[n,Object(s.a)((function(e){var t=e.currentTarget.dataset.mcnId;r(t)})),Object(s.a)((function(){return r(null)}))]}(),A=Sn(a.a,S,3),R=A[0],E=A[1],I=A[2];return Object(i.c)(i.a,{children:[Object(i.b)(Qt,Object.assign(Object.assign({},g),{},{className:t,html:p?k:c,onRef:C,ConditionalImage:nn,adLinkCardProps:{parentId:u,parentType:d},mcnLinkCardProps:{onClick:E},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},eduCardProps:{token:u,contentType:d},zvideoLinkCardProps:{enableInlinePlay:!0},shouldShowCatalog:l,sourceId:u,useCatalogV2:!0,isVideoAnswer:m})),Object(i.b)(An,{root:w,ecommerce:n,sourceId:u,sourceType:d,entityWords:h,hideWatermark:v}),Object(i.b)(sn,{goodsCardId:R,handleClose:I})]})};t.a=function(e){var t=e.isNovel,n=Object(o.default)(e,xn);if(t){var r=n.className,a=n.html;return Object(i.b)(bn,{className:r,html:a,lazyLoadImageProps:{onLoadStateChange:$t,useWebP:!1}})}return Object(i.b)(Tn,Object.assign({},n))}},1164:function(e,t,n){"use strict";var r=n(34),a=n(14),o=n(15),i=n(16),c=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(0),b=n(12),p=n.n(b),h=n(19),m=n(35),v=n(1417),g=n(2422),O=n(23),j=n(51),y=n(154),w=n(95),C=n(216),k=n(32),x=n(77),S=n.n(x),A=n(65),T=(A.p,n(443));n(1792);function R(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var I=function(e){Object(i.a)(n,e);var t=E(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:e.props.isRecognized}},e.voteUpButtonRef=Object(f.createRef)(),e.voteDownButtonRef=Object(f.createRef)(),e.onVote=e.props.authRequired((function(t){e.props.onVote(t)}),k.bb.vote),e.voteUp=function(t){var n=1===e.props.voting?["UnUpvote","neutral"]:["Upvote","up"],a=R(r.a,n,2),o=a[0],i=a[1];e.vote(t,o,i),e.voteUpButtonRef.current.focus()},e._voteDown=function(t){var n=-1===e.props.voting?["UnDownvote","neutral"]:["Downvote","down"],a=R(r.a,n,2),o=a[0],i=a[1];e.vote(t,o,i),e.voteDownButtonRef.current.focus()},e.voteDown=function(t){e.shouldShowMenu()&&e.popover.open(),e._voteDown(t)},e.vote=function(t,n,r){var a=e.props,o=a.disableAuth,i=a.handleToggleGuide,c=a.onClick,l=a.type,s=a.zaIds,u=s.voteUp,d=s.voteDown,f=n.includes("Upvote")?u:d;"article"===l&&"down"===r&&O.a.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),O.a.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,Object.assign({action:n,element:"Button"},f&&{id:f})),c?c(t,r):o?i(t,r):e.onVoteWithRecognize(n,r)},e.onVoteWithRecognize=function(t,n){var r=e.props.voting;!e.state.recognizeInfo.isRecognized||1!==r||"UnUpvote"!==t&&"Downvote"!==t?e.onVote(n):e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!0,action:t,voteType:n})})},e.handleConfirmCancelRecognize=function(){e.onVote(e.state.recognizeInfo.voteType),e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{isRecognized:!1,showRecognizeModal:!1})})},e.handleCloseCancelRecognizeModal=function(){return e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!1})})},e.handleTogglerClick=function(t){e.shouldShowMenu()||t.preventDefault(),e._voteDown(t)},e.renderVoteUpButton=function(){var t=e.props,n=t.isOwner,r=t.count,a=t.voting,o=t.disabled,i=t.hideDesc,c=1===a,l=c?"已赞同":"赞同",u=[l,Object(y.cnNiceNumber)(r)].join(" "),d=[!i&&l,0!==r&&Object(y.cnNiceNumber)(r).trim()].filter(Boolean).join(" ");return Object(s.c)(j.a,{as:m.c,zaText:c?"取消赞同":"赞同",zaType:"Button",zaAction:c?"UnUpvote":"Upvote",className:p()("VoteButton VoteButton--up",{"is-active":1===a}),disabled:n||o,onClick:e.voteUp,"aria-label":u,"aria-live":"polite",onRef:e.voteUpButtonRef,children:[Object(s.b)(v.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),d]})},e.renderVoteDownButton=function(){var t=e.props,n=t.voting,r=t.disabled,a=t.isMobile,o=-1===n,i=o?"已反对":"反对";return Object(s.b)(j.a,{as:m.c,zaText:o?"取消反对":"反对",zaType:"Button",zaAction:o?"UnDownvote":"Downvote",className:p()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":a}),disabled:r,onClick:e._voteDown,"aria-label":i,"aria-live":"polite",onRef:e.voteDownButtonRef,children:Object(s.b)(g.a,{center:!0,size:10})})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.isOwner,t=this.state.recognizeInfo,n=t.showRecognizeModal,r="UnUpvote"===t.action;return Object(s.c)("span",{ref:this.voteButtonRef,children:[Object(s.b)(T.c,{input:"v",action:this.voteUp}),Object(s.b)(T.c,{input:"d",action:this.voteDown}),this.renderVoteUpButton(),!e&&this.renderVoteDownButton(),Object(s.b)(w.b,{title:"确定".concat(r?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal,children:n&&Object(s.c)("div",{children:[Object(s.c)("div",{children:[r?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"]}),Object(s.c)(w.a,{direction:"horizontal",children:[Object(s.b)(m.c,{onClick:this.handleCloseCancelRecognizeModal,children:r?"暂不取消":"暂不选择"}),Object(s.b)(m.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize,children:r?"取消赞同":"选择反对"})]})]})})]})}}]),n}(f.Component);I.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},I.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}};var N;t.a=Object(h.compose)((function(e){return S()((function(t){return Object(s.b)(e,Object.assign(Object.assign({},t),{},{isMobile:Object(A.p)(N)}))}),e)}),C.a)(I)},1165:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),a=n(0),o=n(51),i=n(35),c=n(908),l=n(443),s=function(e){var t=e.className,n=e.onClick,s=e.label,u=e.onRef,d=e.disabled,f=e.showIcon,b=void 0===f||f;return Object(r.c)(a.Fragment,{children:[Object(r.b)(l.c,{input:"f",action:n}),Object(r.b)(o.a,{as:i.c,zaText:"收藏",zaType:"Button",zaBlock:"收藏",onRef:u,className:t,preset:"plain",onClick:n,icon:b?c.a:null,label:s,disabled:d})]})};s.defaultProps={label:"收藏"};var u=s},1180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var r=n(1544);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return r.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return r.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return r.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return r.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return r.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return r.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return r.stripHTML}})},1192:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(r.useRef)({boundaryRef:t,callback:e});return Object(r.useEffect)((function(){n.current={boundaryRef:t,callback:e}})),Object(r.useEffect)((function(){var e=function(e){var t,r=n.current,a=r.boundaryRef,o=r.callback;null!==a&&null!=a&&null!==(t=a.current)&&void 0!==t&&t.contains(e.target)||o(e)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),null}},1200:function(e,t,n){"use strict";function r(e){var t,n,r,a;return Boolean(null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(r=n.contents)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.type)}function a(e){var t,n,a,o;return!r(e)&&Boolean(null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.type)}function o(e){var t,n,r,a=null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(r=n.contents)||void 0===r?void 0:r[0];return a?"answer"===a.type?a.answer:"article"===a.type?a.article:null:null}function i(e){var t,n,r,a=null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(r=n.contents)||void 0===r?void 0:r[0];return a?"answer"===a.type?a.answer:"article"===a.type?a.article:null:null}function c(e,t){var n=e,r=t.contentAuthor;return r&&n.id!==(null==r?void 0:r.id)?r:n}function l(e){var t,n;return r(e)&&null!==(t=null===(n=o(e))||void 0===n?void 0:n.author)&&void 0!==t?t:null}n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}))},1201:function(e,t,n){"use strict";t.a=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)}},1202:function(e,t,n){"use strict";var r=n(1),a=n(670),o=n(0),i=n(58),c=function(e){var t=e.className,n=e.showRuleDesc,o=void 0!==n&&n,c=Object(a.a)().colors;return Object(r.c)(i.Box,{className:t,css:{fontSize:14,lineHeight:"22px",color:c.GBL05A,textAlign:"center",a:{textDecoration:"underline"}},children:[o&&Object(r.c)(i.Flex,{marginTop:34,fontSize:10,width:688,justifyContent:"center",children:[Object(r.c)(i.Box,{css:{width:"134px"},children:[Object(r.b)(i.Text,{css:{color:c.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频大小"}),Object(r.b)(i.Text,{fontSize:12,lineHeight:1.4,css:{color:c.GBK06A},children:"时长和大小均不限"}),Object(r.b)(i.Text,{fontSize:12,lineHeight:1.4,css:{color:c.GBK06A},children:"推荐上传大小为 5G 以内"})]}),Object(r.c)(i.Box,{css:{width:"340px",position:"relative",margin:"0 40px","&::after,&::before":{content:'""',position:"absolute",width:1,height:20,verticalAlign:"middle",top:"50%",transform:"translate(0,-50%)",backgroundColor:c.GBK09A},"&::after":{left:0},"&::before":{right:0}},children:[Object(r.b)(i.Text,{css:{color:c.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频分辨率"}),Object(r.b)(i.Text,{fontSize:12,lineHeight:1.4,css:{color:c.GBK06A},children:"最大支持 1080P"}),Object(r.b)(i.Text,{fontSize:12,lineHeight:1.4,css:{color:c.GBK06A},children:"分辨率超过 1920 *1080，会被压缩为 1920 *1080"})]}),Object(r.c)(i.Box,{css:{width:"134px"},children:[Object(r.b)(i.Text,{css:{color:c.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频格式"}),Object(r.b)(i.Text,{fontSize:12,lineHeight:1.4,css:{color:c.GBK06A},children:"支持常用视频格式"}),Object(r.b)(i.Text,{fontSize:12,lineHeight:1.4,css:{color:c.GBK06A},children:"推荐使用 mp4"})]})]}),Object(r.c)(i.Text,{marginTop:35,color:c.GBL05A,fontSize:12,children:["上传视频，即代表您已同意"," ",Object(r.b)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",css:{color:c.GBL07A},children:"知乎视频使用规范"})," ","与"," ",Object(r.b)("a",{href:"https://www.zhihu.com/term/video",target:"_blank",rel:"noopener noreferrer",css:{color:c.GBL07A},children:"《知乎视频用户协议》"})]})]})};t.a=Object(o.memo)(c)},1203:function(e,t,n){"use strict";var r=n(36),a=n(1),o=n(35),i=n(1177),c=["onClick","text"],l=function(e){var t=e.onClick,n=e.text,l=Object(r.default)(e,c);return Object(a.c)(o.c,Object.assign(Object.assign({preset:"link",onClick:t,css:{fontSize:15}},l),{},{children:[Object(a.b)(i.a,{text:!0,center:!0})," ",n]}))};l.defaultProps={text:"修改"},t.a=l},1245:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(12),i=n.n(o),c=n(51),l=n(58),s=n(23),u=n(35),d=n(32);t.a=function(e){var t=e.className,n=e.text,o=e.onFiles,f=e.zaClickId,b=e.zaBlockText,p=e.multiple,h=void 0===p||p,m=e.disabled,v=e.preset,g=e.size,O=e.icon,j=e.handleMouseEnter,y=e.handleMouseLeave,w=Object(a.useRef)(null);return Object(r.c)(r.a,{children:[Object(r.b)(c.a,{zaText:!0,zaType:"Button",as:l.Box,zaBlock:b,zaAction:"Upload",css:{display:"spread"===g?"block":"inline-block"},onMouseEnter:j,onMouseLeave:y,children:Object(r.b)(u.c,{className:i()("VideoUploadButton",t),preset:v||"primary",size:g||"spread",color:"blue",disabled:m,icon:O,onClick:function(e){f&&s.a.trackEvent(e.target,{id:f,action:"Upload"}),w.current.click()},children:n})}),Object(r.b)("input",{type:"file",className:"VideoUploadButton-fileInput",ref:w,onChange:function(){o(w.current.files,"Add"),w.current.value=null},accept:d.a.VIDEO.join(","),multiple:h})]})}},1273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},1274:function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){return null}}n.d(t,"a",(function(){return r}))},1275:function(e,t,n){"use strict";var r=n(1),a=n(12),o=n.n(a);t.a=function(e){var t=e.className;return Object(r.b)("span",{className:o()("Bull",t),children:" · "})}},1276:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return b})),n.d(t,"i",(function(){return p}));var r=n(2),a=n(1274),o=n(32),i=function(e){return"FullScreenAnswerEditor_".concat(e)},c=function(){return Boolean(window.__FullScreenAnswerEditor&&!window.__FullScreenAnswerEditor.closed)},l=function(){return Boolean(window.__FullScreenAnswerEditor&&window.__FullScreenAnswerEditor.closed)},s=function(e,t){if(!e)return null;if(c())return window.__FullScreenAnswerEditor.focus(),window.__FullScreenAnswerEditor;var n=i(e),r=window.location,a=r.search,o=r.host,l=t?"//".concat(o,"/question/").concat(e,"/answer/").concat(t,"/edit").concat(a):"//".concat(o,"/question/").concat(e,"/write").concat(a);return window.__FullScreenAnswerEditor=window.open(l,n)},u=function(e){return e?Object.keys(e).reduce((function(t,n){var a=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==a?void 0:a.isReport)}):Object.assign(Object.assign({},t),{},Object(r.a)({},n,a))}),{}):e},d=function(e){return e?{commentPermission:e.commentPermission}:e},f=function(e){return e?Object.keys(e).reduce((function(t,n){var a=e[n];return"canReward"===n?Object.assign(Object.assign({},t),{},{rewardTagline:a?o.p:""}):Object.assign(Object.assign({},t),{},Object(r.a)({},n,a))}),{}):e},b=function(e){return e?(e=f(e),Object.keys(e).reduce((function(t,n){var o=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==o?void 0:o.isReport)}):"disclaimerType"===n?Object.assign(Object.assign({},t),{},{disclaimerType:o||"none",isDisclaimerChecked:Boolean(o&&"none"!==o)}):"thankInviter"===n?Object.assign(Object.assign({},t),{},{thankInviterInfo:Object(a.a)(o)}):"thankInviterStatus"===n?t:Object.assign(Object.assign({},t),{},Object(r.a)({},n,o))}),{})):e};function p(e,t){if(!e)return{thankInviterStatus:"close",thankInviter:""};var n=e.urlToken,r=e.name,a=e.id;return{thankInviterStatus:"open",thankInviter:"answer"===t?a:JSON.stringify({url_token:n,name:r,id:a})}}},1277:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l}));var r=function(e){var t=e.title,n=e.id,r=e.topics,a=e.answerCount,o=e.commentCount,i=e.created,c=e.updatedTime,l=e.visitsCount,s=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:r.map((function(e){return e.name})).join(","),answerCount:a,commentCount:o,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*c).toISOString(),"zhihu:visitsCount":l,"zhihu:followerCount":s}};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var o={auto_notif:"auto_notif",header:"header",question_header_card:"question_header_card",force_launch_notif:"force_launch_notif",agree:"agree",disagree:"disagree",comment:"comment",star:"star",comment_list:"comment_list",comment_more:"comment_more",more_answers:"more_answers",bottom:"bottom",capsule:"capsule",follow:"follow",write_answer:"write_answer"},i={expand_answer:"force_launch_notif",expand_answer1:"auto_notif",expand_answer2:"auto_notif",up:"agree",down:"disagree",comment_answer:"comment",collect_answer:"star"},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClose,n=e.isEvaluate,r=e.isLocked,a=e.isSuggest;return t?"closed":a?"suggested":n?"evaluated":r?"locked":""},l=function(e){return"#draft"===e.hash||"#write"===e.hash||"write"in e.query}},1294:function(e,t,n){"use strict";var r=n(34),a=n(14),o=n(15),i=n(86),c=n(16),l=n(17),s=n(8),u=n(1),d=n(439),f=n(1340),b=n(287),p=n(1003),h=n(1777),m=n(916),v=n(12),g=n.n(v),O=n(3),j=n.n(O),y=n(0),w=n(20),C=n(48),k=n(58),x=n(19),S=n(23),A=n(499),T=n(437),R=n(35),E=n(333),I=n(262),N=n.n(I);function B(e,t){var n=e.trackUrl,r=void 0===n?[]:n,a=e.id;if(0===r.length)return null;var o="other";t.Android?o="android":t.iOS&&(o="ios");var i=N()();return r.forEach((function(e){(new Image).src=e.replace("__OS__",o).replace("__ADPLATFORM__",o).replace("__REQUESTID__",i).replace("__SESSIONID__",i).replace("__ATOKEN__",a).replace("__PAGETYPE__","article")})),{os:o,pageId:a,sessionId:i,pageType:"article"}}var z=n(2),P=n(6),_=Object(P.a)("brand",["GET_URL"]),L=n(1812),M=n(1901),D=n(1421),U=n(1065),F=n(1165),V=n(1485),q=n(1899),G=n(1348),H=n(1426),W=n(216),K=n(1601),Z=n(486),Q=n(65),Y=n(1027),J=n(1373),X=n(961),$=n(1366),ee=n(1374),te=n(1361),ne=n(993),re=n(1164),ae=n(1886),oe=n(32),ie=n(378),ce=n(1639),le=n(1423),se=(n(1813),n(953)),ue=n(1449),de=n(1004),fe=n(963),be=n(950),pe=n(1075),he=n(476),me=n(1e3),ve=n(1478);function ge(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var je=function(e){return"plain"===e||"special-plain"===e},ye=je;function we(e){var t=Object(G.b)(e);return t?Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var Ce=function(e){Object(c.a)(n,e);var t=Oe(n);function n(){var e,r,o,c,l,s,d;Object(a.a)(this,n);for(var f=arguments.length,p=new Array(f),h=0;h<f;h++)p[h]=arguments[h];return(e=t.call.apply(t,[this].concat(p))).state={commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1,contentExpanded:!1,hasFetchedLabels:!1,shownCatalogModal:!1,imageAspectRatio:1.6},e.disableAuth=(r=e.props,o=r.router,c=(o=void 0===o?{}:o).location,l=(c=void 0===c?{}:c).pathname,s=r.isMobile,d=r.currentUser,s&&!d&&!l.startsWith("/topic")),e.handleCommentsShown=function(t,n){e.props.shouldOia?e.createOpenInAppHandler("comment_article")(t):e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleFavButtonClick=function(t){var n=e.props,r=n.zaInfos.favlists;n.shouldOia?e.createOpenInAppHandler("comment_article")(t):(S.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},r&&{id:r})),e.disableAuth?e.handleToggleGuide():e.handleFavlistsShown())},e.handleFavlistsShown=e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),oe.bb.favlists),e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.toggleCatalogModal=function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})},e.handleVote=function(t){var n=e.props,r=n.article.id;(0,n.updateArticleVote)(r,t)},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;S.a.trackEvent(Object(i.a)(e),Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.loadArticleConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,r=t.article,a=t.loadArticleConcernedVoters,o=t.currentUser;!n&&o&&a(r.id)},e.handleToggleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.trackUserAction,a=void 0===r||r,o=e.props,i=o.onToggleExpand,c=o.getTrackUrl,l=o.article,s=o.ua,u=o.trackPromotionClick;if(i&&i(t),t&&(e.loadArticleConcernedVoters(),a)){var d=l.trackUrl?Promise.resolve():c(l.id);d.then((function(){return B(e.props.article,s)})),u&&u()}e.setState({contentExpanded:t})},e.renderPrefix=function(){var t=e.props.article,n=t.labelInfo,r=t.hermesLabel,a=e.state.contentExpanded;return!n&&!r||a?null:Object(u.b)($.a,{labelInfo:n||r})},e.createOpenInAppHandler=function(t){var n=e.props.article.id;return function(e){e.preventDefault(),oe.E||Object(b.e)(Object(ie.a)({type:"article",id:n}),{utm_content:t})}},e.handleLike=function(t){return!!e.props.shouldOia&&(e.createOpenInAppHandler("like_article")(t),!0)},e.handleCoverImageLoad=function(t){var n=e.props.article,r=t.target;n.imageUrl===e.coverProps.cover&&r.naturalWidth&&e.setState({imageAspectRatio:r.naturalWidth/r.naturalHeight})},e}return Object(o.a)(n,[{key:"renderLabels",value:function(){if(!this.state.contentExpanded)return null;var e=this.props,t=e.article,n=e.useNewLabels,r=t.annotationDetail;return Object(u.b)(ee.a,{useOldLabels:!n,annotationProps:r&&{annotationDetail:r},item:t})}},{key:"renderArticleExtraInfo",value:function(){var e=this.props,t=e.actor,n=e.action,r=e.article,a=r.voteupCount,o=r.id,i=r.type,c=e.concernedUpvoters,l=void 0===c?[]:c,s=e.blockStrategies,d=(s=void 0===s?{}:s).isBlockingVote,f=t&&t.urlToken;return!a||d?null:Object(u.b)("div",{className:"ArticleItem-extraInfo",children:Object(u.b)(ae.a,{id:o,type:i,voteupCount:a,upvotedFollowees:null==l?void 0:l.filter((function(e){return f!==e.urlToken})),too:"voted"===n})},"articleExtraInfo")}},{key:"renderMeta",value:function(){var e=function(e){var t=e.title,n=e.id,r=e.created,a=e.updated,o=e.commentCount,i=e.imageUrl,c=e.thumbnail;return{headline:t,url:"".concat(oe.m,"/p/").concat(n),datePublished:new Date(1e3*r).toISOString(),dateModified:new Date(1e3*a).toISOString(),commentCount:o,image:i||c}}(this.props.article);return Object.keys(e).map((function(t){return Object(u.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderSuggestEdit",value:function(){var e=this.props.article,t=e.isNormal,n=void 0===t||t,r=e.suggestEdit,a=(r=void 0===r?{}:r).title,o=r.status,i=r.reason;return o&&!n?Object(u.c)("div",{className:"AnswerItem-statusContent",children:[Object(u.b)("div",{className:"AnswerItem-statusReason",children:i}),Object(u.c)("div",{className:"AnswerItem-statusDescription",children:["作者修改内容通过后，文章会重新显示恢复正常 ",Object(u.b)("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink",children:a})]})]}):null}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.article,i=a.article,c=i.id,l=i.title,s=i.author,b=i.excerpt,p=i.content,v=i.voteupCount,O=i.voting,j=i.type,y=i.created,w=i.updated,C=i.imageUrl,x=i.commentCount,S=i.adminClosedComment,A=i.annotationDetail,T=i.vessayInfo,I=i.creationRelationship,N=i.ipInfo,B=a.preset,z=a.lastreadTouchable,P=a.itemProp,_=void 0===P?"article":P,G=a.ua,W=a.lessExcerpt,K=a.formatContent,Z=a.zaInfos,Q=Z.expand,Y=Z.title,$=Z.voteUp,ee=Z.voteDown,ae=Z.toggleComment,ce=Z.share,Oe=Z.report,we=Z.options,Ce=Z.getCommentAction,ke=a.renderOptions,xe=a.isSticky,Se=a.handleToggleSticky,Ae=a.trackPromotionClick,Te=a.renderActionButtons,Re=a.className,Ee=a.isMobile,Ie=a.ecommerce,Ne=a.useVessayV2,Be=a.showHeightLight,ze=void 0!==Be&&Be,Pe=a.truncateDisabled,_e=void 0!==Pe&&Pe,Le=a.currentUser,Me=a.blockStrategies,De=Object(le.b)([Object(le.a)(Me)],Te),Ue=this.state,Fe=Ue.positionStatus,Ve=Ue.favlistsShown,qe=Ue.commentsShown,Ge=Ue.commentsAutoFocus,He=Ue.commentPattern,We=Ue.contentExpanded,Ke=Ue.shownCatalogModal,Ze=Ue.imageAspectRatio,Qe="".concat(oe.m,"/p/").concat(c),Ye=Le&&Le.urlToken===s.urlToken,Je=this.renderSuggestEdit(),Xe="function"==typeof Se,$e=!function(e){return"special-plain"===e}(B)&&Object(u.b)(X.a,Object.assign(Object.assign({},ye(B)&&{preset:"plain"}),{},{author:s,userLinkV2:!0,className:"ArticleItem-authorInfo"}),"authorInfo"),et=this.renderArticleExtraInfo(),tt=this.renderLabels(),nt=null==I||null===(e=I.coCreation)||void 0===e?void 0:e.refBy,rt=null==I||null===(t=I.reference)||void 0===t?void 0:t.refBy,at=We&&(nt||rt)&&Object(u.b)(k.Box,{my:"16px",children:Object(u.b)(U.CoCreationLinkCard,{type:"article",coCreationRefBy:nt,referenceRefBy:rt})}),ot=je(B)?[[$e,tt,at],et]:[[$e,tt,at,et],null],it=ge(r.a,ot,2),ct=it[0],lt=it[1],st=!Je||Ye,ut=K?K(p||b,o):p||b,dt=!Ee&&We&&Object(D.a)(o,"article"),ft=Boolean(null==T?void 0:T.enableVideoTranslate),bt=this.coverProps=function(e){return e.thumbnailExtraInfo&&"video"===e.thumbnailExtraInfo.type?{cover:e.thumbnail,hasVideo:!0}:{cover:e.imageUrl||e.thumbnail,hasVideo:!1}}(o);return Object(u.c)(be.e,{className:g()("ArticleItem",Re),onRef:function(e){n.contentItem=e},"data-zop":JSON.stringify({authorName:s.name,itemId:c,title:l,type:"article"}),data:o,link:Qe,title:Object(u.c)(u.a,{children:[Xe&&xe&&Object(u.b)(ve.a,{}),Object(u.b)(d.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(u.b)("a",Object.assign(Object.assign({href:Qe,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-element_name":"Title"},Y&&{"data-za-detail-view-id":Y}),{},{onClick:Ae,children:ze?Object(u.b)("span",{dangerouslySetInnerHTML:{__html:l},className:"ArticleItem-highlight"}):l}))})]}),meta:ct,lastreadTouchable:z,itemProp:_,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0,children:[this.renderMeta(),st?Object(u.b)(me.b,Object.assign(Object.assign(Object.assign({truncateDisabled:_e,className:g()({"ArticleItem-highlight":ze}),itemProp:"articleBody",data:o,excerpt:K?K(b,o):b,html:ut,ecommerce:Ie,onToggleExpend:this.handleToggleExpand,prefix:this.renderPrefix(),before:Object(u.c)("div",{children:[lt,C&&Object(u.b)(se.a,{mt:"10px",ratio:Ze,children:Object(u.b)(f.b,{width:"100%",height:"100%",src:C,alt:l})})]}),after:Object(u.b)(me.a,{href:Qe,created:y,updated:w,ipInfo:N})},W?{limit:74}:{}),{},{onPositionStatusChange:this.handlePositionStatusChange},bt),{},{onCoverImageLoad:this.handleCoverImageLoad,zaIds:{expand:Q},children:De({componentList:[{name:"vote",component:!E.b.includes(c)&&(Ee?Object(u.b)(te.a,{id:c,type:j,liked:Boolean(O),count:v,disabled:Ye,onClick:this.handleLike,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth},"vote"):Object(u.b)(re.a,{type:j,count:v,onVote:this.handleVote,voting:O,isOwner:Ye,handleToggleGuide:this.handleToggleGuide,zaIds:{voteUp:$,voteDown:ee}},"vote"))},{name:"comment",component:Object(u.b)("div",{css:E.b.includes(c)?{marginLeft:-24}:{},children:Object(u.b)(de.a,{onClick:this.handleCommentsShown,commentsShown:qe,commentClosed:S,count:x,positionStatus:Fe,zaInfos:{toggleComment:ae,getCommentAction:Ce}},"comment")},"comment")},{name:"catalog",component:dt&&Object(u.b)(L.a,{html:ut,sourceId:o.id,onClick:this.toggleCatalogModal},"catalog")},{name:"share",component:Object(u.b)(ne.a,{id:c,type:"article",url:Qe,title:l,authorName:s&&s.name,positionStatus:Fe,zaShareId:ce},"share")},{name:"favlist",component:(!Le||!Le.isOrg)&&Object(u.b)(F.a,{onRef:function(e){return n.favButtonRef=e},onClick:this.handleFavButtonClick,label:Ee?"":"收藏"},"favlist")},{name:"sticky",component:!Ee&&Xe&&Ye&&Object(H.a)(Le)&&Object(u.b)(R.c,{preset:"plain",onClick:Se,icon:xe?h.b:m.b,label:xe?"取消置顶":"置顶"},"sticky")},{name:"report",component:!Ye&&!Ee&&Le&&Object(u.b)(he.a,{id:c,type:j,zaReportId:Oe},"report")},{name:"vessay",component:!Ee&&Ye&&ft&&Object(u.b)(q.a,{type:"article",id:c,useVessayV2:Ne,isAuthor:Ye},"vessay")},{name:"options",component:!Ee&&(null==ke?void 0:ke((function(){return n.contentItem}),we))},{name:"annotation",component:!We&&Object(u.b)(J.a,{annotationDetail:A},"annotation")}]})})):this.renderSuggestEdit(),st&&Object(u.b)(ue.a,{content:p,type:"article",urlToken:String(c)}),this.disableAuth&&this.state.guideShown&&Object(u.b)(V.a,{redirectUrl:Qe,urlScheme:Object(ie.a)({type:"article",id:c}),buttons:[G.Wechat?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),Object(u.b)(fe.a,{parent:o,commentPattern:He,shown:qe,autoFocus:Ge,onClose:this.handleCommentsHide}),Object(u.b)(pe.a,{id:c,type:"article",shown:Ve,onClose:this.handleFavlistHide,zaEnabled:!0}),dt&&Object(u.b)(M.a,{shown:Ke,html:ut,sourceId:o.id,onClose:this.toggleCatalogModal,created:y,updated:w,author:s,zaContent:{type:"Answer",token:String(o.id)}})]})}}]),n}(y.Component);Ce.propTypes={preset:j.a.string,lessExperpt:j.a.bool,formatContent:j.a.func,renderOptions:j.a.func,zaInfos:j.a.object,trackPromotionClick:j.a.func,renderActionButtons:j.a.func},Ce.defaultProps={preset:"primary",zaInfos:{},renderActionButtons:ce.b};t.a=Object(x.compose)(Object(Y.a)((function(e){var t=e.article;return{content:{type:"Post",token:String(t.id)}}})),Object(T.b)((function(e){var t=e.article,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=(a=void 0===a?{}:a).cardShow;return Object.assign(Object.assign({module:"PostItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Post",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:1e3*t.created,parent_token:t.column&&t.column.id,author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}}},o&&{view:{id:o}}),{},{trackCardShow:r})})),C.withRouter,W.a,Object(p.d)({dataPath:"article"}),p.c,Object(w.connect)((function(e,t){var n=t.article;return{article:we(n),ua:e.env.userAgent,ecommerce:Object(A.c)(e,{type:"article",urlToken:t.article.id}),shouldOia:Object(Q.i)(e),isMobile:Object(Q.d)(e),concernedUpvoters:Object(Z.a)(e,{id:n.id}),useVessayV2:Object(Q.a)(e,K.b)===K.a}}),{updateArticleVote:Z.g,getTrackUrl:function(e){return{API:{types:_.GET_URL,endpoint:"/brand/track",method:"GET",fetchOptions:{credentials:"include",failsafe:!0,timeout:100},query:{target_url:"https://zhuanlan.zhihu.com/p/".concat(e)}},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:Object(z.a)({},e,{trackUrl:t.data||[]})}}}}},loadArticleConcernedVoters:Z.d}),$.c)(Ce)},1317:function(e,t,n){"use strict";var r=n(0),a=n(688),o="element",i="text",c="empty",l="fragment",s=function(e,t){return function e(n){var a,s=n.node;return n.type=(a=s,r.isValidElement(a)?o:function(e){return"string"==typeof e||"number"==typeof e}(a)?i:function(e){return null==e||"boolean"==typeof e}(a)?c:Array.isArray(a)?l:void 0),n.type===o?n.children=r.Children.map(s.props.children,(function(t){return e({node:t,parent:n})})):n.type===l&&(n.children=r.Children.map(s,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},u=function e(t,n){return[t].concat(null==(r=n(t))?[]:function(t){return e(t,n)}(r));var r},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&a(String(e.node),String(n.node))){var r=(c=n,l=u(e,(function(e){return e.parent})),s=u(c,(function(e){return e.parent})),d=l.findIndex((function(e){return s.includes(e)})),[l[d],l[d-1]]);i=r[1],(o=r[0]).children.splice(o.children.indexOf(i)+1,0,{node:" "}),t=!0}var o,i,c,l,s,d;return n})),t},f=function(e){if(!e)return null;var t=[],n=s(e,(function(e){e.type===i&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===l?r.Children.map(t.children.map(e),(function(e){return e})):r.createElement(t.node.type,t.node.props,r.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},b=function(e){var t=e.component,n=e.children;return r.createElement(t,{children:f(n)})};b.defaultProps={component:r.Fragment||"span"},t.CJKSpace=b},1340:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return k}));var r=n(24),a=n.n(r),o=n(30),i=n.n(o),c=n(1),l=n(670),s=n(121),u=n.n(s),d=n(0),f=n(118),b=n(884),p=n(905),h=["src","alt","srcSet","loadingStyle","onLoad","onError"],m=["src"],v=["src","width","height"];function g(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var O="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'></svg>",j=Object(d.forwardRef)((function(e,t){var n=e.src,r=e.alt,o=e.srcSet,l=e.loadingStyle,s=e.onLoad,u=e.onError,f=i()(e,h),m=Object(d.useState)(void 0),v=g(a.a,m,2),j=v[0],y=v[1],w=Object(b.a)({once:!0,rootMargin:"800px"}),C=g(a.a,w,2),k=C[0],x=C[1],S=Object(d.useState)(!0),A=g(a.a,S,2),T=A[0],R=A[1],E=!0===j?{src:n,srcSet:o,loading:"lazy"}:x?{src:n,srcSet:o}:{src:O};return Object(d.useEffect)((function(){y("loading"in HTMLImageElement.prototype)}),[]),Object(c.b)("img",Object.assign(Object.assign({},E),{},{ref:Object(p.a)(t,!1===j?k:void 0),css:Object.assign({objectFit:"cover"},T&&l),alt:r,onLoad:function(e){e.target.src!==O&&(R(!1),null==s||s(e))},onError:function(e){e.target.src!==O&&(R(!1),null==u||u(e))}},f))})),y=u()(f.findImageSpec,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)})),w=[200,480,720,1440],C=function(e,t,n){return Object(f.imgUrl)(e,y(t,t===n&&t<=200?"square":"intrinsic"))},k=Object(d.forwardRef)((function(e,t){var n=e.src,r=i()(e,m),o=Object(l.a)().colors,s=Object(d.useMemo)((function(){return[C(n,720),w.map((function(e){return"".concat(C(n,e)," ").concat(e,"w")})).join(",")]}),[n]),u=g(a.a,s,2),f=u[0],b=u[1];return Object(c.b)(j,Object.assign({src:f,srcSet:b,ref:t,loadingStyle:{backgroundColor:o.GBK10A}},r))})),x=Object(d.forwardRef)((function(e,t){var n=e.src,r=e.width,o=e.height,s=i()(e,v),u=Object(l.a)().colors,f=Object(d.useMemo)((function(){return[C(n,r,o),C(n,2*r,2*o)]}),[n,r,o]),b=g(a.a,f,2),p=b[0],h=b[1];return Object(c.b)(j,Object.assign({src:p,srcSet:"".concat(h," 2x"),ref:t,width:r,height:o,loadingStyle:{backgroundColor:u.GBK10A}},s))}))},1341:function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",(function(){return r}))},1342:function(e,t,n){"use strict";n.d(t,"a",(function(){return ve})),n.d(t,"b",(function(){return Se})),n.d(t,"c",(function(){return it})),n.d(t,"d",(function(){return at}));var r,a,o,i,c,l,s,u=n(105),d=n.n(u),f=n(30),b=n.n(f),p=n(26),h=n.n(p),m=n(24),v=n.n(m),g=n(290),O=n.n(g),j=n(25),y=n.n(j),w=n(29),C=n.n(w),k=n(18),x=n.n(k),S=n(22),A=n.n(S),T=n(28),R=n.n(T),E=n(39),I=n.n(E),N=n(103),B=n.n(N),z=n(0),P=n(3),_=n.n(P),L=n(51),M=n(485),D=n(47),U=n(1),F=n(670),V=n(428),q=n(450),G=n(58),H=n(891),W=n(1417),K=n(2422),Z=n(154),Q=n(155),Y=n(9),J=n(1591),X=n.n(J),$=n(99),ee=n(73),te=n.n(ee),ne=n(12),re=n.n(ne),ae=["newDarkColor","status","votedUpCount","onVoteUpClick","onVoteDownClick","onCancelClick"],oe=["disabled","onRef","children"],ie=["text","center"],ce=["count","className"],le=["chosenColor","fontSize"],se=["iconOrder","disabled","children","onChange"];function ue(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var a=x()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}var fe=!1,be=!1,pe=function(){var e=B()(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(be){e.next=3;break}return e.next=3,be=!0,D.a.ready().catch((function(){fe=!0}));case 3:if(!fe){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,D.a.dispatch("account/showLoginDialog",{next:t}).catch((function(e){return e}));case 7:if("object"!=typeof(n=e.sent)||"ERR_AUTH_ALREADYLOGIN"!==n.name&&"ERR_ACOUNT_NOTGUEST"!==n.name){e.next=11;break}return fe=!0,e.abrupt("return",fe);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(e){return function(){var t=B()(I.a.mark((function t(n,r){var a,o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(n,r);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),400===t.t0.status&&18e4===t.t0.code&&D.a.supportsAction("base/unLockAccount").then((function(e){return e&&D.a.dispatch("base/unLockAccount")})),t.t0.toastMsg=(null===(a=t.t0.payload)||void 0===a||null===(o=a.error)||void 0===o?void 0:o.message)||t.t0.statusMessage,t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()},me=Object(z.createContext)({loginCheck:function(){},fetcher:function(){}}),ve=function(e){var t=e.loginCheck,n=e.loginCallbackUrl,r=e.contentType,a=e.contentId,o=e.actionType,i=e.zaContentType,c=e.children;if(!n&&!pe)throw new Error("loginCallbackUrl 或 loginCheck 必传其中一个, 不提供无法完成登录后页面回跳");var l=Object(M.b)(),s=Object(z.useMemo)((function(){return{loginCheck:t||function(){return pe(n)},fetcher:he(l),contentType:r,contentId:a,actionType:o,zaContentType:i}}),[t,l,n,r,a,o,i]);return Object(U.b)(me.Provider,{value:s,children:c})};function ge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.call(this,t.apply(this,r))}}))}ve.propTypes={loginCheck:_.a.func,loginCallbackUrl:_.a.string,contentType:_.a.string,contentId:_.a.oneOfType([_.a.number,_.a.string]),actionType:_.a.string,zaContentType:_.a.string.isRequired};var Oe=function(){function e(t,n,r,a){A()(this,e),this.fetcher=a,this.contentType=t,this.contentId="".concat(n),this.actionType=r,this.path="https://www.zhihu.com/api/v4/zreaction"}return R()(e,[{key:"getParams",value:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.content_type){case"articles":return Object.assign(Object.assign({},e),{},{action_value:"red_heart"===e.action_value?"like":e.action_value});default:return e}}(Object.assign({content_type:this.contentType,content_id:this.contentId,action_type:this.actionType,action_value:e},t))}}]),e}(),je=function(e){y()(n,e);var t=de(n);function n(e,r,a){return A()(this,n),t.call(this,e,r,"vote",a)}return R()(n,[{key:"getStatus",value:function(){return this.fetcher("".concat(this.path,"/count"),{query:this.getParams("up")})}},{key:"voteUp",value:function(){return this.fetcher(this.path,{method:"POST",body:this.getParams("up")})}},{key:"voteDown",value:function(){return this.fetcher(this.path,{method:"POST",body:this.getParams("down")})}},{key:"cancelUp",value:function(){return this.fetcher(this.path,{method:"DELETE",query:this.getParams("up")})}},{key:"cancelDown",value:function(){return this.fetcher(this.path,{method:"DELETE",query:this.getParams("down")})}}]),n}(Oe),ye=function(e){return B()(I.a.mark((function t(){var n,r,a,o,i=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,n=i.length,r=new Array(n),a=0;a<n;a++)r[a]=i[a];return t.next=4,e.apply(this,r);case 4:return(o=t.sent)&&(console.log("successToast",o),D.a.dispatch("ui/showToast",{text:o})),t.abrupt("return",o);case 9:t.prev=9,t.t0=t.catch(0),console.log("errorToast",t.t0&&t.t0.toastMsg||"服务忙，请稍后再试"),D.a.dispatch("ui/showToast",{icon:"fail",text:t.t0&&t.t0.toastMsg||"服务忙，请稍后再试"});case 13:case"end":return t.stop()}}),t,this,[[0,9]])})))},we=function(e){return B()(I.a.mark((function t(){var n,r,a,o,i=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.context){t.next=2;break}throw new Error("this.context 不存在, 是否忘记包装 <ToolBarProvider /> ?");case 2:return n=this.context.loginCheck||this.loginCheck,t.next=5,n.call(this);case 5:if(!t.sent){t.next=10;break}for(r=i.length,a=new Array(r),o=0;o<r;o++)a[o]=i[o];return t.next=9,e.apply(this,a);case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return");case 11:case"end":return t.stop()}}),t,this)})))},Ce=function(e,t,n){return function(r){return B()(I.a.mark((function a(){var o,i,c,l,s=arguments;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(o=null,a.prev=1,this.state&&(o=Object.assign({},this.state),Array.isArray(n)&&0!==n.length&&n.forEach((function(e){delete o[e]}))),i=s.length,c=new Array(i),l=0;l<i;l++)c[l]=s[l];return a.next=6,r.apply(this,c);case 6:return a.abrupt("return",a.sent);case 9:if(a.prev=9,a.t0=a.catch(1),o&&this.setState(o),e&&e.call(this,a.t0,o),t){a.next=15;break}throw a.t0;case 15:case"end":return a.stop()}}),a,this,[[1,9]])})))}},ke=function(e){return B()(I.a.mark((function t(){var n,r,a,o,i,c,l=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props,r=n.disabled,a=n.disabledMessage,!r){t.next=4;break}return D.a.dispatch("ui/showToast",{text:a}),t.abrupt("return");case 4:for(o=l.length,i=new Array(o),c=0;c<o;c++)i[c]=l[c];return t.next=7,e.apply(this,i);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})))},xe=function(){var e=B()(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.supportsAction("iOS/hapticFeedback");case 2:if(!e.sent){e.next=4;break}D.a.dispatch("iOS/hapticFeedback");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=Object.freeze({NEUTRAL:Symbol("neutral"),VOTED_UP:Symbol("votedUp"),VOTED_DOWN:Symbol("votedDown"),VOTING_UP:Symbol("votingUp"),VOTING_DOWN:Symbol("votingDown"),CANCELING_UP:Symbol("cancelingUp"),CANCELING_DOWN:Symbol("cancelingDown")}),Ae=Se.NEUTRAL,Te=Se.VOTED_UP,Re=Se.VOTED_DOWN,Ee=Object.freeze({NEUTRAL:Ae,VOTED_UP:Te,VOTED_DOWN:Re}),Ie=Se.VOTING_UP,Ne=Se.VOTING_DOWN,Be=Se.CANCELING_UP,ze=Se.CANCELING_DOWN;Object.freeze({VOTING_UP:Ie,VOTING_DOWN:Ne,CANCELING_UP:Be,CANCELING_DOWN:ze});var Pe={type:"tween",duration:.2,ease:[0,0,.58,1]},_e=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(z.useRef)(e);return Object(z.useEffect)((function(){t.current=!1}),[]),t.current};function Le(e,t,n,r){var a=Object(F.a)(),o=a.colors,i=o.GBK99B,c=o.GBL01A,l=_e(),s=e?n?106:95:n?85:44,u=n||r&&a.isDarkMode?i:c;return[{initial:{width:l&&t?s:0,opacity:t?1:0},animate:{width:s,opacity:1},exit:{width:0,opacity:0},transition:Pe},{initial:!1,animate:{color:u,width:s},transition:Pe}]}var Me=Object(z.forwardRef)((function(e,t){return Object(U.b)(G.Flex,Object.assign(Object.assign({role:"button",tabIndex:0},e),{},{ref:t,bg:"transparent",overflow:"hidden",height:"36px",fontWeight:"bold",fontSize:"12px",css:{position:"relative",userSelect:"none","&:active":{opacity:"0.5 !important"}}}))})),De=Object(q.a)(Me),Ue=Object(z.forwardRef)((function(e,t){return Object(U.b)(G.Flex,Object.assign(Object.assign({},e),{},{ref:t,flexDirection:"row",alignItems:"center",justifyContent:"center",overflow:"hidden",width:"100%",height:"100%",css:{position:"absolute",top:0,left:0}}))})),Fe=Object(q.a)(Ue),Ve=Object(Y.h)(r||(r=O()(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),qe=Object(Y.h)(a||(a=O()(["\n  0% {\n    stroke-dasharray: 1, 95;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 85, 95;\n    stroke-dashoffset: -25;\n  }\n  100% {\n    stroke-dasharray: 85, 95;\n    stroke-dashoffset: -93;\n  }\n"]))),Ge=function(){return Object(U.b)("svg",{width:15,height:15,viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",css:Object(Y.f)(o||(o=O()(["\n        fill: transparent;\n        stroke: currentColor;\n        stroke-width: 5;\n        stroke-dasharray: 85, 95;\n        stroke-dashoffset: -25;\n        animation: "," 2s ease 0.5s infinite,\n          "," 2s linear infinite;\n      "])),qe,Ve),children:Object(U.b)("circle",{cx:"20",cy:"20",r:"15"})})},He=function(){return Object(U.c)("span",{css:{display:"inline-flex",alignItems:"center"},children:["​",Object(U.b)("svg",{viewBox:"0 0 35 35",width:15,height:15,css:Object(Y.f)(i||(i=O()(["\n          fill: currentColor;\n          animation: "," 1s steps(12) infinite;\n        "])),Ve),children:Object(U.c)("g",{fillRule:"evenodd",children:[Object(U.b)("path",{d:"M17.5 9c-.825 0-1.5-.675-1.5-1.5v-6c0-.825.675-1.5 1.5-1.5S19 .675 19 1.5v6c0 .825-.675 1.5-1.5 1.5",opacity:".65"}),Object(U.b)("path",{d:"M21.75 10.139a1.504 1.504 0 0 1-.549-2.05l3-5.195a1.504 1.504 0 0 1 2.049-.55c.715.413.962 1.335.549 2.05l-3 5.196a1.504 1.504 0 0 1-2.049.549",opacity:".75"}),Object(U.b)("path",{d:"M24.861 13.25a1.504 1.504 0 0 1 .55-2.049l5.195-3a1.504 1.504 0 0 1 2.05.549 1.504 1.504 0 0 1-.55 2.049l-5.196 3a1.504 1.504 0 0 1-2.049-.549",opacity:".85"}),Object(U.b)("path",{d:"M26 17.5c0-.825.675-1.5 1.5-1.5h6c.825 0 1.5.675 1.5 1.5s-.675 1.5-1.5 1.5h-6c-.825 0-1.5-.675-1.5-1.5",opacity:".9"}),Object(U.b)("path",{d:"M24.861 21.75a1.504 1.504 0 0 1 2.05-.549l5.195 3c.715.412.962 1.334.55 2.049a1.504 1.504 0 0 1-2.05.549l-5.196-3a1.504 1.504 0 0 1-.549-2.049",opacity:".2"}),Object(U.b)("path",{d:"M21.75 24.861a1.504 1.504 0 0 1 2.049.55l3 5.195a1.504 1.504 0 0 1-.549 2.05 1.504 1.504 0 0 1-2.049-.55l-3-5.196a1.504 1.504 0 0 1 .549-2.049",opacity:".25"}),Object(U.b)("path",{d:"M17.5 26c.825 0 1.5.675 1.5 1.5v6c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5v-6c0-.825.675-1.5 1.5-1.5",opacity:".3"}),Object(U.b)("path",{d:"M13.25 24.861c.714.413.961 1.335.549 2.05l-3 5.195a1.504 1.504 0 0 1-2.049.55 1.504 1.504 0 0 1-.549-2.05l3-5.196a1.504 1.504 0 0 1 2.049-.549",opacity:".35"}),Object(U.b)("path",{d:"M10.139 21.75a1.504 1.504 0 0 1-.55 2.049l-5.195 3a1.504 1.504 0 0 1-2.05-.549 1.504 1.504 0 0 1 .55-2.049l5.196-3a1.504 1.504 0 0 1 2.049.549",opacity:".4"}),Object(U.b)("path",{d:"M9 17.5c0 .825-.675 1.5-1.5 1.5h-6C.675 19 0 18.325 0 17.5S.675 16 1.5 16h6c.825 0 1.5.675 1.5 1.5",opacity:".45"}),Object(U.b)("path",{d:"M10.139 13.25a1.504 1.504 0 0 1-2.05.549l-5.195-3a1.504 1.504 0 0 1-.55-2.049 1.504 1.504 0 0 1 2.05-.549l5.196 3c.714.412.961 1.335.549 2.049",opacity:".5"}),Object(U.b)("path",{d:"M13.25 10.139a1.504 1.504 0 0 1-2.049-.55l-3-5.195a1.504 1.504 0 0 1 .549-2.05 1.504 1.504 0 0 1 2.049.55l3 5.196a1.504 1.504 0 0 1-.549 2.049",opacity:".55"})]})})]})},We=function(){return Object(Q.b)().Android?Object(U.b)(Ge,{}):Object(U.b)(He,{})},Ke=Object(z.forwardRef)((function(e,t){var n=e.newDarkColor,r=e.show,a=e.voted,o=e.loading,i=e.votedUpCount,c=e.onClick,l=Le(!0,r,a,n),s=ue(v.a,l,2),u=s[0],d=s[1],f=Object(F.a)(),b=i>0?"，总赞同数 ".concat(Object(Z.cnNiceNumber)(i)):"";return Object(U.b)(H.a,{children:r&&Object(U.b)(De,Object.assign(Object.assign({"aria-label":"".concat(a?"已赞同":"赞同").concat(b),ref:t},u),{},{onClick:o?null:c,children:Object(U.b)(Fe,Object.assign(Object.assign({},d),{},{children:o?Object(U.b)(We,{css:{marginLeft:a?0:5}}):Object(U.c)(U.a,{children:[Object(U.b)(W.a,{css:{width:14,height:14,marginRight:6},center:!0}),Object(U.c)(G.Text,{flexShrink:0,children:[a&&f&&n?"已赞同 ":"赞同 ",i>0&&Object(Z.cnNiceNumber)(i)]})]})}))}))})}));Ke.displayName="VoteUp";var Ze=Object(z.forwardRef)((function(e,t){var n=e.newDarkColor,r=e.show,a=e.voted,o=e.loading,i=e.onClick,c=Le(!1,r,a,n),l=ue(v.a,c,2),s=l[0],u=l[1];return Object(U.b)(H.a,{children:r&&Object(U.b)(De,Object.assign(Object.assign({"aria-label":"已反对",ref:t},s),{},{onClick:o?null:i,children:Object(U.b)(Fe,Object.assign(Object.assign({},u),{},{children:o?Object(U.b)(We,{}):Object(U.c)(U.a,{children:[Object(U.b)(K.a,{css:{width:14,height:14,marginRight:6},style:{marginRight:a?6:0},center:!0}),Object(U.b)(G.Text,{flexShrink:0,children:Boolean(a)&&"已反对"})]})}))}))})}));Ze.displayName="VoteDown";var Qe=(c={},h()(c,Se.VOTING_UP,[1,1,0,1,0,0]),h()(c,Se.VOTED_UP,[1,0,1,0,0,0]),h()(c,Se.VOTED_DOWN,[0,0,0,1,0,1]),h()(c,Se.NEUTRAL,[1,0,0,1,0,0]),c),Ye=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.current=e.current.map((function(e,t){return-1===n[t]?e:n[t]}))},Je=function(e){var t=Object(z.useRef)(null),n=Object(z.useRef)(null);return t.current?e!==t.current&&function(e,t){switch(t){case Se.VOTED_UP:return void Ye(e,1,0,1,0,-1,-1);case Se.VOTING_UP:return void Ye(e,1,1,0,1,-1,-1);case Se.CANCELING_UP:return void Ye(e,1,1,1,0,-1,-1);case Se.VOTED_DOWN:return void Ye(e,0,-1,-1,1,0,1);case Se.VOTING_DOWN:return void Ye(e,1,-1,-1,1,1,0);case Se.CANCELING_DOWN:return void Ye(e,0,-1,-1,1,1,1);case Se.NEUTRAL:default:Ye(e,1,0,0,1,0,0)}}(n,e):n.current=Qe[e],t.current=e,n.current},Xe=Object(z.forwardRef)((function(e,t){var n=e.newDarkColor,r=e.status,a=e.votedUpCount,o=e.onVoteUpClick,i=e.onVoteDownClick,c=e.onCancelClick,l=b()(e,ae),s=Object(F.a)(),u=s.colors,d=u.GBL01A,f=u.GBL07A,p=Je(r),h=ue(v.a,p,6),m=h[0],g=h[1],O=h[2],j=h[3],y=h[4],w=h[5],C=m&&j;return Object(U.c)(q.a.div,Object.assign(Object.assign({ref:t,css:{overflow:"hidden",position:"relative",display:"inline-flex",flexDirection:"row",alignItems:"center",height:36,borderRadius:18},initial:!1,animate:{backgroundColor:!C||n&&s.isDarkMode?d:Object(V.a)(d).alpha(.08)},transition:Pe},l),{},{children:[Object(U.b)(L.a,{as:Ke,zaType:"Button",zaAction:O?"UnUpvote":"Upvote",newDarkColor:n,show:m,voted:O,votedUpCount:a,loading:g,onClick:g?null:O?c:o}),Boolean(C)&&Object(U.b)("div",{css:{background:f,height:18,width:1,opacity:.2}}),Object(U.b)(L.a,{as:Ze,zaType:"Button",zaAction:O?"UnDownvote":"Downvote",newDarkColor:n,show:j,voted:w,loading:y,onClick:y?null:w?c:i})]}))}));function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xe.propTypes={newDarkColor:_.a.bool,status:_.a.oneOf(Object.values(Se)).isRequired,votedUpCount:_.a.number,onVoteUpClick:_.a.func,onVoteDownClick:_.a.func,onCancelClick:_.a.func},Xe.displayName="VoteButtonBase";var et=function(e){y()(i,e);var t,n,r,a,o=de(i);function i(e){var t,n=e.defaultStatus,r=e.defaultVotedUpCount;A()(this,i),t=o.call(this),$e(d()(t),"onError",(function(e){t.props.onChange("error",t.state.votedUpCount,e)})),t.state={status:n||Se.VOTING_UP,votedUpCount:n?r:0},t.componentDidMount=ye(t.componentDidMount).bind(d()(t));var a,c=ge(ke,ye,we,Ce(t.onError)),l=ge((a=!1,function(e){return B()(I.a.mark((function t(){var n,r,o,i,c=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.context){t.next=2;break}throw new Error("this.context 不存在, 是否忘记包装 <ToolBarProvider /> ?");case 2:for(a||xe(),n=c.length,r=new Array(n),o=0;o<n;o++)r[o]=c[o];return t.next=6,e.apply(this,r);case 6:return i=t.sent,a&&xe(),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t,this)})))}),c);return t.handleVoteUp=l(t.handleVoteUp).bind(d()(t)),t.handleVoteDown=c(t.handleVoteDown).bind(d()(t)),t.handleCancel=c(t.handleCancel).bind(d()(t)),t}return R()(i,[{key:"componentDidMount",value:(a=B()(I.a.mark((function e(){var t,n,r,a,o,i,c,l,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fetcher=new je((null===(t=this.context)||void 0===t?void 0:t.contentType)||this.props.contentType,(null===(n=this.context)||void 0===n?void 0:n.contentId)||this.props.contentId,null===(r=this.context)||void 0===r?void 0:r.fetcher),this.state.status!==Se.VOTING_UP){e.next=21;break}return e.prev=2,e.next=5,this.fetcher.getStatus();case 5:a=e.sent,o=a.isVotedUp,i=a.isVotedDown,c=a.votedUpCount,l=void 0===c?0:c,s=null,s=o?Se.VOTED_UP:i?Se.VOTED_DOWN:Se.NEUTRAL,this.setState({status:s,votedUpCount:l}),e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(2),this.setState({status:Se.NEUTRAL,votedUpCount:0}),this.onError(e.t0),delete e.t0.toastMsg,e.t0;case 21:case"end":return e.stop()}}),e,this,[[2,15]])}))),function(){return a.apply(this,arguments)})},{key:"handleVoteUp",value:(r=B()(I.a.mark((function e(){var t=this;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:Se.VOTING_UP}),e.next=3,this.fetcher.voteUp();case 3:return this.setState((function(e){var n=e.votedUpCount+1;return t.props.onChange("voteUp",n),{status:Se.VOTED_UP,votedUpCount:n}})),e.abrupt("return","已赞同");case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"handleVoteDown",value:(n=B()(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:Se.VOTING_DOWN}),e.next=3,this.fetcher.voteDown();case 3:return this.props.onChange("voteDown",this.state.votedUpCount),this.setState({status:Se.VOTED_DOWN}),e.abrupt("return","已反对");case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleCancel",value:(t=B()(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.status,n=this.props.onChange,t!==Se.VOTED_UP){e.next=8;break}return this.setState({status:Se.CANCELING_UP}),e.next=6,this.fetcher.cancelUp();case 6:return this.setState((function(e){var t=e.votedUpCount-1;return n("unVoteUp",t),{status:Se.NEUTRAL,votedUpCount:t}})),e.abrupt("return","已取消");case 8:if(t!==Se.VOTED_DOWN){e.next=15;break}return n("unVoteDown",this.state.votedUpCount),this.setState({status:Se.CANCELING_DOWN}),e.next=13,this.fetcher.cancelDown();case 13:return this.setState({status:Se.NEUTRAL}),e.abrupt("return","已取消");case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.status,n=e.votedUpCount,r=this.props.contentId,a=this.context,o=a.contentId,i=a.zaContentType;return Object(U.b)(L.b,{block:"ZReactionVoteButton",content:{id:"".concat(o||r),type:i},children:Object(U.b)(Xe,{status:t,votedUpCount:n,onVoteUpClick:this.handleVoteUp,onVoteDownClick:this.handleVoteDown,onCancelClick:this.handleCancel})})}}]),i}(z.Component);$e(et,"contextType",me),et.propTypes={defaultVotedUpCount:_.a.number,defaultStatus:_.a.oneOf(Object.values(Ee)),contentType:_.a.string,contentId:_.a.string,disabled:_.a.bool,disabledMessage:_.a.string,onChange:_.a.func},et.defaultProps={onChange:function(){}};var tt=function(e){var t,n=ue(v.a,e,2),r=n[0],a=n[1];return{voteUpCount:r,status:a,condition:(t=a,t===Se.VOTED_UP?1:t===Se.VOTED_DOWN?-1:0)}},nt=function(e,t,n){var r=Object(z.useRef)(!0),a=Object(z.useRef)(tt([e,t])),o=Object(z.useReducer)((function(e,t){return a.current=function(e,t){var n=e.condition,r=e.voteUpCount,a=1===n,o=-1===n;switch(t.type){case"set":return Object.assign(Object.assign({},e),t.payload);case"reset":return tt(t.payload);case"votingUp":return Object.assign(Object.assign({},e),{},{status:Se.VOTING_UP,condition:o?-1:0});case"votedUp":return{status:Se.VOTED_UP,condition:1,voteUpCount:r+1};case"votingDown":return Object.assign(Object.assign({},e),{},{status:Se.VOTING_DOWN,condition:a?1:0});case"votedDown":return{status:Se.VOTED_DOWN,condition:-1,voteUpCount:a?r-1:r};case"canceling":return a?Object.assign(Object.assign({},e),{},{status:Se.CANCELING_UP}):o?Object.assign(Object.assign({},e),{},{status:Se.CANCELING_DOWN}):e;case"canceled":return a?{status:Se.NEUTRAL,condition:0,voteUpCount:e.voteUpCount-1}:o?Object.assign(Object.assign({},e),{},{status:Se.NEUTRAL,condition:0}):e;default:return e}}(e,t),a.current}),[e,t],(function(){return a.current=tt.apply(void 0,arguments),a.current})),i=ue(v.a,o,2),c=i[0],l=i[1],s=Object($.a)((function(e,t){return l({type:e,payload:t})})),u=Object($.a)((function(){return a.current}));return Object(z.useEffect)((function(){r.current?r.current=!1:s("reset",[e,t])}),[s,e,t]),[c,s,u,function(e){return Object($.a)(B()(I.a.mark((function t(){var r,a=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.assign({},c),t.prev=1,t.next=4,e.apply(void 0,a);case 4:t.next=11;break;case 6:throw t.prev=6,t.t0=t.catch(1),s("set",r),n("error",u().voteUpCount,t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,6]])}))))}]},rt={reactionFirst:!0},at=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X.a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rt,a=r.reactionFirst,o=Object(z.useContext)(me),i=nt(e,t,n),c=ue(v.a,i,4),l=c[0],s=l.voteUpCount,u=l.status,d=l.condition,f=c[1],b=c[2],p=c[3],h=Object(z.useMemo)((function(){return new je(o.contentType,o.contentId,o.fetcher)}),[o]),m=p(B()(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return f(a?"votedUp":"votingUp"),e.next=5,h.voteUp();case 5:a||f("votedUp"),n("voteUp",b().voteUpCount);case 7:case"end":return e.stop()}}),e)})))),g=p(B()(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return f(a?"votedDown":"votingDown"),e.next=5,h.voteDown();case 5:a||f("votedDown"),n("voteDown",b().voteUpCount);case 7:case"end":return e.stop()}}),e)})))),O=p(B()(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:if(t=u===Ee.VOTED_UP,f(a?"canceled":"canceling"),!t){e.next=9;break}return e.next=7,h.cancelUp();case 7:e.next=11;break;case 9:return e.next=11,h.cancelDown();case 11:a||f("canceled"),n(t?"unVoteUp":"unVoteDown",b().voteUpCount);case 13:case"end":return e.stop()}}),e)}))));return{voteUpCount:s,status:u,voteUp:m,voteDown:g,cancel:O,isVotedUp:1===d,isVotedDown:-1===d,isNeutral:0===d}},ot=function(e){y()(n,e);var t=de(n);function n(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"emojis",o=arguments.length>3?arguments[3]:void 0;return A()(this,n),t.call(this,e,r,a,o)}return R()(n,[{key:"chosen",value:function(e){return this.fetcher(this.path,{method:"POST",body:this.getParams(e)})}},{key:"unchosen",value:function(e){return this.fetcher(this.path,{method:"DELETE",query:this.getParams(e)})}}]),n}(Oe),it=function(e){var t=e.currentIsLiked,n=e.currentLikedCount,r=e.onChange,a=void 0===r?X.a:r,o=Object(z.useContext)(me),i=Object(z.useState)(t),c=ue(v.a,i,2),l=c[0],s=c[1],u=Object(z.useState)(n||0),d=ue(v.a,u,2),f=d[0],b=d[1],p=Object(z.useMemo)((function(){return new ot(o.contentType,o.contentId,"like",o.fetcher)}),[o]);return{like:Object($.a)(B()(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return s(!0),b(f+1),e.prev=4,e.next=7,p.chosen("like");case 7:a("like",f),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),s(!1),b(f-1);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))),unLike:Object($.a)(B()(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return s(!1),b(f-1),e.prev=4,e.next=7,p.unchosen("like");case 7:a("unlike",f),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),s(!0),b(f+1);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))),isLiked:l,count:f}},ct=function(e){return"//pic1.zhimg.com/v2-".concat(e,".png")},lt={red_heart:ct("3170e81c93aa76c576269af8e8a3e1f5"),cry_face:ct("6a33de7424ceafa6d086d9f832e36096"),hug:ct("7ca1782e2233623e752957471b568346"),onlooker:ct("e642ad48be2eb54121ac2dacf3b30d72"),lemon:ct("1aa9a01f31b63bd616b9b34aac0eb737"),doge:ct("57c51b6093cd2cfcf9432da7389c8ffb"),tears_face:ct("7238f26b4e7fc6567a98f1fec600b451"),thinking_face:ct("5d3f5d64e3ea9e022ef8580eeed7c3cc"),trolling_face:ct("d653b16e616083ca3d147b0db06172ff"),pleading_face:ct("9b92a403966de6b93bc2ca961512da23"),rolling_eyes_face:ct("0069b69ea0022451cb82c5702bd3d029")};Object.keys(lt).forEach((function(e){lt[e.toUpperCase()]=lt[e]}));var st=Object(z.createContext)({}),ut=function(e){var t=e.name,n=e.count,r=e.totalCount,a=e.actionList,o=e.children,i=Object(z.useMemo)((function(){return{name:t,count:n,totalCount:r,actionList:a}}),[t,n,r,a]);return Object(U.b)(st.Provider,{value:i,children:o})};function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=function(e){y()(r,e);var t,n=de(r);function r(e){var t;A()(this,r),t=n.call(this),dt(d()(t),"onRef",(function(e){t.domRef=e,t.props.onRef(e)})),dt(d()(t),"addCheckBeforeClick",(function(e){if(e.checkBeforeClick){var n=t.handleClick;t.handleClick=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t.props.checkBeforeClick?t.props.checkBeforeClick((function(){n.apply(d()(t),r)})):n.apply(d()(t),r)}}})),dt(d()(t),"customShowToast",(function(e){return B()(I.a.mark((function t(){var n,r,a,o,i=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,n=i.length,r=new Array(n),a=0;a<n;a++)r[a]=i[a];return t.next=4,e.apply(this,r);case 4:(o=t.sent)&&this.props.onShowToast&&this.props.onShowToast(o),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.props.onShowToast&&this.props.onShowToast(t.t0&&t.t0.toastMsg||"服务忙，请稍后再试");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))})),dt(d()(t),"getTotalCount",(function(e){return e&&0!==e.length?e.reduce((function(e,t){return e+=t.count}),0):0})),dt(d()(t),"formatActionList",(function(e,n){return e&&0!==e.length?e.map((function(e,r){return t.actionListIndexMap[e.name]=r,Object.assign(Object.assign({},e),{},{chosen:e.name===n})})):[]})),dt(d()(t),"changeActionList",(function(e,t,n){return e.map((function(e){var r=e.name,a=e.chosen,o=e.count;a&&(o-=1);var i=r===t;return{name:r,chosen:i,count:i?n:o}}))})),dt(d()(t),"doChange",(function(e){t.setState((function(n){var r=n.name,a=n.actionList,o=0;if(e){var i=e===r?0:1;o=a[t.actionListIndexMap[e]].count+i}var c=t.changeActionList(a,e,o);return{name:e,count:o,actionList:c,totalCount:t.getTotalCount(c)}}))})),dt(d()(t),"closePopover",(function(){t.setState({showPopover:!1})})),dt(d()(t),"onError",(function(e){return t.props.onChange("error",Object.assign({},t.state),e)}));var a=e.defaultName,o=e.defaultCount,i=e.defaultActionList;t.actionListIndexMap={},t.state={name:a,count:o||0,actionList:t.formatActionList(i,a)||[],totalCount:t.getTotalCount(i)};var c=ge(e.onShowToast?t.customShowToast:ye,we,Ce(t.onError,!1));return t.handleClick=c(t.handleClick).bind(d()(t)),t.addCheckBeforeClick(e),t}return R()(r,[{key:"componentDidMount",value:function(){var e=this.props.toolBar,t=e.contentType,n=e.contentId,r=e.actionType,a=e.fetcher;this.fetcher=new ot(t,n,r,a)}},{key:"loginCheck",value:function(){return this.props.toolBar.loginCheck()}},{key:"doFetch",value:function(e){return e?this.fetcher.chosen(e):this.fetcher.unchosen(null)}},{key:"afterChange",value:function(e){this.props.onChange(e?"chosen":"unchosen",Object.assign({},this.state))}},{key:"handleClick",value:(t=B()(I.a.mark((function e(){var t,n,r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.disabled){e.next=2;break}return e.abrupt("return");case 2:return t=this.state,n=t.name,r=t.actionList,a=n?null:r[0].name,this.doChange(a,!1),a&&xe(),e.next=8,this.doFetch(a);case 8:this.afterChange(a);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this.props,n=t.disabled,r=(t.onRef,t.children),a=b()(t,oe),o=this.state,i=o.name,c=o.count,l=o.totalCount,s=o.actionList;return Object(U.b)(ut,{name:i,count:c,totalCount:l,actionList:s,children:Object(U.b)(L.b,{block:"ZReactionReactionButton",children:Object(U.b)(L.a,Object.assign(Object.assign({as:G.Box,zaType:"Button",zaAction:i?"UnLike":"Like",zaText:i||(null===(e=s[0])||void 0===e?void 0:e.name),ref:this.onRef,css:{position:"relative",display:"flex","&:active":{opacity:.5}},style:{opacity:n?.5:1}},a),{},{role:"button",tabIndex:0,"aria-label":"".concat(i?"已喜欢":"喜欢").concat(l>0?"，共被喜欢".concat(Object(Z.cnNiceNumber)(l),"次"):""),onClick:this.handleClick,children:r}))})})}}]),r}(z.Component),bt=function(e){var t=Object(z.useContext)(me);return Object(U.b)(ft,Object.assign({toolBar:t},e))};bt.propTypes={defaultName:_.a.oneOf(Object.keys(lt)),defaultCount:_.a.number,defaultActionList:_.a.arrayOf(_.a.shape({name:_.a.oneOfType([_.a.number,_.a.string]),count:_.a.number})),disabled:_.a.bool,onRef:_.a.func,onChange:_.a.func,onShowToast:_.a.func,checkBeforeClick:_.a.func},bt.defaultProps={onRef:te.a,onChange:te.a};var pt=Object(z.forwardRef)((function(e,t){var n=e.size,r=e.text,a=e.center,o=b()(e,ie);r&&(n="1.2em");var i=Object(U.b)("svg",Object.assign(Object.assign({ref:t},o),n&&{width:n,height:n}));return a?Object(U.c)("span",{ref:t,style:pt.strutStyle,children:["​",i]}):i}));pt.defaultProps={fill:"currentColor"},pt.strutStyle={display:"inline-flex",alignItems:"center"};var ht=Object(Y.h)(l||(l=O()(["\n  0% { opacity: 0; height: 225%; transform: translateY(100%); }\n  46% { opacity: 1; height: 100%; transform: translateY(0); }\n  100% { opacity: 0 }\n"]))),mt=Object(Y.h)(s||(s=O()(["\n  0% { opacity: 0; transform: scale(1) translateY(50%); }\n  38% { transform: scale(.83, 1) translateY(-8.8%); }\n  54% { opacity: 1; transform: scale(.94, 1) translateY(-14.7%); }\n  62% { transform: scale(1) translateY(-11.7%); }\n  75% { transform: scale(1.11, .94) translateY(20%); }\n  100% { transform: scale(1) translateY(0); }\n"]))),vt=function(e){var t=e.freeze,n=e.size,r=e.left,a=e.right,o=Object(F.a)().colors.GRD01A,i=Math.round(.16*n);return Object(U.b)("div",{css:{position:"absolute",width:i,height:i,top:r||a?"-18%":"-28%",left:r?"2%":a?"auto":"42%",right:a?"2%":"auto",transform:r?"rotate(-25deg)":a?"rotate(-335deg)":"none",transformOrigin:"50% ".concat(.08*n,"px")},children:Object(U.b)("div",{css:{background:o,height:"100%",minHeight:"100%",borderRadius:.08*n,opacity:0,animation:t?null:"".concat(ht," .5s linear forwards")}})})},gt=Object(z.forwardRef)((function(e,t){var n=e.className,r=e.size,a=e.noAnimation,o=Object(F.a)().colors.GRD01A,i=Object(z.useRef)(a).current;return Object(U.c)("div",{ref:t,className:re()("HeartIcon",n),css:{position:"absolute",width:r,height:r},children:[Object(U.b)(vt,{freeze:i,size:r,left:!0}),Object(U.b)(vt,{freeze:i,size:r}),Object(U.b)(vt,{freeze:i,size:r,right:!0}),Object(U.b)(pt,{size:r,viewBox:"0 0 24 24",css:{position:"absolute",top:0,left:0,fill:o,stroke:o,strokeWidth:"1.5px",animation:i?null:"".concat(mt," .5s linear forwards")},children:Object(U.b)("path",{d:"M21.3871 10.8644C21.7339 6.89688 18.9681 4.06581 15.9842 4.06581C14.4071 4.06581 12.8344 4.94922 11.9967 6.05139C11.2104 4.96015 9.59294 4.06582 8.01579 4.06582C5.03186 4.06582 2.26571 6.89693 2.61294 10.8644C2.99689 15.2513 9.96356 21.0153 11.9917 21.0153C14.0197 21.0153 21.0083 15.1977 21.3871 10.8644Z",strokeLinecap:"round",strokeLinejoin:"round"})})]})})),Ot=Object(z.forwardRef)((function(e,t){var n=e.className;return Object(U.b)(pt,{ref:t,className:re()("OutLineIcon",n),viewBox:"0 0 24 24",css:{position:"absolute",top:0,left:0,fill:"none",stroke:"currentColor",strokeWidth:"1.5px"},children:Object(U.b)("path",{d:"M21.3871 10.8644C21.7339 6.89688 18.9681 4.06581 15.9842 4.06581C14.4071 4.06581 12.8344 4.94922 11.9967 6.05139C11.2104 4.96015 9.59294 4.06582 8.01579 4.06582C5.03186 4.06582 2.26571 6.89693 2.61294 10.8644C2.99689 15.2513 9.96356 21.0153 11.9917 21.0153C14.0197 21.0153 21.0083 15.1977 21.3871 10.8644Z",strokeLinecap:"round",strokeLinejoin:"round"})})}));Object(q.a)(gt),Object(q.a)(Ot);_.a.string,_.a.number;var jt=function(e){var t=e.count,n=e.className,r=b()(e,ce);return Object(U.b)(G.Text,Object.assign(Object.assign({className:re()("ReactionCount",n)},r),{},{children:t?Object(Z.cnNiceNumber)(t):"喜欢"}))};(function(e){var t=e.chosenColor,n=e.fontSize,r=b()(e,le),a=Object(F.a)().colors.GBK03A,o=function(){var e=Object(z.useContext)(st),t=e.name,n=e.count,r=e.totalCount,a=t===e.actionList[0].name,o=!(t&&!a);return{count:o?r:n,chosen:Boolean(t),isHeart:a,isTotalCount:o}}(),i=o.count,c=o.chosen&&t||a;return Object(U.b)(jt,Object.assign({css:{color:c,fontSize:n},count:i},r))}).propTypes={chosenColor:_.a.string};var yt=Object(z.createContext)({});_.a.func,_.a.string,_.a.string.isRequired,_.a.string.isRequired,_.a.object.isRequired;var wt=function(e,t,n){var r=Object(z.useContext)(yt),a=r.getData,o=r.fetcher,i=r.loginCheck,c=o(e),l=a(e),s=Object(z.useState)(!1),u=ue(v.a,s,2),d=u[0],f=u[1],b=Object(z.useState)(l.count||0),p=ue(v.a,b,2),h=p[0],m=p[1],g=function(e){var t=Object(z.useState)((function(){return e.options?Object.keys(e.options).reduce((function(t,n){return t[n]=Object.assign({},e.options[n]),e.reactedOption&&(t[n].selected=!0),t}),{}):null})),n=ue(v.a,t,2),r=n[0],a=n[1];return{options:r,setOptions:a,selectOption:function(e){var t=Object.keys(r).reduce((function(t,n){var a=Object.assign({count:0},r[n]);return a.selected&&(a.selected=!1,a.count--),n===e&&(a.selected=!0,a.count++),t.totalCount+=a.count,a.loading=!1,t.data[n]=a,t}),{data:{},totalCount:0});return a(t.data),t},setOptionLoading:function(e){var t=Object.keys(r).reduce((function(t,n){var a=Object.assign({count:0},r[n]);return a.selected||n===e?a.loading=!0:a.loading=!1,t[n]=a,t}),{});a(t)}}}(l),O=g.options,j=g.setOptions,y=g.selectOption,w=g.setOptionLoading,C=Boolean(O),k=Object(z.useState)(C?l.reactedOption:l.reacted),x=ue(v.a,k,2),S=x[0],A=x[1],T=function(){f(!1),m(h),A(S),j(O)},R=function(e){f(!0),C&&w(e)},E=function(){var e=B()(I.a.mark((function e(r){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i()){e.next=2;break}return e.abrupt("return");case 2:if(a=function(){f(!1);var e=C?y(r):{data:null,totalCount:S?h:h+1};m(e.totalCount);var t=!C||r;A(t),n(r,{totalCount:e.totalCount,options:e.data,selected:t})},e.prev=3,t?a():R(r),e.t0=!S,!e.t0){e.next=9;break}return e.next=9,c.select(r);case 9:!t&&a(),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(3),T(),n("error",{totalCount:h,selected:S,options:O},e.t1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),N=Object($.a)(B()(I.a.mark((function e(){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i()){e.next=2;break}return e.abrupt("return");case 2:if(r=function(){f(!1);var e=C?y():{data:null,totalCount:S?h-1:h};m(e.totalCount);var t=!!C&&null;A(t),n("cancel",{canceled:S,totalCount:e.totalCount,options:e.data,selected:t})},e.prev=3,t?r():R(),e.t0=S,!e.t0){e.next=9;break}return e.next=9,c.cancel(S);case 9:!t&&r(),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(3),T(),n("error",{totalCount:h,selected:S,options:O},e.t1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])}))));return{totalCount:h,loading:d,selected:S,options:O,select:E,cancel:N}};_.a.bool,_.a.func;var Ct=["RED_HEART","CRY_FACE","HUG","ONLOOKER"],kt=function(e,t){return e.map((function(e){var n=t[e]||{},r=n.count;return{name:e,chosen:n.selected,count:r}}))};Object(z.forwardRef)((function(e,t){var n,r,a=e.iconOrder,o=void 0===a?Ct:a,i=e.disabled,c=e.children,l=e.onChange,s=void 0===l?te.a:l,u=b()(e,se),d=Object(z.useRef)(null),f=Object(z.useRef)(null),p=wt("EMOJI",!0,(function(e,t,n){s(e,Object.assign(Object.assign({},t),{},{actionList:kt(o,t.options)}),n)})),h=p.options,m=p.selected,v=p.totalCount,g=p.select,O=p.cancel;f.current=o;var j=m,y=(null===(n=h[m])||void 0===n?void 0:n.count)||0,w=function(e,t){return Object(z.useMemo)((function(){return kt(e,t)}),[t])}(o,h),C=Object(z.useCallback)((function(e){"function"==typeof t?null==t||t(e):t&&(t.current=e),d.current=e}),[]),k=Object($.a)((function(){i||(!m&&xe(),m?O():g(w[0].name))}));return Object(U.b)(ut,{name:m,count:y,totalCount:v,actionList:w,children:Object(U.b)(L.a,Object.assign(Object.assign({as:G.Box,zaType:"Button",zaAction:j?"UnLike":"Like",zaText:j||(null===(r=w[0])||void 0===r?void 0:r.name),ref:C,css:{position:"relative",display:"flex","&:active":{opacity:.5}}},u),{},{role:"button",tabIndex:0,"aria-label":"".concat(j?"已喜欢":"喜欢").concat(v>0?"，共被喜欢".concat(Object(Z.cnNiceNumber)(v),"次"):""),onClick:k,children:c}))})})).propTypes={iconOrder:_.a.arrayOf(_.a.string),disabled:_.a.bool,onChange:_.a.func}},1343:function(e,t,n){"use strict";t.a=function(e){return e.componentList.filter(Boolean).filter((function(e){var t=e.component;return Boolean(t)})).map((function(e){return e.component}))}},1344:function(e,t,n){"use strict";(function(t){function n(e){a.length||(r(),!0),a[a.length]=e}e.exports=n;var r,a=[],o=0;function i(){for(;o<a.length;){var e=o;if(o+=1,a[e].call(),o>1024){for(var t=0,n=a.length-o;t<n;t++)a[t]=a[t+o];a.length-=o,o=0}}a.length=0,o=0,!1}var c,l,s,u=void 0!==t?t:self,d=u.MutationObserver||u.WebKitMutationObserver;function f(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof d?(c=1,l=new d(i),s=document.createTextNode(""),l.observe(s,{characterData:!0}),r=function(){c=-c,s.data=c}):r=f(i),n.requestFlush=r,n.makeRequestCallFromTimer=f}).call(this,n(135))},1345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1346);n(1066),n(1067);var a=r.makeExports(!1),o=a.StyleSheet,i=a.StyleSheetServer,c=a.StyleSheetTestUtils,l=a.css,s=a.minify,u=a.flushToStyleTag,d=a.injectAndGetClassName,f=a.defaultSelectorHandlers,b=a.reset,p=a.resetInjectedStyle;t.StyleSheet=o,t.StyleSheetServer=i,t.StyleSheetTestUtils=c,t.css=l,t.minify=s,t.flushToStyleTag=u,t.injectAndGetClassName=d,t.defaultSelectorHandlers=f,t.reset=b,t.resetInjectedStyle=p},1346:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=r(n(1066)),o=r(n(1067));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=/([A-Z])/g,d=function(e){return"-".concat(e.toLowerCase())},f={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var b=["Webkit","ms","Moz","O"];Object.keys(f).forEach((function(e){b.forEach((function(t){f[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=f[e]}))}));var p=function(e,t){return"number"==typeof t?f[e]?""+t:t+"px":""+t},h=function(e,t){return v(p(e,t))},m=function(e,t){return a(e).toString(36)},v=function(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:"".concat(e," !important")},g="undefined"!=typeof Map,O=function(){function e(){this.elements={},this.keyOrder=[]}var t=e.prototype;return t.forEach=function(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])},t.set=function(t,n,r){if(this.elements.hasOwnProperty(t)){if(r){var a=this.keyOrder.indexOf(t);this.keyOrder.splice(a,1),this.keyOrder.push(t)}}else this.keyOrder.push(t);if(null!=n){if(g&&n instanceof Map||n instanceof e){var o=this.elements.hasOwnProperty(t)?this.elements[t]:new e;return n.forEach((function(e,t){o.set(t,e,r)})),void(this.elements[t]=o)}if(Array.isArray(n)||"object"!==i(n))this.elements[t]=n;else{for(var c=this.elements.hasOwnProperty(t)?this.elements[t]:new e,l=Object.keys(n),s=0;s<l.length;s+=1)c.set(l[s],n[l[s]],r);this.elements[t]=c}}else this.elements[t]=n},t.get=function(e){return this.elements[e]},t.has=function(e){return this.elements.hasOwnProperty(e)},t.addStyleType=function(t){var n=this;if(g&&t instanceof Map||t instanceof e)t.forEach((function(e,t){n.set(t,e,!0)}));else for(var r=Object.keys(t),a=0;a<r.length;a++)this.set(r[a],t[r[a]],!0)},e}();function j(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t){return e(t={exports:{}},t.exports),t.exports}var w=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}));j(w);var C=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t)){for(var a={},o=e[t],i=(0,r.default)(t),c=Object.keys(n),l=0;l<c.length;l++){var s=c[l];if(s===t)for(var u=0;u<o.length;u++)a[o[u]+i]=n[t];a[s]=n[s]}return a}return n};var n,r=(n=w)&&n.__esModule?n:{default:n}}));j(C);var k=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){for(var o=0,i=e.length;o<i;++o){var c=e[o](t,n,r,a);if(c)return c}}}));j(k);var x=y((function(e,t){function n(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var r=0,a=t.length;r<a;++r)n(e,t[r]);else n(e,t)}}));j(x);var S=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)}}));j(S);var A=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,i=e.plugins;return function e(c){for(var l in c){var s=c[l];if((0,o.default)(s))c[l]=e(s);else if(Array.isArray(s)){for(var u=[],d=0,f=s.length;d<f;++d){var b=(0,r.default)(i,l,s[d],c,t);(0,a.default)(u,b||s[d])}u.length>0&&(c[l]=u)}else{var p=(0,r.default)(i,l,s,c,t);p&&(c[l]=p),c=(0,n.default)(t,l,c)}}return c}};var n=i(C),r=i(k),a=i(x),o=i(S);function i(e){return e&&e.__esModule?e:{default:e}}}))),T=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&"text"===t)return["-webkit-text","text"]}}))),R=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&n.test(e)};var n=/-webkit-|-moz-|-ms-/;e.exports=t.default}));j(R);var E=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("calc(")>-1)return a.map((function(e){return t.replace(/calc\(/g,e+"calc(")}))};var n,r=(n=R)&&n.__esModule?n:{default:n};var a=["-webkit-","-moz-",""]}))),I=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("cross-fade(")>-1)return a.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var n,r=(n=R)&&n.__esModule?n:{default:n};var a=["-webkit-",""]}))),N=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&r.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0}}))),B=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("filter(")>-1)return a.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var n,r=(n=R)&&n.__esModule?n:{default:n};var a=["-webkit-",""]}))),z=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&n.hasOwnProperty(t))return n[t]};var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]}}))),P=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){Object.prototype.hasOwnProperty.call(r,e)&&(i[r[e]]=n[t]||t);if("flex"===e){if(Object.prototype.hasOwnProperty.call(a,t))return void(i.msFlex=a[t]);if(o.test(t))return void(i.msFlex=t+" 1 0%");var c=t.split(/\s/);switch(c.length){case 1:return void(i.msFlex="1 1 "+t);case 2:return void(o.test(c[1])?i.msFlex=c[0]+" "+c[1]+" 0%":i.msFlex=c[0]+" 1 "+c[1]);default:i.msFlex=t}}};var n={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},r={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"},a={auto:"1 1 auto",inherit:"inherit",initial:"0 1 auto",none:"0 0 auto",unset:"unset"},o=/^\d+(\.\d+)?$/}))),_=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){"flexDirection"===e&&"string"==typeof t&&(t.indexOf("column")>-1?a.WebkitBoxOrient="vertical":a.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?a.WebkitBoxDirection="reverse":a.WebkitBoxDirection="normal");r.hasOwnProperty(e)&&(a[r[e]]=n[t]||t)};var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"}}))),L=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&o.test(t))return a.map((function(e){return t.replace(o,(function(t){return e+t}))}))};var n,r=(n=R)&&n.__esModule?n:{default:n};var a=["-webkit-","-moz-",""],o=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi}))),M=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function r(e){return"number"==typeof e&&!isNaN(e)}t.default=function(e,t,n){if("display"===e&&t in o)return o[t];if(e in i){(0,i[e])(t,n)}};var a=["center","end","start","stretch"],o={"inline-grid":["-ms-inline-grid","inline-grid"],grid:["-ms-grid","grid"]},i={alignSelf:function(e,t){a.indexOf(e)>-1&&(t.msGridRowAlign=e)},gridColumn:function(e,t){if(r(e))t.msGridColumn=e;else{var a=e.split("/").map((function(e){return+e})),o=n(a,2),c=o[0],l=o[1];i.gridColumnStart(c,t),i.gridColumnEnd(l,t)}},gridColumnEnd:function(e,t){var n=t.msGridColumn;r(e)&&r(n)&&(t.msGridColumnSpan=e-n)},gridColumnStart:function(e,t){r(e)&&(t.msGridColumn=e)},gridRow:function(e,t){if(r(e))t.msGridRow=e;else{var a=e.split("/").map((function(e){return+e})),o=n(a,2),c=o[0],l=o[1];i.gridRowStart(c,t),i.gridRowEnd(l,t)}},gridRowEnd:function(e,t){var n=t.msGridRow;r(e)&&r(n)&&(t.msGridRowSpan=e-n)},gridRowStart:function(e,t){r(e)&&(t.msGridRow=e)},gridTemplateColumns:function(e,t){t.msGridColumns=e},gridTemplateRows:function(e,t){t.msGridRows=e},justifySelf:function(e,t){a.indexOf(e)>-1&&(t.msGridColumnAlign=e)}}}))),D=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("image-set(")>-1)return a.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var n,r=(n=R)&&n.__esModule?n:{default:n};var a=["-webkit-",""]}))),U=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(Object.prototype.hasOwnProperty.call(n,e))for(var a=n[e],o=0,i=a.length;o<i;++o)r[a[o]]=t};var n={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]}}))),F=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]}}))),V=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(r.hasOwnProperty(e)&&a.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0}}))),q=/[A-Z]/g,G=/^ms-/,H={};function W(e){return"-"+e.toLowerCase()}var K,Z=(K=Object.freeze({default:function(e){if(H.hasOwnProperty(e))return H[e];var t=e.replace(q,W);return H[e]=G.test(t)?"-"+t:t}}))&&K.default||K,Q=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e)};var n,r=(n=Z)&&n.__esModule?n:{default:n};e.exports=t.default}));j(Q);var Y=["Webkit"],J=["Moz"],X=["ms"],$=["Webkit","Moz"],ee=["Webkit","ms"],te=["Webkit","Moz","ms"],ne=A({plugins:[T,E,I,N,B,z,P,_,L,M,D,U,F,V,j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o,l){if("string"==typeof t&&i.hasOwnProperty(e)){var s=function(e,t){if((0,r.default)(e))return e;for(var a=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=a.length;o<i;++o){var l=a[o],s=[l];for(var u in t){var d=(0,n.default)(u);if(l.indexOf(d)>-1&&"order"!==d)for(var f=t[u],b=0,p=f.length;b<p;++b)s.unshift(l.replace(d,c[f[b]]+d))}a[o]=s.join(",")}return a.join(",")}(t,l),u=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return u;var d=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?d:(o["Webkit"+(0,a.default)(e)]=u,o["Moz"+(0,a.default)(e)]=d,s)}};var n=o(Q),r=o(R),a=o(w);function o(e){return e&&e.__esModule?e:{default:e}}var i={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},c={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"}})))],prefixMap:{transform:ee,transformOrigin:ee,transformOriginX:ee,transformOriginY:ee,backfaceVisibility:Y,perspective:Y,perspectiveOrigin:Y,transformStyle:Y,transformOriginZ:Y,animation:Y,animationDelay:Y,animationDirection:Y,animationFillMode:Y,animationDuration:Y,animationIterationCount:Y,animationName:Y,animationPlayState:Y,animationTimingFunction:Y,appearance:$,userSelect:te,fontKerning:Y,textEmphasisPosition:Y,textEmphasis:Y,textEmphasisStyle:Y,textEmphasisColor:Y,boxDecorationBreak:Y,clipPath:Y,maskImage:Y,maskMode:Y,maskRepeat:Y,maskPosition:Y,maskClip:Y,maskOrigin:Y,maskSize:Y,maskComposite:Y,mask:Y,maskBorderSource:Y,maskBorderMode:Y,maskBorderSlice:Y,maskBorderWidth:Y,maskBorderOutset:Y,maskBorderRepeat:Y,maskBorder:Y,maskType:Y,textDecorationStyle:$,textDecorationSkip:$,textDecorationLine:$,textDecorationColor:$,filter:Y,fontFeatureSettings:$,breakAfter:te,breakBefore:te,breakInside:te,columnCount:$,columnFill:$,columnGap:$,columnRule:$,columnRuleColor:$,columnRuleStyle:$,columnRuleWidth:$,columns:$,columnSpan:$,columnWidth:$,writingMode:ee,flex:ee,flexBasis:Y,flexDirection:ee,flexGrow:Y,flexFlow:ee,flexShrink:Y,flexWrap:ee,alignContent:Y,alignItems:Y,alignSelf:Y,justifyContent:Y,order:Y,transitionDelay:Y,transitionDuration:Y,transitionProperty:Y,transitionTimingFunction:Y,backdropFilter:Y,scrollSnapType:ee,scrollSnapPointsX:ee,scrollSnapPointsY:ee,scrollSnapDestination:ee,scrollSnapCoordinate:ee,shapeImageThreshold:Y,shapeImageMargin:Y,shapeImageOutside:Y,hyphens:te,flowInto:ee,flowFrom:ee,regionFragment:ee,textOrientation:Y,boxSizing:J,textAlignLast:J,tabSize:J,wrapFlow:X,wrapThrough:X,wrapMargin:X,touchAction:X,textSizeAdjust:ee,borderImage:Y,borderImageOutset:Y,borderImageRepeat:Y,borderImageSlice:Y,borderImageSource:Y,borderImageWidth:Y}}),re=[function(e,t,n){return":"!==e[0]?null:n(t+e)},function(e,t,n){if("@"!==e[0])return null;var r=n(t);return["".concat(e,"{").concat(r.join(""),"}")]}],ae=function e(t,n,r,a,o){for(var i=new O,c=0;c<n.length;c++)i.addStyleType(n[c]);var l=new O,u=[];i.forEach((function(n,i){r.some((function(c){var l=c(i,t,(function(t){return e(t,[n],r,a,o)}));if(null!=l)return Array.isArray(l)?u.push.apply(u,s(l)):(console.warn("WARNING: Selector handlers should return an array of rules.Returning a string containing multiple rules is deprecated.",c),u.push("@media all {".concat(l,"}"))),!0}))||l.set(i,n,!0)}));var d=ce(t,l,a,o,r);return d&&u.unshift(d),u},oe=function(e,t,n){return"".concat((r=e,a=r.replace(u,d),"m"===a[0]&&"s"===a[1]&&"-"===a[2]?"-".concat(a):a),":").concat(n(e,t),";");var r,a},ie=function(e,t){return e[t]=!0,e},ce=function(e,t,n,r,a){!function(e,t,n){if(t)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a];e.has(o)&&e.set(o,t[o](e.get(o),n),!1)}}(t,n,a);var o=Object.keys(t.elements).reduce(ie,Object.create(null)),i=ne(t.elements),c=Object.keys(i);if(c.length!==t.keyOrder.length)for(var l=0;l<c.length;l++)if(!o[c[l]]){var s=void 0;if((s="W"===c[l][0]?c[l][6].toLowerCase()+c[l].slice(7):"o"===c[l][1]?c[l][3].toLowerCase()+c[l].slice(4):c[l][2].toLowerCase()+c[l].slice(3))&&o[s]){var u=t.keyOrder.indexOf(s);t.keyOrder.splice(u,0,c[l])}else t.keyOrder.unshift(c[l])}for(var d=!1===r?p:h,f=[],b=0;b<t.keyOrder.length;b++){var m=t.keyOrder[b],v=i[m];if(Array.isArray(v))for(var g=0;g<v.length;g++)f.push(oe(m,v[g],d));else f.push(oe(m,v,d))}return f.length?"".concat(e,"{").concat(f.join(""),"}"):""},le=null,se={fontFamily:function e(t){if(Array.isArray(t)){var n={};return t.forEach((function(t){n[e(t)]=!0})),Object.keys(n).join(",")}return"object"===i(t)?(pe(t.src,"@font-face",[t],!1),'"'.concat(t.fontFamily,'"')):t},animationName:function e(t,n){if(Array.isArray(t))return t.map((function(t){return e(t,n)})).join(",");if("object"===i(t)){var r="keyframe_".concat((o=t,m(JSON.stringify(o)))),a="@keyframes ".concat(r,"{");return t instanceof O?t.forEach((function(e,t){a+=ae(t,[e],n,se,!1).join("")})):Object.keys(t).forEach((function(e){a+=ae(e,[t[e]],n,se,!1).join("")})),be(r,[a+="}"]),r}return t;var o}},ue={},de=[],fe=!1,be=function(e,t){var n;if(!ue[e]){if(!fe){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");fe=!0,o(ge)}(n=de).push.apply(n,s(t)),ue[e]=!0}},pe=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!ue[e]){var o=ae(t,n,a,se,r);be(e,o)}},he=function(){de=[],ue={},fe=!1,le=null},me=function(e){delete ue[e]},ve=function(){fe=!1;var e=de;return de=[],e},ge=function(){var e=ve();e.length>0&&function(e){if(null==le&&null==(le=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(le=document.createElement("style")).type="text/css",le.setAttribute("data-aphrodite",""),t.appendChild(le)}var n=le.styleSheet||le.sheet;if(n.insertRule){var r=n.cssRules.length;e.forEach((function(e){try{n.insertRule(e,r),r+=1}catch(e){}}))}else le.innerText=(le.innerText||"")+e.join("")}(e)},Oe=function(e){e.forEach((function(e){ue[e]=!0}))},je=function(e,t,n){var r,a=[],o=[],i=function e(t,n,r,a){for(var o=0;o<t.length;o+=1)if(t[o])if(Array.isArray(t[o]))a+=e(t[o],n,r,a);else{if(!("_definition"in(i=t[o])&&"_name"in i&&"_len"in i))throw new Error("Invalid Style Definition: Styles should be defined using the StyleSheet.create method.");n.push(t[o]._name),r.push(t[o]._definition),a+=t[o]._len}var i;return a}(t,a,o,0);return 0===a.length?"":(r=1===a.length?"_".concat(a[0]):"_".concat(m(a.join())).concat((i%36).toString(36)),pe(r,".".concat(r),o,e,n),r)},ye=function(e,t){return"".concat(t,"_").concat(m(e))},we=m,Ce={create:function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r+=1){var a=n[r],o=e[a],i=JSON.stringify(o);t[a]={_len:i.length,_name:we(i,a),_definition:o}}return t},rehydrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Oe(e)}},ke="undefined"!=typeof window?null:{renderStatic:function(e){return he(),function(){if(fe)throw new Error("Cannot buffer while already buffering");fe=!0}(),{html:e(),css:{content:ve().join(""),renderedClassNames:Object.keys(ue)}}}};t.makeExports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re;return{StyleSheet:l({},Ce,{extend:function(r){var a=r.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return e(t,n.concat(a))}}),StyleSheetServer:ke,StyleSheetTestUtils:null,minify:function(e){we=e?m:ye},css:function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return je(t,r,n)},flushToStyleTag:ge,injectAndGetClassName:je,defaultSelectorHandlers:re,reset:he,resetInjectedStyle:me}}},1347:function(e,t,n){var r;!function(a,o,i){"use strict";function c(e){var t=null;if("VIDEO"===e.tagName)t=e;else{var n=e.getElementsByTagName("video");n[0]&&(t=n[0])}return t}function l(e){var t=c(e);if(t&&t.webkitEnterFullscreen){try{t.readyState<t.HAVE_METADATA?(t.addEventListener("loadedmetadata",(function e(){t.removeEventListener("loadedmetadata",e,!1),t.webkitEnterFullscreen(),p=!!t.getAttribute("controls")}),!1),t.load()):(t.webkitEnterFullscreen(),p=!!t.getAttribute("controls")),b=t}catch(t){return j("not_supported",e)}return!0}return j(void 0===f.request?"not_supported":"not_enabled",e)}function s(){y.element||(O(),u())}function u(){i&&"webkitfullscreenchange"===f.change&&window.removeEventListener("resize",s,!1)}var d=/i(Pad|Phone|Pod)/.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/^.*OS (\d+)_(\d+).*$/,"$1.$2"),10)>=7,f=function(){var e=o.createElement("video"),t={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},n={};for(var r in t)for(var a=0,i=t[r].length;i>a;a++)if(t[r][a]in e||t[r][a]in o||"on"+t[r][a].toLowerCase()in o){n[r]=t[r][a];break}return n}(),b=null,p=null,h=function(){},m=[],v=!1;navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Chrome")>-1&&(v=parseInt(navigator.userAgent.replace(/^.*Chrome\/(\d+).*$/,"$1"),10)||!0);var g=function(e){var t=m[m.length-1];t&&(e!==t.element&&e!==b||!t.hasEntered)&&("VIDEO"===e.tagName&&(b=e),1===m.length&&y.onenter(y.element),t.enter.call(t.element,e||t.element),t.hasEntered=!0)},O=function(){!b||p||d||(b.setAttribute("controls","controls"),b.removeAttribute("controls")),b=null,p=null;var e=m.pop();e&&(e.exit.call(e.element),y.element||(m.forEach((function(e){e.exit.call(e.element)})),m=[],y.onexit()))},j=function(e,t){if(m.length>0){var n=m.pop();t=t||n.element,n.error.call(t,e),y.onerror(t,e)}},y={request:function(e,t,n,r){if(e=e||o.body,m.push({element:e,enter:t||h,exit:n||h,error:r||h}),void 0!==f.request)if(i&&!1===o[f.enabled])l(e);else if(!1!==v&&32>v)l(e);else{if(i&&void 0===f.enabled)return f.enabled="webkitFullscreenEnabled",e[f.request](),void setTimeout((function(){o[f.element]?o[f.enabled]=!0:(o[f.enabled]=!1,l(e))}),250);try{e[f.request](),setTimeout((function(){o[f.element]||j(i?"not_enabled":"not_allowed",e)}),100)}catch(t){j("not_enabled",e)}}else l(e)},exit:function(){u(),o[f.exit]()},toggle:function(e,t,n,r){y.element?y.exit():y.request(e,t,n,r)},videoEnabled:function(e){if(y.enabled)return!0;var t=c(e=e||o.body);return!(!t||void 0===t.webkitSupportsFullscreen)&&(t.readyState<t.HAVE_METADATA?"maybe":t.webkitSupportsFullscreen)},onenter:h,onexit:h,onchange:h,onerror:h};try{Object.defineProperties(y,{element:{enumerable:!0,get:function(){return b&&b.webkitDisplayingFullscreen?b:o[f.element]||null}},enabled:{enumerable:!0,get:function(){return"webkitCancelFullScreen"===f.exit&&!i||!(!1!==v&&32>v)&&(o[f.enabled]||!1)}}}),f.change&&o.addEventListener(f.change,(function(e){if(y.onchange(y.element),y.element){var t=m[m.length-2];t&&t.element===y.element?O():(g(y.element),i&&"webkitfullscreenchange"===f.change&&window.addEventListener("resize",s,!1))}else O()}),!1),o.addEventListener("webkitbeginfullscreen",(function(e){var t=!0;if(m.length>0)for(var n=0,r=m.length;r>n;n++){if(c(m[n].element)===e.srcElement){t=!1;break}}t&&m.push({element:e.srcElement,enter:h,exit:h,error:h}),y.onchange(e.srcElement),g(e.srcElement)}),!0),o.addEventListener("webkitendfullscreen",(function(e){y.onchange(e.srcElement),O(e.srcElement)}),!0),f.error&&o.addEventListener(f.error,(function(e){j("not_allowed")}),!1)}catch(e){y.element=null,y.enabled=!1}void 0===(r=function(){return y}.call(t,n,t,e))||(e.exports=r)}(0,document,self!==top)},1348:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(5),a=n(1274);function o(e){var t,n,o;return null!=e&&null!==(t=e.bizExt)&&void 0!==t&&t.creationRelationship?e.bizExt.creationRelationship:"string"==typeof(null==e||null===(n=e.creationRelationship)||void 0===n?void 0:n.renderJson)?Object(r.camelizeKeys)(null!==(o=Object(a.a)(e.creationRelationship.renderJson))&&void 0!==o?o:{}):e.creationRelationship}var i=o,c=o,l=o},1361:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(19),b=n(20),p=n(12),h=n.n(p),m=n(35),v=n(888),g=n(1790),O=n(23),j=n(154),y=n(451),w=n(216),C=n(2),k=n(6),x=Object(k.a)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]);var S=Object(k.a)("ebook",["FOLLOW","UNFOLLOW"]);var A=n(486),T=n(1791),R=n(462),E=n(32);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var N={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},B=function(e){Object(o.a)(n,e);var t=I(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleVote=e.props.authRequired((function(t){var n=e.props,r=n.liked,a=n.type,o=n.id,i=!r;O.a.trackEvent(t.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var c=N[a];e.props[c](o,i)}),E.bb.vote),e.handleClick=function(t){var n=e.props,r=n.disableAuth,a=n.handleToggleGuide,o=n.onClick;o&&o(t)||(r?a(t):e.handleToggleVote(t))},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.count,r=e.className,a=e.icon,o=void 0===a?"like":a,i=e.disabled;return Object(l.c)(m.c,{className:h()("LikeButton",{"is-active":t},r),onClick:this.handleClick,disabled:i,"aria-live":"polite",children:["thank"===o?Object(l.b)(v.a,{center:!0}):Object(l.b)(g.a,{center:!0})," ",Object(j.cnNiceNumber)(n).trim()]})}}]),n}(d.Component);B.propTypes={type:u.a.oneOf(y.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,icon:u.a.string,liked:u.a.bool,count:u.a.number};t.a=Object(f.compose)(w.a,Object(b.connect)(null,{updateEBookVoters:function(e){return function(t,n){var r=n().entities.ebooks[e],a=!(r.relationship||{}).voting;return t({API:{types:S.FOLLOW,method:a?"POST":"DELETE",endpoint:"v3/books/".concat(e,"/voters")},UPDATE:{request:{ebooks:Object(C.a)({},e,{relationship:Object.assign(Object.assign({},r.relationship),{},{voting:a}),voteupCount:r.voteupCount+(a?1:-1)})},failure:{ebooks:Object(C.a)({},e,r)}}})}},updateLiveLiked:function(e){return function(t,n){var r=n().entities.lives[e],a=!r.isLiked;return t({API:{types:x.UPDATE_LIKED,endpoint:"v3/lives/".concat(e,"/like"),method:a?"POST":"DELETE"},UPDATE:{request:{lives:Object(C.a)({},e,{isLiked:a,likedNum:r.likedNum+(a?1:-1)})},failure:{lives:Object(C.a)({},e,r)}}})}},updateLiveCourseLiked:function(e){return function(t,n){var r=n().entities.liveCourses[e],a=!r.isLiked;return t({API:{types:x.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/".concat(e,"/like"),method:a?"POST":"DELETE"},UPDATE:{request:{liveCourses:Object(C.a)({},e,{isLiked:a,likedNum:r.likedNum+(a?1:-1)})},failure:{liveCourses:Object(C.a)({},e,r)}}})}},updateArticleLike:A.f,updatePromotionLike:T.a,updatePinsLike:R.m}))(B)},1362:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return m}));var r=n(1590),a=n(1),o=n(1342),i=n(99),c=n(1164),l=function(e){var t=e.defaultVoteUpCount,n=e.defaultStatus,r=e.onChange,l=e.disabled,s=Object(o.d)(t||0,n,r),u=s.voteUpCount,d=s.isVotedUp,f=s.isVotedDown,b=s.voteUp,p=s.voteDown,h=s.cancel,m=Object(i.a)((function(e){switch(e){case"up":return b();case"down":return p();case"neutral":default:return h()}}));return Object(a.b)(c.a,{count:u,voting:d?1:f?-1:0,onVote:m,isOwner:l})},s=n(36),u=n(888),d=n(35),f=n(216),b=["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"],p=Object(f.a)((function(e){var t=e.isLiked,n=e.onClick,r=e.showIcon,o=void 0===r||r,c=e.authRequired,l=(e.currentUser,e.isLogin,Object(s.default)(e,b)),f=Object(i.a)((function(){return c((function(){return n(!t)}))()}));return Object(a.b)(d.c,Object.assign({preset:"plain",onClick:f,icon:o?u.b:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},l))})),h=["currentIsLiked","onClick"],m=function(e){var t=e.currentIsLiked,n=e.onClick,r=Object(s.default)(e,h),i=Object(o.c)({currentIsLiked:t}),c=i.isLiked,l=i.like,u=i.unLike;return Object(a.b)(p,Object.assign(Object.assign({},r),{},{isLiked:c,onClick:function(e){e?l():u(),null==n||n(e)}}))}},1366:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return y}));var r=n(1641),a=n(2),o=n(36),i=n(1),c=n(20),l=n(71),s=n.n(l),u=n(77),d=n.n(u),f=n(512),b=["showLabelInfo","showLabels"],p=["answer","article","post","item"],h=function(e){return e.itemType||p.find((function(t){return e[t]}))},m=function(e){return d()(Object(c.connect)((function(e,t){return{useNewLabels:Object(f.f)(e,t[h(t)])}}))((function(t){var n=t.showLabelInfo,r=void 0===n||n,c=t.showLabels,l=void 0===c||c,u=Object(o.default)(t,b),d=h(u),f=u,p=[];return l||p.push("isLabeled"),r||(p.push("labelInfo"),p.push("hermesLabel")),d&&p.length>0&&(f=Object.assign(Object.assign({},f),{},Object(a.a)({},d,s()(u[d],p)))),Object(i.b)(e,Object.assign({},f))})),e)},v=n(0),g=Object(v.createContext)({showLabelInfo:!0,showLabels:!0}),O=g.Provider,j=g.Consumer,y=function(e){return function(t){var n=Object(i.b)(j,{children:function(n){return Object(i.b)(e,Object.assign(Object.assign({},t),{},{showLabelProps:n}))}});return d()(n,e)}}},1373:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,a=t.reasonDescription;return Object(r.b)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":a})}},1374:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(20),i=n(886),c=n(512),l=function(){return Object(r.b)("div",{className:"LabelContainer-loading"})};t.a=function(e){var t=e.useOldLabels,s=e.item,u=e.abnormalDetailProps,d=e.collapseReasonProps,f=e.showDeleteButton,b=e.inviter,p=s.type,h=s.id,m=s.isLabeled,v=Object(o.useDispatch)(),g=Object(o.useSelector)((function(e){return t||u||d?{}:f?{thankInviterInfo:b}:Object(c.c)(e,s)})),O=Object(i.a)((function(){return n.e(85).then(n.bind(null,3045))}));return Object(a.useEffect)((function(){m&&!g&&p&&h&&v(Object(c.e)(p,h))}),[v,p,h,m,g]),O?Object(r.b)(O,Object.assign({data:g},e)):m&&!t?Object(r.b)(l,{}):null}},1376:function(e,t,n){"use strict";var r,a=n(4),o=n(1),i=n(0),c=n(1003),l=n(428),s=n(1343),u=n(1423),d=n(950);!function(e){e.Vote="vote",e.Comment="comment",e.Like="like",e.Favlist="favlist",e.Collect="collect",e.Thank="thank",e.Share="share",e.Unknown="unknown"}(r||(r={}));var f=r;function b(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var p=function(e){return{componentList:e.componentList.map((function(e,t){var n=e.name,r=e.component;return Object(i.isValidElement)(r)?{name:n,component:Object(i.cloneElement)(r,{key:r.key||n===f.Unknown?n+t:n})}:{name:n,component:r}}))}};t.a=function(e){var t=e.className,n=e.renderChildren,r=e.compatibleRenderActionButtons,i=e.middlewares,h=void 0===i?[]:i,m=Object(c.b)().blockStrategies,v=Object(u.b)([Object(u.a)(m),p].concat(b(a.a,h)),r||s.a);return Object(o.b)(d.a,{className:t,css:function(e){return{display:"flex",alignItems:"center",padding:"10px 16px",margin:"0 -16px -10px",color:e.colors.GBK04A,background:e.colors.GBK99A,clear:"both","&.is-fixed":{margin:0,boxShadow:"0 -1px 3px ".concat(Object(l.a)(e.colors.GBK02A).alpha(.1))},"& > *":{flexShrink:0},"& > .AnnotationTag":{whiteSpace:"nowrap"}}},children:v({componentList:(null==n?void 0:n(f))||[]})})}},1421:function(e,t,n){"use strict";t.a=function(e,t){return!!e&&(!!(t=t||e.type)&&(("answer"===t||"post"===t||"article"===t)&&(null===(n=e.settings)||void 0===n||null===(r=n.tableOfContents)||void 0===r?void 0:r.enabled)));var n,r}},1422:function(e,t,n){"use strict";var r=n(36),a=n(14),o=n(15),i=n(16),c=n(17),l=n(8),s=n(1),u=n(286),d=n(439),f=n(12),b=n.n(f),p=n(71),h=n.n(p),m=n(3),v=n.n(m),g=n(0),O=n(20),j=n(19),y=n(65),w=n(32),C=n(1545),k=["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"];function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var S=function(e){Object(i.a)(n,e);var t=x(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,a=t.column,o=a.title,i=a.imageUrl,c=a.id,l=t.avatar,f=t.avatarProps,p=t.noHoverCard,m=t.style,v=t.className,g=t.children,O=Object(r.default)(t,k),j=void 0===p?n:p;return e=l?Object(s.b)(u.b,Object.assign({url:i,alt:o},f)):g||o,j||(e=Object(s.b)(C.a,{toggler:e,id:c})),n&&w.E?e:Object(s.b)(d.a,{zaAction:"OpenUrl",zaEventType:"Click",zaType:"Text",children:Object(s.b)("a",Object.assign(Object.assign({style:m,className:b()("ColumnLink",v),href:"".concat(w.H,"/column/").concat(c)},h()(O,["dispatch"])),{},{children:e}))})}}]),n}(g.Component);S.propTypes={column:v.a.object.isRequired,avatar:v.a.bool,avatarProps:v.a.object,noHoverCard:v.a.bool,style:v.a.object,className:v.a.string,children:v.a.node},S.defaultProps={avatar:!1},t.a=Object(j.compose)(Object(O.connect)((function(e){return{isMobile:Object(y.d)(e,{includeTablet:!0})}})))(S)},1423:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(4),a=n(1343);function o(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var i=new Map([["vote","isBlockingVote"],["comment","isBlockingComment"],["like","isBlockingLike"],["favlist","isBlockingCollect"],["collect","isBlockingCollect"],["thank","isBlockingLike"],["share","isBlockingShare"]]);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var c=e.length>0?e.reduce((function(e,t){return[t.apply(void 0,o(r.a,e))]}),[].concat(a)):[].concat(a);return t.apply(void 0,o(r.a,c))}}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return{componentList:t.componentList.map((function(t){var n=t.name,r=t.component;return i.has(n)&&e[i.get(n)]?{name:n,component:null}:{name:n,component:r}}))}}}},1424:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1342),a={"-1":r.b.VOTED_DOWN,0:r.b.NEUTRAL,1:r.b.VOTED_UP,2:r.b.VOTED_DOWN},o=function(e){return a[e]||r.b.NEUTRAL}},1425:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(58),b=n(159),p=n(154),h=n(1561),m=n(950),v=n(1004),g=n(963),O=n(943),j=n(993),y=n(947),w=n(437);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var k=function(e){Object(o.a)(n,e);var t=C(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.favlist,a=t.favlist,o=a.id,i=a.type,c=a.title,s=a.updatedTime,u=a.answerCount,d=a.followerCount,w=a.isFollowing,C=a.isPublic,k=a.creator,x=void 0===k?{}:k,S=a.commentCount,A=t.status,T=t.action,R=t.lastreadTouchable,E=t.zaInfos,I=E.follow,N=E.options,B=t.renderOptions,z=this.state,P=z.commentsShown,_=z.commentsAutoFocus,L=z.commentPattern,M="/collection/".concat(o),D=Object(l.b)("a",{href:M,target:"_blank",rel:"noopener noreferrer",children:c});if(n===m.c.plain)return Object(l.b)(m.e,{data:r,link:M,title:D});var U={id:o,type:i};return n===m.c.default?Object(l.b)(m.e,{data:r,link:M,title:Object(l.c)(f.Flex,{alignItems:"center",children:[D,!C&&Object(l.b)(f.Text,{color:"GBL05A",ml:".3em",children:Object(l.b)(h.a,{center:!0,size:18})})]}),meta:A||Object(l.c)(m.d,{children:["".concat(Object(b.toDateString)(s)," 更新"),"".concat(Object(p.formatNumber)(u)," 条内容"),"".concat(Object(p.formatNumber)(d)," 人关注")]}),extra:T}):Object(l.c)(m.e,{data:r,link:M,onRef:function(t){e.contentItem=t},title:D,lastreadTouchable:R,children:[Object(l.c)(m.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注数："}),Object(p.formatNumber)(d)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(b.toDateString)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),Object(l.b)(y.a,{user:x})]})]},"favlist-item-cells"),Object(l.c)(m.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},U),{},{isFollowing:w,zaId:I})),Object(l.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:P,count:S}),Object(l.b)(j.a,Object.assign(Object.assign({},U),{},{title:c,authorName:x&&x.name})),B&&B((function(){return e.contentItem}),N)]},"favlist-item-actions"),Object(l.b)(g.a,{parent:r,commentPattern:L,shown:P,autoFocus:_,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);k.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},k.defaultProps={preset:m.c.default,zaInfos:{}},t.a=Object(w.b)((function(e){var t=e.favlist,n=e.trackCardShow,r=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:r}}))(k)},1426:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(440);function a(e){var t,n=e.isOrg,a=e.badgeV2,o=e.badge;if(!n)return!1;var i=Object(r.e)(a||o);return Boolean(null===(t=i.identity)||void 0===t?void 0:t.length)}},1427:function(e,t,n){"use strict";var r=n(34),a=n(1),o=n(0),i=n(961),c=n(1065);function l(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var s=function(e){return"plain"===e||"special-plain"===e},u=s,d=function(e){return"special-plain"===e};t.a=function(e,t,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=Object(o.useMemo)((function(){var t;if(Object(c.isCoCreateRelation)(f)){var r=!d(e);t=Object(c.renderDualAuthor)(e,n,f,r)}else t=!d(e)&&Object(a.b)(i.a,Object.assign(Object.assign({},u(e)&&{preset:"plain"}),{},{author:n,userLinkV2:!0}),"authorInfo");return s(e)?[t,null]:[[t,null],null]}),[f,e,n]),p=l(r.a,b,2),h=p[0],m=p[1];return[h,m]}},1428:function(e,t,n){},1430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("calc(")>-1)return i.map((function(e){return t.replace(/calc\(/g,e+"calc(")}))};var r,a=n(1273),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-","-moz-",""];e.exports=t.default},1431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("cross-fade(")>-1)return i.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var r,a=n(1273),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-",""];e.exports=t.default},1432:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&a.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},1433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("filter(")>-1)return i.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var r,a=n(1273),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-",""];e.exports=t.default},1434:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},1435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){a.hasOwnProperty(e)&&(n[a[e]]=r[t]||t)};var r={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},a={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};e.exports=t.default},1436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"==typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");a.hasOwnProperty(e)&&(n[a[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple",flex:"box","inline-flex":"inline-box"},a={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};e.exports=t.default},1437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&c.test(t))return i.map((function(e){return t.replace(c,(function(t){return e+t}))}))};var r,a=n(1273),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-","-moz-",""],c=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;e.exports=t.default},1438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("image-set(")>-1)return i.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r,a=n(1273),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-",""];e.exports=t.default},1439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},1440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a.hasOwnProperty(e)&&o.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},o={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},1441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){if("string"==typeof t&&c.hasOwnProperty(e)){var s=function(e,t){if((0,a.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=n.length;o<i;++o){var c=n[o],s=[c];for(var u in t){var d=(0,r.default)(u);if(c.indexOf(d)>-1&&"order"!==d)for(var f=t[u],b=0,p=f.length;b<p;++b)s.unshift(c.replace(d,l[f[b]]+d))}n[o]=s.join(",")}return n.join(",")}(t,i),u=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return u;var d=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?d:(n["Webkit"+(0,o.default)(e)]=u,n["Moz"+(0,o.default)(e)]=d,s)}};var r=i(n(2439)),a=i(n(1273)),o=i(n(1800));function i(e){return e&&e.__esModule?e:{default:e}}var c={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},l={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},1442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,n=e.plugins;return function e(c){for(var l in c){var s=c[l];if((0,i.default)(s))c[l]=e(s);else if(Array.isArray(s)){for(var u=[],d=0,f=s.length;d<f;++d){var b=(0,a.default)(n,l,s[d],c,t);(0,o.default)(u,b||s[d])}u.length>0&&(c[l]=u)}else{var p=(0,a.default)(n,l,s,c,t);p&&(c[l]=p),c=(0,r.default)(t,l,c)}}return c}};var r=c(n(2441)),a=c(n(2442)),o=c(n(2443)),i=c(n(2444));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1444:function(e,t,n){"use strict";t.a=null},1445:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=["MEMBER_ANSWER_QUESTION","MEMBER_PUBLISH_EBOOK","MEMBER_CREATE_ARTICLE","MEMBER_ASK_QUESTION","MEMBER_CREATE_PIN","MEMBER_PUBLISH_LIVE_COURSE"],a=function(e){return r.includes(e.verb)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.author.name;return n?"".concat(n,"：").concat(e):e}},1446:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n(0),o=n.n(a),i=n(58),c=n(258),l=n(51),s={textAnswer:"textAnswer",videoAnswer:"videoAnswer"},u=[{key:s.textAnswer,name:"图文回答"},{key:s.videoAnswer,name:"视频回答"}];function d(e,t){var n=e.activeTabKey,a=e.onChange;return Object(r.b)(c.b,{children:u.map((function(e){var o=e.key,u=e.name;return Object(r.b)(l.a,{as:c.a,zaType:"Button",zaText:!0,css:{padding:"0 10px",":first-of-type":{paddingLeft:20}},children:Object(r.b)(i.Text,{ref:o===s.videoAnswer?t:null,onClick:function(){return a(o)},css:function(e){return Object.assign({color:e.colors.GBK03A,cursor:"pointer"},n===o&&{fontWeight:"bold",borderBottom:"4px solid ".concat(e.colors.GBL01A)})},children:u})},o)}))})}t.b=o.a.forwardRef(d)},1447:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return b}));var r=n(34),a=n(1),o=n(77),i=n.n(o),c=n(0),l=n(262),s=n.n(l);function u(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var d=Object(c.createContext)(null),f=function(){return Object(c.useContext)(d)},b=function(e){return i()((function(t){var n=f();return Object(a.b)(e,Object.assign({traceId:n},t))}),e)};t.a=function(e){var t=e.children,n=Object(c.useState)((function(){return s()()})),o=u(r.a,n,1)[0];return Object(a.b)(d.Provider,{value:o,children:t})}},1448:function(e,t,n){"use strict";n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return A})),n.d(t,"a",(function(){return R}));var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(73),u=n.n(s),d=n(0),f=n(77),b=n.n(f),p=n(41),h=n.n(p),m=n(42),v=n(383),g=n.n(v),O=n(474),j=n(544);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var w={success:"success",fail:"fail",request:"request"},C="EDITABLE_STATSC";function k(){var e=h.a.get(C);e&&(e.forEach((function(e){m.b.increment(e)})),h.a.delete(C))}var x={get pageName(){return"UnknownPage"},reportRequest:u.a,reportSuccess:u.a,reportFail:u.a,recordError:function(e){return e},wrapAutoRecord:function(e){return e}},S=Object(d.createContext)(x),A=function(e){return b()((function(t){var n=Object(d.useContext)(S);return Object(l.b)(e,Object.assign({reporter:n},t))}),e)},T=function(e){Object(o.a)(n,e);var t=y(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props,r=n.reporter,a=n.name;throw r&&r.reportFail(a,e,{extra:{errorInfo:t}},!0),e}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component),R=A(T);t.c=function(e,t){var n=function(t,n){m.b.increment("".concat(e,".").concat(t,".").concat(n,".count"))},r=function(e){return n(e,w.request)},a=function(e){return n(e,w.success)},o=function(n,r,a,o){if(r instanceof Error&&!Object(O.c)(r.message)){var i=function(e){var t=e.name;return"ResponseError"===t?"".concat(t,"_").concat(e.status||0):t||"Unknown"}(r);m.b.increment([e,n,w.fail,i,"count"].join(".")),function(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n instanceof Error&&(null===(r=window.Raven)||void 0===r||r.captureException(n,Object.assign({tags:{scope:"".concat(e,":").concat(t)}},a)))}(n,r,a),!o&&Object(j.c)({type:"EditorActionError-"+n,appName:"heifetz",spanName:e,currentUser:(null==t?void 0:t())||"Unknown",release:"90-3a03610e",error:{name:i,message:r.message,payload:r.payload||"Unknown",stack:r.stack}})}},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.intent,c=void 0===i||i,l=n.success,s=void 0===l||l;return function(){try{c&&r(e);var n=function(){return s?a(e):void 0},i=t.apply(void 0,arguments);return g()(i)?i.then((function(e){return n(),e}),(function(t){throw o(e,t),t})):(n(),i)}catch(t){throw o(e,t),t}}};return{get pageName(){return e},reportRequest:r,reportSuccess:a,reportFail:o,wrapAutoRecord:i,recordError:function(e,t){return i(e,t,{success:!1})},stash:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length){var a=h.a.get(C)||[];a.push("".concat(e,".").concat(n.join("."),".count")),h.a.set(C,a)}}}}},1449:function(e,t,n){"use strict";var r=n(0),a=n(3),o=n.n(a),i=n(20),c=n(499);function l(e){var t=e.content,n=e.type,a=e.urlToken,o=Object(i.useDispatch)(),l=Object(r.useCallback)((function(){o(Object(c.a)({content:t,type:n,urlToken:a}))}),[o,t,n,a]),s=Object(i.useSelector)((function(e){return Object(c.c)(e,{type:n,urlToken:a})}));return Object(r.useEffect)((function(){s||l()}),[s,l]),null}l.propTypes={content:o.a.string.isRequired,type:o.a.oneOf(["answer","article"]).isRequired,urlToken:o.a.string.isRequired},t.a=l},1470:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ce}));var r=n(4),a=n(34),o=n(1),i=n(1003),c=n(886),l=n(906),s=n(99),u=n(927),d=n(12),f=n.n(d),b=n(73),p=n.n(b),h=n(0),m=n.n(h),v=n(20),g=n(58),O=n(23),j=n(51),y=n(35),w=n(136),C=n(95),k=n(489),x=n(1343),S=n(1423),A=n(1004),T=n(950),R=n(1165),E=n(1075),I=n(476),N=n(993),B=n(1164),z=n(1894),P=n(1631),_=n(40),L=n(1329),M=n(43),D=n(65),U=n(466),F=n(453),V=n(36),q=n(2432),G=n(933),H=function(e){var t,n,r,a,i=e.startTime,c=e.endTime,l=e.target,s=e.status,u=e.abnormalReason,d=Math.floor(i/1e3),f=Math.floor(c/1e3),b=l.parentObject,p=b.id,h=b.title,m=l.object.id,v=null;return 0===s?(t="已保存草稿",n="GBK06A",v=Object(o.b)(G.a,{}),r="GBK06A"):1===s?(t="发布中...",n="GBK06A",r="GBK06A"):2===s?"审核中"===u?(t="审核中",n="GBL05A",v=Object(o.b)(G.a,{}),r="GBK06A"):(t="已投稿",n="GBL01A",v=Object(o.b)(G.a,{}),r="GBK03A"):3===s&&(t="发布失败",n="GRD03A",v=Object(o.b)(G.a,{}),r="GBK06A",a=!0),{status:s,statusText:t,statusColor:n,StatusIcon:v,titleColor:r,hasAbnormalInfo:a,startTime:d,endTime:f,questionId:p,title:h,answerId:m,abnormalReason:u}},W=["status","questionId","answerId","children"],K=["item"],Z=function(e){var t=e.status,n=e.questionId,r=e.answerId,a=e.children,i=Object(V.default)(e,W);return 2===t?Object(o.b)(g.Link,Object.assign(Object.assign({target:"_blank",href:"https://www.zhihu.com/question/".concat(n,"/answer/").concat(r),css:{display:"block",cursor:"pointer"}},i),{},{children:a})):Object(o.b)(g.Box,Object.assign(Object.assign({},i),{},{children:a}))},Q={"已保存草稿":"已保存草稿","发布失败":"发布失败","已投稿":"投稿成功","审核中":"审核中","发布中...":"发布中..."},Y={"已保存草稿":"继续编辑","发布失败":"修改草稿","已投稿":"已投稿","审核中":"查看投稿","发布中...":""},J=function(e){var t=e.item,n=Object(V.default)(e,K),r=H(t),a=r.status,i=r.statusText,c=r.statusColor,l=r.StatusIcon,s=r.titleColor,u=r.hasAbnormalInfo,d=r.questionId,f=r.title,b=r.answerId,p=r.abnormalReason;return Object(o.c)(Z,Object.assign(Object.assign({py:"20px",css:function(e){return Object.assign(Object.assign({},0===a&&{cursor:"pointer"}),Object(q.a)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},status:a,questionId:d,answerId:b},n),{},{children:[Object(o.c)(g.Flex,{color:c,alignItems:"center",mb:"8px",fontSize:"12px",children:[Object(o.b)(g.Text,{children:Q[i]}),Object(o.b)(g.Text,{ml:"auto",fontWeight:"bold",css:function(e){return{color:e.colors.GBL01A}},children:Y[i]}),i===Q.发布失败?null:l]}),Object(o.b)(g.Text,{color:s,fontSize:"14px",children:f}),u&&Object(o.b)(g.Text,{p:"8px",mt:"8px",color:"GBK03A",fontSize:"14px",css:function(e){return{borderRadius:2,backgroundColor:e.colorMod(e.colors.GRD03A).alpha(.08)}},children:p})]}))},X=n(52),$=Object.assign;var ee=function(e){return m.a.createElement(X.a,$({width:"14",height:"16",fill:"none",viewBox:"0 0 14 16"},e),m.a.createElement("path",{fill:"#8590A6",d:"M1 2.666c0-.736.597-1.333 1.334-1.333h9.333c.736 0 1.334.597 1.334 1.333v10.667c0 .736-.598 1.333-1.334 1.333h-1.666a.333.333 0 01-.334-.333v-4A2.333 2.333 0 007.334 8h-6A.333.333 0 011 7.667v-5zm2.667 0a.667.667 0 100 1.334h6.667a.667.667 0 100-1.333H3.667zM3 6c0-.368.299-.667.667-.667H9a.667.667 0 010 1.334H3.667A.667.667 0 013 6zm-2 4.334a1 1 0 011-1h5.333a1 1 0 011 1v3.333a1 1 0 01-1 1H2a1 1 0 01-1-1v-3.333zm5.167 1.377a.333.333 0 010 .578l-2 1.154a.333.333 0 01-.5-.288v-2.31c0-.256.277-.417.5-.288l2 1.154z",fillRule:"evenodd",clipRule:"evenodd"}))},te=["label","onClick"];function ne(e,t){var n=e.label,r=e.onClick,a=Object(V.default)(e,te);return Object(o.b)(j.a,{zaText:!0,zaType:"Button",zaBlock:"VideoContributeButton",className:"ContentItem-action",children:Object(o.b)(y.c,Object.assign({ref:t,preset:"plain",onClick:r,icon:ee,label:n},a))})}var re=Object(h.forwardRef)(ne),ae=n(888),oe=n(216),ie=["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"],ce=Object(oe.a)((function(e){var t=e.isLiked,n=e.onClick,r=e.showIcon,a=void 0===r||r,i=e.authRequired,c=(e.currentUser,e.isLogin,Object(V.default)(e,ie)),l=Object(s.a)((function(e){var r=!t,a=r?"Like":"UnLike";O.a.trackEvent(e.target,{id:7448,action:a}),i((function(){return n(r)}))()}));return Object(o.b)(y.c,Object.assign({preset:"plain",onClick:l,icon:a?ae.a:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},c))})),le=n(39),se=n.n(le),ue=n(68),de=n(924),fe=n(218),be=n(1129),pe=n(1065),he=["onClick"],me=Object(h.forwardRef)((function(e,t){var n=e.onClick,r=Object(V.default)(e,he);return Object(o.b)(y.c,Object.assign({ref:t,preset:"plain",onClick:n,icon:de.a,label:"设置"},r))})),ve=function(e){var t,n,r=e.className,a=e.zvideo,i=e.onEdit,c=e.onToggleVisibility,l=e.onRemove,s=e.onChangeCommentPermission,u=e.togglerProps,d=Object(v.useDispatch)(),b=a.id,p=a.commentPermission,m=a.isVisible,O=a.creationRelationship,j=null==O||null===(t=O.coCreation)||void 0===t||null===(n=t.bizInfo)||void 0===n?void 0:n.canCancelPermission,y=Object(h.useCallback)(function(){var e=Object(ue.a)(se.a.mark((function e(t){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="视频删除后将不可恢复",e.next=3,d(Object(F.j)(b)).then((function(e){var t=e.payload.message;t&&(n=t)}));case 3:fe.a.confirm(Object(o.b)(g.Text,{textAlign:"center",children:n}),{title:"确定删除视频",text:{ok:"删除视频"}}).then((function(){l(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,b,l]),C=Object(o.c)(o.a,{children:[Object(o.b)(w.b,{onClick:i,children:"编辑视频"}),Object(o.b)(w.b,{onClick:c,children:"在视频列表内".concat(m?"隐藏":"显示")}),Object(o.b)(w.a,{}),Object(o.b)(be.c,{current:p,target:a,onChange:s}),Object(o.b)(w.a,{}),Object(o.b)(w.b,{onClick:y,children:"删除"})]});return Object(o.b)(w.c,{arrowed:Boolean(j),className:f()("ZVideoSettingMenu",r),itemClassName:"ZVideoSettingMenu-item",toggler:Object(o.b)(me,Object.assign({},u)),reversed:!0,children:j?Object(o.b)(w.b,{children:Object(o.b)(pe.CancelCoCreation,{contentType:"zvideo",contentId:b})}):C})},ge=n(1200),Oe=n(126);function je(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ye={up:1,neutral:0,down:-1};function we(e){var t,d=Object(v.useDispatch)(),b=e.className,m=e.zvideo,x=e.author,V=e.commentsShown,q=void 0!==V&&V,G=e.onCommentButtonClick,H=void 0===G?p.a:G,W=e.renderOptions,K=e.renderActionButtons,Z=e.enableContribute,Q=void 0!==Z&&Z,Y=m.id,X=m.title,$=m.description,ee=m.voting,te=m.voteCount,ne=m.voteupCount,ae=m.commentCount,oe=m.isLiked,ie=m.isFavorited,le=m.contribute,se=m.video,ue=m.video,de=(ue=void 0===ue?{}:ue).duration,fe=void 0===de?0:de,be=m.isOgv,pe=function(e){var t=Object(ge.c)(e),n="string"==typeof t?t:null==t?void 0:t.urlToken,r=Object(v.useSelector)((function(e){return Object(Oe.e)(e,{urlToken:n})}));return e?null!=r?r:t:null}(m.creationRelationship),he=Object(M.p)(pe),me=Object(M.p)(x)&&!he,we=me||he,Ce=Object(D.p)(),ke=Object(h.useMemo)((function(){return parseInt(1e3*fe)}),[fe]),xe=Object(h.useMemo)((function(){return{id:Y,video:se}}),[Y,se]),Se=Object(c.a)((function(){return n.e(102).then(n.bind(null,3051))})),Ae=Object(U.p)(Y),Te=Object(h.useState)(!1),Re=je(a.a,Te,2),Ee=Re[0],Ie=Re[1],Ne=Object(U.o)(Y).answer,Be=(Ne=void 0===Ne?{}:Ne).canContribute,ze=void 0!==Be&&Be,Pe=Boolean((null==le||null===(t=le.contributeList)||void 0===t?void 0:t.length)||(null==le?void 0:le.totals)),_e=Q&&!Ce&&me&&Pe,Le=Q&&!Ce&&me&&ze&&!Pe,Me=Object(L.a)("zvideo_toolbar:should_hide_contribution_tooltip"),De=je(a.a,Me,2),Ue=De[0],Fe=De[1],Ve=Object(h.useRef)();Object(l.a)((function(){return Fe(!0)}),!Ue&&Le?5e3:null);var qe=Object(h.useCallback)((function(){Ie(!0),d(Object(U.h)(Y,"edit"))}),[Y,d]),Ge=Object(h.useCallback)((function(){return d(Object(U.g)({zvideoId:Y,target:"answer",duration:ke}))}),[d,Y,ke]),He=Object(h.useCallback)((function(e){return d(Object(F.z)(Y,ye[e]))}),[Y,d]),We=Object(h.useCallback)((function(e){d(Object(F.k)(Y,e))}),[d,Y]),Ke=Object(h.useState)(!1),Ze=je(a.a,Ke,2),Qe=Ze[0],Ye=Ze[1],Je=Object(h.useCallback)((function(e){Ye(!0),O.a.trackEvent(e.target,{id:8213,action:"Collect",is_intent:!ie})}),[ie]),Xe=Object(h.useCallback)((function(){Ye(!1)}),[]),$e=Object(h.useCallback)((function(e,t){d(Object(F.b)(Y,t))}),[Y,d]),et=Object(h.useCallback)((function(){d(Object(F.x)(Y))}),[Y,d]),tt=Object(h.useCallback)((function(){d(Object(F.v)(Y)).then((function(){var e="https://www.zhihu.com/people/".concat(x.urlToken,"/zvideos");window.location.href=e}))}),[Y,x,d]),nt=Object(h.useState)(null),rt=je(a.a,nt,2),at=rt[0],ot=rt[1],it=Object(h.useState)(!1),ct=je(a.a,it,2),lt=ct[0],st=ct[1],ut=Object(h.useState)(!1),dt=je(a.a,ut,2),ft=dt[0],bt=dt[1];Object(h.useEffect)((function(){lt&&!at&&d(Object(F.g)(Y)).then((function(e){var t=e.payload;ot(t)}))}),[Y,lt,at,d]),Object(h.useEffect)((function(){me&&!Ce&&Q&&Ge()}),[me,Ge,Ce,Q]);var pt=Object(h.useCallback)((function(e){d(Object(F.t)(Y,e)).then((function(){d(Object(U.k)(Y)),e.clubId&&d(Object(F.w)(Y,e.clubId));var t="https://www.zhihu.com/zvideo/".concat(Y);window.location.href=t}))}),[Y,d]),ht=Object(h.useState)(!1),mt=je(a.a,ht,2),vt=mt[0],gt=mt[1],Ot=Object(i.b)().blockStrategies,jt=Object(S.b)([Object(S.a)(Ot)],K),yt=jt({componentList:[{name:"favlist",component:Object(o.b)(R.a,{onClick:Je,label:"收藏",showIcon:!Ce},"favlist")},{name:"like",component:Object(o.b)(ce,{isLiked:oe,onClick:We,showIcon:!Ce},"like")},{name:"report",component:!we&&Object(o.b)(I.a,{id:Y,type:"zvideo",onModalShown:gt},"report")}]}).filter(Boolean),wt=Object(h.useCallback)((function(){ot(null),st(!1),d(Object(F.s)(Y))}),[d,Y]),Ct=Object(s.a)((function(e){qe(),d(Object(U.l)(e.id)),bt(!1)})),kt=Object(s.a)((function(e){Ge(),d(Object(F.s)(e)),Ie(!1)})),xt=J,St=z.a;return Object(o.c)(o.a,{children:[Object(o.b)("div",{css:{marginBottom:"14px"},children:Object(o.c)(T.a,{className:f()("ZVideoToolbar",b),children:[jt({componentList:[{name:"vote",component:Object(o.b)(B.a,{type:"zvideo",count:ne||te,voting:ee,onVote:He,isOwner:me,zaIds:{voteUp:6599,voteDown:6600}},"vote")},{name:"comment",component:Object(o.b)(A.a,{onClick:H,commentsShown:q,count:ae,positionStatus:"normal"},"comment")},{name:"share",component:Object(o.b)(N.a,{id:Y,type:"zvideo",url:"https://".concat(_.a.wwwHost,"/zvideo/").concat(Y).concat(be?"?page=ogv":""),title:X,authorName:x.name,positionStatus:"normal"},"share")}]}),Ce?Object(o.c)(w.c,{preventCloseOnTarget:!0,globalClose:!vt,menuContainerClassName:"ZVideoToolbar-menuContainer",toggler:Object(o.b)(y.c,{preset:"plain",icon:u.a,"aria-label":"更多"}),children:[yt.map((function(e){return Object(o.b)(w.b,{className:"ZVideoToolbar-menuItem",children:e},e.key)})),!we&&W()]}):[].concat(je(r.a,yt),je(r.a,we?[]:W())),_e&&Object(o.b)(re,{label:"全部投稿",onClick:function(){d(Object(U.h)(Y)),bt(!0)}}),Le&&Object(o.c)(o.a,{children:[Object(o.b)(re,{ref:Ve,label:"添加投稿",onClick:qe}),Object(o.b)(k.a,{placement:"top",isOpen:!Ue,target:Ve.current,children:"投稿到问题，让更多人看到你的视频"})]}),we&&Object(o.b)(ve,Object.assign({zvideo:m,onEdit:function(){return st(!0)},onToggleVisibility:et,onChangeCommentPermission:$e,onRemove:tt},Ce&&{togglerProps:{label:null}}))]})}),me&&Object(o.b)(C.b,{className:"ZVideoToolbar-videoFormModal",title:"编辑视频",size:"fullPage",onClose:wt,css:{width:"734px",".Modal-inner":{"::-webkit-scrollbar":{display:"none"}},".Modal-title":{marginLeft:32}},children:lt&&at&&Object(o.b)(P.a,{defaultVideo:at,onSubmit:pt,onRemove:wt})}),Object(o.b)(E.a,{id:Y,type:"zvideo",shown:Qe,onClose:Xe,zaEnabled:!0}),Q&&!Ce&&me&&Object(o.c)(o.a,{children:[Object(o.b)(C.b,{title:Object(o.c)(g.Flex,{px:"24px",justifyContent:"space-between",children:[Object(o.b)(g.Text,{fontSize:"24px",color:"GBK02A",children:"全部视频回答投稿"}),ze&&Object(o.b)("button",{css:function(e){return{width:90,height:34,border:"none",borderRadius:3,fontSize:14,fontWeight:"normal",color:e.colors.GBL01A,backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.08)}},onClick:function(){qe(),bt(!1)},children:"添加投稿"})]}),css:function(e){return{width:536,height:554,backgroundColor:e.colors.GBK99A,".Modal-title":{marginTop:24},".Modal-inner::-webkit-scrollbar":{display:"none"}}},onClose:function(){return bt(!1)},children:ft&&Ae.map((function(e){return Object(o.b)(xt,Object.assign({item:e},0===e.status&&{onClick:function(){Ct(e)}}),e.id)}))}),Boolean(Se)&&Object(o.b)(j.b,{block:"Contribution",children:Object(o.b)(St,{show:Ee,defaultVideo:xe,title:X,description:$,duration:ke,onClose:function(){kt(Y)},shouldPublish:!0})})]})]})}we.defaultProps={renderOptions:function(){return[null]},renderActionButtons:x.a};var Ce=we},1471:function(e,t,n){"use strict";n.d(t,"a",(function(){return ye}));var r=n(2),a=n(14),o=n(15),i=n(16),c=n(17),l=n(8),s=n(1),u=n(1003),d=n(1060),f=n(1538),b=n(2147),p=n(1777),h=n(916),m=n(12),v=n.n(m),g=n(3),O=n.n(g),j=n(0),y=n(20),w=n(19),C=n(23),k=n(437),x=n(35),S=n(961),A=n(1165),T=n(1075),R=n(943),E=n(993),I=n(1478),N=n(1340),B=n(992),z=n(118),P=n(653),_=n(1379),L=n(933),M=n(436),D=n(387),U=n(94),F=n.n(U);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var q={top:10,left:20},G={top:0,left:0};function H(){var e,t=F()(navigator.userAgent).Mobile?G:q,n=t.top,r=t.left,a=window,o=a.innerWidth,i={left:0,top:0,width:o,height:a.innerHeight},c={x:(e=i).left+e.width/2,y:e.top+e.height/2},l=2*(96+r),s=o,u=0;return o<1e3+l?s=o-l:(s=1e3,u=(o-(1e3+l))/2),{x:c.x,y:c.y,imgContainerWidth:s,imgContainerHeight:i.height-2*n,left:u,top:n}}var W=function(e){Object(i.a)(n,e);var t=V(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).getBoundingClientRect=function(e,t){var n=t.width,r=t.height,a={top:0,left:0,width:0,height:0},o=1;return e.width>e.height?(a.height=r,o=r/e.height,a.width=e.width*o,a.left="-".concat((a.width-n)/2)):e.width<e.height?(a.width=n,o=n/e.width,a.height=e.height*o,a.top="-".concat((a.height-r)/2)):(a.width=n,a.height=r),a},r.getParentNode=function(){for(var e,t=r.props.img.parentNode;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview"))return e=t;t=t.parentNode}return e},r.getChildImgNode=function(e){if(e){var t=e.childNodes,n=r.state.index,a=n;return{img:(n>=t.length?t[a=t.length-1]:t[a]).querySelector(".Image-Preview"),index:a}}},r.setImageElAttr=function(){var e=r.state,t=e.width,n=e.transition,a=r.props.images,o=r.getParentNode(),i=r.getChildImgNode(o);if(i&&i.img){var c=i.img.getBoundingClientRect(),l=r.getBoundingClientRect(a[i.index],{width:c.width,height:c.height}),s=r.imgEl.getBoundingClientRect(),u=r.containerClientRect,d=u.left,f=u.top,b={x:s.left+s.width/2-d-l.width/2,y:s.top+s.height/2-f-l.height/2},p=t/l.width;"transition"!==n?(r.setState({transition:""},(function(){r.setState({rect:c,transition:"",width:l.width,height:l.height,translate:b,scale:p,transform:"translate(".concat(b.x,"px ,").concat(b.y,"px) scale(").concat(p,")")})})),setTimeout((function(){r.setState({transition:"transition",translate:null,scale:null,transform:"translate(".concat(c.left-d,"px,").concat(c.top-f,"px)"),opacity:-1})}),20)):r.setState({translate:null,scale:null,opacity:-1,transform:"translate(".concat(c.left-d,"px,").concat(c.top-f,"px)")})}},r.getImageSize=function(e){var t=r.containerClientRect,n=t.imgContainerWidth,a=t.imgContainerHeight,o=e.width,i=e.height,c=!1,l=1;return(e.width>n||e.height>a)&&(e.width>n&&(l=n/e.width,o=e.width*l,i=l*e.height),i>a&&(i*=l=a/i,o*=l),c=!0),r.setState({cursorZoomIn:c}),{width:o,height:i}},r.handleResizeCallback=function(){r.containerClientRect=H();var e=r.state.index,t=r.props.images;r.setState(Object.assign({transition:"fixed",transform:""},r.getImageSize(t[e])))},r.handleClick=function(e){var t=r.state.cursorZoomIn,n=e.target;n&&n.classList&&n.classList.contains("ImageGallery-Img")&&t&&r.setState({previewImage:n}),(n.classList.contains("ImageGallery")||n.classList.contains("ImageGallery-Inner"))&&r.setImageElAttr()},r.handleTransEnd=function(){var e=r.state,t=e.translate,n=e.scale,a=r.props.onClose;t&&n||a()},r.handlePreviewImageClose=function(){r.setState({previewImage:null},(function(){D.hide()}))},r.handleKeyUpCallback=function(e){39===e.keyCode?r.handleCutImage(1):37===e.keyCode&&r.handleCutImage(-1)},r.handleCutImage=function(e){var t=r.state.index+e,n=r.props.images;t<n.length&&t>=0&&r.setState(Object.assign({index:t,transition:"fixed",transform:""},r.getImageSize(n[t])))},r.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},r.containerClientRect=H(),r}return Object(o.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.data,n=e.img.getBoundingClientRect();D.hide();var r=this.containerClientRect,a=r.left,o=r.top,i=this.getBoundingClientRect(t,{width:n.width,height:n.height}),c={left:n.left-a+Number(i.left),top:n.top-o+Number(i.top)};this.setState({rect:i,width:i.width,height:i.height,transform:"translate(".concat(c.left,"px, ").concat(c.top,"px)")})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState(Object.assign({},e.computeTransition(e.props.index)))}),20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)}},{key:"componentWillUnmount",value:function(){D.show(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)}},{key:"computeTransition",value:function(e){var t=this.props.images[e],n=this.containerClientRect,r=n.x,a=n.y,o=n.left,i=n.top,c=this.getImageSize(t).width;if(this.imgEl){var l=this.imgEl.getBoundingClientRect(),s=c/l.width,u={x:r-l.width/2-o,y:a-l.height/2-i};return{translate:u,scale:s,transform:"translate(".concat(u.x,"px ,").concat(u.y,"px) scale(").concat(s,")")}}}},{key:"render",value:function(){var e=this,t=this.props.images,n=this.state,r=n.translate,a=n.index,o=n.width,i=n.height,c=n.transition,l=n.previewImage,u=n.transform,d=n.cursorZoomIn,f=n.opacity,b=this.containerClientRect,p=b.left,h=b.top,m=b.imgContainerWidth,g=b.imgContainerHeight,O=(F()(navigator.userAgent).Mobile?G:q).left,j=t[a];return Object(s.b)(P.a,{children:Object(s.c)("div",{className:v()("ImageGallery",{"is-active":r}),onClick:this.handleClick,children:[Object(s.c)("div",{className:"ImageGallery-Content",style:{width:"".concat(m+2*(96+O),"px"),height:"".concat(g,"px"),left:"".concat(p,"px"),top:"".concat(h,"px")},children:[!l&&t.length>1&&Object(s.b)("a",{className:v()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===a}),style:{left:"".concat(O,"px")},onClick:function(){return e.handleCutImage(-1)},children:Object(s.b)(_.a,{fill:"#fff",size:42})}),Object(s.b)("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t},children:Object(s.b)("img",{ref:function(t){e.imgEl=t},src:Object(z.imgUrl)(j.url,"r"),className:v()("ImageGallery-Img",{"ImageGallery-transition":"transition"===c,"ImageGallery-fixed":"fixed"===c,"ImageGallery-CursorZoomIn":d}),style:{width:o,height:i,transform:u,opacity:f},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":j.width,"data-rawheight":j.height,"data-thumbnail":j.thumbnail,"data-original":Object(z.imgUrl)(j.url,"r"),"data-actualsrc":Object(z.imgUrl)(j.url,"b")})}),!l&&t.length>1&&Object(s.b)("a",{className:v()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":a>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:"".concat(O,"px")},children:Object(s.b)(L.a,{fill:"#fff",size:42})})]}),!l&&Object(s.b)("a",{className:"ImageGallery-close",onClick:this.setImageElAttr,children:Object(s.b)(M.a,{fill:"#fff"})}),l&&Object(s.b)(B.a,{img:l,onClose:this.handlePreviewImageClose})]})})}}]),n}(j.Component);W.propTypes={img:O.a.object.isRequired,data:O.a.object.isRequired,onClose:O.a.func.isRequired};var K=W;function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Q=function(e){Object(i.a)(n,e);var t=Z(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).setImageAttr=function(){var e=r.state,t=e.width,n=e.height;if(!t||!n){var a=r.divEl.getBoundingClientRect();t=t||a.width,n=n||a.width,r.setState({width:t,height:n})}var o=r.getBoundingClientRect({width:t,height:n});r.setState({imageWidth:o.width,imageHeight:o.height,imageTop:o.top,imageLeft:o.left})},r.getBoundingClientRect=function(e){var t=e.width,n=e.height,a=r.props.data,o={top:0,let:0,width:0,height:0},i=1;return a.width>a.height?(o.height=n,i=n/a.height,o.width=a.width*i,o.left="-".concat((o.width-t)/2)):(o.width=t,i=t/a.width,o.height=a.height*i,o.top="-".concat((o.height-n)/2)),o},r.handlePreviewImageOpen=function(e){var t=r.props.onPreviewImageOpen;e.persist(),t&&t(e)||r.setState({previewImage:r.imgWrapper.querySelector("img")})},r.handlePreviewImageClose=function(){r.setState({previewImage:null})},r.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setImageAttr()}},{key:"render",value:function(){var e=this,t=this.state,n=t.width,r=t.height,a=t.previewImage,o=t.imageWidth,i=t.imageHeight,c=t.imageTop,l=t.imageLeft,u=this.props,d=u.data,f=u.images,b=u.index,p=u.surplus,h=u.previewType,m=void 0===h?1:h,g=u.data.isGif,O=u.vague,j=u.previewTransitionType,y=void 0===j?0:j;return Object(s.c)("div",{onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?"".concat(n,"px"):"",height:r?"".concat(r,"px"):""},children:[Object(s.b)("span",{ref:function(t){e.imgWrapper=t},className:v()({"Image-PreviewVague":O}),children:O?Object(s.b)(N.a,{className:"Image-Preview",src:g?Object(z.imgUrl)(d.thumbnail,"xl"):Object(z.imgUrl)(d.url,"xl"),width:n,height:r,alt:"cover",thumbnail:g?Object(z.imgUrl)(d.thumbnail,"xl"):Object(z.imgUrl)(d.url,"xl"),"data-rawwidth":d.width,"data-rawheight":d.height,"data-thumbnail":d.thumbnail,"data-original":Object(z.imgUrl)(d.url,"r"),"data-actualsrc":Object(z.imgUrl)(d.url,"b")}):Object(s.b)("img",{className:"Image-Preview",src:g?d.thumbnail:Object(z.imgUrl)(d.url,"r"),width:o,height:i,style:{top:"".concat(c,"px"),left:"".concat(l,"px")},alt:"preview","data-rawwidth":d.width,"data-rawheight":d.height,"data-thumbnail":d.thumbnail,"data-original":Object(z.imgUrl)(d.url,"r"),"data-actualsrc":Object(z.imgUrl)(d.url,"b")})}),p>0&&Object(s.b)("em",{className:"Thumbnail-Surplus-Sign",children:"+".concat(p)}),g&&Object(s.b)("em",{className:"Thumbnail-Gif-Sign",children:"GIF"}),a&&(1===m?Object(s.b)(K,{img:a,data:d,index:b,images:f,onClose:this.handlePreviewImageClose}):Object(s.b)(B.a,{img:a,isOriginalUrl:!O,transitionType:y,data:d,onClose:this.handlePreviewImageClose}))]})}}]),n}(j.Component);Q.propTypes={width:O.a.number,height:O.a.number,index:O.a.number,surplus:O.a.number,data:O.a.object,images:O.a.array,onPreviewImageOpen:O.a.func};var Y=n(1426),J=n(216),X=n(65),$=n(462),ee=n(1027),te=n(32),ne=n(1004),re=n(963),ae=n(1026),oe=n(950),ie=n(2980),ce=n(154),le=n(451);n(1792);function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var ue={pin:"updatePinsReaction"},de=function(e){Object(i.a)(n,e);var t=se(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleVote=e.props.authRequired((function(t){var n=e.props,r=n.reactioned,a=n.type,o=n.id,i=n.onReaction,c=!r;C.a.trackEvent(t.target,{action:c?"Upvote":"UnUpvote",element:"Button"});var l=ue[a];i?i(o):e.props[l](o,c)}),te.bb.vote),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.reactioned,n=e.count,r=e.className,a=e.disabled;return Object(s.c)(x.c,{className:v()("VoteButton","ReactionButton",{"is-active":t},r),onClick:this.handleToggleVote,disabled:a,children:[Object(s.b)(ie.a,{size:20,center:!0})," ",Object(ce.formatNumber)(n)]})}}]),n}(j.Component);de.propTypes={type:O.a.oneOf(le.a).isRequired,id:O.a.oneOfType([O.a.number,O.a.string]).isRequired,icon:O.a.string,reactioned:O.a.bool,count:O.a.number};var fe=Object(w.compose)(J.a,Object(y.connect)(null,{updatePinsReaction:$.n}))(de),be=n(476),pe=n(1e3),he=n(1107),me=n(1474),ve=n(58),ge=function(e){var t=e.qualityLabel,n=null==t?void 0:t[0];return n?Object(s.b)(ve.Box,{marginY:16,children:Object(s.b)(me.k,{theme:n.theme.toUpperCase(),text:n.text,iconName:null==n?void 0:n.icon,detail:n.detail})}):null};function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var je=function(e){Object(i.a)(n,e);var t=Oe(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this)).openDeleteModal=function(){o.setState({deleteModalShown:!0})},o.closeDeleteModal=function(){o.setState({deleteModalShown:!1})},o.handleFavlistsShown=function(){C.a.trackEvent(o.favButtonRef,{action:"Collect",element:"Button",is_intent:!0}),o.props.authRequired((function(){return o.setState({favlistsShown:!0})}),te.bb.favlists)()},o.handleFavlistHide=function(){o.setState({favlistsShown:!1})},o.handlePositionStatusChange=function(e){o.setState({positionStatus:e})},o.handleDeletePin=function(){var e=o.props,t=e.pin.id,n=e.deletePin;return(0,e.authRequired)(n(t),te.bb.deletePin)},o.handleCommentsShown=function(e,t){o.setState(t)},o.handleCommentsHide=function(){o.setState({commentsShown:!1})},o.renderQuoteContents=function(e,t){var n=e.content;return Object(s.b)("blockquote",{className:"PinItem-3lineBlockquote",children:n},t)},o.renderLinkContents=function(e,t,n){var a=e.url,o=e.title,i=e.card,c='<a href="'+a+'" data-draft-type="link-card" ></a>';return"text"===n?Object(s.c)("a",{className:v()("link-text",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),href:a,target:"_blank",rel:"noopener noreferrer",children:[Object(s.b)(b.b,{stroke:"#BBC1CC",text:!0,center:!0})," ",o||a]},t):Object(s.b)(d.f,{html:c,linkCardInfo:Object(r.a)({},"".concat(a),i)})},o.renderVideoContents=function(e,t){var n=e.videoId||e.id,r={title:"",thumbnail:e.thumbnail||e.coverInfo&&e.coverInfo.thumbnail,isLens:!0,id:n,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(n)};return Object(s.b)(he.a,{isAppView:o.isAppView,data:r},t)},o.renderOriginPinContents=function(e){if(!e)return null;var t=e.regulateInfo,n=e.isDeleted,r=e.deletedReason,a=e.content,i=e.author;if(null!=t&&t.isRegulating)return Object(s.b)("div",{className:v()("PinItem-RichText","PinItem-content-originpin"),children:t.reason});if(n)return Object(s.b)("div",{className:v()("PinItem-RichText","PinItem-content-originpin"),children:r});if(a&&a[0]){var c=o.props.noCollapsed,l=o.state.originPinExpanded,u=a.find((function(e){return"text"===e.type}));return Object(s.c)("div",{className:v()("PinItem-RichText","PinItem-content-originpin"),children:[Object(s.c)("div",{children:[i.name,"："]}),u&&Object(s.b)(pe.b,{html:u.content,noCollapsed:c,expanded:l}),o.renderPinContents(a)]})}return null},o.renderPinContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.filter((function(e){return e.url&&"image"===e.type})),r=[];return Object(s.c)("div",{className:v()("RichText","ztext","PinItem-remainContentRichText"),children:[e.map((function(e,a){var i=e.type;return"quote"===i?o.renderQuoteContents(e,a):"link"===i?o.renderLinkContents(e,a,t):"video"===i?o.renderVideoContents(e,a):("image"===i&&r.length<4&&e.url&&r.push(Object(s.b)(Q,{data:e,vague:!0,index:r.length,images:n,surplus:n.length>4&&3===r.length?n.length-4:0},a)),null)})),r.length>0&&Object(s.b)("div",{className:"Image-Wrapper-Preview",children:r})]})},o.renderRemainContents=function(){var e=o.props.pin,t=e.id,n=e.created,r=e.updated,a=e.originPin,i=e.content,c=e.ipInfo,l="//".concat(te.r,"/pin/").concat(t);return Object(s.c)("div",{children:[o.renderPinContents(i),o.renderOriginPinContents(a),Object(s.b)(pe.a,{href:l,created:n,updated:r,ipInfo:c})]})};var i=e.pin,c=e.noCollapsed,l=e.showCommentButton;return o.contentHTML=o.getContentHTML(i),o.state={expanded:c,originPinExpanded:c,commentPattern:l?"fixed":"bottom",commentsShown:!l,commentsAutoFocus:l,deleteModalShown:!1,favlistsShown:!1},o}return Object(o.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.contentHTML=this.getContentHTML(e.pin)}},{key:"getContentHTML",value:function(e){var t;if(null==e||null===(t=e.content)||void 0===t||!t[0])return"";var n=e.content,r="";return"text"===n[0].type&&(r=n[0].content),r}},{key:"render",value:function(){var e=this,t=this.props,n=t.pin,r=t.pin,a=r.id,o=r.author,i=r.virtuals,c=(i=void 0===i?{}:i).reactionType,l=r.commentCount,u=r.reactionCount,d=r.adminClosedComment,b=r.qualityLabel,m=t.preset,g=t.lastreadTouchable,O=t.isSticky,j=t.handleToggleSticky,y=t.noCollapsed,w=t.showFollowAuthorButton,C=t.showCommentButton,k=t.commentInputPosition,N=t.isMobile,B=t.renderOptions,z=t.currentUser,P=t.blockStrategies,_=(P=void 0===P?{}:P).isBlockingCollect,L=P.isBlockingShare,M=P.isBlockingComment,D=this.state,U=D.positionStatus,F=D.expanded,V=D.deleteModalShown,q=D.favlistsShown,G=D.commentsShown,H=D.commentsAutoFocus,W=D.commentPattern,K=z&&z.urlToken===o.urlToken,Z="plain"===m,Q="like"===c,J="function"==typeof j,X="//".concat(te.r,"/pin/").concat(a);return Object(s.c)(oe.e,{data:n,link:X,"data-zop":JSON.stringify({itemId:a,type:"pin"}),meta:Z||Object(s.b)("div",{children:Object(s.c)("div",{className:"PinItem-author",children:[Object(s.b)(S.a,{author:o,className:"PinItem-authorInfo",userLinkV2:!0},"authorInfo"),w&&!K&&z&&Object(s.b)(R.a,{className:"PinItem-followButton",preset:"primary",type:o.type,id:o.urlToken,gender:o.gender,isFollowing:o.isFollowing,onClick:this.handleFollowButtonClick})]})}),className:v()("PinItem",{"PinItem-withLabel":Boolean(null==b?void 0:b[0])}),lastreadTouchable:g,children:[Object(s.b)(ge,{qualityLabel:b}),Object(s.c)(pe.b,{prefix:J&&O&&Object(s.b)(I.a,{}),alwaysShowPrefix:!0,data:n,html:this.contentHTML,excerpt:this.contentHTML,noCollapsed:y,expanded:F,onPositionStatusChange:this.handlePositionStatusChange,renderCanExpandExtra:this.renderRemainContents,children:[Object(s.b)(fe,{reactioned:Boolean(Q),count:u,id:a,type:"pin"}),!M&&C&&Object(s.b)(ne.a,{onClick:this.handleCommentsShown,commentsShown:G,commentClosed:d,count:l,positionStatus:U}),!L&&Object(s.b)(E.a,{id:a,type:"pin",authorName:o&&o.name,href:X,positionStatus:U}),!_&&(!z||!z.isOrg)&&Object(s.b)(A.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:N?"":"收藏"}),!K&&Object(s.b)(be.a,{type:"pin",id:a}),!N&&J&&K&&Object(Y.a)(z)&&Object(s.b)(x.c,{preset:"plain",onClick:j,icon:O?p.b:h.b,label:O?"取消置顶":"置顶"}),K&&Object(s.b)(x.c,{preset:"plain",onClick:this.openDeleteModal,icon:f.b,label:"删除"}),B()]}),K&&Object(s.b)(ae.a,{title:"你确定要删除自己的想法吗？",shown:V,onCancel:this.closeDeleteModal,onSubmit:this.handleDeletePin}),!M&&Object(s.b)(re.a,{parent:n,commentPattern:W,commentInputPosition:k,shown:G,showPackupButton:C,autoFocus:H,onClose:this.handleCommentsHide}),Object(s.b)(T.a,{id:a,type:"pin",shown:q,onClose:this.handleFavlistHide,zaEnabled:!0})]})}}]),n}(j.Component);je.propTypes={noCollapsed:O.a.bool,showFollowAuthorButton:O.a.bool,showCommentButton:O.a.bool,commentInputPosition:O.a.oneOf(["top","bottom"])},je.defaultProps={noCollapsed:!1,showFollowAuthorButton:!1,showCommentButton:!0,commentInputPosition:"bottom",renderOptions:function(){return[null]}};var ye=Object(w.compose)(Object(ee.a)((function(e){var t=e.pin;return{content:{type:"Pin",id:String(t.id)}}})),Object(k.b)((function(e){var t=e.pin,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=(a=void 0===a?{}:a).cardShow;return Object.assign(Object.assign({module:"PinItem",card:{content:{type:"Pin",id:String(t.id),author_member_hash_id:t&&t.author.id}}},o&&{view:{id:o}}),{},{trackCardShow:r})})),J.a,Object(u.d)({dataPath:"pin"}),u.c,Object(y.connect)((function(e,t){var n=t.pin;return Object.assign(Object.assign({},"string"==typeof(null==n?void 0:n.author)&&{pin:Object.assign({},n,{author:e.entities.users[n.author]})}),{},{isMobile:Object(X.d)(e)})}),{deletePin:$.e}))(je)},1474:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ee})),n.d(t,"b",(function(){return ze})),n.d(t,"c",(function(){return Ne})),n.d(t,"d",(function(){return se})),n.d(t,"e",(function(){return ue})),n.d(t,"f",(function(){return fe})),n.d(t,"g",(function(){return Re})),n.d(t,"h",(function(){return _e})),n.d(t,"i",(function(){return Ae})),n.d(t,"j",(function(){return xe})),n.d(t,"k",(function(){return Me})),n.d(t,"l",(function(){return le}));var r=n(24),a=n.n(r),o=n(30),i=n.n(o),c=n(1),l=n(436),s=n(1525),u=n(1116),d=n(933),f=n(2981),b=n(2982),p=n(0),h=n.n(p),m=n(27),v=Object.assign;function g(e){return h.a.createElement(m.a,v(v({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--BlueBook24"+(t?" "+t:""))}),h.a.createElement("path",{d:"M15.333 19.333l-2.764 2.765a.333.333 0 01-.569-.236v-2.529h3.333zm0-13.333c.737 0 1.334.597 1.334 1.333V16A2.667 2.667 0 0114 18.666H7.333A1.333 1.333 0 016 17.334v-10C6 6.597 6.597 6 7.333 6h8zm.394-1.987a2.933 2.933 0 012.93 2.79l.004.143v8.838c0 .693-.53 1.262-1.205 1.327l-.129.006V6.946a1.6 1.6 0 00-1.49-1.596l-.11-.004H7.333c0-.736.597-1.333 1.334-1.333h7.06z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function O(e){return h.a.createElement(g,v(v({},e),{className:function(){return"Zi Zi--BlueBook"+(e.className?" "+e.className:"")}}))}var j=n(2983),y=n(910),w=n(2984),C=n(2985),k=n(915),x=n(2986),S=n(2987),A=n(2988),T=n(2327),R=n(2989),E=n(1178),I=n(1315),N=n(439),B=n(58),z=n(51),P=n(155),_=n(670),L=n(118),M=n(23),D=n(99),U=n(945),F=Object.assign;function V(e){return h.a.createElement(m.a,F(F({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--SearchCircleFill24"+(t?" "+t:""))}),h.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm-.778-7.617c1.79 0 3.222-1.438 3.222-3.192C14.444 9.438 13.011 8 11.222 8S8 9.438 8 11.191c0 1.754 1.433 3.192 3.222 3.192zm0 1.5c.947 0 1.83-.277 2.569-.754l1.9 1.901a.75.75 0 001.062-1.06l-1.845-1.845a4.652 4.652 0 001.036-2.934c0-2.59-2.114-4.691-4.722-4.691C8.614 6.5 6.5 8.6 6.5 11.191c0 2.591 2.114 4.692 4.722 4.692z",fillRule:"evenodd",clipRule:"evenodd"}));var t}var q=Object.assign;var G=n(2326),H=Object.assign;var W=n(936),K=n(12),Z=n.n(K),Q=n(3),Y=n.n(Q),J=["zaBlock","color","iconUrl","icon","name","subText","linkText","link","expandable","isExpanded","showDeleteButton","onDelete","onClick","style","className"],X=["inviter"],$=["data"],ee=["data"],te=["children","placement","onClick","onPopoverClosed","zaBlock"],ne=["text","center"],re=["answerCollapsed","answerAbnormal","commercial","business","thanksForInviting","positive","bluebook","annotation","disclaimer","adPromotion","campaign","limit"];function ae(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var oe={GOLDEN:{bg:"GYL02A",color:"GYL02A"},BLUE:{bg:"GBL07A",color:"GBL07A"},PURPLE:{bg:"GRD07A",color:"GRD07A"},GREY:{bg:"GBK10A",color:"GBK06A",bgNoAlpha:!0}},ie=function(e){var t=e.bg,n=e.bgNoAlpha,r=Object(_.a)(),a=r.colors,o=r.colorMod,i=a[t],c=a[e.color];return{bg:n?i:o(i).alpha(.08),color:c}},ce=Object(p.forwardRef)((function(e,t){var n=e.zaBlock,r=e.color,a=void 0===r?oe.BLUE:r,o=e.iconUrl,f=e.icon,b=e.name,p=e.subText,h=e.linkText,m=e.link,v=e.expandable,g=e.isExpanded,O=e.showDeleteButton,j=e.onDelete,y=e.onClick,w=e.style,C=e.className,k=i()(e,J),x=Object(P.b)().Mobile,S=Object(_.a)().fontWeights,A=ie(a),T=A.bg,R=A.color,E=m&&!v?N.b:n?z.f:"div",I=null,M=null;O?M=l.a:v?I=g?s.a:u.a:m&&(I=d.a);var D={zaText:!0,zaBlock:n,shouldTrackShow:!0,zaType:"Text"};return Object(c.c)(E,Object.assign(Object.assign(Object.assign(Object.assign({ref:t,className:C,css:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-start",background:T,padding:"0 8px",height:x?28:30,borderRadius:x?14:15,textDecoration:"none",fontSize:x?13:14,lineHeight:x?"16px":"18px",color:R,overflow:"hidden"}},m&&{href:m}),n&&D),{},{style:Object.assign({cursor:I?"pointer":"default"},w),onClick:y},k),{},{children:[o?Object(c.b)("img",{src:Object(L.imgUrl)(o,"m"),height:x?16:19,width:x?16:19,alt:"",css:{flex:"0 0 auto"}}):Boolean(f)&&f&&Object(c.b)(f,{fill:R,size:x?17:20,css:{flex:"0 0 auto"},viewBox:"0 0 24 24"}),Object(c.b)(B.Flex,{overflow:"hidden",flex:"0 0 auto",mx:"4px",children:Object(c.b)(B.Text,{flexShrink:0,fontWeight:S.bold,mt:x?"1px":0,children:b})}),Boolean(p||h)&&Object(c.b)(B.Text,{flex:"0 0 auto",display:"flex",alignItems:"center",mt:x?"1px":0,mr:"4px",children:p||h}),Boolean(M)&&Object(c.b)(M,{fill:R,size:18,onClick:j,css:{flex:"0 0 auto",cursor:"pointer"}}),Boolean(I)&&Object(c.b)(I,{fill:R,size:x?23:26,css:{margin:"0 -4px",flex:"0 0 auto"}})]}))}));ce.displayName="Label";var le=function(e){var t=e.inviter,n=i()(e,X),r=t.name,a=t.urlToken,o=Object(c.c)(c.a,{children:["谢邀",Object(c.b)(N.b,{"data-za-detail-view-id":8126,href:"https://www.zhihu.com/people/".concat(a),css:{marginLeft:4,textDecoration:"none",color:"inherit"},zaBlock:"ThanksForInvitingClick",children:"@".concat(r)})]});return Object(c.b)(ce,Object.assign(Object.assign({icon:f.a,name:o},n),{},{zaBlock:"ThanksForInvitingLabel"}))};var se=function(e){var t=e.data,n=i()(e,$),r=t.url,a=t.title;return Object(c.b)(ce,Object.assign(Object.assign({},n),{},{name:"知乎蓝宝书收录",icon:O,subText:a,link:r,zaBlock:"BlueBookLabel"}))};function ue(e){var t=e.data,n=i()(e,ee),r=t.name,a=t.iconUrl,o=t.linkText,l=t.link;return Object(c.b)(ce,Object.assign(Object.assign({},n),{},{color:oe.PURPLE,name:r,subText:o,iconUrl:a,icon:j.a,link:l,zaBlock:"CampaignLabel"}))}var de={answer:"品牌特邀",article:"特邀文章"};function fe(e){var t=e.data,n=e.type,r=void 0===n?"answer":n,a=Boolean(null==t?void 0:t.subText),o=t.name,i=void 0===o?"谢邀":o,l=t.iconUrl;return Object(c.b)(ce,{iconUrl:l,icon:b.a,name:a?i:de[r],subText:(null==t?void 0:t.subText)||"本文由品牌邀请撰写",zaBlock:"CommercialLabel"})}var be=["relevant","editor_recommendation","answered_by_related","answered_by_official","answered_for_refute","zhizhi_plan_rumour_deny","zhizhi_plan_recommend","zhizhi_plan_edu_recommend","zhizhi_plan_baby_recommend","zhizhi_plan_acg_recommend","zhizhi_plan_outing_recommend","zhizhi_plan","zhizhi_reward","online_roundtable","roundtable","topic","special","raise_hand","weekly","daily","professional"],pe={online_roundtable:y.a,relevant:w.a,editor_recommendation:C.a,answered_by_related:w.a,answered_by_official:w.a,answered_for_refute:function(e){return h.a.createElement(V,F(F({},e),{className:function(){return"ZDI ZDI--Circlesearch24"+(e.className?" "+e.className:"")}}))},roundtable:y.a,special:k.a,topic:function(e){return h.a.createElement(m.a,q(q({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ChatBubbleHashFill24"+(t?" "+t:""))}),h.a.createElement("path",{d:"M13.373 10.856l-.588 2.068h-2.02l.59-2.068h2.018z"}),h.a.createElement("path",{d:"M21.25 12a9.25 9.25 0 10-17.08 4.926l-.8 2.588a1 1 0 001.25 1.25l2.643-.817A9.25 9.25 0 0021.25 12zm-9.764-4.678a.841.841 0 01.578 1.04l-.23.812h2.018l.362-1.273a.841.841 0 011.618.46l-.23.813h.42a.841.841 0 110 1.682h-.9l-.588 2.068h.952a.841.841 0 110 1.682h-1.431l-.425 1.493a.841.841 0 01-1.618-.46l.294-1.033h-2.02l-.424 1.493a.841.841 0 01-1.618-.46l.294-1.033H7.98a.841.841 0 110-1.682h1.036l.588-2.068H8.517a.841.841 0 110-1.682h1.567l.362-1.273a.841.841 0 011.04-.579z",fillRule:"evenodd",clipRule:"evenodd"}));var t},raise_hand:k.a,weekly:x.a,daily:S.a,professional:A.a,zhizhi_plan_recommend:T.a,zhizhi_plan_edu_recommend:T.a,zhizhi_plan_baby_recommend:T.a,zhizhi_plan_acg_recommend:T.a,zhizhi_plan_outing_recommend:T.a,zhizhi_plan_rumour_deny:R.a,zhizhi_plan:T.a,zhizhi_reward:G.a},he={online_roundtable:"圆桌收录",relevant:"亲自答",editor_recommendation:"编辑推荐",answered_by_related:"相关方答",answered_by_official:"官方回应",answered_for_refute:"知友辟谣",roundtable:"圆桌收录",topic:"话题收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"专业",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划",zhizhi_plan_baby_recommend:"致知计划",zhizhi_plan_acg_recommend:"致知计划",zhizhi_plan_outing_recommend:"致知计划",zhizhi_plan_rumour_deny:"专业辟谣",zhizhi_plan:"致知计划",zhizhi_reward:"致知计划",science_seeking_truth_recommend:"科学求真"},me=Object.assign(Object.assign({},he),{},{weekly:"知乎周刊收录",daily:"知乎日报收录"}),ve={relevant:"此回答由问题相关方亲自撰写",professional:"已有 {} 人赠与了专业徽章",answered_by_related:"本回答由问题相关方撰写",answered_by_official:"本回答由国家官方权威机构撰写",answered_for_refute:"本回答由专业知友对内容辟谣"},ge={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",answered_by_related:"相关方答",answered_by_official:"官方回应",answered_for_refute:"知友辟谣",roundtable:"圆桌",topic:"话题收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"内容专业",zhizhi_plan:"致知计划",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划之教育季",zhizhi_plan_baby_recommend:"致知计划之母婴季",zhizhi_plan_acg_recommend:"致知计划之动漫游戏季",zhizhi_plan_outing_recommend:"致知计划之未来出行季",zhizhi_plan_rumour_deny:"辟谣标识",zhizhi_reward:"致知计划"},Oe=Object(p.forwardRef)((function(e,t){var n=e.children,r=e.placement,o=void 0===r?"bottom":r,l=e.onClick,s=e.onPopoverClosed,u=e.zaBlock,d=i()(e,te),f=Object(_.a)(),b=Object(p.useRef)(),h=Object(p.useState)(!1),m=ae(a.a,h,2),v=m[0],g=m[1],O=Object(p.useRef)(),j=Object(P.b)().Mobile,y=Boolean(n),w=Object(D.a)((function(e){var n,r;b.current=(r=e,(n=t)?("function"==typeof n?n(r):n.current=r,r):r)})),C=Object(D.a)((function(e){l&&l(e),y&&g(!v)})),k=Object(D.a)((function(){O.current&&clearTimeout(O.current),y&&!v&&g(!0)})),x=Object(D.a)((function(){O.current=setTimeout((function(){g(!1)}),100)}));return Object(c.c)(c.a,{children:[Object(c.b)(ce,Object.assign(Object.assign({},d),{},{ref:w,expandable:y,isExpanded:v,onClick:C,zaBlock:u},!j&&{onMouseOver:k,onMouseLeave:x})),y&&Object(c.b)(W.a,{isOpen:v,arrowed:!0,globalClose:!0,listenResize:!0,target:b.current,placement:o,boundary:{padding:16},customStyle:{borderRadius:"8px",boxShadow:"0 -3px 10px 0 rgba(0, 0, 0, 0.1)",backgroundColor:f.colors.GBK99C},onClose:x,onAfterLeave:s,children:Object(c.b)("div",{onMouseOver:k,onMouseLeave:x,children:n})})]})}));Oe.displayName="ExpandableLabel";var je=function(e){return{icon:pe[e],title:me[e],shortTitle:he[e],description:ve[e],zaName:ge[e]}},ye=function(e,t){return e.includedInfos?e.includedInfos.find((function(e){return e.type===t})):null},we=function(e){var t=e.data,n=e.onLinkClick,r=t.type,a=t.icon,o=t.title,i=t.description,l=t.zaName,s=t.link,u=Object(P.b)().Mobile,d=Object(_.a)(),f=Object(p.useRef)(null),b=Object(D.a)((function(e){M.a.trackEvent(f.current,{id:3771,name:"多个"},{button:{text:l}}),s&&n&&n(e,s,r)}));return Object(c.b)(ce,Object.assign(Object.assign({ref:f,color:oe.GOLDEN,icon:a,name:o},s&&{zaText:!0,shouldTrackShow:!0,zaBlock:r}),{},{subText:i,link:s,onClick:b,css:{height:u?34:36,borderRadius:0,background:"none","&:hover":{background:s?d.colors.GBK10A:"none"}}}))},Ce=function(e){var t=e.data,n=e.onLinkClick,r=Object(P.b)().Mobile;return Object(c.b)(B.Box,{py:"8px",maxWidth:r?"calc(100vw - 34px)":"400px",children:t.map((function(e){return Object(c.b)(we,{data:e,onLinkClick:n},e.type)}))})},ke=function(e){return Object(p.useMemo)((function(){var t=[];if(be.forEach((function(n){var r=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?Object.assign(Object.assign({},je(t)),{},{description:e.onlineRoundtable.name,link:"https://www.zhihu.com/roundtable/".concat(e.onlineRoundtable.urlToken)}):null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?je(t):null;case"answered_by_related":return ye(e,"answered_by_related")?je(t):null;case"answered_by_official":return ye(e,"answered_by_official")?je(t):null;case"answered_for_refute":return ye(e,"answered_for_refute")?je(t):null;case"professional":return e.recognitionInfo&&e.recognitionInfo.recognizedCount?Object.assign(Object.assign({},je(t)),{},{description:ve[t].replace("{}",String(e.recognitionInfo.recognizedCount)),link:"#!",members:e.recognitionInfo.latestRecognizers}):null;case"zhizhi_plan":var n=e.includedInfos?e.includedInfos.find((function(e){return e.commonType===t&&!be.includes(e.type)})):null;return n?{icon:pe[n.type]||pe[t],title:n.name||me[n.type]||me[t],shortTitle:n.name||he[n.type]||he[t],description:n.title,link:n.url,zaName:ge[n.type]||n.type}:null;case"zhizhi_reward":var r=e.includedInfos?e.includedInfos.find((function(e){return e.type===t})):null;return r?{icon:pe[r.type]||pe[t],title:r.name||me[r.type]||me[t],shortTitle:r.name||he[r.type]||he[t],description:r.title,link:r.url,zaName:r.name||ge[r.type]}:null;case"special":case"raise_hand":var a=ye(e,t);if(!a)return null;var o=je(t);return Object.assign(Object.assign({},o),{},{title:a.subtitle||o.title,shortTitle:a.subtitle||o.shortTitle,description:a.title,link:a.url});default:var i=ye(e,t);return i?Object.assign(Object.assign({},je(t)),{},{description:i.title,link:i.url}):null}}(e,n);r&&t.push(Object.assign({type:n},r))})),!t.length)return null;var n=t.length>1&&"online_roundtable"!==t[0].type,r=t[0];return n&&(r.meta="relevant"===r.type?"及 ".concat(t.length-1," 项收录"):"等 ".concat(t.length," 项收录")),{items:t,label:r,expandable:n}}),[e])},xe=function(e){var t=e.placement,n=void 0===t?"bottom":t,r=e.data,a=e.onExpand,o=e.onLinkClick,i=e.className,l=ke(r),s=Object(p.useRef)(null),u=Object(p.useRef)(!1);if(!l)return null;var d=l.label,f=l.items,b=l.expandable,h=d.type,m=d.icon,v=d.title,g=d.shortTitle,O=d.meta,j=d.description,y=d.link,w=d.zaName,C=Boolean(y&&!b),k=C?Oe:z.f;Object(p.useLayoutEffect)((function(){M.a.setModule(s.current,{module:"Content",module_name:w}),Object(U.onViewedOnce)(s.current,(function(){M.a.trackCardShow(s.current,{id:3769,name:b?"多个":"一个"})}))}),[b,w]);var x=Object(D.a)((function(){u.current=!1})),S=Object(D.a)((function(e){b&&!u.current&&(u.current=!u.current,a&&a(l)),!b&&C&&(M.a.trackEvent(s.current,{id:3771,name:"一个"},{button:{text:w}}),o&&o(e,y,h))})),A={as:Oe,zaType:"Block"};return C?A={zaText:!0,zaBlock:h,shouldTrackShow:!0}:b&&(A=Object.assign(Object.assign({},A),{},{zaText:!0,onPopoverClosed:x})),Object(c.b)(k,Object.assign(Object.assign({},A),{},{ref:s,color:oe.GOLDEN,icon:m,name:O&&g||v,subText:O||j,link:y,placement:n,onClick:S,className:i,children:b&&Object(c.b)(Ce,{data:f,onLinkClick:o})}))},Se=Object(p.forwardRef)((function(e,t){var n=e.size,r=e.text,a=e.center,o=i()(e,ne);r&&(n="1.2em");var l=Object(c.b)("svg",Object.assign(Object.assign({ref:t},o),n&&{width:n,height:n}));return a?Object(c.c)("span",{ref:t,style:Se.strutStyle,children:["​",l]}):l}));Se.defaultProps={fill:"currentColor"},Se.strutStyle={display:"inline-flex",alignItems:"center"};Object(p.forwardRef)((function(e,t){var n=e.className;return Object(c.b)(Se,{ref:t,className:Z()("OutLineIcon",n),viewBox:"0 0 13 12",css:{width:"20px",height:"12px"},children:Object(c.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.94376 0.628357C5.76292 0.430375 5.5428 0.27225 5.29746 0.164062C5.05211 0.055875 4.7869 0 4.51876 0C4.25062 0 3.98542 0.055875 3.74007 0.164062C3.49472 0.27225 3.2746 0.430375 3.09376 0.628357L0.593761 3.31836C0.211465 3.74412 0 4.29615 0 4.86836C0 5.44057 0.211465 5.99259 0.593761 6.41836L5.09376 11.3484C5.26923 11.5465 5.48475 11.7052 5.72609 11.8138C5.96743 11.9225 6.22909 11.9786 6.49376 11.9786C6.75843 11.9786 7.02009 11.9225 7.26143 11.8138C7.50277 11.7052 7.7183 11.5465 7.89376 11.3484L7.97376 11.2584L7.92376 11.3184L12.3538 6.48836C12.7403 6.05872 12.9541 5.50126 12.9541 4.92336C12.9541 4.34545 12.7403 3.78799 12.3538 3.35836L10.3538 1.12836C10.1736 0.925716 9.95262 0.763523 9.70528 0.652456C9.45795 0.541388 9.18989 0.483965 8.91876 0.483965C8.64763 0.483965 8.37958 0.541388 8.13224 0.652456C7.8849 0.763523 7.66389 0.925716 7.48376 1.12836L6.91376 1.74836L5.94376 0.628357ZM6.41376 4.47836C6.60901 4.69897 6.87106 4.84966 7.15995 4.90743C7.44883 4.96521 7.74868 4.9269 8.01376 4.79836C8.45713 5.73475 8.61577 6.78072 8.47 7.80646C8.32422 8.8322 7.88045 9.79256 7.19376 10.5684C7.10839 10.6644 7.00365 10.7412 6.88645 10.7938C6.76925 10.8464 6.64223 10.8736 6.51376 10.8736C6.38529 10.8736 6.25828 10.8464 6.14107 10.7938C6.02387 10.7412 5.91914 10.6644 5.83376 10.5684L1.31376 5.62836C1.1261 5.41772 1.02241 5.14546 1.02241 4.86336C1.02241 4.58125 1.1261 4.30899 1.31376 4.09836L3.77376 1.41836C3.86718 1.32002 3.97963 1.24172 4.10427 1.18821C4.2289 1.1347 4.36312 1.10711 4.49876 1.10711C4.6344 1.10711 4.76862 1.1347 4.89326 1.18821C5.01789 1.24172 5.13034 1.32002 5.22376 1.41836L6.22376 2.51836C6.04365 2.82303 5.96499 3.17706 5.99914 3.52934C6.03329 3.88162 6.17848 4.21395 6.41376 4.47836Z",fill:"currentColor"})})}));var Ae=function(){return Object(c.b)(ce,{color:oe.GOLDEN,icon:w.a,name:"亲自答",subText:"此回答由问题相关方亲自撰写",zaBlock:"LegacyPositiveLabel"})},Te=function(e){var t=e.color,n=void 0===t?oe.GREY:t,r=e.icon,a=e.name,o=e.subText,i=e.moreLink,l=e.renderMoreIcon,s=e.description,u=e.hideName,d=Object(P.b)().Mobile,f=ie(n).color,b=null;return b=i&&l?Object(c.c)(c.a,{children:[o,Object(c.b)(N.b,{href:i,css:{marginLeft:o?4:0,textDecoration:"none",color:"inherit"},children:l})]}):o,Object(c.c)(B.Box,{py:"8px",maxWidth:d?"calc(100vw - 34px)":"400px",children:[!u&&Object(c.b)(ce,{color:n,icon:r,name:a,subText:b,css:{height:d?32:36,borderRadius:0,background:"none"}}),Boolean(s)&&Object(c.b)(B.Text,{lineHeight:d?"16px":"18px",fontSize:d?"13px":"14px",color:f,mx:"12px",mb:"8px",mt:u?"8px":0,children:s})]})},Re=function(e){var t=e.disclaimerInfo,n=t.excerpt,r=t.description,a=t.subDescription,o=n?"创作声明":r,i=n&&"内容".concat(n);return Object(c.b)(Oe,{name:o,subText:i,zaBlock:"DisclaimerLabel",children:Object(c.b)(Te,{color:oe.BLUE,name:o,subText:i,description:a})})},Ee=function(e){var t=e.annotationDetail;if(!t)return null;var n=t.detail,r=t.member,a=t.reasonDescription||"该内容已被标记",o="strong"===t.type?E.a:void 0,i=r?"".concat(r.name,"："):"";return Object(c.b)(Oe,{color:oe.GREY,icon:o,name:a,zaBlock:"Annotation",children:Object(c.b)(Te,{icon:o,name:a,description:(n||i)&&Object(c.b)("span",{dangerouslySetInnerHTML:{__html:"".concat(i).concat(n||"未填写原因")}})})})},Ie=function(e){var t=e.fill,n=Object(_.a)().colors.GBL05A;return Object(c.b)(I.a,{fill:t||n,size:18,css:{verticalAlign:"bottom"}})},Ne=function(e){var t=e.collapseReason;return Object(c.b)(Oe,{color:oe.GREY,name:"该回答已被折叠",zaBlock:"AnswerCollapsed",children:Object(c.b)(Te,{name:"该回答已被折叠",renderMoreIcon:Object(c.b)(Ie,{}),moreLink:"/question/20120168/answer/35704072",description:"折叠原因：".concat(t)})})},Be={color:"inherit",textDecoration:"underline"},ze=function(e){var t=e.abnormalDetail,n=void 0===t?{description:"回答建议修改",reason:""}:t,r=n.description,a=n.reasonId,o=n.reason,i=a&&[10015,30005].includes(a)?Object(c.c)(c.a,{children:["不规范转载",Object(c.b)(N.b,{zaBlock:"AnswerCollapsedClick-Nonstandard",href:"https://www.zhihu.com/question/20258015",css:Be,onClick:function(e){return e.stopPropagation()},children:o})]}):o,l=10027===a?Object(c.c)(c.a,{children:["作者修改内容或举证后，回答会重新展示。如果一周内未得到有效修改，回答会自动折叠。",Object(c.b)("br",{}),"知乎严格按照公开的流程处理各类投诉，不收任何费用也不与任何中介机构合作。",Object(c.b)(N.b,{zaBlock:"AnswerCollapsedClick",href:"https://www.zhihu.com/term/zhihu-terms#sec-report",css:Be,children:"投诉流程"})]}):"作者修改内容通过后，回答会重新显示。如果一周内未得到有效修改，回答会自动折叠。";return Object(c.b)(Oe,{color:oe.GREY,name:r,subText:i,zaBlock:"AnswerCollapsedLabel",children:Object(c.b)(Te,{name:r,renderMoreIcon:Object(c.b)(Ie,{}),moreLink:"https://www.zhihu.com/question/24752645",description:l})})},Pe=function(e){var t=e.answerCollapsed,n=e.answerAbnormal,r=e.commercial,a=e.business,o=e.thanksForInviting,l=e.positive,s=e.bluebook,u=e.annotation,d=e.disclaimer,f=e.adPromotion,b=e.campaign,p=e.limit,h=void 0===p?2:p,m=i()(e,re);if(!(t||n||r||a||o||l||s||u||d||f||b))return null;var v=[t||n,r||o||f||s||a,l,u||d,b].filter(Boolean).slice(0,h);return Object(c.b)(B.Flex,Object.assign(Object.assign({flexDirection:"row",flexWrap:"wrap",pt:"8px",css:{"& > div, & > a":{marginRight:"8px",marginBottom:"8px"}}},m),{},{children:v.map((function(e,t){return Object(c.b)("div",{children:e},t)}))}))};Pe.propTypes={answerCollapsed:Y.a.node,answerAbnormal:Y.a.node,commercial:Y.a.node,business:Y.a.node,thanksForInviting:Y.a.node,bluebook:Y.a.node,positive:Y.a.node,annotation:Y.a.node,disclaimer:Y.a.node,adPromotion:Y.a.node,campaign:Y.a.node};var _e=Object(p.memo)(Pe),Le={zhicon_icon_24_chat_bubble_idea_fill:function(e){return h.a.createElement(m.a,H(H({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ChatBubbleIdeaFill24"+(t?" "+t:""))}),h.a.createElement("path",{d:"M2.5 12a9.5 9.5 0 1117.603 4.961l.767 2.479a1.25 1.25 0 01-1.564 1.563l-2.538-.785A9.5 9.5 0 012.5 12zm11.676 1.324a1.403 1.403 0 001.842-.439 1.36 1.36 0 00-.297-1.839 1.405 1.405 0 00-1.889.148c-.11.118-.196.252-.258.396l-1.05-1.165a2.895 2.895 0 012.105-1.166 2.905 2.905 0 012.015.605 2.86 2.86 0 01.619 3.858 2.893 2.893 0 01-1.728 1.198 2.909 2.909 0 01-2.832-.876l-.003-.004-2.518-2.831a1.409 1.409 0 00-1.367-.42 1.393 1.393 0 00-.833.576 1.361 1.361 0 00.297 1.838 1.406 1.406 0 001.889-.147 1.37 1.37 0 00.258-.396l1.041 1.176a2.9 2.9 0 01-2.097 1.155 2.905 2.905 0 01-2.014-.605 2.86 2.86 0 01-.619-3.858A2.893 2.893 0 018.465 9.33a2.909 2.909 0 012.832.876l.003.004 2.518 2.83c.102.113.223.21.358.284z",fillRule:"evenodd",clipRule:"evenodd"}));var t}},Me=function(e){var t=e.theme,n=e.text,r=e.iconName,a=e.detail,o={color:oe[t],icon:r?Le[r]:void 0,name:n,css:{display:"inline-flex"}};return a?Object(c.b)(Oe,Object.assign(Object.assign({},o),{},{children:Object(c.b)(Te,{color:oe[t],description:a,hideName:!0,name:n})})):Object(c.b)(ce,Object.assign({},o))}},1476:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n.n(d),b=n(19),p=n(2978),h=n(27),m=Object.assign;function v(e){return f.a.createElement(h.a,m(m({width:"24",height:"25",viewBox:"0 0 24 25"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--TextFill24"+(t?" "+t:""))}),f.a.createElement("path",{d:"M3.5 5.487c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 110 2.5H4.75c-.69 0-1.25-.56-1.25-1.25zm0 7c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 110 2.5H4.75c-.69 0-1.25-.56-1.25-1.25zm1.25 5.75a1.25 1.25 0 100 2.5h7.5a1.25 1.25 0 000-2.5h-7.5z"}));var t}function g(e){return f.a.createElement(v,m(m({},e),{className:function(){return"Zi Zi--Answer"+(e.className?" "+e.className:"")}}))}var O=n(159),j=n(154),y=n(12),w=n.n(y),C=n(1178);function k(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var r=t.detail,a=t.member,o=t.reasonDescription,i=t.type,c=a?"".concat(a.name,"："):"";return Object(l.c)("section",{className:w()("Annotation-mark",n),children:[Object(l.c)("header",{className:"Annotation-header",children:["strong"===i&&Object(l.b)(C.a,{size:16,center:!0,text:!0,className:"Annotation-alert"}),Object(l.b)("h1",{className:"Annotation-markTitle",children:o||"该内容已被标记"})]}),(r||c)&&Object(l.b)("div",{className:"Annotation-markSummary",dangerouslySetInnerHTML:{__html:"".concat(c).concat(r||"未填写原因")}})]})}k.propTypes={annotationDetail:u.a.shape({reason:u.a.number.isRequired,reasonDescription:u.a.string,type:u.a.oneOf(["strong","weak"]).isRequired,detail:u.a.string,member:u.a.shape({name:u.a.string.isRequired}),showOuter:u.a.bool}).isRequired};var x=n(439),S=n(1003),A=n(1373),T=n(1027),R=n(950),E=n(1e3),I=n(993),N=n(157),B=n(1004),z=n(963),P=n(943),_=n(437);n(1816);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var M={placeholders:{img:" [图片] "}},D=function(e){Object(o.a)(n,e);var t=L(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={collapsed:!0,commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleOpenComment=function(t){var n=t.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",r=e.state.modalShown,a=!("bottom"===n&&r);e.setState({modalShown:a,commentPattern:n})},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePackupButton=function(){e.setState({modalShown:!1}),e.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)},e.handleContentToggleExpand=function(t){e.setState({collapsed:!t})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.question,a=t.question,o=a.id,i=a.title,c=a.type,s=a.created,u=a.answerCount,d=a.followerCount,f=a.isMuted,b=a.questionType,h=a.detail,m=a.commentCount,v=a.adminClosedComment,y=a.relationship,w=void 0===y?{}:y,C=a.annotationDetail,S=t.action,T=(t.isConcise,t.isAnonymousFollowing),_=t.lastreadTouchable,L=t.zaInfos,D=L.title,U=L.expand,F=L.follow,V=L.options,q=t.renderOptions,G=t.blockStrategies,H=(G=void 0===G?{}:G).isBlockingFollowQuestion,W=G.isBlockingComment,K=G.isBlockingShare,Z=this.state,Q=Z.commentsShown,Y=Z.commentsAutoFocus,J=Z.commentPattern,X=Z.collapsed,$={id:o,type:c},ee="/question/".concat(o);return Object(l.c)(R.e,{data:r,link:ee,lastreadTouchable:_,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"QuestionItem-title",children:[Object(l.b)(x.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(l.b)("a",Object.assign(Object.assign({href:ee,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},D&&{"data-za-detail-view-id":D}),{},{children:i}))}),T&&Object(l.b)(p.a,{className:"QuestionItem-icon"}),"commercial"===b&&f&&Object(l.b)("span",{className:"QuestionItem-muteStatus",children:"待推广"})]}),children:[!X&&C&&Object(l.b)(k,{annotationDetail:C}),n===R.c.default&&Object(l.c)(R.d,{children:[Object(O.toDateTimeString)(s),"".concat(Object(j.formatNumber)(u)," 个回答"),"".concat(Object(j.formatNumber)(d)," 个关注")]}),n===R.c.interactive&&Object(l.c)(E.b,{data:r,html:h||"",excerpt:r.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:M,onToggleExpend:this.handleContentToggleExpand,zaIds:{expand:U},children:[!H&&(S||Object(l.b)(P.a,Object.assign(Object.assign({},$),{},{isFollowing:(w&&{}.hasOwnProperty.call(w,"isFollowing")?w:r).isFollowing,zaId:F}))),[!W&&Object(l.b)(B.a,{onClick:this.handleCommentsShown,commentsShown:Q,commentClosed:v,count:m},"comment"),!K&&Object(l.b)(I.a,Object.assign(Object.assign({},$),{},{title:i,href:ee}),"share"),Boolean(u)&&Object(l.c)(N.a,{preset:"plain",to:ee,target:"_blank",children:[Object(l.b)(g,{style:{marginRight:"4px"},center:!0,text:!0}),Object(j.formatNumber)(u)," 个回答"]},"linkbutton"),q&&q((function(){return e.contentItem}),V),X&&C&&Object(l.b)(A.a,{annotationDetail:C})]]}),Object(l.b)(z.a,{parent:r,commentPattern:J,shown:Q,autoFocus:Y,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);D.propTypes={preset:u.a.oneOf(Object.keys(R.c)).isRequired,isAnonymousFollowing:u.a.bool,contentShown:u.a.bool,zaInfos:u.a.shape({title:u.a.number,expand:u.a.number,follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},D.defaultProps={preset:R.c.default,zaInfos:{}};t.a=Object(b.compose)(Object(T.a)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)}}})),Object(_.b)((function(e){var t=e.question,n=e.trackCardShow,r=void 0===n||n;return{module:"QuestionItem",card:{content:{type:"Question",token:String(t.id),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:r}})),Object(S.d)({dataPath:"question"}),S.c)(D)},1478:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(12),o=n.n(a);function i(e){var t=e.className;return Object(r.b)("span",{className:o()("ActivityItem-StickyMark",t),children:"置顶"})}},1481:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(0),u=n(19),d=n(20),f=n(3),b=n.n(f),p=n(35),h=n(95),m=n(91),v=n(927),g=n(219),O=n(159),j=n(154),y=n(437),w=n(32),C=n(1027),k=n(174),x=n(158),S=n(950),A=n(1422),T=n(943),R=n(993);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var I=function(e){Object(o.a)(n,e);var t=E(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showQuit:!1},e.onClose=function(){e.setState({showQuit:!1})},e.handleQuitButton=function(){e.setState({showQuit:!0})},e.handleQuitColumn=function(t,n){e.props.fetchQuitColumn(t,n),e.setState({showQuit:!1})},e}return Object(a.a)(n,[{key:"renderStatus",value:function(){var e=this.props,t=e.column,n=t.itemsCount,r=t.voteupCount,a=e.isProfile,o=e.urlToken===(e.currentUser||{}).urlToken;return Object(l.c)(S.d,{children:["".concat(Object(j.formatNumber)(n)," 篇内容"),"".concat(Object(j.formatNumber)(r)," 赞同"),a&&o&&this.renderProfileContent()]})}},{key:"renderMeta",value:function(){var e=this.props,t=e.preset,n=e.column.intro;return Object(l.b)("div",{className:"ColumnItem-meta",children:Object(l.c)(l.a,{children:[n,t===S.c.default&&this.renderStatus()]})})}},{key:"renderProfileContent",value:function(){var e=this,t=this.props,n=t.column,r=n.id,a=n.author,o=t.contributions,i=this.state.showQuit,c=a.urlToken===o.urlToken;return Object(l.c)(l.a,{children:[Object(l.b)(g.a,{toggler:Object(l.b)(p.c,{preset:"plain",icon:v.a}),placement:"top",className:"ColumnItem-more",arrowed:!0,children:c?Object(l.b)(p.c,{component:"a",preset:"plain",href:"".concat(w.H,"/column/").concat(r),className:"ColumnItem-botton",children:"管理专栏"}):Object(l.b)(p.c,{preset:"plain",className:"ColumnItem-botton",onClick:this.handleQuitButton,children:"退出专栏"})}),Object(l.b)(m.b,{onClose:this.onClose,title:"确定退出该专栏吗？",children:i&&Object(l.b)("div",{className:"ColumnAuthorsList-modal",children:Object(l.c)(h.a,{direction:"horizontal",children:[Object(l.b)(p.c,{onClick:function(){return e.onClose},children:"取消"}),Object(l.b)(p.c,{className:"ColumnPosts-confirmButton",onClick:function(){return e.handleQuitColumn(o.urlToken,r)},color:"blue",preset:"primary",children:"确定"})]})})})]})}},{key:"renderInteractiveContent",value:function(){var e=this,t=this.props,n=t.column,r=n.id,a=n.type,o=n.articlesCount,i=n.followers,c=n.lastArticle,s=n.isFollowing,u=n.author,d=n.title,f=t.zaInfos,b=f.follow,p=f.options,h=t.renderOptions,m={id:r,type:a},v=(c||{}).updated;return Object(l.c)(l.a,{children:[Object(l.c)(S.b,{className:"ContentItem-counts",children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"文章："}),Object(j.formatNumber)(o)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(O.toRelativeString)(v)||"暂未更新"]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注者："}),i]})]}),Object(l.c)(S.a,{children:[Object(l.b)(T.a,Object.assign(Object.assign({},m),{},{isFollowing:s,zaId:b})),Object(l.b)(R.a,Object.assign(Object.assign({},m),{},{title:d,authorName:u&&u.name,href:"".concat(w.H,"/column/").concat(r)})),h&&h((function(){return e.contentItem}),p)]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.column,a=t.lastreadTouchable,o=Object(l.b)(A.a,{column:r,target:"_blank"});return Object(l.b)(S.e,{className:"ColumnItem",data:r,link:"".concat(w.H,"/column/").concat(r.id),onRef:function(t){return e.contentItem=t},title:o,meta:this.renderMeta(),lastreadTouchable:a,children:n===S.c.interactive&&this.renderInteractiveContent()})}}]),n}(s.Component);I.propTypes={preset:b.a.oneOf(Object.values(S.c)),isProfile:b.a.bool,zaInfos:b.a.shape({follow:b.a.number,options:b.a.number}),renderOptions:b.a.func},I.defaultProps={preset:S.c.default,isProfile:!1,zaInfos:{}};t.a=Object(u.compose)(Object(C.a)((function(e){var t=e.column;return{content:{type:"Column",token:String(t.id)}}})),Object(y.b)((function(e){var t=e.column,n=e.trackCardShow,r=void 0===n||n;return{module:"ColumnItem",card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:(t.author||{}).id}},trackCardShow:r}})),k.a,Object(d.connect)(null,{fetchQuitColumn:x.e}))(I)},1483:function(e,t,n){"use strict";var r=n(24),a=n.n(r),o=n(0),i=n(120),c=n.n(i),l="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,r=function(){var r=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===r[e]})))&&(n=r,t(r))},a=new(window.MutationObserver||window.WebKitMutationObserver)(c()(r,100));return a.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),r(),function(){a.disconnect()}};function s(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(o.useState)(e),n=s(a.a,t,2),r=n[0],i=n[1],c=Object(o.useState)(null),u=s(a.a,c,2),d=u[0],f=u[1];return Object(o.useEffect)((function(){if(d)return l(d,i)}),[d]),[f,r]}},1486:function(e,t,n){"use strict";var r=n(1),a=n(12),o=n.n(a),i=n(1561);t.a=function(e){var t=e.className;return Object(r.c)("div",{className:o()("Reviewing",t),children:[Object(r.c)("div",{className:"Reviewing-top",children:[Object(r.b)(i.a,{size:16}),Object(r.b)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),Object(r.b)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},1487:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(985),b=n(154),p=n(438),h=n(1242),m=n(1063);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,a=e.voteupCount,o=e.onLoad,i=e.text,c=e.isRewardList,s=e.notice,u=e.type,d=e.currentUser,v={getContainer:function(e){return e}};return Object(l.c)("div",{className:"VoterList",children:[Object(l.b)(h.a,{header:"".concat(Object(b.formatNumber)(a)," 人").concat(i||"赞同了")}),c&&s&&Object(l.b)("div",{className:"VoterList-description",children:Object(l.b)("p",{children:s})}),Object(l.b)(p.b,Object.assign(Object.assign({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:o,placeholder:Object(l.b)(p.a,{className:"List-item",withAvatar:!0})},v),{},{children:r&&r.map((function(e,t){return Object(l.b)(f.a,{children:Object(l.b)(m.a,{currentUser:d,user:e,isRewardList:c,meta:null,type:u,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))}))}))]})}}]),n}(d.Component);g.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,items:u.a.array.isRequired,voteupCount:u.a.number.isRequired,text:u.a.string.isRequired,onLoad:u.a.func.isRequired,isRewardList:u.a.bool,type:u.a.string,currentUser:u.a.object};t.a=g},1490:function(e,t){(function(t){e.exports=t}).call(this,{})},1544:function(e,t,n){"use strict";var r=n(24);function a(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var o=["img","br"],i=/([\w|-]+)(?:="([^"]*)")?/;function c(e){var t={};if((e=e.trim()).length)for(var n,o=new RegExp(i.source,"g");n=o.exec(e);){var c=n.slice(1),l=a(r,c,2),s=l[0],u=l[1];t[s]=u}return t}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a(r,e,5),i=n[0],l=n[1],s=n[2],u=n[3],d=n[4],f="open";"/"===l?f="close":(o.includes(s)||"/"===d)&&(f="self-close");var b=t.parseAttrs?c(u):u;return{tagHTML:i,tagName:s,tagType:f,attrs:b}}function s(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function u(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"sup":return{type:"replace-self",content:""};case"invisible":return{type:"hide"};default:return null}}function d(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e.sup||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=c,t.parseTagGroup=l,t.parseTag=function(e,n){var r=t.TAG_RE.exec(e);if(r)return l(r,n)},t.getBlockType=s,t.truncateHTML=function(e){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.endsWith,c=void 0===i?"…":i,f=a.placeholders,b=void 0===f?{}:f,p=[],h=[],m=[],v={},g={},O=new RegExp(t.TAG_RE.source,"g"),j=0,y=0,w=0,C=0,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.push(e),t||(j+=e.length),y+=e.length};n=O.exec(e);){var x=l(n,{parseAttrs:!0}),S=x.tagHTML,A=x.tagType,T=x.tagName,R="close"===A&&o.includes(T)?"invalid":s("close"!==A?x:h[h.length-1]),E=b[R]?{type:"replace",content:b[R]}:u(R);"close"!==A&&(v[R]=(v[R]||0)+1);var I=e.slice(y,n.index),N=I.length;if(j+N>=r&&0===w&&0===C){for(k(I.slice(0,r-j));m.length;){var B=m.pop();p.push("</".concat(B.tagName,">"))}break}0===w&&k(I,0!==C),"invalid"!==R&&("open"===A?h.push(x):"close"===A&&h.pop(),E?("replace"===E.type&&(0===w&&"close"!==A&&p.push(E.content),"open"===A?w++:"close"===A&&w--),0===w&&"replace-self"===E.type&&p.push(E.content),0===w&&"hide"===E.type&&("open"===A?C++:"close"===A&&C--,p.push(S))):0===w&&(p.push(S),"open"===A?m.push(x):"close"===A&&m.pop())),"video-box"!==R||g.type||"string"==typeof x.attrs||(g.type="video",g.url=x.attrs["data-poster"],g.id=x.attrs["data-lens-id"]),y=O.lastIndex}if(j<r){var z=e.slice(y).slice(0,r-j);k(z)}var P=j>r||j===r&&y<e.length||d(v);return{isTruncated:P,thumbnailInfo:g,content:"".concat(p.join("").trim().replace(/\s{2,}/g," ")).concat(P?c:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1545:function(e,t,n){"use strict";var r=n(36),a=n(14),o=n(15),i=n(16),c=n(17),l=n(8),s=n(1),u=n(1143),d=n(2209),f=n(0),b=n(20),p=n(23),h=n(1073),m=n(159),v=n(32),g=n(380),O=n(157),j=["toggler","column","id","isLoading","onRef"];function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var w=function(e){Object(i.a)(n,e);var t=y(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.dispatch,r=t.id;n(Object(g.b)(r))},e.track=function(){var t,n=e.props.column;e.hoverCardElement&&n&&(p.a.setModule(e.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:n.id,item_num:n.articlesCount,follower_num:n.followers,publish_timestamp:1e3*n.updated,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id}}}),p.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,a=t.column,o=t.id,i=t.isLoading,c=t.onRef,l=Object(r.default)(t,j),f=a||{},b=f.title,p=f.intro,g=f.itemsCount,y=f.voteupCount,w=f.lastArticle,C=f.articlesCount,k=f.followers,x=w||{},S=x.title,A=x.created,T="".concat(v.H,"/column/").concat(o);return Object(s.c)(u.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{ref:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(u.a,{title:Object(s.b)("a",{target:"_black",href:T,children:b})}),p,w&&Object(s.c)("div",{children:[Object(s.b)(d.a,{text:!0,center:!0})," 最后更新",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),S,Object(s.c)("span",{children:["（",Object(m.toRelativeString)(A),"）"]})]}),Object(s.b)("div",{children:Object(s.c)(h.a,{children:[Object(s.b)(h.a.Item,{tag:O.a,preset:"plain",a:!0,to:T,name:g>=0?"内容":"文章",value:null!=g?g:C}),Object(s.b)(h.a.Item,{tag:O.a,preset:"plain",a:!0,to:T,name:y>=0?"赞同":"关注",value:null!=y?y:k})]})})]}))}}]),n}(f.Component);t.a=Object(b.connect)((function(e,t){var n=t.id,r=e.entities.columns,a=e.loading.local;return{column:r[n],isLoading:Boolean(a["column/".concat(n)])}}))(w)},1588:function(e,t,n){var r=n(685),a=n(227),o=n(384),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var l=null==n?0:o(n);return l<0&&(l=i(c+l,0)),r(e,a(t,3),l)}},1589:function(e,t,n){"use strict";function r(e){return e?"¥".concat(e/100):"免费"}n.d(t,"a",(function(){return r}))},1590:function(e,t,n){"use strict";var r=n(1),a=n(289),o=n(1342),i=n(216);t.a=Object(i.a)((function(e){var t=e.hide,n=e.stickyBottom,i=e.stickyContainer,c=e.contentType,l=e.contentId,s=e.zaContentType,u=e.children,d=e.onPositionStatusChange,f=e.authRequired,b=e.useProvider;if(t)return null;var p=void 0===b||b?Object(r.b)(o.a,{loginCheck:f([function(){return!0},function(){return!1}]),contentType:c,contentId:l,zaContentType:s,children:u}):u;return n?Object(r.b)(a.a,{bottom:!0,container:i,onPositionStatusChange:d,children:p}):p}))},1593:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(58),o=n(886);function i(e){var t=Object(o.a)((function(){return n.e(87).then(n.bind(null,2842))}));return Object(r.b)(a.Box,Object.assign(Object.assign({my:"14px",css:{minHeight:20}},e),{},{children:t?Object(r.b)(t,{width:"70px",height:"20px",css:{display:"block"}}):null}))}},1594:function(e,t,n){e.exports=n(1345)},1595:function(e,t,n){e.exports=n(1347)},1596:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,a="~";function o(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function c(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new i(n,r||e,o),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],c]:e._events[l].push(c):(e._events[l]=c,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(a=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=a?a+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,i=new Array(o);r<o;r++)i[r]=n[r].fn;return i},s.prototype.listenerCount=function(e){var t=a?a+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,o,i){var c=a?a+e:e;if(!this._events[c])return!1;var l,s,u=this._events[c],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,i),!0}for(s=1,l=new Array(d-1);s<d;s++)l[s-1]=arguments[s];u.fn.apply(u.context,l)}else{var f,b=u.length;for(s=0;s<b;s++)switch(u[s].once&&this.removeListener(e,u[s].fn,void 0,!0),d){case 1:u[s].fn.call(u[s].context);break;case 2:u[s].fn.call(u[s].context,t);break;case 3:u[s].fn.call(u[s].context,t,n);break;case 4:u[s].fn.call(u[s].context,t,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[s].fn.apply(u[s].context,l)}}return!0},s.prototype.on=function(e,t,n){return c(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return c(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var o=a?a+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||l(this,o);else{for(var c=0,s=[],u=i.length;c<u;c++)(i[c].fn!==t||r&&!i[c].once||n&&i[c].context!==n)&&s.push(i[c]);s.length?this._events[o]=1===s.length?s[0]:s:l(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=a,s.EventEmitter=s,e.exports=s},1597:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),function(e){e.LOG="log",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(r||(r={}));var a={log:function(e){for(var t,n=console[e]?e:"log",r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];(t=console)[n].apply(t,["[griffith]"].concat(a))},debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.DEBUG].concat(t))},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.INFO].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.WARN].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.ERROR].concat(t))}};var o,i=(o="undefined"!=typeof navigator?navigator.userAgent:"",{isIE:/MSIE|Trident/i.test(o),isMobile:/iPhone|iPad|iPod|Android/i.test(o),isAndroid:/(android)/i.test(o),isSafari:/^((?!chrome|android).)*safari/i.test(o)});function c(){var e=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r}function l(){var e=document.createElement("video");return Boolean(e.canPlayType("application/vnd.apple.mpegURL"))}},1598:function(e,t,n){"use strict";var r=n(1),a=n(1065);t.a=function(e){var t=e.expanded,n=e.isVideoCoverFullSize;return e.renderFlag?Object(r.b)(a.CoCreationLabel,{mb:t||n?"8px":"4px"}):null}},1599:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(47);function a(e,t){t.ZhihuHybrid?r.a.dispatch("base/openURL",{url:e}):window.location.href=e}},1601:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(40);function a(e,t,n){return"//".concat(r.a.wwwHost,"/vessay").concat(n?"/v2":"","/editor?type=").concat(e,"&id=").concat(t)}var o="vessay_v2_sdk",i="2"},1602:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(120),a=n.n(r);function o(e,t,n){var r=!1,o=a()((function(){r=!1,e.apply(void 0,arguments)}),t,n);return Object.assign((function(){r=!0,o.apply(void 0,arguments)}),{cancel:o.cancel,flush:o.flush,pending:function(){return r}})}},1603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(1604);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,r;c(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={inView:!1},r.node=null,r.handleNode=function(e){r.node&&(0,i.unobserve)(r.node),r.node=e,r.observeNode(),r.props.innerRef&&r.props.innerRef(e)},r.handleChange=function(e){r.setState({inView:e}),r.props.onChange&&r.props.onChange(e)},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,a=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r},a)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,a=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),c=this.state.inView;return o.createElement(a,r({},i,{ref:this.handleNode}),"function"==typeof n?n(c):null,"function"==typeof t?t(c):t)}}]),t}(o.Component);s.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=s},1604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=o,t.unobserve=i,t.destroy=c;var r=new Map,a=new Map;function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},o=arguments[3],i=n.root,c=n.rootMargin,s=n.threshold||0;if(e&&t){var u=c?s.toString()+"_"+c:""+s.toString();i&&(u=o?o+"_"+u:null);var d=u?a.get(u):null;d||(d=new IntersectionObserver(l,n),u&&a.set(u,d));var f={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return r.set(e,f),d.observe(e),f}}function i(e){if(e){var t=r.get(e);if(t){var n=t.observerId,o=t.observer,i=n?a.get(n):o;i&&i.unobserve(e);var c=!1;n&&r.forEach((function(t,r){t&&t.observerId===n&&r!==e&&(c=!0)})),i&&!c&&(i.disconnect(),a.delete(n)),r.delete(e)}}}function c(){a.forEach((function(e){e.disconnect()})),a.clear(),r.clear()}function l(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,a=e.target,o=r.get(a);if(o&&n>=0){var i=o.options,c=!1;Array.isArray(i.threshold)?c=i.threshold.some((function(e){return o.visible?n>e:n>=e})):void 0!==i.threshold&&(c=o.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(c=c&&t),o.callback&&o.callback(c)}}))}t.default={observe:o,unobserve:i,destroy:c}},1628:function(e,t,n){"use strict";var r=n(34),a=n(217),o=n(14),i=n(15),c=n(86),l=n(16),s=n(17),u=n(8),d=n(1),f=n(2993),b=n(220),p=n.n(b),h=n(12),m=n.n(h),v=n(2329),g=n(2990),O=n(3),j=n.n(O),y=n(0),w=n.n(y),C=n(20),k=n(48),x=n(58),S=n(19),A=n(23),T=n(51),R=n(1071),E=n(91),I=n(437),N=n(218),B=n(35),z=n(303),P=n(289),_=n(41),L=n.n(_),M=n(159),D=n(1050),U=n(1446),F=n(940),V=n(528),q=n(192),G=n(27),H=Object.assign;function W(e){return w.a.createElement(G.a,H(H({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--InfoCircle24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm1.11-14.79a1.11 1.11 0 11-2.22 0 1.11 1.11 0 012.22 0zm-1.31 4.208a.07.07 0 01.02-.006h.007c.006.002.016.005.026.013.01.009.015.018.017.023l.002.008c0 .003 0 .009-.003.019l-1.152 4.507c-.312 1.224.941 2.264 2.132 1.77 0 0 1.09-.557 1.461-.848.371-.291.46-.478.334-.765-.168-.388-.542-.513-.928-.352l-1.457.604a.067.067 0 01-.018.006.03.03 0 01-.009 0 .058.058 0 01-.025-.014.057.057 0 01-.018-.022.046.046 0 01-.002-.008c0-.003 0-.009.003-.019l1.152-4.507c.313-1.224-.849-2.388-2.131-1.77l-1.457.605c-.387.16-.594.534-.405.97.18.415.598.31 1.081.187l.077-.019 1.294-.382z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function K(e){var t=e.getSentences,n={},r=new Set,a=!1,o=!1,i=!1,c=null;return{initialize:function(e){Object.assign(n,e),function(e,t){var n=e.store,r=e.getSentences;Promise.resolve(null==r?void 0:r()).then((function(e){if(null!=e&&e.length){var r=n.getEditorState(),a=r.getCurrentContent(),o=a.getBlockMap();e.filter((function(e){var t;return(null==e||null===(t=e.position)||void 0===t?void 0:t.start)&&e.position.end})).forEach((function(e){var i=e.position,c=i.start,l=c.paragraphId,s=c.offset,u=i.end,d=u.paragraphId,f=u.offset,b=null,p=null,h=f,m=o.skipUntil((function(e){var t,n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),r=e.getKey();return n===l&&(b=r,!0)})).takeUntil((function(e){var t;if(p)return!0;var n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),r=e.getKey();return n===d&&(p=r,h=Math.min(e.getLength(),f)),!1}));if(b&&p){var v=F.SelectionState.createEmpty(b).merge({anchorOffset:s,focusKey:p,focusOffset:h});a=F.Modifier.applyInlineStyle(a,v,"INTERACT"),r=F.EditorState.set(r,{currentContent:a}),n.setEditorState(r),t(m)}else console.error("句子互动：无法找到对应的互动句子，startPid：".concat(l,"，startKey：").concat(b,"，endPid：").concat(d,"，endKey：").concat(p))}))}}))}({store:n,getSentences:t},(function(e){null!=e&&e.size&&e.forEach((function(e){var t=e.getKey();r.add(t)}))}))},customStyleMap:{INTERACT:{borderBottom:"1px dashed #BFBFBF"}},onChange:function(e){if(!r.size)return e;if(o)return e;var t=!1,n=e.getCurrentContent(),l=e.getSelection(),s=l.getHasFocus()&&i;if(i=l.getHasFocus(),s){var u=n.getBlockMap(),f=l.getStartKey(),b=l.getEndKey(),p=!1;u.skipUntil((function(e){return e.getKey()===f})).takeUntil((function(e){return!!p||(e.getKey()===b&&(p=!0),!1)})).toArray().forEach((function(e,n){t||e.findStyleRanges((function(e){return e.hasStyle("INTERACT")}),(function(r,a){t=n>0||l.hasEdgeWithin(e.getKey(),0,a)}))}))}return t!==a&&(!function(){var e;if(a)return null===(e=c)||void 0===e||e(),void(c=null);Object(V.a)((function(e){return c=e,Object(d.b)(q.a,{css:{top:"126px"},delay:36e5,notification:{text:Object(d.c)(x.Text,{css:{display:"flex",alignItems:"center"},children:[Object(d.b)(W,{size:18,css:{marginRight:"8px"}}),"修改有互动的句子时，app 端对应的句子互动划线将不再外显"]}),key:"notificationInteractTexts",timeStamp:(new Date).getDate()},actions:Object(d.b)(B.c,{preset:B.b.Link,color:B.a.Blue,onClick:function(){e(),o=!0},children:"知道了"})})}))}(),a=t),e}}}var Z=n(544),Q=n(42),Y=n(77),J=n.n(Y);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var $=function(e){Object(l.a)(n,e);var t=X(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e,t){var n,r,a,o=null!==(n=Object(Q.c)())&&void 0!==n?n:"Unknown",i=null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"Unknown",c=null!==(a=this.props.currentUser)&&void 0!==a?a:"Unknown";throw Object(Z.a)(e,{logger:"EditorErrorReport",fingerprint:["editor-fail"],extra:{passWhitelistUrlsTest:!0,pageName:o,currentUser:c}}),Object(Z.c)({type:"EditorRenderError",appName:"heifetz",spanName:o,currentUser:c,release:"90-3a03610e",error:{name:i,message:e.message,stack:e.stack,payload:e.payload||"Unknown",componentStack:t.componentStack}}),e}},{key:"render",value:function(){return this.props.children}}]),n}(y.Component),ee=Object(C.connect)((function(e){return{currentUser:e.currentUser}}))($),te=n(1559),ne=n(219),re=function(){return Object(d.b)(T.b,{block:"MarkdownTips",children:Object(d.c)(x.Text,{color:"GBL05A",ml:"24px",fontSize:14,children:[Object(d.b)(T.f,{zaType:"Popup",zaText:"Markdown 识别中"}),"Markdown 语法识别中",Object(d.b)(ne.a,{arrowed:!0,toggleEvent:"hover",toggler:Object(d.b)(B.c,{icon:te.c,preset:"plain",css:{marginLeft:5}}),children:Object(d.c)(x.Box,{height:64,width:253,px:14,py:12,fontSize:14,css:function(e){return{color:e.colors.GBK02A}},children:[Object(d.b)(T.f,{zaType:"Popup",zaText:"Markdown 识别中 - 气泡"}),"可在「工具栏」-「更多」中关闭此模式，支持语法请参考「帮助文档」"," "]})})]})})},ae=n(885),oe=n(379),ie=n.n(oe),ce=n(436);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var se=Object(y.createContext)({updateFormData:function(){},formData:{}}),ue=function(e){var t=function(t){Object(l.a)(r,t);var n=le(r);function r(){var e;Object(o.a)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).state={},e.answerFormDataProps={updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}},e}return Object(i.a)(r,[{key:"render",value:function(){return Object(d.b)(se.Provider,{value:Object.assign({},this.answerFormDataProps),children:Object(d.b)(e,Object.assign(Object.assign({},this.props),this.answerFormDataProps))})}}]),r}(y.Component);return J()(t,e)},de=n(31),fe=n(52),be=Object.assign;var pe=function(e){return w.a.createElement(fe.a,be({width:"20",height:"20",fill:"#06F",viewBox:"0 0 20 20"},e),w.a.createElement("path",{d:"M4.635 4.884l-1.133.647 4.944 8.65 1.132-.647-4.943-8.65z"}),w.a.createElement("path",{d:"M18.342 3.003L5.524 4.429l5.093 8.991a1.534 1.534 0 01.14 1.153 1.488 1.488 0 01-1.25 1.102 1.448 1.448 0 01-1.096-.31 1.501 1.501 0 01-.377-.45l-4.975-8.79L2 6.76l5.042 8.882c.23.405.558.742.952.98a2.623 2.623 0 002.612.056 2.69 2.69 0 00.99-.938l7.306-11.792a.622.622 0 00-.233-.883.588.588 0 00-.327-.062zm-8.056 4.902a1.175 1.175 0 01-.665-.203 1.214 1.214 0 01-.442-.546 1.245 1.245 0 01.256-1.331 1.17 1.17 0 011.301-.267 1.2 1.2 0 01.536.45 1.24 1.24 0 01-.146 1.538 1.18 1.18 0 01-.84.36zm3.82-.114a.756.756 0 01-.424-.14.781.781 0 01-.278-.357.802.802 0 01.181-.853.762.762 0 01.841-.154c.14.063.257.166.34.297a.798.798 0 01.12.44.795.795 0 01-.23.556.761.761 0 01-.55.222v-.011z"}))},he=n(36),me=n(73),ve=n.n(me),ge=(n(1786),n(1525)),Oe=n(1116),je=n(99),ye=n(670),we=n(261),Ce=n(160),ke=n(1017),xe=["isBottom"],Se=["className"],Ae=["checked","onChange","text","id","disabled","shouldTrackClick","zaTextPrefix","zaText"];function Te(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Re=function(e){var t=e.required,n=e.name,r=e.title,a=e.helper,o=e.props,i=Object(ye.a)();return Object(d.c)(x.Flex,Object.assign(Object.assign({as:"label",color:"GBK03A",mr:"3px",css:[{lineHeight:"38px",fontSize:"15px",fontWeight:"400",width:"110px"},!t&&{paddingLeft:"10px"}]},o),{},{children:[t&&Object(d.b)(x.Text,{"aria-label":"必填",color:"GRD03A",mt:"2px",mr:"4px",children:"*"}),n,a&&Object(d.b)(T.a,{as:"button",zaType:"Button",zaText:"提示信息-".concat(n),css:function(e){return{color:e.colors.GBL05A}},onClick:function(){N.a.alert(Object(d.c)("div",{css:{paddingTop:"16px",h2:{paddingBottom:"20px",fontWeight:"bold",fontSize:"24px",textAlign:"center"},p:{textAlign:"left",fontSize:"15px",textIndent:"30px"},a:{textDecoration:"underline",color:i.colors.primary}},children:[Object(d.b)("h2",{children:r||n}),a]}),{text:{ok:"我知道了"}}).then(ve.a,ve.a)},children:Object(d.b)(te.a,{css:{marginLeft:"4px"},center:!0,size:18})})]}))},Ee=function(e){var t=e.isBottom,n=Object(he.default)(e,xe);return Object(d.b)(T.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:!0,css:function(e){return{cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.GBL05A}}},n),{},{children:t?Object(d.c)(d.a,{children:[Object(d.b)(x.Text,{mr:"4px",fontSize:"14px",children:"回到顶部"}),Object(d.b)(ge.a,{text:!0,fontSize:"16px"})]}):Object(d.c)(d.a,{children:[Object(d.b)(x.Text,{mr:"4px",fontSize:"14px",children:"发布设置"}),Object(d.b)(Oe.a,{text:!0,fontSize:"16px"})]})}))},Ie=function(e){var t=e.className,n=Object(he.default)(e,Se);return Object(d.b)(x.Flex,Object.assign({className:t,height:"52px",css:function(e){return{justifyContent:"center",borderTop:"1px solid ".concat(e.colors.GBK09A),background:e.colors.GBK99C,WebkitFontSmoothing:"subpixel-antialiased"}}},n))},Ne=function(e){var t=e.children,n=e.hideScrollButton,a=e.isAnswer,o=Object(ae.a)(!1),i=Te(r.a,o,2),c=i[0],l=i[1];return Object(y.useEffect)((function(){var e=function(){var e=document.documentElement;e.scrollTop+e.clientHeight>=e.scrollHeight-5?l.on():l.off()};return document.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[l]),Object(d.c)(d.a,{children:[Object(d.b)(x.Box,{height:"52px",css:{visibility:"hidden"}}),Object(d.b)(Ie,{css:{position:"fixed",left:0,right:0,bottom:0,zIndex:1},children:Object(d.c)(x.Flex,{height:"52px",alignItems:"center",mx:"auto",css:{width:a?"654px":"800px"},children:[!n&&Object(d.b)(Ee,{onClick:function(){Object(we.scrollTo)(window,{top:c?0:document.body.scrollHeight,behavior:"smooth"})},isBottom:c}),t]})})]})},Be=function(e){var t=e.children,n=e.hideScrollButton,r=e.getContaner;return Object(d.b)(P.a,{bottom:!0,getStyle:function(){return{width:"1000px",bottom:0,maxWidth:"100vw"}},container:r,children:function(e){var a=!e.isFixed;return Object(d.b)(Ie,{children:Object(d.c)(x.Flex,{width:"100%",height:"52px",alignItems:"center",mx:"auto",px:"20px",children:[!n&&Object(d.b)(Ee,{onClick:function(){if(a)Object(we.scrollTo)(window,{top:0,behavior:"smooth"});else{var e=null==r?void 0:r();if(e){var t=e.getBoundingClientRect().bottom+52;Object(we.scrollBy)(window,{top:t-document.documentElement.clientHeight,behavior:"smooth"})}}},isBottom:a}),t]})})}})};function ze(e){var t=e.checked,n=e.onChange,r=e.text,a=e.id,o=e.disabled,i=e.shouldTrackClick,c=e.zaTextPrefix,l=e.zaText,s=Object(he.default)(e,Ae),u=Object(T.l)().trackEvent;return Object(d.c)(x.Flex,Object.assign(Object.assign({flex:1,alignItems:"center",as:"label",htmlFor:a,css:{flex:"0 0 auto",marginRight:"20px",cursor:"pointer"}},s),{},{children:[Object(d.b)(ke.a,{id:a,size:20,checked:t,onChange:Object(je.a)((function(){i&&u({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:l||(c?"".concat(c,"-").concat(r):r)}}),n.apply(void 0,arguments)})),disabled:o}),Object(d.b)(x.Text,{ml:"4px",fontSize:"14px",color:"GBL05A",children:r})]}))}var Pe=function(e){return Object(d.b)(Ce.b,Object.assign({css:{".Select-button":{width:"270px",height:"38px"},".Select-arrow":{marginLeft:"auto"}}},e))},_e=function(e){return Object(d.b)(Ce.a,Object.assign({css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}}},e))},Le=n(1193),Me=n(95),De={INVITED_TASK:"品牌任务",EVALUATE_TASK:"众测任务"},Ue="CHEESE",Fe="COMMERCIAL_VIP",Ve="FE_INIT",qe="BINDING",Ge="UNBIND";function He(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var We=function(e){var t=(null==e?void 0:e.bindTaskDTO)||{},n=t.taskType,r=t.taskId,a=t.taskName;return[De[n],r,a].join("  ").trim()},Ke=function(e){var t=e.visible,n=e.onClose,a=e.onConfirm,o=e.value,i=e.taskList,c=void 0===i?[]:i,l=Object(y.useState)(o),s=He(r.a,l,2),u=s[0],f=s[1];return Object(y.useEffect)((function(){var e,n;t&&(null==o||null===(e=o.bindTaskDTO)||void 0===e?void 0:e.taskId)!==(null==u||null===(n=u.bindTaskDTO)||void 0===n?void 0:n.taskId)&&f(o)}),[t]),Object(d.b)(Me.b,{title:"选择芝士任务",size:"large",onClose:n,children:t&&Object(d.c)(x.Box,{children:[Object(d.b)(x.Box,{color:"GBK02A",maxHeight:"50vh",mr:"-24px",pr:"24px",overflowY:"auto",children:null!=c&&c.length?c.map((function(e){var t;return Object(d.c)(x.Flex,{flex:1,py:"12px",justifyContent:"space-between",alignItems:"center",css:function(e){var t=e.colors;return{cursor:"pointer",borderBottom:"1px solid ".concat(t.GBK09A)}},as:"label",children:[Object(d.b)(x.Text,{fontSize:"14px",children:We(e)}),Object(d.b)(ke.a,{checked:(null==u||null===(t=u.bindTaskDTO)||void 0===t?void 0:t.taskId)===e.bindTaskDTO.taskId,onChange:function(){f(e)}})]},e.bindTaskDTO.taskId)})):Object(d.b)(Le.a.EI1,{image:"default",content:"没有可绑定的任务"})}),Object(d.c)(x.Flex,{mt:"32px",justifyContent:"center",children:[Object(d.b)(B.c,{preset:"outline",color:"grey",css:{width:"168px",marginRight:"16px"},onClick:n,children:"取消"}),Object(d.b)(B.c,{preset:"primary",color:"blue",css:{width:"168px"},disabled:!u,onClick:function(){a(u)},children:"确认"})]})]})})};function Ze(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Qe=function(e){var t=e.value,n=e.onChange,a=e.taskList,o=e.disabled,i=void 0!==o&&o,c=e.onOpen,l=void 0===c?function(){return!0}:c,s=Object(ae.a)(!1),u=Ze(r.a,s,2),f=u[0],b=u[1],p=Object(T.l)().trackEvent;Object(y.useEffect)((function(){i&&f&&b.off()}),[i,f,b]);var h=We(t),m=function(){p({eventType:"Click",elementLocation:{type:"Text",text:h||"选择绑定芝士任务",block:{blockText:"PublishSettingZhiTaskBind"}}}),b.on()};return Object(d.c)(x.Flex,{flex:1,alignItems:"center",children:[Object(d.c)(T.f,{zaType:"Text",zaText:!0,view:{elementLocation:{block:{blockText:"PublishSettingZhiTaskBind"}}},as:x.Flex,p:"3px 0",alignItems:"center",fontSize:"14px",color:"GBL05A",css:function(e){var n=e.colors;return Object.assign({cursor:i?"not-allowed":"pointer",opacity:i?.5:1},t?{padding:"3px 14px",background:"rgba(0, 102, 255, .1)",borderRadius:"15px",color:n.GBL01A}:{})},onClick:function(){if(!i){var e=l();ie()(null==e?void 0:e.then)?e.then(m):!1!==e&&m()}},children:[Object(d.b)(pe,{css:function(e){var n=e.colors;return{fill:t?n.GBL01A:n.GBL05A,flexShrink:0}}}),Object(d.b)(x.Text,{mx:"4px",title:h||"",css:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:h||"选择绑定芝士任务"}),t&&!i&&Object(d.b)(ce.a,{size:"14px",css:{flexShrink:0},onClick:function(e){e.stopPropagation(),null==n||n(null)}})]}),Object(d.b)(Ke,{visible:f,value:t,taskList:a,onClose:b.off,onConfirm:function(e){null==n||n(e),b.off()}})]})},Ye=function(e){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"芝士任务",title:"芝士任务绑定",helper:Object(d.b)("p",{children:"如该内容为芝士任务投稿内容，需在此处进行对应任务的绑定操作，请在发布前认真检查绑定关系，内容发布后关系即刻生效。"})}),Object(d.b)(Qe,Object.assign({},e))]})},Je=function(e){var t=e.taskList,n=e.commercialZhitaskBindInfo,a=e.onChange,o=Object(y.useState)(null),i=Ze(r.a,o,2),c=i[0],l=i[1],s=Boolean(n),u=function(e){a(e),l(e)};return Object(y.useEffect)((function(){(null==n?void 0:n.bindStatus)===qe&&u(n)}),[s]),Object(d.b)(Ye,{taskList:t,disabled:(null==c?void 0:c.bindStatus)===qe,value:c,onChange:function(e){return u(e)}})},Xe=function(e){var t=e.taskList,n=e.isAnonymous,r=Object(C.useDispatch)(),a=Object(y.useContext)(se),o=a.updateFormData,i=(0,a.getFormData)().commercialZhitaskBindInfo,c=Object(y.useCallback)((function(e){o({commercialZhitaskBindInfo:e})}),[o]);Object(y.useEffect)((function(){(null==i?void 0:i.bindStatus)===Ge&&c(null)}),[i,c]);return Object(d.b)(Ye,{taskList:t,disabled:(null==i?void 0:i.bindStatus)===qe,value:i,onChange:c,onOpen:function(){if(n)return r(Object(de.h)("已经启用匿名的内容不能进行芝士任务绑定","red")),!1}})},$e=n(1447),et=n(901),tt=n(453),nt=n(1201),rt=n(997),at=n(1202),ot=n(438),it=n(161),ct=n(978),lt=n(1031);function st(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ut(e){var t=e.item,n=e.onCheck,a=Object(y.useState)(!1),o=st(r.a,a,2),i=o[0],c=o[1],l=t.id,s=t.title,u=t.description,f=t.imageUrl,b=t.publishedAt,p=t.video,h=null==p?void 0:p.duration;return Object(d.c)(x.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[Object(d.c)(x.Flex,{flex:1,children:[Object(d.c)(x.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[Object(d.b)(x.Image,{width:"100%",height:"100%",src:f,alt:"",css:{objectFit:"cover"}}),Object(d.b)(x.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:Object(rt.b)(h)})]}),Object(d.c)(x.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[Object(d.b)(x.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[Object(lt.a)(1)],children:s}),Object(d.b)(x.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[Object(lt.a)(1)],children:u}),Object(d.b)(x.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:Object(M.toRelativeString)(b)})]})]}),Object(d.b)(ct.a,{css:{marginLeft:16,flexShrink:0},checked:i,onChange:function(e){c(e.currentTarget.checked),n(l)}})]})}function dt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ft(e){var t,n=e.onClose,a=e.onSubmit,o=Object(y.useState)([]),i=dt(r.a,o,2),c=i[0],l=i[1],s=Object(C.useSelector)((function(e){return e.zvideos.insertable}))||{},u=s.isLoading,f=s.data,b=s.paging,p=Object(C.useDispatch)(),h=Object(y.useCallback)((function(){p(Object(tt.n)())}),[p]),m=Object(y.useCallback)((function(e){c.includes(e)?l(c.filter((function(t){return t!==e}))):l(c.concat([e]))}),[c]);return Object(d.c)(x.Box,{height:688,children:[Object(d.b)(x.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),Object(d.b)(ot.b,{css:{marginBottom:100},onLoad:h,isLoading:null!=u&&u,isDrained:null!==(t=null==b?void 0:b.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:f.map((function(e,t){return Object(d.b)(it.a,{children:Object(d.b)(ut,{item:e,onCheck:m})},t)}))}),Object(d.c)(x.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[Object(d.b)(B.c,{css:{flex:1},onClick:n,children:"返回"}),Object(d.b)(B.c,{disabled:0===c.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){a(c),n()},children:"添加"})]})]})}var bt=n(1245);function pt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ht=function(e){var t=e.show,n=e.onZVideoSubmit,a=e.onVideoSubmit,o=e.onClose,i=(Object(C.useSelector)((function(e){return e.zvideos.insertable}))||{}).data,c=Object(y.useState)(!1),l=pt(r.a,c,2),s=l[0],u=l[1],f=Object(y.useState)(!1),b=pt(r.a,f,2),p=b[0],h=b[1],m=Object(C.useDispatch)(),v=Object(je.a)((function(e){var t=Object(rt.a)(e),n=t.message,r=t.abortUpload,o=t.validFiles;n&&(m(Object(de.h)(n,r?"red":"white")),r)||a({value:o[0]})}));return t?Object(d.c)(Me.b,{css:{width:688},onClose:o,children:[p&&Object(d.b)(ft,{onSubmit:n,onClose:function(){h(!1)}}),!p&&Object(d.c)(d.a,{children:[Object(d.b)(x.Text,{fontSize:"24px",color:"GBK02A",lineHeight:"34px",fontWeight:500,m:"40px 0 30px",textAlign:"center",children:"导入视频"}),Object(d.c)(x.Flex,{flexDirection:"column",alignItems:"center",width:"440px",height:"300px",margin:"0 auto 45px",css:function(e){return Object.assign({border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:4},s&&{borderColor:e.colors.GBL05A,"*":{pointerEvents:"none"}})},onDragOver:function(e){return e.preventDefault()},onDragEnter:function(){return u(!0)},onDragLeave:function(){return u(!1)},onDrop:function(e){e.preventDefault(),v(Object(nt.a)(e))},children:[Object(d.b)(et.a,{size:90,css:function(e){return{color:s?e.colors.GBL05A:e.colors.GBK09A,marginTop:66}}}),Object(d.b)(x.Text,{color:"GBK03A",fontSize:"20px",lineHeight:"28px",fontWeight:"500",mt:"16px",children:"拖放要导入的视频文件"}),Object(d.c)(x.Box,{mt:"20px",children:[Object(d.b)(bt.a,{text:"导入视频",multiple:!1,css:{width:142},zaBlockText:"UploadVideoFile",onFiles:v}),Object(d.b)(B.c,{preset:"secondary",color:"blue",css:{width:142,marginLeft:12,padding:"0 14px",whiteSpace:"nowrap"},onClick:function(e){A.a.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),(null==i?void 0:i.length)>0?h(!0):m(Object(tt.n)()).then((function(e){e.payload.data.length?h(!0):m(Object(de.h)("还没有发布过视频"))}))},children:"选择已发布的视频"})]})]}),Object(d.b)(at.a,{})]})]}):null},mt={1:49,2:50,r:82,t:84,e:69};var vt=n(474),gt=n(541),Ot=n(1274),jt=n(1270),yt=n(216),wt=n(498),Ct=n(1602);function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var xt=function(e){Object(l.a)(n,e);var t=kt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleHide=function(){L.a.set("AnswerOrg::know",!0),e.props.onClose()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(d.b)(E.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&Object(d.c)("div",{children:[Object(d.c)("ul",{className:"AnswerModal-list",children:[Object(d.b)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),Object(d.b)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),Object(d.b)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),Object(d.b)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),Object(d.c)(E.a,{direction:"horizontal",children:[Object(d.b)(B.c,{onClick:this.handleHide,children:"不再显示"}),Object(d.b)(B.c,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})}}],[{key:"getKnown",value:function(){return L.a.get("AnswerOrg::know")}}]),n}(y.Component),St=n(92),At=n(610),Tt=n(43),Rt=n(65),Et=n(6),It=Object(Et.a)("interactText",["GET_INTERACT_TEXT"]);var Nt=n(512),Bt=n(641),zt=n(134),Pt=n(530),_t=n(466),Lt=function(e){var t=e.shown,n=e.onClose;return Object(d.b)(Me.b,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&Object(d.b)("div",{className:"SlideshowEditBlockModal",children:Object(d.b)(B.c,{preset:B.b.Primary,color:B.a.Blue,onClick:n,children:"知道了"})})})};Lt.propTypes={shown:j.a.bool.isRequired,onClose:j.a.func.isRequired};var Mt=Lt,Dt=n(1026),Ut=n(108),Ft=n(1005),Vt=n(2991),qt=n(1313);var Gt=function(e){var t=e.shown,n=e.onClose,r=e.onSubmit,a=Object(y.useCallback)((function(e){var t=e.type,a=e.payload;"browser/closeCurrentPage"!==t?"editor/submitAttachment"!==t||r(a.files):n()}),[r,n]);return Object(d.b)(Me.b,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&Object(d.b)("div",{className:"BaiduFileSelector-content",children:Object(d.b)(R.a,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:a})})})};function Ht(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Wt=Object(y.forwardRef)((function(e,t){var n=Object(y.useState)(!1),a=Ht(r.a,n,2),o=a[0],i=a[1];return Object(y.useImperativeHandle)(t,(function(){return{setBaiduFileSelectorShown:i}}),[]),Object(d.b)(Gt,{shown:o,onClose:function(){return i(!1)},onSubmit:function(t){i(!1),e.onSubmit(t)}})})),Kt=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return Object(qt.a)(e.getEditorState()).filter((function(e){return"file-link-card"===e.getType()}))},r=function(){n().size>=10?N.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)};return e.containerRef=Object(y.createRef)(),{initialize:function(t){Object.assign(e,t)},components:Object(d.b)(Wt,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),handleCommand:function(e){return"insert-file-from-baidu-wangpan"===e?(r(),"handled"):"not-handled"},toolbar:{section:Ut.a.CUSTOM_MAIN,label:"上传附件",icon:Vt.a,toolType:z.e.ENTITY,onClick:function(){n().size>=10?N.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:Ft.a.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:Vt.a,toolType:z.e.ENTITY,onClick:function(){r()},priority:2}}},Zt=n(2209),Qt=n(640),Yt=n(1111),Jt=n(1870),Xt=n(1151),$t=Object.assign;var en=function(e){return w.a.createElement(fe.a,$t({width:"150",height:"120",viewBox:"0 0 150 120"},e),w.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0144 93V30.997A5.996 5.996 0 0150.002 25h48.996A5.996 5.996 0 01105 30.998V93a2 2 0 01-.396 1.2l-4.112-2.66z"}),w.a.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 01-.999.999H56a.993.993 0 01-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 110 3h-35.99A1.499 1.499 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 110 3h-24.99A1.499 1.499 0 0155 75.5z"}))};function tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var nn={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},rn=function(e){Object(l.a)(n,e);var t=tn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).formatDate=function(e){return Jt.a("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},e.handleDraftClick=function(e){e.preventDefault()},e}return Object(i.a)(n,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,r=e.draftId,a=e.draftType,o=t.isFetching,i=t.data;return Object(d.c)("div",{className:"DraftHistory-main",children:[o&&Object(d.b)(Yt.a,{className:"DraftHistory-loading"}),!o&&i&&Object(d.c)(y.Fragment,{children:[i.draft.title&&Object(d.b)("div",{className:"DraftHistory-draftTitle",children:i.draft.title}),Object(d.b)(Xt.a,{className:"DraftHistory-draft",html:i.draft.content,onClick:this.handleDraftClick,sourceType:a,sourceId:r}),Object(d.c)("div",{className:"DraftHistory-actions",children:[Object(d.c)("div",{className:"DraftHistory-meta",children:[this.formatDate(i)," ",nn[i.versionType]]}),Object(d.b)(B.c,{className:"DraftHistory-revert",disabled:"current"===i.versionType,onClick:function(){return n(i)},children:"恢复此版本"})]})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.currentVersion,a=t.currentDraft,o=t.getHistory,i=t.onSelect;return n?n.isFetching&&!n.items?Object(d.b)("div",{className:"DraftHistory",children:Object(d.b)(Yt.a,{className:"DraftHistory-loading"})}):Object(d.c)("div",{className:"DraftHistory",children:[Object(d.c)("div",{className:"DraftHistory-side",children:[Object(d.b)("div",{className:"DraftHistory-title",children:"历史版本"}),Object(d.b)(ot.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:o,children:Object(d.b)("div",{children:n.items&&n.items.map((function(t,n){return Object(d.c)("a",{href:"#",className:m()("DraftHistory-version",{"DraftHistory-version--selected":r&&t.versionType===r.versionType&&t.id===r.id}),onClick:function(e){e.preventDefault(),i(t)},children:[Object(d.b)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),Object(d.b)("div",{className:"DraftHistory-versionType",children:nn[t.versionType]})]},n)}))})})]}),n.items&&!n.items.length&&Object(d.b)("div",{className:"DraftHistory-main",children:Object(d.c)("div",{className:"DraftHistory-empty",children:[Object(d.b)(en,{className:"DraftHistory-emptyIcon"}),Object(d.b)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),a&&this.renderCurrentDraft()]}):null}}]),n}(y.Component);rn.propTypes={history:j.a.object,currentVersion:j.a.object,currentDraft:j.a.object,onSelect:j.a.func,onRevert:j.a.func};var an=rn;function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var cn=function(e){Object(l.a)(n,e);var t=on(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={currentVersion:null},e.getHistory=function(){var t=e.props,n=t.type,r=t.id;(0,t.getHistory)(n,r)},e.handleSelect=function(t){e.setState({currentVersion:t})},e.handleRevert=function(t){var n=e.props,r=n.revert,a=n.onReverted;r(t.versionType,t.id).then((function(){a&&a(t)}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.drafts,a=n.getDraft,o=this.state.currentVersion,i=t.currentVersion;!o||i&&i.versionType===o.versionType&&i.id===o.id||r["".concat(o.versionType,"_").concat(o.id)]||a(o.versionType,o.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,r=e.draftId,a=e.draftType,o=this.state.currentVersion;return Object(d.b)(an,{history:t,currentVersion:o,currentDraft:o?n["".concat(o.versionType,"_").concat(o.id)]:null,draftId:r,draftType:a,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),n}(y.Component);cn.propTypes={type:j.a.string.isRequired,id:j.a.number.isRequired,onReverted:j.a.func};var ln=Object(C.connect)((function(e,t){var n=t.type,r=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(r)],drafts:e.draftHistory.drafts}}),{getHistory:Qt.c,getDraft:Qt.b,revert:Qt.e,reset:Qt.d})(cn);function sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var un=function(e){Object(l.a)(n,e);var t=sn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleReverted=function(t){var n=e.props,r=n.onClose,a=n.onReverted;a&&a(t),r&&r(),A.a.trackEvent(null,{id:5016,action:"Click"})},e.handleClose=function(){var t=e.props.onClose;t&&t(),A.a.trackEvent(null,{id:5015,action:"Click"})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,r=e.id,a=e.draftId,o=e.draftType;return Object(d.b)(Me.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&Object(d.b)(ln,{type:n,id:r,draftId:a,draftType:o,onReverted:this.handleReverted})})}}]),n}(y.Component);un.propTypes={shown:j.a.bool.isRequired,onClose:j.a.func,type:j.a.string.isRequired,id:j.a.number.isRequired,onReverted:j.a.func},un.defaultProps={shown:!0};var dn=un;function fn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var bn=Object(y.forwardRef)((function(e,t){var n,a,o=e.type,i=e.id,c=e.getId,l=e.handleReverted,s=e.draftId,u=e.draftType,f=e.getDraftId,b=Object(y.useState)(!1),p=fn(r.a,b,2),h=p[0],m=p[1],v=Object(je.a)((function(){return m(!0)})),g=Object(je.a)((function(){return m(!1)}));return Object(y.useImperativeHandle)(t,(function(){return{handleOpen:v,handleClose:g}}),[v,g]),Object(d.b)(dn,{shown:h,onClose:function(){return m(!1)},type:o,id:null!==(n=null==c?void 0:c())&&void 0!==n?n:i,draftId:null!==(a=null==f?void 0:f())&&void 0!==a?a:s,draftType:u,onReverted:l})})),pn=function(e){var t=e.type,n=e.id,r=e.syncDraft,a=e.getId,o=e.getDraftId,i=e.draftId,c=e.draftType,l=e.shouldShowToolbarButton,s=void 0===l?function(){return!0}:l,u={};u.draftModalRef=Object(y.createRef)(null);return{initialize:function(e){Object.assign(u,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(u.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[Object(d.b)(bn,{type:t,id:n,getId:a,draftId:i,getDraftId:o,draftType:c,ref:u.draftModalRef,handleReverted:function(e){u.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:Zt.a,onClick:function(){r.flush(),u.draftModalRef.current.handleOpen(),A.a.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:s}}},hn=n(903),mn=n(886),vn=n(2936),gn=n(2937),On=n(2939),jn=n(2940),yn=n(2941),wn=n(2942),Cn=n(2943),kn=n(2935),xn=n(2951),Sn=n(2952),An=Object.assign;function Tn(e){return w.a.createElement(G.a,An(An({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Eraser24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M6.956 17.185c.435.365.985.565 1.552.565h5.245c.572 0 1.114-.253 1.482-.69l.213-.255 4.715-5.62a2.415 2.415 0 00-.298-3.401l-5.11-4.288a2.415 2.415 0 00-3.402.298l-6.858 8.174a2.415 2.415 0 00.298 3.402l2.122 1.78.041.035zm1.552-.935a.915.915 0 01-.588-.214l-.041-.034-2.122-1.781a.915.915 0 01-.113-1.29l6.859-8.173a.915.915 0 011.289-.113l5.11 4.288a.915.915 0 01.112 1.289l-4.715 5.619-.213.254a.434.434 0 01-.333.155H8.508zM17 21.75a.75.75 0 100-1.5H5a.75.75 0 000 1.5h12z",fillRule:"evenodd",clipRule:"evenodd"}));var t}var Rn=n(2147),En=n(2945),In=n(2954),Nn=n(2950),Bn=n(2968),zn=n(2955),Pn=n(155),_n=[{icon:vn.b,label:"粗体",shortcut:"⌘+B",shortcutWin:"Ctrl+B"},{icon:gn.b,label:"斜体",shortcut:"⌘+I",shortcutWin:"Ctrl+I"},{icon:On.b,label:"一级标题",shortcut:"⌘+⌥+1",shortcutWin:"Ctrl+Alt+1"},{icon:jn.b,label:"二级标题",shortcut:"⌘+⌥+2",shortcutWin:"Ctrl+Alt+2"},{icon:yn.b,label:"有序列表",shortcut:"⌘+⇧+L",shortcutWin:"Ctrl+Shift+L"},{icon:wn.b,label:"无序列表",shortcut:"⌘+L",shortcutWin:"Ctrl+L"},{icon:Cn.a,label:"引用块",shortcut:"⌘+⇧+U",shortcutWin:"Ctrl+Shift+U"},{icon:kn.b,label:"代码块",shortcut:"⌘+⌥+C",shortcutWin:"Ctrl+Alt+C"},{icon:xn.b,label:"撤销",shortcut:"⌘+Z",shortcutWin:"Ctrl+Z"},{icon:Sn.b,label:"重做",shortcut:"⌘+Y",shortcutWin:"Ctrl+Y"},{icon:Tn,label:"清除格式",shortcut:"⌘+\\",shortcutWin:"Ctrl+\\"},{label:"插入链接",icon:Rn.c,shortcut:"⌘+K",shortcutWin:"Ctrl+K"},{icon:En.c,label:"目录",shortcut:"⌘+⌥+J",shortcutWin:"Ctrl+Alt+J"},{icon:In.b,label:"插入注释",shortcut:"⌘+⌥+R",shortcutWin:"Ctrl+Alt+R"},{icon:Nn.b,label:"插入分割线",shortcut:"⌘+⌥+S",shortcutWin:"Ctrl+Alt+S"},{label:"插入表格",icon:Bn.b,shortcut:"⌘+⌥+T",shortcutWin:"Ctrl+Alt+T"},{label:"插入公式",icon:zn.b,shortcut:"⌘+⌥+E",shortcutWin:"Ctrl+Alt+E"}],Ln=function(e){var t=e.name,n=e.isFirst;return Object(d.c)(d.a,{children:[!n&&Object(d.b)(x.Text,{color:"GBK06A",fontSize:"12px",mx:"4px",children:"+"}),Object(d.b)(x.Flex,{px:"4px",css:function(e){return[{minWidth:"24px",borderRadius:"2px",height:"24px",lineHeight:"26px",background:e.colors.GBK10C,textAlign:"center",color:e.colors.GBK05A,fontSize:"14px",alignItems:"center",justifyContent:"center"},n&&{marginLeft:"auto"}]},children:t})]})},Mn=function(e){var t=e.label,n=e.Icon,r=e.shortcut;return Object(d.c)(x.Flex,{alignItems:"center",css:{"&+&":{marginTop:"20px"}},children:[Object(d.b)(n,{size:20,css:function(e){return{color:e.colors.GBK03A}}}),Object(d.b)(x.Text,{ml:"8px",color:"GBK03A",fontSize:"14px",children:t}),r.split("+").map((function(e,t){return Object(d.b)(Ln,{name:e,isFirst:!t},t)}))]})};var Dn=Object.assign;var Un=Object.assign;var Fn=n(2199),Vn=Object.assign;var qn=function(){var e=Object(C.useSelector)((function(e){return Object(Tt.b)(e)})),t=Object(C.useSelector)((function(e){return e.switches})),n="https://www.zhihu.com";if("undefined"!=typeof window){var r=window.location,a=r.hostname,o=r.origin,i=[".zpres.zhihu.dev",".zpres.zhihu.com"].some((function(e){return a.endsWith(e)})),c=o.replace(/\D+/g,"");i&&c&&(n="https://heifetz--box-".concat(c,"--www-zhihu-com.zpres.zhihu.").concat(a.slice(-3)))}return{jumpUrl:e&&!e.isOrg&&t&&t.isCreator?"".concat(n,"/creator/editor-setting"):"".concat(n,"/knowledge-plan/editor-setting")}},Gn=[{icon:On.c,label:"一级标题",shortcut:"#+空格"},{icon:jn.c,label:"二级标题",shortcut:"##+空格"},{icon:yn.c,label:"有序列表",shortcut:"1+.+空格"},{icon:wn.c,label:"无序列表",shortcut:"*+空格"},{icon:vn.b,label:"粗体",shortcut:"**文字**"},{icon:gn.c,label:"斜体",shortcut:"*文字*"},{icon:function(e){return w.a.createElement(G.a,Dn(Dn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ItalicBold24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M10.25 2.75a.75.75 0 00-.728.568l-4.25 17A.75.75 0 006 21.25h8a4.75 4.75 0 002.381-8.86A5.25 5.25 0 0013.5 2.75h-3.25zm3.25 9a3.75 3.75 0 100-7.5h-2.664l-1.875 7.5H13.5zm-4.914 1.5l-1.625 6.5H14a3.25 3.25 0 000-6.5H8.586z",fillRule:"evenodd",clipRule:"evenodd"}));var t},label:"倾斜加粗",shortcut:"***文字***"},{icon:function(e){return w.a.createElement(G.a,Un(Un({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--InlineCode24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M4 4.25a.75.75 0 000 1.5h16a.75.75 0 000-1.5H4zm7.242 12.184a.75.75 0 01-.597-.877l1.419-7.447a.75.75 0 011.473.28l-1.418 7.447a.75.75 0 01-.877.597zm-2.099-7.71a.75.75 0 010 1.06l-2.082 2.083 2.082 2.083a.75.75 0 11-1.06 1.06L5.47 12.397a.75.75 0 010-1.06l2.613-2.613a.75.75 0 011.06 0zm5.714 1.191a.75.75 0 011.06-1.06l2.613 2.612a.75.75 0 010 1.061l-2.613 2.613a.75.75 0 11-1.06-1.06l2.082-2.083-2.082-2.083zM3.25 19a.75.75 0 01.75-.75h16a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75z"}));var t},label:"行内代码",shortcut:"`文字`"},{icon:kn.b,label:"代码块",shortcut:"```+回车"},{icon:Cn.c,label:"引用块",shortcut:">+空格"},{icon:Nn.b,label:"分割线",shortcut:"---+回车"},{icon:Fn.b,label:"插入图片",shortcut:"![描述](链接)+空格"},{icon:function(e){return w.a.createElement(G.a,Vn(Vn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Latex24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M16.647 7.726l-.88-2.281-.879 2.281h1.759zm.578 1.5l.557 1.445a.75.75 0 101.4-.54l-2.248-5.83c-.412-1.068-1.921-1.068-2.333 0l-2.248 5.83a.75.75 0 101.4.54l.557-1.445h2.915zM5.518 3.6a.75.75 0 01.75.75v5.302h3.959a.75.75 0 010 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V4.35a.75.75 0 01.75-.75zm12.324 9.623a.75.75 0 10-1.158.954l2.1 2.548-2.1 2.549a.75.75 0 101.158.954l1.914-2.323 1.914 2.323a.75.75 0 101.158-.954l-2.1-2.549 2.1-2.548a.75.75 0 00-1.157-.954l-1.915 2.323-1.914-2.323zm-9.086.977c0-.69.56-1.25 1.25-1.25h4.21a.75.75 0 010 1.5h-3.96v1.525h3.406a.75.75 0 010 1.5h-3.405v1.526h3.959a.75.75 0 010 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V14.2zM1.75 12.95a.75.75 0 000 1.5h1.743v5.301a.75.75 0 001.5 0v-5.3h1.743a.75.75 0 000-1.5H1.75z",fillRule:"evenodd",clipRule:"evenodd"}));var t},label:"LaTeX 语法",shortcut:"$$文字$$+空格"},{icon:Rn.c,label:"插入链接",shortcut:"[标题](链接)+空格"}];var Hn=[{tabName:"目录",describe:["选中工具栏的目录功能后，在编辑器中添加标题，左侧自动识别标题生成目录；",Object(d.c)(d.a,{children:[Object(d.b)(x.Text,{my:"8px",children:"若不想添加此标题至目录中，可将鼠标悬浮在目录区域的对应标题上，点击「删除」按钮即可移除；"}),Object(d.b)(x.Image,{my:"8px",src:"https://pic1.zhimg.com/v2-3173fb93f4c628ebc8245a2ae2ecea1d.png?source=6a64a727"}),Object(d.b)(x.Text,{my:"8px",children:"若想重新添加标题至目录中，可以在正文中选中此标题，并在目录区域找到对应标题，点击「固定」按钮即可重新添加。"}),Object(d.b)(x.Image,{my:"8px",src:"https://pic2.zhimg.com/v2-1cabcd37bc16361cf95f172fc3ef86f0.png?source=6a64a727"})]})]},{tabName:"代码",describe:["点击工具栏中的代码块图标后，编辑器内生成代码卡片，右上方选择语法，可在代码块中展示语法高亮。"]},{tabName:"公式",describe:["点击工具栏中的公式图标后，在公式编辑器输入 LaTeX 语法，下方为预览区。",Object(d.c)(d.a,{children:["您可在",Object(d.b)(x.Link,{css:function(e){return{color:e.colors.GBL01A}},target:"_blank",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference",children:"LaTeX基础教程"}),"中参考更多语法"]})]},{tabName:"注释",describe:["点击工具栏中的注释图标，在注释编辑弹框中输入注释文本及链接后，文本对应的注释会出现在文末。"]},{tabName:"历史版本",describe:["点击工具栏中的历史版本后，可在自动保存的草稿版本中查看历史草稿，点击恢复此版本可还原历史草稿。"]},{tabName:"文档导入",describe:["点击工具栏中的文档图标，导入 .docx/.md 文档后，编辑器会自动解析内容并展示在编辑器中。若粘贴图片失败，建议使用文档导入功能。"]}],Wn=function(e){var t=e.name,n=e.describe,r=e.isFirst;return Object(d.c)(x.Box,{css:function(e){return{color:e.colors.GBK03A,paddingTop:r?"0":"20px"}},fontSize:14,fontWeight:400,children:[Object(d.b)(x.Text,{css:function(e){return{color:e.colors.GBK02A}},mb:"8px",fontWeight:500,children:t}),n.map((function(e){return"string"==typeof e?Object(d.b)(x.Text,{lineHeight:"20px",children:e}):Object(d.b)(d.a,{children:e})}))]})};var Kn=["active"];function Zn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Qn=[{name:"快捷键",component:function(e){var t=e.activeTabName,n=Object(Pn.b)().isAppleDevice;return Object(d.b)(T.f,{zaType:"Text",zaText:t,as:x.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:_n.map((function(e,t){var r=e.label,a=e.icon,o=e.shortcut,i=e.shortcutWin;return Object(d.b)(Mn,{label:r,Icon:a,shortcut:n?o:i},t)}))})}},{name:"Markdown",component:function(e){var t=e.activeTabName,n=qn().jumpUrl;return Object(d.c)(T.f,{zaType:"Text",zaText:t,as:x.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:[Object(d.c)(x.Box,{fontSize:12,css:function(e){return{color:e.colors.GBK06A,margin:"-10px 0 20px 0"}},children:[Object(d.b)(x.Text,{children:"在工具栏-更多中设置为 Markdown 模式后，才会自动识别后续输入内容，转化为对应格式；"}),Object(d.c)(x.Text,{children:["如你希望每篇内容均为此格式，可在",Object(d.b)(x.Link,{css:{cursor:"pointer",textDecoration:"underline",margin:"0 5px"},onClick:function(){return window.open(n)},children:"默认设置"}),"中修改默认编辑器偏好"]})]}),Gn.map((function(e,t){var n=e.label,r=e.icon,a=e.shortcut;return Object(d.b)(Mn,{label:n,Icon:r,shortcut:a},t)}))]})}},{name:"功能说明",component:function(e){var t=e.activeTabName;return Object(d.b)(T.f,{zaType:"Text",zaText:t,as:x.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:Hn.map((function(e,t){var n=e.tabName,r=e.describe;return Object(d.b)(Wn,{name:n,describe:r,isFirst:!t},t)}))})}}],Yn=function(e){var t=e.children,n=e.className;return Object(d.b)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},Jn=function(e){var t=e.active,n=Object(he.default)(e,Kn);return Object(d.b)(T.a,Object.assign({zaType:"Button",zaText:!0,as:"button",css:function(e){return[{display:"inline-block",width:"88px",borderRadius:"999px",height:"26px",lineHeight:"26px",background:t?e.colorMod(e.colors.primary).alpha(.1):e.colors.GBK10C,textAlign:"center",cursor:"pointer",color:t?e.colors.primary:e.colors.GBK06A,fontSize:"13px",marginRight:"7px",marginBottom:"14px"},t&&{fontWeight:"500"}]}},n))};function Xn(e){var t=e.className,a=e.onClose,o=e.getInitialOffset,i=e.getShouldHide,c=Object(y.useState)(0),l=Zn(r.a,c,2),s=l[0],u=l[1],f=Qn[s].component,b=Object(mn.a)((function(){return Promise.all([n.e(24),n.e(46),n.e(52)]).then(n.bind(null,3048))}));return b?Object(d.b)(T.b,{block:"EditorHelpDoc",children:Object(d.c)(b,{className:t,getInitialOffset:o,getShouldHide:i,children:[Object(d.b)(T.f,{zaType:"Popup",zaText:"帮助文档"}),Object(d.c)(x.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"52px",alignItems:"center"},children:[Object(d.b)(Yn,{css:{fontSize:"18px",lineHeight:"24px"},children:"帮助文档"}),Object(d.b)(x.Text,{color:"GBK06A",fontSize:"12px",lineHeight:"17px",fontWeight:"400",ml:"8px",mt:"4px",children:"支持拖拽和调整高度"}),Object(d.b)(T.a,{zaType:"Button",zaAction:"Unknown",zaText:"关闭帮助文档",as:hn.a,css:{marginLeft:"auto",padding:"16px",cursor:"pointer"},onClick:a})]}),Object(d.c)(x.Box,{ml:"16px",mr:"9px",pt:"14px",children:[Qn.map((function(e,t){return Object(d.b)(Jn,{active:s===t,onClick:function(){s!==t&&u(t)},children:e.name},t)})),Object(d.b)(x.Box,{mr:"7px",sx:{height:"2px",borderBottom:"1px solid",borderColor:"GBK09A",alignItems:"center"}})]}),Object(d.b)(x.Box,{px:"16px",css:{height:"calc(100% - 112px)",overflow:"auto"},children:f&&Object(d.b)(f,{activeTabName:Qn[s].name})})]})}):null}function $n(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var er=Object(y.forwardRef)((function(e,t){var n=e.getInitialOffset,a=e.getShouldHide,o=e.forceUpdate,i=Object(ae.a)(!1),c=$n(r.a,i,2),l=c[0],s=c[1];return Object(y.useImperativeHandle)(t,(function(){return{toggle:s.toggle,getShown:function(){return l}}}),[s,l]),l&&Object(d.b)(Xn,{onClose:function(){s.toggle(),o&&requestAnimationFrame((function(){o()}))},getInitialOffset:n,getShouldHide:a})})),tr=function(e){var t=e.getInitialOffset,n=e.getShouldHide,r=e.forceUpdate,a={};return a.helpDocRef=Object(y.createRef)(null),{initialize:function(e){Object.assign(a,e)},handleCommand:function(e){return"toggle-help-document"===e?(a.helpDocRef.current.toggle(),r&&requestAnimationFrame((function(){r()})),"handled"):"not-handled"},queryCommandState:function(e){var t;if("toggle-help-document"===e)return Boolean(null===(t=a.helpDocRef.current)||void 0===t?void 0:t.getShown())},components:[Object(d.b)(er,{getInitialOffset:t,getShouldHide:n,ref:a.helpDocRef,forceUpdate:r},"EditorHelpDocContainer")]}},nr=function(e){var t=e.onToggle;return{handleCommand:function(e){return"toggle-markdown-enabled"===e?(t(),"handled"):"not-handled"}}},rr=n(1039),ar=n(1466),or=function(e){var t=e.sourceType,n=e.sourceId,r=w.a.createRef(null),a={},o=!1,i=null,c=function(e,t,n){o?i=Object(rr.a)(i,"image","IMMUTABLE",Object.assign(Object.assign({},t?null==e?void 0:e.value:{upload:e}),{},{size:"normal"}),void 0,{isBatched:!0,isLastOneOfBatch:n}):a.setEditorState(Object(rr.a)(a.getEditorState(),"image","IMMUTABLE",{upload:e,size:"normal"}))};return{initialize:function(e){Object.assign(a,e)},components:[Object(d.b)(ar.a,{ref:r,sourceType:t,sourceId:n,insertImage:function(e,t){var n;n=function(){for(var n=0;n<e.length;n++){var r=n===e.length-1;c({value:e[n]},t,r)}},o=!0,i=a.getEditorState(),n(),a.setEditorState(i),o=!1}},"material_library")],handleCommand:function(e){var t;return"insert-image-from-library"===e?(null===(t=r.current)||void 0===t||t.toggleShown(),"handled"):"not-handled"},toolbar:{label:"插入图片",section:Ut.a.BASIC_MEDIA,text:"图片",icon:Fn.a,priority:2,onClick:function(){var e;null===(e=r.current)||void 0===e||e.toggleShown()}},toolbarV2:[{label:"插入图片",section:Ft.a.BASIC_MEDIA,text:"图片",icon:Fn.a,priority:2,onClick:function(){var e;null===(e=r.current)||void 0===e||e.toggleShown()}}]}},ir=n(2981),cr=n(961),lr=function(e){var t=e.className,n=e.onClose,r=e.shown,a=e.allInviters,o=e.onChoose;return Object(d.b)(E.b,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:r&&a.map((function(e){return Object(d.c)(x.Flex,{css:{padding:"12px 0"},children:[Object(d.b)(cr.a,{author:e}),Object(d.b)(B.c,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){A.a.trackEvent(null,{id:7682,action:"Click"}),o&&o(e)},children:"选择"})]},e.id)}))})},sr=n(1374);function ur(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var dr=function(e){var t=e.shown,n=e.hasShown,r=e.children,a=Object(y.useRef)(n),o=Object(y.useRef)(t);return Object(y.useEffect)((function(){!t&&o.current&&(a.current=!0),o.current=t}),[t]),t&&!a.current&&r},fr=function(e){var t=e.className,n=e.shown,a=e.hasShown,o=e.inviters,i=e.onConfirm,c=e.onCancel,l=Object(y.useState)(n),s=ur(r.a,l,2),u=s[0],f=s[1],b=Object(y.useRef)(n);return Object(y.useEffect)((function(){b.current!==n&&f(n),b.current=n}),[n]),(null==o?void 0:o.length)>0&&Object(d.b)(dr,{shown:u,hasShown:a,children:Object(d.c)(x.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",justifyContent:"space-between",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[Object(d.c)(x.Flex,{alignItems:"center",children:[o.map((function(e,t){return Object(d.b)(x.Image,{src:o[t].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:o.length-t,marginLeft:t?"-14px":"0"}},e.id)})),Object(d.b)(x.Text,{ml:"8px",children:o[0].name+(o.length>1?"等 ".concat(o.length," 人"):"")}),"邀请你回答"]}),Object(d.c)(x.Flex,{alignItems:"center",children:[Object(d.b)(x.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){A.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===o.length?"0":"1"}]},{button:{text:"添加谢邀"}}),i&&i(o)},children:"添加谢邀"}),Object(d.b)(x.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){f(!1),A.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===o.length?"0":"1"}]},{button:{text:"忽略"}}),c&&c()},children:"忽略"})]})]})})};function br(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var pr=Object(y.forwardRef)((function(e,t){var n=e.getAllInviters,a=e.inviterQuery,o=e.getStore,i=e.syncDraftImmediately,c=Object(y.useContext)(se),l=c.updateFormData,s=(0,c.getFormData)().thankInviterInfo,u=Object(y.useState)(!1),f=br(r.a,u,2),b=f[0],p=f[1],h=function(e){l({thankInviterInfo:e}),requestAnimationFrame((function(){i()}))},m=Object(y.useState)(null),v=br(r.a,m,2),g=v[0],O=v[1],j=Object(je.a)((function(){return p(!1)}));return Object(y.useImperativeHandle)(t,(function(){return{openInviterListModal:function(){return p(!0)},getInvitersData:function(){return g},getThankInviterInfo:function(){return s}}}),[g,s]),Object(y.useEffect)((function(){n().then((function(e){var t=e.payload;O(t.data);var n=o();n.setEditorState(n.getEditorState())}))}),[]),Object(d.c)(d.a,{children:[s&&Object(d.b)(sr.a,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:s,onDelete:function(){h(null)}}),(null==g?void 0:g.length)>0&&Object(d.b)(fr,{hasShown:Boolean(a)||Boolean(s),shown:!s,inviters:g,onConfirm:function(e){null!=e&&e.length&&(1!==e.length?p(!0):h(e[0]))}}),Object(d.b)(lr,{onClose:j,shown:b,allInviters:g,onChoose:function(e){h(e),j()}})]})})),hr=function(e){var t=e.getShouldShowToolbarButton,n=e.getAllInviters,r=e.inviterQuery,a=e.getInitialThankInviterInfo,o=e.syncDraftImmediately,i={},c=Object(y.createRef)(null);return{initialize:function(e){Object.assign(i,e)},componentsBeforeEditor:[{component:Object(d.b)(pr,{getAllInviters:n,inviterQuery:r,ref:c,getStore:function(){return i},getInitialThankInviterInfo:a,syncDraftImmediately:o}),priority:0}],toolbar:{label:"添加谢邀",section:Ut.a.CUSTOM_MAIN,priority:3,icon:ir.a,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=c.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:Ft.a.BUSINESS_MEDIA,text:"谢邀",icon:ir.a,priority:3,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=c.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}},mr=Object.assign;function vr(e){return w.a.createElement(G.a,mr(mr({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--MoneyBag24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M6.326 3.132a.75.75 0 01.645-.366h10.046a.75.75 0 01.655 1.114l-1.58 2.848c3.444 1.349 5.543 4.405 5.543 7.72 0 2.254-.992 4.177-2.707 5.519-1.702 1.33-4.078 2.065-6.85 2.065-2.77 0-5.147-.735-6.849-2.065-1.715-1.342-2.707-3.265-2.707-5.519 0-3.274 1.994-6.29 5.37-7.659l-1.58-2.916a.75.75 0 01.014-.741zm1.905 1.134l1.4 2.58a.75.75 0 01-.443 1.075c-3.298.998-5.166 3.68-5.166 6.527 0 1.775.766 3.27 2.132 4.337 1.379 1.079 3.405 1.747 5.925 1.747 2.519 0 4.546-.668 5.925-1.747 1.365-1.068 2.13-2.562 2.13-4.337 0-2.87-1.968-5.605-5.342-6.578a.75.75 0 01-.448-1.085l1.399-2.52H8.23z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M9.777 10.466a.75.75 0 011.06.056l1.242 1.38 1.242-1.38a.75.75 0 111.115 1.003l-1.607 1.786v.462h1.5a.75.75 0 010 1.5h-1.5v1.75a.75.75 0 01-1.5 0v-1.75h-1.5a.75.75 0 010-1.5h1.5v-.462l-1.607-1.786a.75.75 0 01.055-1.059z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function gr(e){return w.a.createElement(vr,mr(mr({},e),{className:function(){return"ZDI ZDI--Income24"+(e.className?" "+e.className:"")}}))}function Or(e){return w.a.createElement(vr,mr(mr({},e),{className:function(){return"Zi Zi--Income"+(e.className?" "+e.className:"")}}))}var jr=n(1256);function yr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var wr=Object(y.forwardRef)((function(e,t){var n=e.getStore,a=e.getContentInfo,o=Object(y.useState)(!1),i=yr(r.a,o,2),c=i[0],l=i[1],s=a(),u=s.id,f=s.type;Object(y.useImperativeHandle)(t,(function(){return{setShowUserProfitCardSelector:l}}),[]);var b=function(){return Object(qt.a)(n().getEditorState()).filter((function(e){return"ad-link-card"===e.getType()}))};return Object(d.b)(d.a,{children:Object(d.b)(Me.b,{className:"UserProfitCardSelector",size:"large",onClose:function(){l(!1)},children:c&&Object(d.b)("div",{className:"UserProfitCardSelector-content",children:Object(d.b)(R.a,{className:"UserProfitCardSelector-iframe",src:Object(jt.d)({contentId:u,contentType:f}),onMessage:function(e){var t=n().getEditorRef();if("ProfitCardSelector/submitProfitCardInfo"===(null==e?void 0:e.type)&&null!=e&&e.payload){var r=e.payload,a=r.type,o=r.id,i=r.url;if(r.preventClose||l(!1),"inserLinkCard"===a&&t.props.handleCommand("insert-link-card:".concat(i)),"insertMCNLinkCard"===a){if(Object(qt.a)(n().getEditorState()).filter((function(e){return"mcn-link-card"===e.getType()})).size>=30)return void N.a.alert(null,{title:"一篇内容最多可添加 ".concat(30," 个商品")});t.props.handleCommand("insert-mcn-link-card:".concat(o))}if("insertEduCard"===a){if(Object(qt.a)(n().getEditorState()).filter((function(e){return e.getType()===jr.a.TYPE})).size>=jr.a.EDU_CARD_LIMIT)return void N.a.alert(null,{title:"一篇内容最多可添加 ".concat(jr.a.EDU_CARD_LIMIT," 个教育卡片")});t.props.handleCommand("".concat(jr.a.WebInsertCommand).concat(o))}if("insertAdLinkCard"===a){if(o.startsWith("ZhiTask_"))if(b().filter((function(e){return e.getData().id.startsWith("ZhiTask_")})).size>=5)return void N.a.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));if(o.startsWith("fee_"))if(b().filter((function(e){return e.getData().id.startsWith("fee_")})).size>=1)return void N.a.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));t.props.handleCommand("insert-ad-link-card:".concat(o))}}}})})})})})),Cr=function(e){var t=e.shouldDisabled,n=e.shouldShow,r=void 0===n?function(){return!0}:n,a=e.getContentInfo,o=void 0===a?function(){}:a,i={};return i.containerRef=Object(y.createRef)(),{initialize:function(e){Object.assign(i,e)},handleCommand:function(e){return"toggle-user-profit-modal"===e?(i.containerRef.current.setShowUserProfitCardSelector(!0),"handled"):"not-handled"},toolbar:{label:"用户收益",icon:Or,shouldShow:r,shouldDisabled:function(){return!(null==t||!t())||null},section:Ut.a.CUSTOM_MAIN,toolType:z.e.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),A.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"收益",text:"收益",icon:Or,shouldShow:r,shouldDisabled:function(){return!!t()||null},section:Ft.a.BUSINESS_MEDIA,toolType:z.e.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),A.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:Object(d.b)(wr,{ref:i.containerRef,getStore:function(){return i},getContentInfo:o})}},kr=n(1448),xr=(n(889),function(e){var t=e.canSubmit,n=e.handleSubmit,r=e.isReediting,a=e.scheduledPublishAt,o=e.className;return Object(d.b)(T.a,{as:B.c,zaText:!0,zaType:"Button",zaAction:"Answer",zaModuleId:"published_button",extra:{configMap:{traceId:Object($e.b)(),type:"Answer",publish_type:r?"oldEdit":"newPublish"}},width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:B.a.Blue,preset:B.b.Primary,css:{borderRadius:3,cursor:t?"pointer":"not-allowed",opacity:t?1:.3},onClick:n,className:o,children:r?"提交修改":a?"定时发送":"发布回答"})});var Sr=n(376),Ar=n(44),Tr=n(1276),Rr=n(546),Er=Object(Et.a)("biz",["OPEN_BIZ_VIP","QUERY_BIZ_VIP_STATUS","GET_COMMERCIAL_REPORT_INFO"]);var Ir=["shown","toggle"],Nr=function(e){var t=e.shown,n=e.toggle,r=Object(he.default)(e,Ir);return Object(d.b)(Me.b,Object.assign(Object.assign({title:"",subtitle:"",onClose:function(){n()}},r),{},{children:t&&Object(d.c)("div",{children:[Object(d.c)(x.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:[Object(d.b)(x.Text,{children:"系统检测到您的账号已开通芝士平台权限。创作者与品牌主的商业合作，需统一通过知乎官方商业合作服务平台「芝士平台」进行。"}),Object(d.b)(x.Text,{children:"知享仅针对品牌自营账号开放。如果您是商家，可以在推出芝士平台后，申请开通知享。"}),Object(d.c)(x.Text,{children:["如仍有疑问，请详询",Object(d.b)(x.Link,{href:"https://www.zhihu.com/messages/0cb9df58ed7a3ff685d0ac55d1c1e553",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"@知乎商业小管家 "}),"反馈，我们将积极解决您的问题。"]})]}),Object(d.b)("button",{onClick:function(){n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"}]},children:"知道了"})]})}))},Br=["shown","toggle","onSuccess","onFail"];function zr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Pr=function(e){var t=e.shown,n=e.toggle,a=e.onSuccess,o=e.onFail,i=Object(he.default)(e,Br),c=Object(C.useDispatch)(),l=Object(y.useState)(!0),s=zr(r.a,l,2),u=s[0],f=s[1],b=Object(ae.a)(!1),p=zr(r.a,b,2),h=p[0],m=p[1],v=Object(T.l)().trackEvent;return Object(d.c)(d.a,{children:[Object(d.b)(Me.b,Object.assign(Object.assign({title:"商业内容推广",subtitle:"",onClose:function(){v({eventType:"Click",action:"Unknown",elementLocation:{text:"开通商业会员弹窗关闭"}}),n()}},i),{},{children:t&&Object(d.c)("div",{children:[Object(d.b)(x.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:"报备后，将自动为您开通「知享」试用版，符合商业内容规范的内容可以正常曝光"}),Object(d.c)(x.Flex,{flexDirection:"inherit",flexWrap:"nowrap",alignItems:"center",style:{marginTop:"10px"},children:[Object(d.b)(ct.a,{onChange:function(){f(!u)},type:"checkbox",checked:u}),Object(d.c)(x.Text,{ml:"4px",children:["我已阅读并同意",Object(d.b)(x.Link,{href:"https://bvip.zhihu.com/agreement",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"《知享服务使用协议》"})]})]}),Object(d.b)("button",{disabled:!u,onClick:function(){c({API:{types:Er.OPEN_BIZ_VIP,endpoint:"/commercial/vip",root:"".concat(Object(Rr.a)(),"/api/v1"),method:"POST"}}).then((function(e){var t,n,r=e.payload;if(r.isSuccess)return a(),void c(Object(de.h)("开通成功"));o(),"-300"===(null==r||null===(t=r.err)||void 0===t?void 0:t.code)?m.on():c(Object(de.h)((null==r||null===(n=r.err)||void 0===n?void 0:n.msg)||"开通失败","red"))})).catch((function(e){var t;o(),c(Object(de.h)((null==e||null===(t=e.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})),n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"},!u&&{cursor:"not-allowed"}]},children:"确认并开通"})]})})),Object(d.b)(Nr,{shown:h,toggle:m.toggle})]})};function _r(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Lr=[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}],Mr=function(e){var t=e.isReport,n=e.commercialPermissionInfo,a=e.setCommercialPermissionInfo,o=e.setIsReport,i=e.validate,c=Object(T.l)().trackEvent,l=Object(ae.a)(!1),s=_r(r.a,l,2),u=s[0],f=s[1];return Object(d.c)(d.a,{children:[Object(d.b)(Pe,{onChange:function(e){if(!i||i()){var t=Lr.find((function(t){return t.type===e}));c({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"商业推广-".concat(null==t?void 0:t.description)}}),!0!==e||null!=n&&n.isCommercialVip?o(e):f.on()}},value:Boolean(t),children:Lr.map((function(e){return Object(d.b)(_e,{css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}},value:e.type,text:e.description},e.type)}))}),Object(d.b)(Pr,{shown:u,toggle:f.toggle,onSuccess:function(){o(!0),a((function(e){return Object.assign(Object.assign({},e),{},{isCommercialVip:!0})}))},onFail:function(){o(!1)}})]})},Dr=function(e){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"商业推广",title:"商业内容推广",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),Object(d.b)("p",{children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),Object(d.c)("p",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",Object(d.b)("a",{href:"https://www.zhihu.com/creator/explore/academy/rights/rights",target:"_blank",rel:"noreferrer noopener",children:"点击前往了解"})]})]})}),Object(d.b)(x.Box,{flex:"1",children:Object(d.b)(Mr,Object.assign({},e))})]})},Ur=Object(y.forwardRef)((function(e,t){var n=e.commercialReportInfo,a=e.initCommercialPermissionInfo,o=Object(y.useState)(a),i=_r(r.a,o,2),c=i[0],l=i[1],s=Object(y.useState)(!1),u=_r(r.a,s,2),f=u[0],b=u[1],p=Boolean(n);return Object(y.useEffect)((function(){p&&b(n.isReport)}),[p]),Object(y.useImperativeHandle)(t,(function(){return{getIsReport:function(){return f}}})),Object(d.b)(Dr,{isReport:Boolean(f),commercialPermissionInfo:c,setIsReport:b,setCommercialPermissionInfo:l})})),Fr=function(e){var t=e.isAnonymous,n=e.updateDraftSettings,a=e.initCommercialPermissionInfo,o=Object(C.useDispatch)(),i=Object(y.useState)(a),c=_r(r.a,i,2),l=c[0],s=c[1],u=Object(y.useContext)(se),f=u.updateFormData,b=(0,u.getFormData)().isReport,p=Object(je.a)((function(e){f({isReport:e}),requestAnimationFrame(n)})),h=Object(je.a)((function(){return!t||(o(Object(de.h)("已经启用匿名的内容不能进行商业推广声明","red")),!1)}));return Object(d.b)(Dr,{isReport:Boolean(b),commercialPermissionInfo:l,setIsReport:p,setCommercialPermissionInfo:s,validate:h})};function Vr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var qr=function(e){var t=e.type,n=e.questionId,a=e.answerId,o=e.articleId,i=e.reportProps,c=void 0===i?{}:i,l=e.taskBindProps,s=void 0===l?{}:l,u=Object(C.useDispatch)(),f=Object(y.useState)([]),b=Vr(r.a,f,2),p=Vr(r.a,b[0],3),h=p[0],m=void 0===h?null:h,v=p[1],g=void 0===v?{}:v,O=p[2],j=void 0===O?"":O,w=b[1],k="article"===t,x="answer"===t;return Object(Sr.a)((function(){var e,t=k?(e=o,{API:{types:Er.QUERY_BIZ_VIP_STATUS,endpoint:"/articles/settings",query:{token:e},method:"GET"}}):function(e,t){return{API:{types:Er.QUERY_BIZ_VIP_STATUS,endpoint:"/questions/".concat(e,"/answer-settings"),query:{token:t},method:"GET"}}}(n,a);u(t).then((function(e){var t,n=(null==e||null===(t=e.payload)||void 0===t?void 0:t.commercialPermissionInfo)||{};if(Ue===n.businessLine){var r;if(null===(r=n.cheeseTaskList)||void 0===r||!r.length)return;var a=k?Je:Xe,o=n.cheeseTaskList.map((function(e){return{bindStatus:Ve,bindTaskDTO:e}}));w([a,{taskList:o},Ue])}else if(Fe===n.businessLine){if(n.isShowTab)w([k?Ur:Fr,{initCommercialPermissionInfo:n},Fe])}}))})),Ue===j&&x&&s.isVideoAnswer?null:m?Object(d.b)(m,Object.assign(Object.assign({},Ue===j?s:c),g)):null},Gr=n(1896);function Hr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Wr=function(e){var t=e.question,n=e.isAnonymous,a=e.disabled,o=e.getAnswerFormRef,i=Object(ae.a)(!1),c=Hr(r.a,i,2),l=c[0],s=c[1],u=Object(C.useDispatch)(),f=Object(je.a)((function(){var e=o();if(null!=e&&e.current)if(e.current.hasVideo())u(Object(de.h)("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red"));else{if(!e.current.hasMCNLinkCard())return e.current.hasADLinkCard()?e.current.hasFeeConsultCard()?u(Object(de.h)("不能使用匿名身份插入付费咨询卡片","red")):void u(Object(de.h)("不能使用匿名身份插入推荐卡片","red")):void s.on();u(Object(de.h)("不能使用匿名身份推荐商品","red"))}}));return Object(d.c)(x.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(x.Flex,{height:"38px",children:[Object(d.b)(ze,{checked:!n,text:"不启用匿名",onChange:f,id:"PublishPanel-Anonymous-0",disabled:a,shouldTrackClick:!0,zaTextPrefix:"匿名设置"}),Object(d.b)(ze,{checked:n,text:"启用匿名",onChange:f,id:"PublishPanel-Anonymous-1",disabled:a,shouldTrackClick:!0,zaTextPrefix:"匿名设置"})]}),Object(d.b)(Gr.a,{question:t,shown:l,onClose:s.off})]})},Kr=function(e){var t=(0,Object(y.useContext)(se).getFormData)(),n=t.isReport,r=t.commercialZhitaskBindInfo;return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"匿名设置"}),Object(d.b)(Wr,Object.assign({disabled:Boolean(n)||Boolean(r)},e))]})};var Zr={type:"none",description:"无声明"},Qr=function(e){var t=e.reshipmentDisclaimers,n=e.setReshipmentDisclaimers,r=e.disclaimers,a=Object(T.l)().trackEvent;return t=t||Zr,(r=JSON.parse(JSON.stringify(r||[]))).push(Zr),Object(d.b)(Pe,{onChange:function(e){var t=r.find((function(t){return t.type===e}));a({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"创作声明-".concat(t.description)}}),t&&n(t)},value:t.type,children:r.map((function(e){return Object(d.b)(_e,{value:e.type,text:e.description},e.type)}))})},Yr=Object(y.forwardRef)((function(e,t){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"创作声明",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"「创作声明」是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。"}),Object(d.b)("p",{children:"创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"})]})}),Object(d.b)(x.Box,{flex:"1",children:Object(d.b)(Qr,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),Jr=function(e){var t=e.question,n=e.updateDraftSettings,r=Object(y.useContext)(se),a=r.getFormData,o=r.updateFormData,i=Object(C.useDispatch)(),c=Object(C.useSelector)((function(e){return e.question.disclaimers[t.id]})),l=a().disclaimerType,s=(null==c?void 0:c.find((function(e){return e.type===l})))||Zr,u=(null==c?void 0:c.length)>0;Object(Sr.a)((function(){c||i(Object(zt.O)(t.id))}));var f=Object(je.a)((function(e){o({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type}),requestAnimationFrame(n)}));return u?Object(d.b)(Yr,{reshipmentDisclaimers:s,setReshipmentDisclaimers:f,disclaimers:c}):null},Xr=n(424),$r=n(1289),ea=function(e){var t=e.scheduledPublishAt,n=e.initialScheduledPublishAt,r=e.setUseScheduledPublish,a=Boolean(t),o=function(e){r(e)};return Object(d.c)(x.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(x.Flex,{height:"38px",children:[Object(d.b)(ze,{checked:!a,text:"不使用定时发布",onChange:function(){return o(!1)},id:"PublishPanel-scheduleLabel-0",shouldTrackClick:!0,zaTextPrefix:"定时发布"}),Object(d.b)(ze,{checked:a,text:"使用定时发布",onChange:function(){o(!0),requestAnimationFrame((function(){Object(we.scrollBy)(window,{top:50,behavior:"smooth"})}))},id:"PublishPanel-scheduleLabel-1",shouldTrackClick:!0,zaTextPrefix:"定时发布"})]}),a&&n&&Object(d.b)($r.a,{value:t,min:n,max:Xr.a(n,7),onChange:function(e){r(!0,e)},css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",marginTop:"5px",".InputButton":{height:"38px"}}}})]})},ta=function(e){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"定时发布"}),Object(d.b)(ea,Object.assign({},e))]})},na=function(e){var t=e.disabled,n=e.updateDraftSettings,r=Object(y.useContext)(se),a=r.updateFormData,o=(0,r.getFormData)().pushActivity,i=function(e){a({pushActivity:e}),requestAnimationFrame(n)};return Object(d.b)(x.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:Object(d.c)(x.Flex,{height:"38px",children:[Object(d.b)(ze,{checked:o,text:"开启推送",onChange:function(){i(!0)},id:"PublishPanel-PushToFollowers-0",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"}),Object(d.b)(ze,{checked:!o,text:"关闭推送",onChange:function(){N.a.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",text:{ok:"关闭推送"}}).then((function(){i(!1)})).catch((function(){}))},id:"PublishPanel-PushToFollowers-1",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"})]})})},ra=function(e){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"推送给关注者"}),Object(d.b)(na,Object.assign({},e))]})},aa=n(1646),oa=n(455),ia=n(299);function ca(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var la=function(e){var t=e.question.id,n=e.isAnonymous,a=e.disabled,o=e.updateDraftSettings,i=Object(ae.a)(!1),c=ca(r.a,i,2),l=c[0],s=c[1],u=Object(y.useContext)(se),f=u.getFormData,b=u.updateFormData,p=Object(C.useDispatch)(),h=f().rewardTagline,m=Boolean(h),v=Object(je.a)((function(e){b({rewardTagline:e}),requestAnimationFrame(o),p(Object(oa.n)(t,!0)),s.off()}));return Object(d.c)(x.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(x.Flex,{height:"38px",children:[Object(d.b)(ze,{checked:m,text:"开启赞赏",onChange:function(){n?p(Object(de.h)("匿名回答无法开启赞赏，请先取消匿名","red")):s.on()},id:"PublishPanel-RewardSetting-0",disabled:a,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"}),Object(d.b)(ze,{checked:!m,text:"关闭赞赏",onChange:function(){b({rewardTagline:""}),requestAnimationFrame(o),p(Object(oa.n)(t,!1))},id:"PublishPanel-RewardSetting-1",disabled:a,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"})]}),l&&Object(d.b)(aa.a,{submitRewardText:v,onClose:s.off,tagline:h,edit:!1})]})},sa=function(e){var t=Object(C.useDispatch)(),n=Object(C.useSelector)((function(e){return e.switches})).isAnswerRewardable;return Object(y.useEffect)((function(){void 0===n&&t(Object(ia.b)(["isAnswerRewardable"]))}),[t,n]),n?Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"赞赏设置"}),Object(d.b)(la,Object.assign({},e))]}):null},ua={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},da=function(e){var t=e.currentUser,n=e.updateDraftSettings,r=Object(T.l)().trackEvent,a=Object(y.useContext)(se),o=a.updateFormData,i=(0,a.getFormData)().reshipmentSettings;return Object(d.b)(Pe,{onChange:function(e){r({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"转载设置-".concat(ua[e])}}),"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),o({reshipmentSettings:e}),requestAnimationFrame(n)},value:i,children:Object.keys(ua).map((function(e){return"need_payment"===e&&t.isOrg?null:Object(d.b)(_e,{value:e,text:ua[e]},e)}))})},fa=Object(y.forwardRef)((function(e,t){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"转载设置"}),Object(d.b)(x.Box,{flex:"1",children:Object(d.b)(da,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),ba=n(502),pa=n(511),ha=function(e){var t=e.updateDraftSettings,n=Object(C.useDispatch)(),r=Object(T.l)().trackEvent,a=Object(y.useContext)(se),o=a.updateFormData,i=(0,a.getFormData)().commentPermission,c=Object(C.useSelector)((function(e){var t;return null===(t=e.commentPermission.answer)||void 0===t?void 0:t.default}))||[];Object(y.useEffect)((function(){n(Object(pa.c)("answer"))}),[n]),Object(y.useEffect)((function(){i!==ba.b||Object(ba.c)()||Object(ba.e)()}),[i]);return Object(d.b)(Pe,{onChange:function(e){var n=c.find((function(t){return t.permission===e})).text;r({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"评论权限-".concat(n)}}),e!==i&&(o({commentPermission:e}),requestAnimationFrame(t))},value:i,children:c.map((function(e){var t=e.permission,n=e.text,r=e.disable;return t!==ba.b||i===t||Object(ba.c)()?Object(d.b)(_e,{value:t,text:n,disabled:r},t):null}))})},ma=Object(y.forwardRef)((function(e,t){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"评论权限"}),Object(d.b)(x.Box,{flex:"1",children:Object(d.b)(ha,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),va=n(1177),ga=n(442),Oa=n(158),ja=n(188),ya=n(923),wa=function(e){var t=e.name,n=void 0===t?"checkitems":t,r=e.type,a=void 0===r?"checkbox":r,o=e.children,i=e.className,c=e.value,l=e.checked,s=e.onChange,u=JSON.stringify(c);return Object(d.c)("label",{className:m()("CheckItem",i),css:function(e){return{position:"relative",display:"block","&:hover":{".CheckItem-box":{borderColor:e.colors.GBL07A}}}},children:[Object(d.b)("input",{className:"CheckItem-input",type:a,name:n,value:u,onChange:s,checked:l,css:function(e){return{position:"absolute",zIndex:-1,opacity:0,"&:checked":{"+ .CheckItem-box":{borderColor:e.colors.GBL07A,".CheckItem-inner":{maxWidth:"calc(100% - 28px)"}}},"&:not(:checked)":{"+ .CheckItem-box":{".CheckItem-icon":{opacity:0,transition:"opacity 200ms"}}}}}}),Object(d.c)("div",{className:"CheckItem-box",css:function(e){return{position:"relative",padding:"12px",border:"1px solid ".concat(e.colors.GBK10A),borderRadius:"3px",transition:"border-color 200ms ease-out"}},children:[Object(d.b)("div",{className:"CheckItem-inner",children:o}),Object(d.b)(ya.a,{className:"CheckItem-icon",size:20,css:function(e){return{position:"absolute",top:"50%",right:"12px",fill:e.colors.GBL01A,transform:"translateY(-50%)"}}})]})]})},Ca=n(932),ka=n(144),xa=n(463),Sa=n(1203);function Aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ta=function(e){Object(l.a)(n,e);var t=Aa(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={value:null},e.handleModify=function(){e.setState({modifying:!0})},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleCancel=function(){e.setState({value:null,modifying:!1})},e.handleSubmit=function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()},e.handleSelect=function(){e.props.onSelect(e.props.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,r=e.title,a=e.checked,o=e.rich,i=this.state,c=i.modifying,l=i.value;return c?Object(d.c)("div",{className:"TopicBioItem",children:[Object(d.b)("div",{className:"TopicBioItem-title",children:r}),Object(d.c)("form",{onSubmit:this.handleSubmit,children:[Object(d.b)("div",{className:"TopicBioItem-inner",children:Object(d.b)(cr.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:Object(d.b)(ka.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:r,autoFocus:!0})})}),Object(d.c)("div",{className:"TopicBioItem-inputFooter",children:[Object(d.b)(xa.a,{current:l?l.length:0,max:40}),Object(d.c)("div",{className:"TopicBioItem-actions",children:[Object(d.b)(B.c,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),Object(d.b)(B.c,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?Object(d.c)("div",{className:"TopicBioItem",children:[Object(d.b)("div",{className:"TopicBioItem-title",children:r}),Object(d.b)(wa,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:a,children:Object(d.b)(cr.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:Object(d.c)("div",{children:[o?Object(d.b)(ga.a,{inline:!0,className:"TopicBioItem-bio",html:n}):Object(d.b)("span",{className:"TopicBioItem-bio",children:n}),Object(d.b)(Sa.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):Object(d.b)("div",{className:"TopicBioItem",children:Object(d.c)(B.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[Object(d.b)(Ca.a,{text:!0,center:!0})," 添加",r]})})}}]),n}(y.Component);Ta.propTypes={user:j.a.object.isRequired,title:j.a.node.isRequired,value:j.a.object.isRequired,onBioChange:j.a.func.isRequired,onSelect:j.a.func.isRequired,checked:j.a.bool.isRequired};var Ra=Ta;function Ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ia=function(e,t){var n=e.type,r=e.topic,a=(r=void 0===r?{}:r).id,o=t.type,i=t.topic,c=(i=void 0===i?{}:i).id;return n===o&&a===c},Na=function(e){Object(l.a)(n,e);var t=Ea(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={value:null},e.handleSelect=function(t){return e.setState({value:t})},e.handleChoose=function(){return e.props.onBioChoose(e.state.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return Object(d.b)("div",{className:"TopicBios-loading",children:Object(d.b)(Yt.a,{})});var t=this.props,n=t.user,r=t.question.topics,a=t.bios,o=t.currentBio,i=t.onHeadlineUpdate,c=t.onBioUpdate,l=this.state.value||o,s={type:"headline"};return Object(d.c)("div",{children:[Object(d.c)("div",{className:"TopicBioItems",children:[Object(d.b)(Ra,{title:"一句话介绍",user:n,bio:n.headline,value:s,onBioChange:i,onSelect:this.handleSelect,checked:Ia(l,s),rich:!0}),r.map((function(t){var r={type:"topic",topic:{id:t.id}};return Object(d.b)(Ra,Object.assign(Object.assign({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find((function(e){return e.topic.id===t}))}(a,t.id)),{},{value:r,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:Ia(l,r)}),t.id)}))]}),Object(d.b)(Me.a,{children:Object(d.b)(B.c,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})}}]),n}(y.Component);Na.propTypes={onHeadlineUpdate:j.a.func.isRequired,onBioUpdate:j.a.func.isRequired,onBioChoose:j.a.func.isRequired,question:j.a.object.isRequired,user:j.a.object.isRequired};var Ba=Na;function za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Pa=function(e){Object(l.a)(n,e);var t=za(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleUpdateHeadline=function(t){e.props.updateProfile(null,{headline:t})},e.handleUpdateBio=function(t,n){e.props.updateBio(t,n)},e.handleBioChoose=function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return Object(d.b)(Ba,Object.assign({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),n}(y.Component);Pa.propTypes={question:j.a.object.isRequired};var _a=Object(C.connect)((function(e,t){var n=e.currentUser,r=e.question.bio,a=e.entities,o=a.questions,i=a.users,c=e.topic.bios,l=t.question.id,s=o[l],u=(r[l]||{result:{type:"headline"}}).result;return{isFetching:c.isFetching,currentBio:{type:u.type,topic:u.topic},bios:s.topics.map((function(e){return{topic:e,bio:c[e.id]}})),question:s,user:i[n]}}),{updateProfile:Oa.o,updateBio:ja.jb,chooseBio:zt.e,loadBios:zt.G})(Pa),La=["shown","onClose"];function Ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Da=function(e){Object(l.a)(n,e);var t=Ma(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=Object(he.default)(e,La);return Object(d.b)(Me.b,{title:"编辑话题经验",subtitle:Object(d.c)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",Object(d.b)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&Object(d.b)(_a,Object.assign(Object.assign({},r),{},{onClose:n}))})}}]),n}(y.Component);Da.propTypes=Object.assign({shown:j.a.bool.isRequired,onClose:j.a.func.isRequired},_a.propTypes);var Ua=Da;function Fa(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Va=function(e){var t=e.children;return"string"!=typeof t||t.trim().length?Object(d.b)(x.Text,{maxWidth:"292px",mr:"20px",css:[Object(lt.a)(1)],children:t}):null},qa=function(e){var t=e.questionId,n=e.currentUser,r=Object(C.useSelector)((function(e){return e.question.bio})),a=Object(C.useSelector)((function(e){return e.topic.bios})),o=(r[t]||{result:{type:"headline"}}).result;return"topic"===o.type&&(o.bio=a[o.topic.id]||o.bio),o.bio&&"headline"!==o.type?Object(d.b)(Va,{children:o.bio}):n.headline?Object(d.b)(Va,{children:Object(d.b)(ga.a,{inline:!0,html:(o||{}).bio||n.headline})}):null},Ga=function(e){var t=e.question,n=e.currentUser,a=Object(ae.a)(!1),o=Fa(r.a,a,2),i=o[0],c=o[1];return Object(d.c)(x.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(x.Flex,{alignItems:"center",height:"100%",css:{cursor:"pointer"},onClick:c.on,children:[Object(d.b)(qa,{questionId:t.id,currentUser:n}),Object(d.c)(T.a,{as:x.Flex,zaType:"Button",zaText:"一句话介绍-修改",color:"GBL01A",alignItems:"center",children:["修改",Object(d.b)(va.a,{css:{marginLeft:"2px"},size:16})]})]}),Object(d.b)(Ua,{shown:i,question:t,onClose:c.off})]})},Ha=function(e){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"一句话介绍"}),Object(d.b)(Ga,Object.assign({},e))]})},Wa=n(2983),Ka=n(1907);function Za(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Qa=function(e){var t,n,a=e.answer,o=Object(C.useDispatch)(),i=Object(_t.q)(),c=null==a||null===(t=a.attachment)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.campaign,l=Boolean(!(null!=c&&c.title)),s=Object(ae.a)(!1),u=Za(r.a,s,2),f=u[0],b=u[1],p=Object(y.useState)([]),h=Za(r.a,p,2),m=h[0],v=h[1];Object(Sr.a)((function(){o(Object(tt.l)()).then((function(e){var t=e.payload;v((null==t?void 0:t.data)||[])}))}));var g=Object(je.a)((function(e){b.off(),o(Object(_t.m)(e))})),O=Object(je.a)((function(){o(Object(_t.m)(null))})),j=l?"GBL01A":"GBL05A";return Object(d.c)(x.Flex,{color:"GBL05A",flex:"1",alignItems:"center",css:{fontSize:"14px"},children:[null!=i&&i.title?Object(d.c)(x.Flex,{alignItems:"center",px:"14px",height:"30px",color:j,css:function(e){return{borderRadius:"20px",background:e.colorMod(e.colors[j]).alpha(.1),cursor:"pointer"}},onClick:function(){l&&b.on()},children:[Object(d.b)(Wa.a,{mr:4,size:20}),i.title,l&&Object(d.b)(ce.a,{text:!0,center:!0,size:6,css:{marginLeft:4},onClick:function(e){O(),e.stopPropagation()}})]}):Object(d.c)(T.a,{as:x.Flex,zaType:"Button",zaText:"绑定活动-选择活动",height:"100%",alignItems:"center",color:"GBL01A",css:{cursor:l?"pointer":"not-allowed"},onClick:function(){l&&b.on()},children:[Object(d.b)(Wa.a,{mr:4,size:20}),"选择活动"]}),Boolean(null==m?void 0:m.length)&&Object(d.b)(Ka.a,{shown:f,onClose:b.off,defaultCampaignId:null==i?void 0:i.id,campaignList:m,onSubmit:g})]})},Ya=function(e){return Object(d.c)(x.Flex,{py:"11px",children:[Object(d.b)(Re,{name:"绑定活动"}),Object(d.b)(Qa,Object.assign({},e))]})};function Ja(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Xa=Object(k.withRouter)((function(e){var t,n=e.question,a=e.answer,o=e.isVideoAnswer,i=e.isReediting,c=e.location,l=e.scheduledPublishAt,s=e.initialScheduledPublishAt,u=e.canScheduledPublish,f=e.setUseScheduledPublish,b=e.className,p=e.updateDraftSettings,h=e.getAnswerFormRef,m=e.getInitialEnableMarkdown,v=Object(C.useDispatch)(),g=Object(y.useContext)(se).updateFormData,O=((null==c?void 0:c.query)||{}).push_activity,j=Object(C.useSelector)(Tt.b),w=Object(y.useState)(!1),k=Ja(r.a,w,2),S=k[0],A=k[1];Object(Sr.a)((function(){Promise.all([v(Object(Ar.V)()),v(Object(Ar.W)(n.id)),a&&v(Object(St.w)(a.id))].filter(Boolean)).then((function(e){var t,n,o,i,c,l,s,u,d,f,b,p=Ja(r.a,e,3),h=p[0],v=p[1],j=p[2];g(Object.assign(Object.assign(Object.assign(Object.assign({},Object(Tr.e)(null===(t=h.payload)||void 0===t?void 0:t.settings)),a&&j&&Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Object(Tr.f)(j.payload)),function(e){var t;return{rewardTagline:(null==e||null===(t=e.rewardInfo)||void 0===t?void 0:t.tagline)||""}}(a)),(l=j.payload,{isDisclaimerChecked:b="open"===(null==l||null===(s=l.disclaimerInfo)||void 0===s||null===(u=s[0])||void 0===u?void 0:u.status),disclaimerType:b?null==l||null===(d=l.disclaimerInfo)||void 0===d||null===(f=d[0])||void 0===f?void 0:f.type:"none"})),function(e){var t;return null!=e&&null!==(t=e.thankInviterInfo)&&void 0!==t&&t.member?{thankInviterInfo:e.thankInviterInfo.member}:null}(j.payload)),function(e){var t;return e?{tableOfContentsEnabled:null==e||null===(t=e.tableOfContents)||void 0===t?void 0:t.enabled}:null}(null==a?void 0:a.settings)),Object(Tr.a)(a))),Object(Tr.g)(null===(n=v.payload)||void 0===n?void 0:n.settings)),O&&{pushActivity:Boolean(Number(O))})),m(null===(o=null===(i=h.payload)||void 0===i||null===(c=i.commonSettings)||void 0===c?void 0:c.markdownEnabled)||void 0===o||o)})).finally((function(){A(!0)}))}));var T=null==n||null===(t=n.relationship)||void 0===t?void 0:t.isAnonymous,R=(n||{}).questionType,E=j&&!j.isOrg,I=E&&("normal"===R||T)&&!o;return o&&i?null:S?Object(d.c)(x.Box,{pl:"10px",pr:"20px",width:"100%",bg:"GBK99A",css:{position:"relative"},className:b,children:[Object(d.b)(x.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A"},ml:"10px"}),Object(d.b)(x.Text,{color:"GBK03A",ml:"10px",pt:"24px",pb:"12px",css:{lineHeight:"24px",fontSize:"17px",fontWeight:"500"},children:"发布设置"}),I&&!i&&Object(d.b)(Kr,{question:n,isAnonymous:T,getAnswerFormRef:h}),!o&&Object(d.b)(Jr,{question:n,updateDraftSettings:p}),Object(d.b)(qr,{type:"answer",questionId:null==n?void 0:n.id,answerId:null==a?void 0:a.id,taskBindProps:{isAnonymous:T,isVideoAnswer:o},reportProps:{isAnonymous:T,updateDraftSettings:p}}),u&&Object(d.b)(ta,{scheduledPublishAt:l,initialScheduledPublishAt:s,setUseScheduledPublish:f}),o&&Object(d.b)(Ya,{answer:a}),!i&&E&&Object(d.b)(Ha,{question:n,currentUser:j}),!i&&Object(d.b)(fa,{currentUser:j,updateDraftSettings:p}),!i&&Object(d.b)(ma,{updateDraftSettings:p}),!i&&!o&&Object(d.b)(ra,{updateDraftSettings:p}),Object(d.b)(sa,{question:n,isAnonymous:T,updateDraftSettings:p})]}):null})),$a=n(32),eo=n(1805),to=n.n(eo),no=n(490),ro={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer"},ao=function(e,t){var n=e.isToolbarSticky,r=e.isFullscreen,a=e.toolbarMenuAttention,o=e.scheduledPublishAt,i=e.initialScheduledPublishAt,c=e.placeholder,l=e.draft,s=e.defaultValue,u=e.isLegacyVideoAnswer,f=e.defaultVideo,b=e.question,p=e.videoAnswerEditable,h=e.videoAnswerPublished,v=e.editableReady,g=e.handleChangeContent,O=e.handleAfterChangeContent,j=e.handleFocusWithAuth,w=e.handleSelectText,C=e.handleSubmit,k=e.handleError,x=e.handleLoadStart,S=e.handleLoadEnd,R=e.handleUploadStart,E=e.handleUploadEnd,I=e.handleUploadError,N=e.handleBeforeVideoUpload,B=e.handleMCNLinkCardEdit,P=e.isVideoAnswer,_=e.handleInsertZVideo,L=e.getToolbarSidePlugins,M=e.getToolbarMenuPlugins,D=e.createEditorPlugins,U=e.getEditorBeforePlugins,F=e.setUseScheduledPublish,V=e.allowToolbar,q=void 0===V||V,G=e.onAnyChange,H=e.docPluginProps,W=e.tableOfContentsEnabled,K=e.getMarkdownEnabled,Z=e.videoSource,Q=Object(y.useRef)(null);return Object(d.b)(kr.a,{name:ro.editableEdit,children:Object(d.b)(T.b,{block:r?"FullScreen":"",children:Object(d.b)(no.a,{className:m()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:n}),ref:t,hideImageToolbar:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:q,allowUploadDocument:!0,allowVideoTitleChange:!P,allowReference:!0,allowImageEditor:!0,allowZVideo:!P,allowTable:!P,allowCatalog:!P,catalogEnabled:W,useCatalogV2:!0,autoCalcCatalogShouldShow:!1,allowHeaderThree:!1,allowToolbarSticky:!r,toolbarStickyOffset:$a.i,onInsertZVideo:_,getToolbarSidePlugins:L,getToolbarMenuPlugins:M,getEditorBeforePlugins:U,toolbarMenuAttention:a,createEditorPlugins:D,toolbarProps:{menuCallout:o&&i&&Object(d.c)(z.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){F(!1),A.a.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",Object(d.b)($r.a,{onRef:Q,value:i,min:i,max:Xr.a(i,7),onChange:function(e,t){F(!0,e),A.a.setModule(Q.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),A.a.trackEvent(Q.current,{action:"Click",id:5731,name:"回答"})}}),Object(d.c)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[Object(d.b)(va.a,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:6,placeholder:c,defaultValue:l?l.editableContent:s,videoAnswerEditable:p,videoAnswerPublished:h,isLegacyVideoAnswer:u,defaultVideo:f,onReady:v,onChange:g,onAfterChange:O,onFocus:j,onSelectText:w,onSubmit:C,onError:k,onLoadStart:x,onLoadEnd:S,onUploadStart:R,onUploadEnd:E,onUploadError:I,onBeforeVideoUpload:N,logo:to.a,location:b.title,editingContentType:"answer",onMCNLinkCardEdit:B,useV2Feature:!0,useEditableV2:!0,useImageOperationV2:!0,onAnyChange:G,docPluginProps:H,getMarkdownEnabled:K,videoSource:Z})})})};ao.propTypes={isToolbarSticky:j.a.bool.isRequired,answer:j.a.object.isRequired,isFullscreen:j.a.bool.isRequired,toolbarMenuAttention:j.a.string,scheduledPublishAt:j.a.number,initialScheduledPublishAt:j.a.number,placeholder:j.a.string.isRequired,draft:j.a.object,defaultValue:j.a.string,isLegacyVideoAnswer:j.a.bool,defaultVideo:j.a.object,question:j.a.object,videoAnswerEditable:j.a.bool,videoAnswerPublished:j.a.bool,editableReady:j.a.func.isRequired,handleChangeContent:j.a.func.isRequired,handleAfterChangeContent:j.a.func.isRequired,handleFocusWithAuth:j.a.func.isRequired,handleSelectText:j.a.func.isRequired,handleSubmit:j.a.func.isRequired,handleError:j.a.func.isRequired,handleLoadStart:j.a.func.isRequired,handleLoadEnd:j.a.func.isRequired,handleUploadStart:j.a.func.isRequired,handleUploadEnd:j.a.func.isRequired,handleUploadError:j.a.func.isRequired,handleBeforeVideoUpload:j.a.func.isRequired,handleMCNLinkCardEdit:j.a.func.isRequired,isVideoAnswer:j.a.bool.isRequired,handleInsertZVideo:j.a.func.isRequired,getToolbarSidePlugins:j.a.func.isRequired,createEditorPlugins:j.a.func.isRequired,getToolbarMenuPlugins:j.a.func.isRequired,getEditorBeforePlugins:j.a.func.isRequired,setUseScheduledPublish:j.a.func.isRequired,getMarkdownEnabled:j.a.func};var oo=Object(y.forwardRef)(ao),io=Object(y.forwardRef)((function(e,t){var n=e.children,r=e.className;return Object(d.b)(T.b,{block:"EditorToolbar",children:Object(d.b)("div",{ref:t,css:{width:"100%",display:"flex",justifyContent:"center"},children:Object(d.b)("div",{className:m()("toolbarV3",r),css:{display:"flex",overflowX:"auto",padding:"10px 0 10px 20px",boxShadow:"0px -0.5px 0px 0px rgba(235, 235, 235, 1) inset"},onMouseDown:function(e){return e.preventDefault()},children:n})})})})),co=n(2415),lo=n(905),so=function(e){return{background:e.colors.GBK10A,borderRadius:"4px"}},uo=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},fo=Object(y.forwardRef)((function(e,t){var n=e.showTogglerIcon,r=e.isMenuOpen,a=e.icon,o=e.isActive,i=e.disabled,c=e.onClick,l=e.className,s=e.text,u=e.label,f=e.sectionIndex,b=e.buttonIndex,p=e.onButtonRectInfoGet,h=Object(y.useRef)(null);Object(y.useEffect)((function(){var e,t=(null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect()).right;t&&(null==p||p({label:u,sectionIndex:f,buttonIndex:b,right:t}))}),[f,b]);var v=n&&Object(d.b)("div",{className:"togglerIcon",css:{transform:"".concat(r?"rotate(180deg)":"rotate(0deg)"),fontSize:0,marginBottom:"2px"},children:Object(d.b)(co.a,{})});return Object(d.c)(T.a,{as:B.c,zaType:"Button",zaText:u,ref:Object(lo.a)(t,h),preset:B.b.Plain,className:m()("ToolbarButton",l),disabled:i,css:function(e){return{"&.Button.Button--plain":Object.assign(Object.assign({marginRight:"20px",padding:"2px 4px",paddingRight:n?"1px":"4px",fontSize:"11px",color:e.colors.GBK03A,textAlign:"center",alignItems:"flex-end",display:"flex",whiteSpace:"nowrap"},o&&uo(e)),{},{"&:hover":so(e)})}},"aria-label":u,onClick:c,children:[Object(d.c)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(d.b)(a,{center:!0}),Object(d.b)("span",{css:{width:"100%"},children:null!=s?s:u})]}),v]})}));fo.propTypes={icon:j.a.elementType.isRequired,label:j.a.string.isRequired,isActive:j.a.bool,disabled:j.a.bool,showTogglerIcon:j.a.bool,isMenuOpen:j.a.bool,className:j.a.string,text:j.a.string,shortcut:j.a.string,onClick:j.a.func,sectionIndex:j.a.number,buttonIndex:j.a.number,onButtonRectInfoGet:j.a.func},fo.defaultProps={isActive:!1,disabled:!1,isMenuOpen:!1,showTogglerIcon:!1,onClick:function(){}};var bo=fo,po=n(136),ho=n(66),mo=function(e){return{background:e.colors.GBK10A,".togglerIcon":{borderLeftColor:e.colors.GBL01A}}},vo=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},go=Object(y.forwardRef)((function(e,t){var n=e.isActive,r=e.disabled,a=e.onClick,o=e.icon,i=e.text,c=e.label,l=e.onMouseEnter,s=e.onMouseLeave,u=e.component;return u?Object(d.b)(u,Object.assign({},e)):Object(d.c)(T.a,{as:B.c,zaType:"Button",zaText:c,preset:B.b.Plain,"aria-label":c,disabled:r,css:function(e){return{"&.Button.Button--plain":Object.assign({padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px","&:hover":mo(e),"&:active":vo(e)},n&&vo(e))}},onClick:a,onMouseEnter:l,onMouseLeave:s,ref:t,children:[Object(d.b)(o,{center:!0,css:{marginRight:"4px"}}),null!=i?i:c]})}));go.propTypes={icon:j.a.elementType.isRequired,label:j.a.string.isRequired,isActive:j.a.bool,disabled:j.a.bool,className:j.a.string,text:j.a.string,shortcut:j.a.string,onClick:j.a.func,onMouseEnter:j.a.func,onMouseLeave:j.a.func},go.defaultTypes={isActive:!1,disabled:!1,onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}};var Oo=go;function jo(e,t,n){return!!n&&(null!=e&&e.children?e.children.find((function(e){return jo(e,t,n)})):e.commandName?t(e.commandName,n)&&e:void 0)}function yo(e,t,n){return!!n&&(null!=e&&e.children?e.children.some((function(e){return yo(e,t,n)})):t(e.commandName,n))}function wo(e){var t=e.items,n=e.onCommand,r=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState;return t.map((function(e){var t;if(!0===e.hide)return null;var i,c,l=jo(e,r,o),s=!yo(e,a,o);return null!=e&&null!==(t=e.children)&&void 0!==t&&t.length?Object(d.b)(po.c,{toggleEvent:"hover",placement:ho.RIGHT,enterDelay:300,leaveDelay:300,toggler:Object(d.b)(Oo,{icon:null!==(i=null==l?void 0:l.icon)&&void 0!==i?i:e.icon,onClick:function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!l,disabled:s}),className:"ToolbarV3SubmenuButton",children:Object(d.b)(wo,{items:e.children,onCommand:n,queryCommandState:r,queryCommandEnable:a,editorState:o})},e.label):Object(d.b)(Oo,{icon:null!==(c=null==l?void 0:l.icon)&&void 0!==c?c:e.icon,onClick:function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.commandName&&n(e.commandName),e.hideMenuOnClick&&document.body.click()},label:e.label,isActive:!!l,disabled:s,component:e.Component},e.label)}))}function Co(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ko(e){var t=e.subMenu,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,i=e.editorState,c=e.isActive,l=e.label,s=e.shortcut,u=e.disabled,f=e.onClick,b=e.icon,p=e.sectionIndex,h=e.buttonIndex,m=e.onButtonRectInfoGet,v=Object(y.useState)(!1),g=Co(r.a,v,2),O=g[0],j=g[1],w=Object(d.b)(bo,{isMenuToggler:!0,isMenuOpen:O,showTogglerIcon:!0,icon:b,isActive:c,disabled:u,shortcut:s,onClick:f,label:l,sectionIndex:p,buttonIndex:h,onButtonRectInfoGet:m});return Object(d.b)(po.c,{toggler:w,onOpen:function(){return j(!0)},onClose:function(){return j(!1)},arrowed:!1,menuContainerClassName:"ToolbarV3Menu-container",preventCloseOnTarget:!0,children:Object(d.b)(wo,{items:t,onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:i})})}function xo(){return Object(d.b)("span",{className:"ToolbarDivider",css:function(e){return{height:"20px",borderRight:"1px solid",borderColor:e.colors.GBK09A,marginLeft:"-4px"}}})}function So(e){var t=e.items,n=e.onCommand,r=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState,i=e.showDivider,c=e.showRightSpace,l=e.replaceIconByOnlyChild,s=void 0===l||l,u=e.shouldHide,f=e.sectionIndex,b=e.onButtonRectInfoGet;return null!=u&&u(t)?null:Object(d.c)("div",{className:"toolbar-section",css:Object.assign({display:"flex",alignItems:"center"},c&&{marginRight:"16px"}),children:[t.filter((function(e){return!!e})).map((function(e,t){var i=e.Component,c=e.label,l=e.text,u=e.children,p=e.shortcut,h=e.commandName,m=e.onClick;if(!0===e.hide)return null;var v,g=jo(e,r,o),O=!yo(e,a,o),j=e.icon,y={label:c,icon:j,disabled:O,shortcut:p,isActive:!!g,text:l,sectionIndex:f,buttonIndex:t,onButtonRectInfoGet:b,onClick:function(e){null==m||m(e),h&&n(h)}};if((null==u?void 0:u.length)>1||!s&&(null==u?void 0:u.length)>0)j=(null==g?void 0:g.icon)||j,v=ko,y=Object.assign(Object.assign({},y),{},{icon:j,onCommand:n,queryCommandState:r,queryCommandEnable:a,editorState:o,subMenu:u});else if(1===(null==u?void 0:u.length)&&s){v=bo;var w=u[0],C=w.icon,k=w.label,x=w.text,S=w.shortcut,A=w.commandName;y=Object.assign(Object.assign({},y),{},{icon:C,label:k,text:x,shortcut:S,onClick:function(e){null==m||m(e),A&&n(A)}})}else v=bo;return i?Object(d.b)(i,Object.assign({toolbarButton:v},y),e.label):Object(d.b)(v,Object.assign({},y),e.label)})),i&&Object(d.b)(xo,{})]})}wo.propTypes={items:j.a.arrayOf(j.a.oneOfType([j.a.object,j.a.bool])).isRequired,onCommand:j.a.func.isRequired,queryCommandState:j.a.func.isRequired,queryCommandEnable:j.a.func.isRequired,editorState:j.a.object.isRequired},ko.propTypes={icon:j.a.elementType.isRequired,subMenu:j.a.arrayOf(j.a.oneOfType([j.a.object,j.a.bool])).isRequired,label:j.a.string.isRequired,onCommand:j.a.func.isRequired,queryCommandEnable:j.a.func.isRequired,queryCommandState:j.a.func.isRequired,editorState:j.a.object.isRequired,shortcut:j.a.string,disabled:j.a.bool,isActive:j.a.bool,onClick:j.a.func,sectionIndex:j.a.number,buttonIndex:j.a.number,onButtonRectInfoGet:j.a.func},ko.defaultTypes={disabled:!1,isActive:!1,onClick:function(){}},So.propTypes={items:j.a.arrayOf(j.a.oneOfType([j.a.object,j.a.bool])).isRequired,onCommand:j.a.func.isRequired,queryCommandState:j.a.func.isRequired,queryCommandEnable:j.a.func.isRequired,shouldHide:j.a.func,editorState:j.a.object.isRequired,showDivider:j.a.bool.isRequired,showRightSpace:j.a.bool.isRequired,isMoreSection:j.a.bool,sectionIndex:j.a.number,replaceIconByOnlyChild:j.a.bool,onButtonRectInfoGet:j.a.func};var Ao=Object(y.forwardRef)((function(e,t){var n=e.mainSections,r=e.setButtonRectInfo,a=e.onCommand,o=e.queryCommandState,i=e.queryCommandEnable,c=e.editorState;return Object(d.b)("div",{className:"mainArea",ref:t,css:{display:"flex",flexShrink:1},children:n.map((function(e,t,n){return e&&n?e.items.length>0&&Object(d.b)(So,{sectionIndex:t,onButtonRectInfoGet:r,items:e.items,onCommand:a,queryCommandState:o,queryCommandEnable:i,editorState:c,showDivider:!0,showRightSpace:!0},e.sectionName):null}))})})),To=Object(y.forwardRef)((function(e,t){var n=e.moreSections,r=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"moreArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e?e.items.length>0&&Object(d.b)(So,{items:e.items,onCommand:r,queryCommandState:a,queryCommandEnable:o,editorState:i,showDivider:!1,showRightSpace:!1,replaceIconByOnlyChild:!1,shouldHide:function(e){return e.every((function(e){var t;return 0===(null==e||null===(t=e.children)||void 0===t?void 0:t.length)}))}},e.sectionName):null}))})})),Ro=Object(y.forwardRef)((function(e,t){var n=e.fixSections,r=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"fixArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e.items.length>0&&Object(d.b)(So,{items:e.items,onCommand:r,queryCommandState:a,queryCommandEnable:o,editorState:i,showDivider:!1,showRightSpace:!1},e.sectionName)}))})})),Eo=n(1483),Io=n(944);function No(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Bo(e){var t=e.onCommand,n=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState,i=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,l=e.toolbarFixtureAreaData,s=e.className,u=function(e){var t=e.toolbarMainAreaData,n=e.toolbarMoreAreaData,a=Object(y.useState)((function(){return[Object(Io.fromJS)(t),Object(Io.fromJS)(n)]})),o=No(r.a,a,2),i=o[0],c=o[1],l=Object(y.useState)(!1),s=No(r.a,l,2),u=s[0],d=s[1],f=Object(Eo.a)(),b=No(r.a,f,2),p=b[0],h=b[1],m=Object(y.useRef)(null),v=Object(y.useRef)(null),g=Object(y.useRef)(null),O=Object(y.useRef)(0),j=Object(je.a)((function(e){e&&(m.current=e,O.current=e.offsetLeft)})),w=Object(y.useRef)([]),C=Object(je.a)((function(e){var t=e.label,n=e.sectionIndex,r=e.buttonIndex,a=e.right;w.current.push({label:t,right:a,sectionIndex:n,buttonIndex:r}),w.current=w.current.sort((function(e,t){var n=e.sectionIndex,r=e.buttonIndex,a=t.sectionIndex,o=t.buttonIndex;return n>a?-1:n<a?1:r>o?-1:r<o?1:0}))})),k=Object(je.a)((function(){var e,t,n,a=null==h?void 0:h.width,o=null==m||null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().width,l=(null==v||null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0,s=null==g||null===(n=g.current)||void 0===n?void 0:n.getBoundingClientRect().width;if(a&&o&&void 0!==l&&s){var u,f=a-l-s,b=null===(u=w.current)||void 0===u?void 0:u.find((function(e){var t=e.right;return f>t-O.current}));if(b){var p=b.sectionIndex,j=b.buttonIndex,y=p,C=j;p<3&&(y=3),(p<3||j<1)&&(C=1);var k=No(r.a,i,2),x=k[0],S=k[1],A=x.getIn([y,"items"]),T=S.getIn([0,"items",0,"children"]),R=A.concat(T),E=R.slice(0,C+1),I=R.slice(C+1),N=x.setIn([y,"items"],E),B=S.setIn([0,"items",0,"children"],I);c([N,B])}}d(!1)}));return Object(y.useEffect)((function(){c([Object(Io.fromJS)(t),Object(Io.fromJS)(n)]),d(!0)}),[t]),Object(y.useEffect)((function(){u&&k()}),[u]),Object(y.useEffect)((function(){d(!0)}),[h]),Object(Sr.a)((function(){d(!0)})),{mainSections:i[0].toJS(),moreSections:i[1].toJS(),setToolbarRef:p,setMainAreaRef:j,moreAreaRef:v,fixAreaRef:g,setButtonRectInfo:C}}({toolbarMainAreaData:i,toolbarMoreAreaData:c}),f=u.mainSections,b=u.moreSections,p=u.setToolbarRef,h=u.setMainAreaRef,m=u.moreAreaRef,v=u.fixAreaRef,g=u.setButtonRectInfo;return Object(d.c)(io,{ref:p,className:s,children:[Object(d.b)(Ao,{ref:h,mainSections:f,setButtonRectInfo:g,onCommand:t,queryCommandState:n,queryCommandEnable:a,editorState:o}),Object(d.b)(Ro,{ref:v,fixSections:l,queryCommandEnable:a,queryCommandState:n,onCommand:t,editorState:o}),Object(d.b)(To,{ref:m,queryCommandState:n,queryCommandEnable:a,editorState:o,onCommand:t,moreSections:b})]})}var zo=n(2938),Po=Object.assign;function _o(e){return w.a.createElement(G.a,Po(Po({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--List24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M3.25 9.027a.75.75 0 01.75-.75h11.5a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75zm0 10a.75.75 0 01.75-.75h11.5a.75.75 0 110 1.5H4a.75.75 0 01-.75-.75zM3.25 5A.75.75 0 014 4.25h15a.75.75 0 010 1.5H4A.75.75 0 013.25 5zm0 10a.75.75 0 01.75-.75h15a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}));var t}var Lo=n(930),Mo=Object.assign;function Do(e){return w.a.createElement(G.a,Mo(Mo({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Cloud24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M10.836 6.355a4.072 4.072 0 00-4.016 4.756.75.75 0 01-.772.875 2.902 2.902 0 10-.13 5.802h.001l11.142-.035h.003a3.753 3.753 0 10-3.53-5.033.75.75 0 01-1.41-.512A5.255 5.255 0 0122.318 14c0 2.9-2.352 5.253-5.252 5.253h-.001l-11.142.034H5.92a4.402 4.402 0 01-.655-8.756v-.104a5.572 5.572 0 019.85-3.57.75.75 0 11-1.15.962 4.062 4.062 0 00-3.128-1.464z",fillRule:"evenodd",clipRule:"evenodd"}));var t}var Uo=n(927),Fo=Object.assign;function Vo(e){return w.a.createElement(G.a,Fo(Fo({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Gear24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M12.034 8.133a3.858 3.858 0 100 7.716 3.858 3.858 0 000-7.716zM9.676 11.99a2.358 2.358 0 114.716 0 2.358 2.358 0 01-4.716 0z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M13.19 2.17a2.415 2.415 0 00-2.381 0L3.967 6.048a2.415 2.415 0 00-1.224 2.1v7.703c0 .87.467 1.672 1.224 2.101l6.842 3.878a2.415 2.415 0 002.382 0l6.842-3.878a2.415 2.415 0 001.224-2.1V8.148c0-.87-.468-1.672-1.224-2.101L13.19 2.17zm-1.64 1.305a.915.915 0 01.902 0l6.842 3.878a.915.915 0 01.464.796v7.702c0 .33-.177.634-.464.796l-6.842 3.878a.915.915 0 01-.902 0l-6.842-3.878a.915.915 0 01-.464-.796V8.15c0-.33.177-.634.464-.796l6.842-3.878z",fillRule:"evenodd",clipRule:"evenodd"}));var t}var qo=Object.assign;function Go(e){return w.a.createElement(G.a,qo(qo({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Markdown24"+(t?" "+t:""))}),w.a.createElement("path",{d:"M3.36 5.964A.75.75 0 002 6.4v11.202a.75.75 0 001.5 0V8.739l4.246 5.938a.75.75 0 001.22 0L13.21 8.74v8.863a.75.75 0 001.5 0V6.4a.75.75 0 00-1.36-.436l-4.995 6.988L3.36 5.964zm16.397.436a.75.75 0 00-1.5 0v9.392l-.963-.961a.75.75 0 10-1.06 1.061l2.243 2.24a.75.75 0 001.06 0l2.242-2.24a.75.75 0 00-1.06-1.061l-.962.961V6.4z",fillRule:"evenodd",clipRule:"evenodd"}));var t}var Ho=n(2992),Wo=Object.assign;function Ko(e){return w.a.createElement(G.a,Wo(Wo({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--TrayFull24"+(t?" "+t:""))}),w.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},w.a.createElement("path",{d:"M7.822 12a.75.75 0 01.75-.75h6.857a.75.75 0 010 1.5H8.572a.75.75 0 01-.75-.75zm1.142-4a.75.75 0 01.75-.75h4.572a.75.75 0 010 1.5H9.714a.75.75 0 01-.75-.75zm11.786 8a.747.747 0 00-.016-.155l.003.015a.75.75 0 01.013.14zm-17.487-.14a.748.748 0 00.003-.015l-.003.015z"}),w.a.createElement("path",{d:"M7.527 3.25a2.25 2.25 0 00-2.21 1.829l-2.05 10.766-.004.015a.748.748 0 00-.013.14v2.5a2.25 2.25 0 002.25 2.25h13a2.25 2.25 0 002.25-2.25V16a.75.75 0 00-.013-.14l-.003-.015-2.05-10.766a2.25 2.25 0 00-2.211-1.829H7.527zm0 1.5a.75.75 0 00-.737.61l-1.884 9.89h14.188L17.21 5.36a.75.75 0 00-.737-.61H7.527zM4.75 18.5c0 .414.336.75.75.75h13a.75.75 0 00.75-.75v-1.75H4.75v1.75z"})));var t}function Zo(e){return w.a.createElement(Ko,Wo(Wo({},e),{className:function(){return"ZDI ZDI--Column24"+(e.className?" "+e.className:"")}}))}var Qo=n(1735),Yo=n(1734),Jo=n(1157);function Xo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var $o=function(e){var t=e.getMarkdownEnabled,n=e.label,a=e.icon,o=e.text,i=e.onClick,c=Object(y.useState)(t()),l=Xo(r.a,c,2),s=l[0],u=l[1],f=function(){i(),u(!s)};return Object(d.c)(T.a,{as:B.c,zaType:"Button",zaText:"".concat(n," ").concat(s?"关":"开"),preset:B.b.Plain,"aria-label":n,css:function(e){return{"&.Button.Button--plain":{padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px",position:"relative"}}},children:[Object(d.b)(x.Box,{onClick:f,css:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:1}}),Object(d.b)(a,{center:!0,css:{marginRight:"4px"}}),null!=o?o:n,Object(d.b)(Jo.a,{forceControlled:!0,checked:s,preset:"small",css:{marginLeft:37},onChange:f,onClick:function(e){return e.preventDefault()}})]})};function ei(e){var t,n=e.onCommand,r=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState,i=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,l=e.toolbarFixtureAreaData,s=e.className;return Object(d.c)(io,{className:s,css:{".ToolbarButton.Button.Button--plain":{marginRight:"6px"},".ToolbarDivider":{marginLeft:"0",paddingLeft:"2px"},".toolbar-section":{marginRight:"8px"},".fixArea .toolbar-section, .moreArea .toolbar-section":{marginRight:"0px"},".fixArea .ToolbarButton.Button.Button--plain:last-child, .moreArea .ToolbarButton.Button.Button--plain:last-child":{marginRight:"0px"},"&.toolbarV3":{paddingLeft:"0px"}},children:[Object(d.b)(Ao,{mainSections:i,moreSectionIsEmpty:0===(null===(t=c[0])||void 0===t?void 0:t.items[0].children.length),onCommand:n,queryCommandState:r,queryCommandEnable:a,editorState:o}),Object(d.b)(Ro,{fixSections:l,queryCommandEnable:a,queryCommandState:r,onCommand:n,editorState:o}),Object(d.b)(To,{queryCommandState:r,queryCommandEnable:a,editorState:o,onCommand:n,moreSections:c})]})}var ti=function(e){var t=e.editorState,n=e.onCommand,r=e.queryCommandEnable,a=e.queryCommandState,o=e.showUserProfitButton,i=e.isVideoAnswer,c=e.onInsertVideoClick,l=e.draftPage,s=e.className,u=e.useMediumEditor,f=e.getMarkdownEnabled,b=qn().jumpUrl,p=Object(y.useMemo)((function(){return function(e){var t=e.showProfit,n=e.onInsertVideoClick,r=e.isVideoAnswer;return[{sectionName:"operation",minLength:3,priority:1,items:[{icon:xn.b,priority:2,label:"撤销",commandName:"undo",shortcut:"⌘+Z"},{icon:Sn.b,label:"重做",priority:1,commandName:"redo",shortcut:"⌘+Y"},{icon:Tn,label:"清除格式",priority:3,commandName:"clear-format",shortcut:"⌘+\\"}]},{sectionName:"style",minLength:4,priority:2,items:[{icon:zo.b,label:"标题",priority:1,children:[{icon:On.b,label:"一级标题",commandName:"toggle-block-type-header-two",shortcut:"⌘+⌥+1"},{icon:jn.b,label:"二级标题",commandName:"toggle-block-type-header-three",shortcut:"⌘+⌥+2"}]},{icon:vn.b,label:"加粗",commandName:"toggle-inline-style-BOLD",priority:2,shortcut:"⌘+B"},{icon:gn.b,label:"斜体",commandName:"toggle-inline-style-ITALIC",priority:3,shortcut:"⌘+I"}]},{sectionName:"blockType",minLength:6,priority:4,items:[{icon:_o,label:"列表",priority:1,children:[{icon:yn.b,label:"有序列表",commandName:"toggle-block-type-ordered-list-item",shortcut:"⌘+⇧+L"},{icon:wn.b,label:"无序列表",commandName:"toggle-block-type-unordered-list-item",shortcut:"⌘+L"}]},{Component:Qo.a,icon:En.c,label:"目录",commandName:"toggle-catalog",shortcut:"⌘+⌥+J",priority:2},{icon:Cn.a,label:"引用",commandName:"toggle-block-type-blockquote",shortcut:"⌘+⇧+U",priority:3},{icon:Nn.b,label:"分割线",commandName:"insert-divider",shortcut:"⌘+⌥+S",priority:4},{icon:kn.b,label:"代码块",commandName:"toggle-block-type-code-block",shortcut:"⌘+⌥+C",priority:5},{icon:In.b,label:"注释",commandName:"insert-reference",shortcut:"⌘+⌥+R",priority:6}]},{sectionName:"advanced",minLength:2,priority:3,items:[{Component:Yo.a,icon:Fn.b,label:"图片",commandName:"insert-image-from-library",priority:7},!r&&{label:"视频",icon:Lo.b,priority:6,onClick:function(){null==n||n()}},{label:"链接",icon:Rn.c,commandName:"insert-link",priority:5,shortcut:"⌘+K"},t&&!r&&{label:"收益",icon:gr,commandName:"toggle-user-profit-modal",priority:4},{label:"公式",icon:zn.b,commandName:"insert-formula",priority:3,shortcut:"⌘+⌥+E"},!r&&{label:"表格",icon:Bn.b,commandName:"insert-table",priority:2,shortcut:"⌘+⌥+T"},{label:"附件",icon:Do,commandName:"insert-file-from-baidu-wangpan",priority:1}].filter(Boolean)}]}({showProfit:o,onInsertVideoClick:c,isVideoAnswer:i})}),[o,c,i]),h=Object(y.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.draftPage;return[{sectionName:"fixArea",minLength:2,priority:2,items:[Object.assign({label:"文档",icon:Ho.b},t?{children:[{icon:Ho.b,label:"文档",commandName:"insert-doc"},{icon:Zo,label:"草稿箱",onClick:function(){location.href=t}}]}:{commandName:"insert-doc"}),{label:"历史版本",icon:Zt.b,commandName:"toggle-draft-history-modal"}]}]}({draftPage:l})}),[l]),m=Object(y.useMemo)((function(){return function(e){var t=e.getMarkdownEnabled,n=e.onHandleManageEditClick;return[{sectionName:"moreArea",minLength:2,priority:2,items:[{label:"更多",icon:Uo.c,children:[{label:"帮助文档",icon:te.b,commandName:"toggle-help-document",hideMenuOnClick:!0},{label:"默认设置",icon:Vo,onClick:function(){return n()},hideMenuOnClick:!0},{Component:function(e){return Object(d.b)($o,Object.assign({getMarkdownEnabled:t},e))},label:"Markdown 语法识别",icon:Go,commandName:"toggle-markdown-enabled"}]}]}]}({getMarkdownEnabled:f,onHandleManageEditClick:function(){return window.open(b)}})}),[f,b]),v=u?ei:Bo;return Object(d.b)(v,{editorState:t,onCommand:n,queryCommandEnable:r,queryCommandState:a,toolbarMainAreaData:p,toolbarMoreAreaData:m,toolbarFixtureAreaData:h,className:s})},ni=n(1105),ri=n(1084),ai=n(224);function oi(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ii="showEvaluatePanelTimer",ci="isShowEvaluatePanel",li=function(e){return Object(d.b)(T.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"关闭nps",css:{position:"absolute",top:"11px",right:"11px"}},e),{},{children:Object(d.b)(ce.a,{width:"16",height:"16"})}))},si=function(e){return Object(d.b)(x.Box,{css:{textAlign:"right"},children:Object(d.b)(T.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"提交nps",css:function(e){return{color:e.colors.GBL01A,fontSize:"12px"}}},e),{},{children:"确认提交"}))})},ui=function(e){return Object(d.b)(T.a,Object.assign({as:"button",zaType:"Button",css:function(e){return{width:"25px",display:"inline-block",textAlign:"center",lineHeight:"25px",background:e.colors.GBK10A,borderRadius:"2px",color:e.colors.GBK06A,marginRight:"2px",cursor:"pointer","&:hover":{background:e.colors.GBK09A}}}},e))};function di(e){var t=e.editorFrom,n=e.storageKey,a=void 0===n?"":n,o=Object(y.useState)(""),i=oi(r.a,o,2),c=i[0],l=i[1],s=Object(y.useState)("10"),u=oi(r.a,s,2),f=u[0],b=u[1],p=Object(y.useState)(""),h=oi(r.a,p,2),m=h[0],v=h[1],g=Object(y.useRef)(),O=Object(ri.a)(),j=Object(ai.b)(),w=Object(je.a)((function(e){j("https://api.zhihu.com/slytherin/fallback/".concat(t),{method:"POST",body:{score:e,content:m}})}));return Object(y.useEffect)((function(){var e=(new Date).getTime()>L.a.get(ii+a);!L.a.get(ci+a)||e?(l(""),setTimeout((function(){l("0"),L.a.set(ci+a,"1"),L.a.set(ii+a,(new Date).getTime()+5184e6),g.current=setTimeout((function(){l("")}),6e4)}),6e5)):l("")}),[a]),""===c?null:Object(d.b)(T.b,{block:"editorEvaluatePanel",children:Object(d.b)(T.f,{zaText:"nps展示",zaType:"Block",children:Object(d.c)(x.Box,{css:function(e){return{width:"310px",position:"fixed",bottom:"72px",right:"110px",background:e.colors.GBK99A,padding:"20px",boxShadow:"0px 1px 3px rgba(26, 26, 26, 0.1)",zIndex:"101"}},children:[Object(d.b)(li,{onClick:function(){l("")}}),"0"===c&&Object(d.c)(x.Box,{children:[Object(d.b)(x.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A}},children:"亲爱的创作者，感谢您对知乎内容的贡献"}),Object(d.b)(x.Box,{css:function(e){return{fontSize:"13px",color:e.colors.GBK06A,marginTop:"10px",marginBottom:"20px"}},children:"请选择您对编辑器的满意度，以帮助我们更好的服务于您的创作体验"}),Object(d.b)(x.Box,{className:"evaluate-box",children:[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return Object(d.b)(ui,{zaText:"打分-".concat(e),onClick:function(){clearTimeout(g.current),e<=6?l("1"):e>6&&(l(""),O({text:"感谢您的反馈",delay:2e3}),w(e)),b(e)},children:e},t)}))}),Object(d.c)(x.Flex,{justifyContent:"space-between",css:function(e){return{color:e.colors.GBK03A,marginTop:"15px",fontSize:"11px",lineHeight:"12px"}},children:[Object(d.b)("span",{role:"img","aria-label":"不满意",children:"不满意👎"}),Object(d.b)("span",{role:"img","aria-label":"满意",children:"满意👍"})]})]}),"1"===c&&Object(d.c)(x.Box,{children:[Object(d.b)(x.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A,marginBottom:"10px"}},children:"请写下您的意见或建议"}),Object(d.b)(x.Box,{children:Object(d.b)(ni.a,{className:"Appeal-TextArea",rows:7,placeholder:"请写下您的建议...",css:{width:"270px",height:"85px"},value:m,onChange:function(e){v(e.target.value)}})}),Object(d.b)(x.Box,{css:{textAlign:"right"},children:Object(d.b)(si,{onClick:function(){l(""),w(f),O({text:"感谢您的反馈",delay:1e3})}})})]})]})})})}var fi=function(e){return null!=e&&e.length&&e.filter(Boolean).find((function(e){return"8713324000"===String(e.id)&&"pass"===e.status}))?{fileSizeLimit:31457280}:{fileSizeLimit:10485760}},bi=n(992);function pi(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var hi=function(e){var t=e.children,n=e.className;return Object(d.b)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},mi=function(e){var t=e.question,n=e.onClose,a=t.title,o=t.detail,i=Object(y.useState)(null),c=pi(r.a,i,2),l=c[0],s=c[1],u=Object(y.useRef)(null),f=Object(y.useCallback)((function(){return u.current}),[]);return Object(d.b)("div",{css:{position:"absolute",top:0,bottom:0,left:"100%",width:"calc((100vw - 100%)/2 - 20px)"},ref:u,children:Object(d.c)(x.Box,{css:{overflow:"hidden",width:"326px",maxWidth:"326px"},children:[Object(d.b)(P.a,{getStyle:function(){var e=f();return e?{top:85,left:e.getBoundingClientRect().left}:{top:85}},offset:85,container:f,children:Object(d.c)(x.Box,{css:{width:"326px",maxWidth:"326px"},pl:"16px",children:[Object(d.c)(x.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"60px",alignItems:"center"},children:[Object(d.b)(hi,{css:{fontSize:"18px",lineHeight:"24px"},children:"问题描述"}),Object(d.b)(T.a,{zaType:"Button",zaAction:"Unknown",zaText:"关闭问题详情",as:hn.a,css:{marginLeft:"auto",padding:"16px"},onClick:n})]}),Object(d.c)(x.Box,{bg:"GBK99A",px:"16px",css:{minHeight:"340px",maxHeight:"460px",overflow:"auto"},onClick:function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&s(t)},children:[Object(d.b)(hi,{css:{fontSize:"16px",lineHeight:"22px",marginBottom:"10px",marginTop:"10px"},children:a}),Object(d.b)(Xt.a,{itemProp:"text",tag:"span",html:o})]})]})}),l&&Object(d.b)(bi.a,{img:l,onClose:function(){return s(null)}})]})})},vi=function(e){var t=e.question,n=e.onClick,r=t.title,a=t.excerpt;return Object(d.b)(x.Box,{bg:"GBK99A",css:{padding:"20px 64px 0"},children:Object(d.c)(hi,{css:function(e){return{paddingBottom:"20px",borderBottom:"1px solid ".concat(e.colors.GBK09A)}},children:[r,a&&Object(d.c)(T.a,{as:"button",zaType:"Button",zaText:!0,onClick:n,shouldTrackShow:!0,css:function(e){return{color:e.colors.GBL05A,lineHeight:"14px",fontSize:"14px",fontWeight:"normal",display:"inline-flex",alignItems:"center"}},children:["问题描述",Object(d.b)(Oe.a,{size:16})]})]})})},gi=n(57);function Oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ji,yi,wi=function(e){var t=function(t){Object(l.a)(r,t);var n=Oi(r);function r(e){var t;return Object(o.a)(this,r),(t=n.call(this,e)).state={needReload:e.useMediumEditor&&Object(gi.isBrowser)()&&Object(Tr.c)()},t}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.state.needReload&&this.props.loadDraft(this.props.question.id).finally((function(){requestAnimationFrame((function(){e.setState({needReload:!1},(function(){requestAnimationFrame((function(){var t;null===(t=e.props.imperativeRef.current)||void 0===t||t.focus()}))}))}))}))}},{key:"render",value:function(){return this.state.needReload?null:Object(d.b)(e,Object.assign({},this.props))}}]),r}(y.Component);return J()(Object(C.connect)(null,{loadDraft:zt.P})(t),e)};function Ci(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ki(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var xi="questionDetail",Si=function(e){Object(l.a)(n,e);var t=ki(n);function n(e,r){var i;Object(o.a)(this,n),(i=t.call(this,e,r)).toolbarWrapperRef=Object(y.createRef)(),i.helpDocMilestoneRef=Object(y.createRef)(),i.zaRef=Object(y.createRef)(),i.editableReady=function(){var e=i.props,t=e.reporter,n=e.draft;t.reportSuccess(ro.editableInit),n&&t.reportSuccess(ro.draftLoad)},i.onCompositionStart=function(){i.composition=!0,i.syncDraft.cancel()},i.onCompositionEnd=function(){i.composition=!1,i.prevValue&&i.syncDraft(i.prevValue),i.prevValue=null},i.onChangeContent=function(e){i.loggingDeltaTime||(i.loggingDeltaTime=!0,i.startCompositionTime=Math.floor((new Date).getTime()/1e3)),i.hasEdited=!0,i.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),i.composition?i.prevValue=e:i.syncDraft(e)},i.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var r=n.getRangeAt(0).cloneRange();r.collapse(t);var a=r.getBoundingClientRect();if(0===a.height){var o=r.commonAncestorContainer;1===o.nodeType&&(a=o.getBoundingClientRect())}if(0!==a.height){var i=a.bottom-(window.innerHeight-117);i>0&&window.scrollBy(0,i)}}},i.onDeleteDraftModalShow=function(){i.setState({deleteDraftModalShown:!0})},i.onDeleteDraft=function(){var e=i.props,t=e.isReediting,n=e.activeTabKey;t||(n===U.a.videoAnswer?i.editable.clearAllContent():i.editable.reset(),i.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),i.deleteDraft();var r=i.props.onDeleteDraft;r&&r()},i.onDeleteDraftModalHide=function(){i.setState({deleteDraftModalShown:!1})},i.checkVideoSectionReady=function(e){if(!e)return N.a.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return N.a.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var r=i.editable.checkVideoStatus();if(r.isUploading)return N.a.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(r.hasError)return N.a.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},i.checkEditorContentReady=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading"),!1):i.editable.hasImage("upload")?(i.handleError("image-uploading"),!1):i.editable.hasImage("error")||i.editable.hasVideo("error")&&!i.editable.hasVideo("error-review")?(N.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!i.editable.hasVideo("error-review")&&!i.editable.hasVideo("censor")||(N.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},i.getSubmitData=function(e,t,n){var r,a=i.state.scheduledPublishAt,o=i.props,l=o.answer,s=o.disclaimers,u=o.settings,f=o.isReediting,b={content:t},p=(0,o.getFormData)(),h=p.isDisclaimerChecked,m=p.disclaimerType,O=p.rewardTagline,j=p.pushActivity,y=p.commentPermission,w=p.reshipmentSettings,C=p.isReport,k=p.commercialZhitaskBindInfo,x=p.thankInviterInfo;if(!f){var S=i.props.currentUser.caEnabled?"need_payment":"allowed";b.reshipmentSettings=w||S,b.commentPermission=y||"all"}if(b.rewardSetting={canReward:Boolean(O),tagline:O},e)return{content:t,attachment:n,rewardSetting:b.rewardSetting,reshipmentSettings:b.reshipmentSettings,commentPermission:b.commentPermission};if(s&&s.length&&(!l||u)&&(b.disclaimerStatus=h?"open":"close",b.disclaimerType=m||"none"),b.commercialReportInfo={isReport:!!C},b.commercialZhitaskBindInfo=null!=(r=k)&&r.bindTaskDTO?{bind_operate:"BIND",task_id:r.bindTaskDTO.taskId,task_type:r.bindTaskDTO.taskType}:null,b.isReport=!!C,a){if(A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5733,name:"回答"}),v.a(a,g.a(new Date,30)))return void N.a.alert(Object(d.b)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});b.publishAt=Math.floor(a/1e3)+0}return void 0!==j&&(b.pushActivity=j),null!=n&&n.bizExt&&(b.bizExt=Object(Ot.a)(n.bizExt)),b.tableOfContentsEnabled=i.editable.hasCatalog(),Object.assign(b,Object(Tr.i)(x,"answer")),b},i.canSubmit=function(){var e,t,n=null===(e=i.editable)||void 0===e?void 0:e.toHTML(),r=i.isVideoAnswer?null===(t=i.editable)||void 0===t?void 0:t.getAttachment():null;return i.isVideoAnswer?Boolean(r||n):Boolean(n)},i.handleSubmit=i.props.authRequired((function(){var e=i.props.reporter;e.reportRequest(ro.addAnswer);try{var t,n=i.props,r=n.answer,a=n.draft,o=n.isReediting,l=n.onSubmit,s=n.showNotification,u=n.question,d=u.id,f=u.questionType,b=u.brand,p=n.currentUser,h=n.updateSettingsDisclaimer,m=n.loadLabel,v=n.onCancel,g=n.useMediumEditor;if(!i.editable)return v(),void e.reportSuccess(ro.addAnswer);if(!i.canSubmit())return void e.reportSuccess(ro.addAnswer);var O=i.editable.toHTML(),j=i.isVideoAnswer?i.editable.getAttachment():null==a?void 0:a.attachment;if(i.isVideoAnswer&&!i.checkVideoSectionReady(j))return void e.reportSuccess(ro.addAnswer);if(!i.checkEditorContentReady())return void e.reportSuccess(ro.addAnswer);var y=i.getSubmitData(i.isVideoAnswer,O,Object.assign(Object.assign({},j),{},{campaign_id:null===(t=i.props.campaign)||void 0===t?void 0:t.id}));if(!y)return;var w=i.zaRef.current.trackEvent;Promise.resolve(l(y)).then((function(t){var n;if(w({action:"Answer",eventType:"Click",elementLocation:{type:"Button",moduleId:"published_successful",content:{type:"Answer",token:String(null==t||null===(n=t.payload)||void 0===n?void 0:n.id)}}},{configMap:{traceId:i.props.traceId}}),e.reportSuccess(ro.addAnswer),g&&(r&&y.disclaimerStatus&&h(r.id,y.disclaimerStatus,y.disclaimerType),r&&m("answer",r.id),"commercial"===f)){var a=(null==b?void 0:b.toastAnswerDescription)||"已发布！由品牌筛选后进入推荐区。";s(a)}})).then((function(){A.a.trackCardShow(null,{id:7879}),o||A.a.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(d),author_member_hash_id:p.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||e.reportFail(ro.addAnswer,t),o||A.a.trackEvent(Object(c.a)(i),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var C=o?"Edit":"Answer";"Answer"===C&&A.a.trackEvent(Object(c.a)(i),{id:4930}),A.a.trackEvent(Object(c.a)(i),{action:C,is_intent:!1})}catch(t){throw e.reportFail(ro.addAnswer,t),t}})),i.validateBeforeCancel=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading-draft"),!1):!i.editable.hasImage("upload")||(i.handleError("image-uploading-draft"),!1)},i.onCancel=function(){var e=i.props.onCancel;i.validateBeforeCancel()&&(i.hasEdited&&i.syncDraftImmediately(),e&&e())},i.onFocus=function(){"org"===i.props.question.questionType&&i.shouldAnswerOrgQuestionModalShow&&i.handleAnswerOrgQuestionModalShow(),i.setState({focusing:!0})},i.onFocusWithAuth=function(){return i.onFocusAuthChecked?i.onFocus():(i.onFocusAuthChecked=!0,i.props.authRequired(i.onFocus)())},i.onSelectText=function(e){i.setState({selectedText:e.replace(/\s/g,"")})},i.onLoadStart=function(){i.setState({loadingShown:!0})},i.onLoadEnd=function(){i.setState({loadingShown:!1})},i.handleInsertZVideo=function(){i.setState({showInsertableVideoUploader:!0})},i.getAllInviters=function(){var e=i.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},i.getToolbarSidePlugins=function(){return null},i.getToolbarMenuPlugins=function(){var e=i.state.scheduledPublishAt;return Object(d.b)(y.Fragment,{children:i.canUseScheduledPublish&&Object(d.c)(z.c,{onClick:function(){i.setUseScheduledPublish(!e),A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5730,name:"回答"})},children:[Object(d.b)(f.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},i.setUseScheduledPublish=function(e,t){if(e)if(t)i.setState({scheduledPublishAt:t});else{var n=g.a(new Date,30);i.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else N.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){i.setState({scheduledPublishAt:void 0}),A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5737,name:"回答"})})).catch((function(){A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5736,name:"回答"})})),A.a.trackCardShow(Object(c.a)(i),{id:5735,name:"回答"})},i.getEditorState=function(){return i.editable.state.editorState?i.editable.state.editorState:i.editable.getEditorState()},i.toggleFullscreen=function(){var e,t,n;i.validateBeforeCancel()&&(i.hasEdited?i.syncDraftImmediately().finally((function(){var e,t,n;Object(Tr.h)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)})):(Object(Tr.h)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)))},i.handleUploadStart=function(){i.setState({isUploading:!0})},i.handleUploadEnd=function(){i.setState({isUploading:!1})},i.handleUploadError=function(e,t){switch(t){case"video":i.handleError("video-upload-error");break;case"image":i.handleError("image-upload-error",e)}},i.handleAnswerOrgQuestionModalShow=function(){i.setState({answerModalShown:!0}),i.shouldAnswerOrgQuestionModalShow=!1},i.handleAnswerModalHide=function(){i.setState({answerModalShown:!1})},i.updateDraftSettings=function(){i.hasSettingsChange=!0,i.syncDraft()},i.syncDraftImmediately=i.props.reporter.recordError(ro.draftSave,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.content;if(i.editable){var t,n=i.props,r=n.reporter,a=n.draft,o=i.state.lastUpdatedTime,l=e.toHTML(),s=Math.floor(Date.now()/1e3);t=!o||i.startCompositionTime-o>180?s-i.startCompositionTime:s-o,i.setState({isTyping:!1});var u,d=i.props.answer,f=(d=void 0===d?{}:d).attachment;u=i.videoAnswerEditable||"zvideo"===(null==f?void 0:f.type)?"video_answer":"video"===(null==f?void 0:f.type)?"video_answer_v2":"normal";var b=i.isVideoAnswer?e.getAttachment():null==a?void 0:a.attachment,p=i.hasSettingsChange||(i.isVideoAnswer?Boolean(b||l):Boolean(l));i.hasSettingsChange=!1;var h=i.getDraftSettings(i.isVideoAnswer);return p?i.updateDraft(l,t,u,b,h).then((function(e){var t;null!=e&&null!==(t=e.payload)&&void 0!==t&&t.updatedTime&&i.setState({lastUpdatedTime:e.payload.updatedTime}),i.loggingDeltaTime=!1,r.reportSuccess(ro.draftSave),A.a.trackEvent(Object(c.a)(i),{action:"AutoSave"})}),(function(e){throw r.reportFail(ro.draftSave,e),e})).finally((function(){delete i.startCompositionTime})):(r.reportSuccess(ro.draftSave),Promise.resolve(i.deleteDraft()))}})),i.syncDraft=Object(Ct.a)(i.syncDraftImmediately,2e3),i.getDraftSettings=function(e){var t=i.props,n=t.answer,r=t.disclaimers,a=t.settings,o=t.isReediting,c={},l=(0,t.getFormData)(),s=l.isDisclaimerChecked,u=l.disclaimerType,d=l.rewardTagline,f=l.pushActivity,b=l.commentPermission,p=l.reshipmentSettings,h=l.isReport,m=l.thankInviterInfo,v=void 0===m?"":m;if(!o){var g=i.props.currentUser.caEnabled?"need_payment":"allowed";c.reshipmentSettings=p||g}if(c.commentPermission=b||"all",c.canReward=Boolean(d),c.tagline=d,e)return c;r&&r.length&&(!n||a)&&(c.disclaimerStatus=s?"open":"close",c.disclaimerType=u||"none"),c.commercialReportInfo={is_report:!!h},void 0!==f&&(c.pushActivity=f),c.tableOfContentsEnabled=i.editable.hasCatalog();var O=Object(Tr.i)(v);return c.thankInviterStatus=O.thankInviterStatus,c.thankInviter=O.thankInviter,c},i.updateDraft=function(){for(var e=i.props,t=e.question.id,n=e.draft,r=e.addDraft,a=e.updateDraft,o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return n?a.apply(void 0,[t].concat(c)):r.apply(void 0,[t].concat(c))},i.focus=function(){i.editable&&i.editable.focus()},i.hasVideo=function(){return!!i.editable&&i.editable.hasVideo()},i.hasADLinkCard=function(){return!!i.editable&&i.editable.hasADLinkCard()},i.hasFeeConsultCard=function(){return!!i.editable&&i.editable.hasFeeConsultCard()},i.hasMCNLinkCard=function(){return!!i.editable&&i.editable.hasMCNLinkCard()},i.hasCommercialReport=function(){var e=i.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},i.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;i.setState({commentPermission:n})},i.handleReshipmentSettings=function(e){"need_payment"!==e||i.props.currentUser.caEnabled||window.open("/copyright/invite"),i.setState({reshipmentSettings:e})},i.handleError=function(e,t){Object(vt.b)(e,t,i.props.showNotification)},i.handleBeforeVideoUpload=function(){var e=i.props.question;return!e.relationship||!e.relationship.isAnonymous},i.handleReverted=function(e){i.editable.resetWithValue(e.draft.content)},i.toggleMarkdownEnabled=function(){var e=i.state.markdownEnabled;i.setState({markdownEnabled:!e}),i.props.updateMarkdownSettings({markdownEnabled:!e})},i.getDraftStatus=function(){var e=i.props.draft,t=i.state,n=t.isTyping,r=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&r<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):p()(ji||(ji=Object(a.a)(["草稿保存于",""])),Object(M.toRelativeString)(e.updatedTime)):""},i.handleEditGGRCard=function(e){var t=e.type,n=e.payload,r=i.state.mcnEditingGood,a=i.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||i.setState({mcnEditingGood:null}):a(Object.assign(Object.assign({},r),{},{title:null==n?void 0:n.title})).finally((function(){i.setState({mcnEditingGood:null}),i.editable.handleCommand("edit-mcn-link-card:".concat(r.id))}))},i.shouldShowProfit=function(){return i.props.showUserProfitButton&&!i.isVideoAnswer},i.getSentences=function(){var e;return i.props.isReediting&&null!==(e=i.props.answer)&&void 0!==e&&e.id?i.props.getInteractText("answers",i.props.answer.id).then((function(e){var t;return null==e||null===(t=e.payload)||void 0===t?void 0:t.data})):null},i.createEditorPlugins=function(){var e,t,n,r=pn({type:"question",id:i.props.question.id,draftType:null!==(e=i.props.answer)&&void 0!==e&&e.id?"answer":void 0,draftId:null===(t=i.props.answer)||void 0===t?void 0:t.id,syncDraft:i.syncDraft}),a=hr({getShouldShowToolbarButton:function(){return!i.isVideoAnswer},getAllInviters:i.getAllInviters,inviterQuery:i.props.inviterQuery,getInitialThankInviterInfo:function(){return i.props.thankInviterInfo},syncDraftImmediately:i.syncDraftImmediately}),o=Cr({shouldDisabled:function(){return i.props.question.relationship.isAnonymous},shouldShow:function(){return i.shouldShowProfit()},getContentInfo:function(){var e;return{type:"answer",id:null===(e=i.props.answer)||void 0===e?void 0:e.id}}}),l=Kt(),s=or({sourceType:"answer",sourceId:null===(n=i.props.question)||void 0===n?void 0:n.id});i.helpDocPlugin=tr({getInitialOffset:i.getHelpDocInitialOffset,getShouldHide:i.getShouldHideHelpDoc,forceUpdate:i.forceUpdate.bind(Object(c.a)(i))});var u=nr({onToggle:i.toggleMarkdownEnabled});return[K({getSentences:i.getSentences}),r,a,o,l,s,i.helpDocPlugin,u]},i.renderRichInput=function(){var e,t=i.props,n=t.answer,r=(n=void 0===n?{}:n).attachment,a=t.answer,o=t.question,c=t.isReediting,l=t.draft,s=t.defaultValue,u=i.state,f=u.toolbarMenuAttention,b=u.scheduledPublishAt,p=u.initialScheduledPublishAt,h=i.props.getFormData().tableOfContentsEnabled,m="".concat(c?"修改":"写","回答...");"commercial"===o.questionType&&(m=null===(e=o.brand)||void 0===e?void 0:e.editorDescription);i.isVideoAnswer&&(m="详细介绍下视频（选填）");var v,g=i.videoAnswerEditable||"video_answer"===(null==l?void 0:l.type)||"zvideo"===(null==r?void 0:r.type);if(l)v=null==l?void 0:l.attachment;else if("zvideo"===(null==r?void 0:r.type))v=r.zvideo;else if("video"===(null==r?void 0:r.type)){var O;v=Object.assign(Object.assign({},null===(O=r.video)||void 0===O?void 0:O.videoInfo),{},{videoId:r.attachmentId})}var j={ref:function(e){return i.editable=e},answer:a,question:o,toolbarMenuAttention:f,scheduledPublishAt:b,initialScheduledPublishAt:p,placeholder:m,draft:l,defaultValue:s,isLegacyVideoAnswer:g,defaultVideo:v,videoAnswerEditable:i.videoAnswerEditable,videoAnswerPublished:i.videoAnswerPublished,editableReady:i.editableReady,handleChangeContent:i.onChangeContent,handleAfterChangeContent:i.onAfterChangeContent,handleFocusWithAuth:i.onFocusWithAuth,handleSelectText:i.onSelectText,handleSubmit:i.handleSubmit,handleError:i.handleError,handleLoadStart:i.onLoadStart,handleLoadEnd:i.handleLoadEnd,handleUploadStart:i.handleUploadStart,handleUploadEnd:i.handleUploadEnd,handleUploadError:i.handleUploadError,handleBeforeVideoUpload:i.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){i.setState({mcnEditingGood:t})},isVideoAnswer:i.isVideoAnswer,handleInsertZVideo:i.handleInsertZVideo,getToolbarSidePlugins:i.getToolbarSidePlugins,createEditorPlugins:i.createEditorPlugins,getToolbarMenuPlugins:i.getToolbarMenuPlugins,getEditorBeforePlugins:i.getEditorBeforePlugins,setUseScheduledPublish:i.setUseScheduledPublish,allowToolbar:!1,onAnyChange:i.handleAnyChange,docPluginProps:fi(i.props.creatorRightStatus),tableOfContentsEnabled:h,getMarkdownEnabled:function(){return i.state.markdownEnabled},videoSource:"answer"};return Object(d.b)(oo,Object.assign({},j))},i.handleAnyChange=function(e){var t=e.editorState;i.setState({editorState:t})},i.handleKeyCommand=function(e){if(!i.editable)return"not-handled";var t=i.editable.handleKeyCommand(e);return"toggle-catalog"===e&&requestAnimationFrame((function(){i.forceUpdate(),i.syncDraftImmediately()})),t},i.queryCommandEnable=function(e,t){return!!i.editable&&i.editable.queryCommandEnable(e,t)},i.queryCommandState=function(e,t){return!!i.editable&&i.editable.queryCommandState(e,t)},i.getHelpDocInitialOffset=function(){var e=i.toolbarWrapperRef.current;if(e){var t=e.getBoundingClientRect(),n=i.props.useMediumEditor?t.bottom-50:t.bottom+20;return document.documentElement.clientWidth-t.right>328?{top:n,left:t.right+18}:{top:n,right:0}}},i.getShouldHideHelpDoc=function(){if(!i.props.useMediumEditor)return!1;var e=i.helpDocMilestoneRef.current;return!!e&&e.getBoundingClientRect().top<117},i.getAnswerFormRef=function(){return i.props.imperativeRef},i.handleCloseWriteShieldModal=function(){var e,t;i.props.useMediumEditor?null===(e=(t=i.props).onCancel)||void 0===e||e.call(t):(window.close(),requestAnimationFrame((function(){window.location.href="https://www.zhihu.com"})))};var l=i.props,s=l.defaultValue,u=l.draft,b=u?u.editableContent:s,h=u?u.updatedTime:0;return i.state={draft:b,content:{toHTML:function(){return b}},isEmpty:!b,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:h,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,editorState:null,rightArea:null,markdownEnabled:!1},i.hasEdited=!1,i}return Object(i.a)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,r=e.activeTabKey;return t&&t.autoSendingCreations&&r===U.a.textAnswer&&!n}},{key:"componentDidMount",value:function(){var e,t,n=this;null===(e=this.props.writeShield)||void 0===e||null===(t=e.setOnModalClose)||void 0===t||t.call(e,this.handleCloseWriteShieldModal);var a=this.props,o=a.reporter,i=a.draft,c=a.question.id,l=a.getBio,s=a.loadCreatorRightStatus;l(c),s(),o.reportRequest(ro.editableInit),i&&o.reportRequest(ro.draftLoad),this.shouldAnswerOrgQuestionModalShow=!xt.getKnown(),this.onFocusAuthChecked=!1;var u=this.props,d=u.fillCurrentUserIfNeeded,f=u.getUserProfitPermission,b=d(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);f(),Promise.resolve(b).then((function(){gt.a.getActionsByNames(["a_draft_history",n.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(e){var t=Ci(r.a,e,1)[0];t&&(n.setState({toolbarMenuAttention:t.description}),gt.a.markAsShown(t),"auto_pub_answer"===t.guide_name&&A.a.trackCardShow(n,{id:5738}))})),A.a.trackCardShow(n,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return window.name="",n.state.isUploading||n.composition||n.syncDraft.pending()||n.props.draft&&n.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return n.setState({dateNow:Date.now()})}),6e4),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus,hasVideo:this.hasVideo,hasADLinkCard:this.hasADLinkCard,hasMCNLinkCard:this.hasMCNLinkCard,hasFeeConsultCard:this.hasFeeConsultCard,toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!n.state.isEmpty}}),function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(r)&&"function"==typeof(null===(e=window)||void 0===e||null===(t=e.aria)||void 0===t||null===(n=t.initcallback)||void 0===n?void 0:n.disableShortKeys)){var a=r.map((function(e){return mt[e]}));window.aria.initcallback.disableShortKeys(a)}}(["r","t","e"])}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.reporter,r=this.state,a=e.currentUser,o={};r.reshipmentSettings||void 0===a.caEnabled||(o.reshipmentSettings=a.caEnabled?"need_payment":"allowed"),r.commentPermission||void 0===a.lastCommentPermission||(o.commentPermission=a.lastCommentPermission),Object.keys(o).length&&this.setState(o),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(ro.draftLoad,(function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n,content:{toHTML:function(){return n}}}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))}))(),this.draftLoaded=!0)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,r=n.focusing,a=n.thankInviterInfo,o=this.props,i=o.tagline,c=o.inviterFromNotification;if(i){var l=L.a.get("rewardNotication");r&&!l&&(this.setState({rewardNotication:!1}),L.a.set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}a||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})}},{key:"componentWillUnmount",value:function(){var e,t,n;this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null),"function"==typeof(null===(e=window)||void 0===e||null===(t=e.aria)||void 0===t||null===(n=t.initcallback)||void 0===n?void 0:n.disableShortKeys)&&window.aria.initcallback.disableShortKeys([])}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;if(n)return r(t.id)}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.isReediting,r=t.useMediumEditor,o=t.draft,i=this.state,c=i.content,l=i.scheduledPublishAt,s=i.markdownEnabled,u=n&&this.isVideoAnswer,f=c.toHTML()||"",b=r?Be:Ne;return Object(d.c)(b,{hideScrollButton:u,getContaner:function(){return e.form},isAnswer:!0,children:[Object(d.c)(x.Flex,{children:[Object(d.b)(x.Text,{color:"GBL05A",fontSize:"14px",ml:u?"0":"24px",children:p()(yi||(yi=Object(a.a)(["字数：",""])),Object(D.a)(f,!0))}),s&&Object(d.b)(re,{})]}),Object(d.b)(x.Text,{color:"GBL05A",fontSize:"14px",ml:"auto",children:this.getDraftStatus()}),r&&n&&Object(d.b)(B.c,{zaType:"Button",zaText:!0,color:"grey",preset:"secondary",css:{marginLeft:"24px"},onClick:this.onCancel,children:o?"保存草稿并离开":"取消"}),Object(d.b)(xr,{canSubmit:this.canSubmit(),handleSubmit:this.handleSubmit,isReediting:n,scheduledPublishAt:l,type:"answer",css:{marginLeft:"24px"}})]})}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(e=void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===U.a.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.className,o=r.isReediting,i=r.answer,c=(i=void 0===i?{}:i).answerType,l=r.question,s=r.currentUser,u=r.answer,f=r.draft,b=r.activeTabKey,p=r.useMediumEditor,h=r.showUserProfitButton,v=this.state,g=v.deleteDraftModalShown,O=v.showInsertableVideoUploader,j=v.mcnEditingGood,y=v.editorState,w=v.initialScheduledPublishAt,C=v.scheduledPublishAt,k=v.rightArea,x=p?{offset:52,container:function(){return n.form}}:{getStyle:function(){return{width:"100%",top:0,left:0}}};return Object(d.c)(I.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(l.id),author_member_hash_id:s.id},children:[Object(d.c)("form",{ref:function(e){n.form=e},className:m()("AnswerForm",a),onSubmit:function(e){return e.preventDefault()},noValidate:!0,css:[{borderBottom:"none"},p?{".AnswerForm-editor .Catalog.isCatalogV2":{width:"140px",marginLeft:"-164px"}}:{".AnswerForm-editor .Catalog.isCatalogV2":{marginLeft:"-260px"}}],children:[Object(d.b)(T.e,{ref:this.zaRef}),Boolean(this.isVideoAnswer&&(null===(e=this.props.writeShield)||void 0===e||null===(t=e.commands)||void 0===t?void 0:t.write)&&!this.props.writeShield.commands.write.instruction&&!this.props.writeShield.isLoading)&&Object(d.b)(wt.a,{writeScene:{type:"zvideo"},onClose:this.handleCloseWriteShieldModal}),Object(d.c)("div",{children:[Object(d.b)(di,{editorFrom:p?"answer-pc-editor-modified":"answer-pc-editor-full"}),this.editable&&Object(d.b)(P.a,Object.assign(Object.assign({},x),{},{children:Object(d.b)("div",{ref:this.toolbarWrapperRef,css:function(e){return{display:"flex",justifyContent:"center",margin:"0px auto",background:e.colors.GBK99A}},children:Object(d.b)(ti,{editorState:y,onCommand:this.handleKeyCommand,queryCommandEnable:this.queryCommandEnable,queryCommandState:this.queryCommandState,showUserProfitButton:h,isVideoAnswer:this.isVideoAnswer,onInsertVideoClick:this.handleInsertZVideo,useMediumEditor:p,getMarkdownEnabled:function(){return n.state.markdownEnabled}},b)})})),Object(d.c)("div",{css:function(e){return[{position:"relative",".Editable":{paddingTop:"1px",minHeight:"calc(100vh - 120px)"}},p?{width:"694px",margin:"0 auto",background:e.colorMod(e.colors.GBK10C).alpha(.45),".Editable-content":{paddingBottom:"62px"}}:{width:"782px",margin:"20px auto",".AnswerForm-editor .RichText--editable":{paddingLeft:64,paddingRight:64}}]},children:[k===xi&&Object(d.b)(mi,{question:l,onClose:function(){n.setState({rightArea:null})}}),!p&&Object(d.b)(vi,{question:l,onClick:function(){return n.setState({rightArea:xi})}}),Object(d.b)("div",{css:{minHeight:"calc(100vh - 120px)"},children:this.renderRichInput()}),Object(d.b)("div",{ref:this.helpDocMilestoneRef}),Object(d.b)(Xa,{question:l,answer:u,isVideoAnswer:this.isVideoAnswer,isReediting:o,setUseScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,initialScheduledPublishAt:w,scheduledPublishAt:C,draft:f,getAnswerFormRef:this.getAnswerFormRef,css:!p&&{paddingLeft:"54px",paddingRight:"64px"},updateDraftSettings:this.updateDraftSettings,getInitialEnableMarkdown:function(e){return n.setState({markdownEnabled:e})}})]})]}),"org"===l.questionType&&Object(d.b)(xt,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(Dt.a,{title:"清除草稿",subtitle:o?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:g,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),O&&Object(d.b)(ht,{show:O,onClose:function(){return n.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(e)))},onVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-video-card",e)}}),Object(d.b)(E.b,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){n.setState({mcnEditingGood:null})},children:Boolean(j)&&Object(d.b)(R.a,{className:"AnswerForm-MCNEditorIframe",src:Object(jt.a)({title:j.title,originTitle:j.originTitle,source:j.source,sourceId:j.sourceId,productTypeName:j.productTypeName}),onMessage:this.handleEditGGRCard})}),Object(d.b)(Mt,{onClose:function(){window.location.href="https://www.zhihu.com/question/".concat(l.id,"/answer/").concat(u.id)},shown:"slideshow"===c})]}),this.renderFooter()]})}}]),n}(y.Component);Si.propTypes={activeTabKey:j.a.string,question:j.a.object,isReediting:j.a.bool,defaultValue:j.a.string,getFormData:j.a.func,reporter:j.a.object},Si.defaultProps={isReediting:!1};var Ai={addDraft:zt.b,updateDraft:zt.lb,deleteDraft:zt.j,showNotification:de.h,fillCurrentUserIfNeeded:Tt.f,updateSettingsDisclaimer:St.I,loadLabel:Nt.e,getUserProfitPermission:Pt.b,updateLinkCard:Bt.b,fetchAllInviters:zt.o,getBio:zt.q,loadCreatorRightStatus:At.c,updateMarkdownSettings:zt.ob,getInteractText:function(e,t){return{API:{types:It.GET_INTERACT_TEXT,endpoint:"/".concat(e,"/").concat(t,"/segments")},FAILSAFE:!0}}};t.a=Object(S.compose)(Object(wt.b)({init:!0,getScene:function(e){return{type:"answer",token:String(e.question.id)}}}),(function(e){var t=function(t){Object(l.a)(r,t);var n=X(r);function r(){return Object(o.a)(this,r),n.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(d.b)(ee,{children:Object(d.b)(e,Object.assign({},this.props))})}}]),r}(y.Component);return J()(t,e)}),$e.c,wi,k.withRouter,yt.a,Object(C.connect)((function(e,t){var n,r,a=e.entities,o=a.questions,i=a.drafts,c=void 0===i?{}:i,l=e.question,s=t.location.query.inviter,u=Object(_t.b)(e),d=Object(Tt.b)(e),f=Object(zt.d)(e,t.question.id),b=s&&(null==f||null===(n=f.find)||void 0===n?void 0:n.call(f,(function(e){return e.id===s}))),p=c["question_".concat(t.question.id)];return{campaign:u,question:o[t.question.id]||t.question,draft:p,currentUser:d,isPuQuestion:Boolean(l&&l.brand&&l.brand.isPuQuestion),disclaimers:l.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(r=Object(Nt.c)(e,t.answer))||void 0===r?void 0:r.thankInviterInfo,allInviters:f,inviterQuery:s,inviterFromNotification:b,isOffice:Object(Rt.e)(e),creatorRightStatus:Object(At.a)(e)}}),Ai),ue,kr.e)(Si)},1630:function(e,t,n){"use strict";n.d(t,"a",(function(){return tn})),n.d(t,"b",(function(){return rn}));var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(0),u=n.n(s),d=n(3),f=n.n(d),b=n(12),p=n.n(b),h=n(51),m=n(991),v=n(1599),g=function(e){var t=e.className,n=void 0===t?"":t,r=e.extra,a=void 0===r?{}:r,o=a.ua,i=void 0===o?{}:o,c=a.isVip,l=void 0!==c&&c,s="https://www.zhihu.com/settings/filter";return u.a.createElement(h.b,{block:"KfeCollection-FeedBlockEntry"},u.a.createElement(h.a,{zaType:"Button",extra:{link:{url:s}},onClick:function(){l?Object(v.a)(s,i):m.a.show()},zaText:"设置屏蔽关键词",shouldTrackShow:!0},u.a.createElement("div",{className:p()("KfeCollection-FeedBlockEntry-root",n)},u.a.createElement("div",{className:"KfeCollection-FeedBlockEntry-title"},"设置屏蔽关键词"),u.a.createElement("img",{className:"KfeCollection-FeedBlockEntry-img",src:"https://pic3.zhimg.com/v2-e5f10c5bc3593ca097cb7bfc5502d9b9.png"}))))};g.propTypes={className:f.a.string,extra:f.a.shape({ua:f.a.object,isVip:f.a.bool}).isRequired};var O=g,j=n(927),y=n(20),w=n(19),C=n(23),k=n(437),x=n(35),S=n(136),A=n(1481),T=n(950),R=n(9);function E(e,t,n){return t&&n?function(t,r){var a=e.relationship,o=(a=void 0===a?{}:a).isAuthor,i={toggler:Object(l.b)(x.c,{preset:"plain",className:"OptionsButton",icon:j.a,"aria-label":"更多"}),reversed:!0,onOpen:function(){return function(e,t){C.a.trackEvent(e,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))}(t(),r)},menuClassName:"ItemOptions-selfMenu",itemClassName:"ItemOptions-selfMenuItem"};if(!o)return Object(R.e)(S.c,Object.assign(Object.assign({},i),{},{key:"options"}),n({itemClassName:"ItemOptions-selfMenuItem",getContainer:t}))}:null}var I=n(1898),N=n(34),B=n(1083),z=n.n(B),P=n(1034),_=n(963),L=n(1e3),M=n(1027),D=n(99),U=n(73),F=n.n(U),V=n(1004),q=n(1362),G=n(1376),H=n(1075),W=n(993),K=n(1165),Z=n(65),Q=n(43),Y=n(1424),J=n(611);function X(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var $=function(e){var t=e.commentsShown,n=void 0!==t&&t,r=e.onCommentButtonClick,a=void 0===r?F.a:r,o=e.eduSection,i=e.author,c=e.renderOptions,u=o.commentCount,d=o.isLiked,f=o.id,b=o.voting,p=o.voteCount,h=o.title,m=o.type,v=o.routeUrl,g=Object(Q.p)(i),O=Object(Z.p)(),j=Object(s.useState)(!1),w=X(N.a,j,2),C=w[0],k=w[1],x=Object(s.useCallback)((function(){k(!0)}),[]),S=Object(s.useCallback)((function(){k(!1)}),[]),A=Object(y.useDispatch)(),T=Object(D.a)((function(e){A(Object(J.b)(f,e))})),R=Object(D.a)((function(e,t){A(Object(J.c)(f,e,t))}));return Object(l.c)(l.a,{children:[Object(l.b)(G.a,{renderChildren:function(e){return[{name:e.Vote,component:Object(l.b)(q.c,{defaultStatus:Object(Y.a)(b),defaultVoteUpCount:p,onChange:R})},{name:e.Comment,component:Object(l.b)(V.a,{onClick:a,commentsShown:n,count:u,positionStatus:"normal"})},{name:e.Share,component:Object(l.b)(W.a,{id:f,type:m,url:v,title:h,authorName:i.name,css:{marginLeft:"24px"}})},{name:e.Favlist,component:Object(l.b)(K.a,{onClick:x,label:"收藏",showIcon:!O},"favlist")},{name:e.Like,component:Object(l.b)(q.b,{currentIsLiked:Boolean(d),css:{marginLeft:"24px"},onClick:T})},{name:e.Unknown,component:g?null:c()}]}}),Object(l.b)(H.a,{id:f,type:"edu_section",shown:C,onClose:S,zaEnabled:!0})]})};$.defaultProps={renderOptions:function(){return null}};var ee=$,te=n(1019),ne=n(439),re=n(905),ae=n(58),oe=n(961),ie=n(40),ce=n(1028),le=function(e){var t,n;return(null==e||null===(t=e.thumbnailExtraInfo)||void 0===t?void 0:t.videoId)||(null==e||null===(n=e.video)||void 0===n?void 0:n.videoId)},se=n(154),ue=n(2969),de=n(1031),fe=function(e){var t=e.className,n=e.imgSrc,r=e.href,a=e.title,o=e.children,i=e.imgStyle,c=void 0===i?{}:i,s=e.zaBlockText,u=void 0===s?"":s;return Object(l.b)(ne.b,{href:r,shouldTrackShow:!0,zaType:"Card",zaAction:"OpenUrl",view:{elementLocation:{block:{blockText:u}}},extra:{link:{url:r}},target:"_blank",children:Object(l.c)(ae.Flex,{height:"72px",className:t,bg:"GBK10A",p:"0 20px 0 16px",alignItems:"center",justifyContent:"space-between",children:[Object(l.c)(ae.Flex,{children:[n&&Object(l.b)(ae.Image,{mr:"16px",src:n,css:Object.assign({width:"64px",height:"40px",borderRadius:"4px",objectFit:"cover"},c)}),Object(l.c)(ae.Box,{children:[Object(l.b)(ae.Text,{fontWeight:500,fontSize:"15px",lineHeight:"18px",mb:"4px",color:"GBK02A",maxWidth:"400px",css:Object(de.a)(1),children:a}),Object(l.b)(ae.Text,{fontSize:"13px",lineHeight:"18px",color:"GBK06A",children:o})]})]}),Object(l.b)(ue.b,{fill:"#999999"})]})})},be=function(e){var t=e.eduSection,n=t.routeUrl,r=t.playCount,a=t.courseNum,o=t.courseTitle,i=t.courseImageInfo,c=(i=void 0===i?{}:i).url,s=void 0===c?"":c;return Object(l.c)(fe,{imgSrc:s,href:n,title:"来自视频课：".concat(o),zaBlockText:"视频课卡片",children:[a?"共 ".concat(a," 集"):""," ",a&&r?"·":""," ",r?"".concat(Object(se.cnNiceNumber)(r),"次学习"):""]})},pe=function(e){var t=e.eduSection,n=void 0===t?{}:t,r=e.author,a=e.expanded,o=e.alwaysShowVolumeButton,i=e.videoRef,c=n.title,u=n.routeUrl,d=n.id,f=n.attachedInfoBytes,b=le(n),p=Object(s.useRef)(),h=Object(re.a)(p,i);return Object(ce.a)({videoId:b,iframeRef:p}),Object(l.c)(T.e,{className:"EduSectionItem",data:n,title:Object(l.b)(l.a,{children:Object(l.b)(ne.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(l.b)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:c})})}),link:u,lastreadTouchable:!0,"data-zop":JSON.stringify({authorName:null==r?void 0:r.name,itemId:d,title:c,type:"edu_section"}),children:[Object(l.c)(ae.Box,{my:"16px",children:[Object(l.b)("div",{className:"EduSectionItem-video",css:{margin:"0px"},children:Object(l.b)(te.a,{ref:h,className:"EduSectionItem-player",type:"video",src:"https://".concat(ie.a.videoHost,"/video/").concat(b,"?").concat(new URLSearchParams([["itemId",d],["itemType","edu_section"]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:o},zaProps:{type:"EduSection",token:n.id,attachedInfo:f}})}),a&&Object(l.b)(be,{eduSection:n})]}),a&&Object(l.b)(oe.a,{preset:"plain",author:r,userLinkV2:!0},"authorInfo")]})},he=n(1793);function me(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ve(e){var t=e.eduSection,n=e.eduSection,r=n.id,a=n.description,o=void 0===a?"":a,i=n.author,c=e.onToggleExpand,u=e.renderOptions,d=e.truncateDisabled,f=e.limit,b=Object(y.useSelector)((function(e){return z()(i)?e.entities.users[i]:i})),p=Object(s.useState)(!1),h=me(N.a,p,2),m=h[0],v=h[1],g=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),O=me(N.a,g,2),j=O[0],w=O[1],C=function(e){v(e),c&&c(e)};return Object(l.c)("div",{children:[Object(l.b)(he.a,{eduSection:t,renderContent:function(){return Object(l.b)(pe,{eduSection:t,author:b,expanded:m})},renderActions:function(){return Object(l.b)(L.b,Object.assign(Object.assign({excerpt:Object(P.c)(o,200),html:o,cover:null,hasVideo:!1},f?{limit:f}:{}),{},{truncateDisabled:d,allowCollapseWithEmptyExcerpt:!0,expanded:m,onToggleExpend:C,data:Object.assign(Object.assign({},t),{},{id:r}),children:Object(l.b)(ee,{className:"EduSectionItem-toolbar",eduSection:t,author:b,commentsShown:j.commentsShown,onCommentButtonClick:function(e,t){return w(t)},renderOptions:u})}))}}),Object(l.b)(_.a,{className:"EduSectionItem-comment",containerClassName:"EduSectionItem-commentContainer",parent:t,shown:j.commentsShown,commentPattern:j.commentPattern,autoFocus:j.autoFocus,onClose:function(){return w(Object.assign(Object.assign({},j),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})}ve.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var ge=Object(w.compose)(Object(M.a)((function(e){var t=e.eduSection;return{content:{type:"EduSection",id:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:le(t)}}}}})))(ve),Oe=n(1425),je=n(118),ye=n(1361),we=n(1589);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var ke=function(e){Object(o.a)(n,e);var t=Ce(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.liveCourse,a=t.liveCourse,o=a.id,i=a.type,c=a.subject,s=a.courseMemberCount,u=a.liveCount,d=a.price,f=a.promotionPrice,b=a.headImageMobile,p=a.likedNum,h=a.isLiked,m=a.description,v=a.speakers,g=void 0===v?[]:v,O=t.lastreadTouchable,j=t.renderOptions,y=t.zaIds.options,w="/lives/courses/".concat(o);if(n!==T.c.interactive)return Object(l.b)(T.e,{data:r,link:w,title:Object(l.b)("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:c})});Boolean(g.length)&&"".concat(g[0].member.name).concat(g.length>1?"等":"","的私家课 · ").concat(u," 节课");var C={id:o,type:i};return Object(l.c)("div",{className:"LiveCourseItem",children:[b&&Object(l.b)("a",{className:"LiveCourseItem-cover",href:w,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(je.imgUrl)(b,"640w"),srcSet:"".concat(Object(je.imgUrl)(b,"r")," 2x"),alt:c})}),Object(l.b)(T.e,{data:r,link:w,title:Object(l.b)("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:c}),lastreadTouchable:O,children:Object(l.c)(L.b,{excerpt:"",limit:60,limitWithImage:60,html:m||"",data:r,extra:Object(l.c)(T.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),Object(se.formatNumber)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"课程节数："}),Object(se.formatNumber)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof f?Object(l.c)("span",{className:"LiveItem-price",children:[Object(we.a)(f),Object(l.b)("del",{children:Object(we.a)(d)})]}):Object(we.a)(d)]})]}),children:[Object(l.b)(ye.a,Object.assign(Object.assign({},C),{},{liked:h,count:p,icon:"thank"})),Object(l.b)(W.a,Object.assign(Object.assign({},C),{},{url:w,title:c})),j&&j((function(){return e.contentItem}),y)]})})]})}}]),n}(s.Component);ke.propTypes={preset:f.a.oneOf(Object.values(T.c)),renderOptions:f.a.func,zaIds:f.a.object},ke.defaultProps={zaIds:{}};var xe=Object(k.b)((function(e){var t=e.liveCourse,n=e.trackCardShow,r=void 0===n||n;return{module:"LiveCourseItem",card:{content:{type:"LiveCourse",id:t.id}},trackCardShow:r}}))(ke),Se=n(1885),Ae=n(1471),Te=n(1476),Re=n(1902),Ee=n(1003),Ie=n(1470),Ne=n(1593),Be=n(1486),ze=n(1427);n(1428);function Pe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function _e(e){var t=e.target,n=e.target,r=n.id,a=n.attachment.url,o=n.description,i=n.title,c=n.author,u=n.thumbnailExtraInfo,d=n.isReviewing,f=n.isUpdateReviewing,b=e.lastreadTouchable,p=e.preset,h=void 0===p?"primary":p,m=e.onToggleExpand,v=e.renderOptions,g=e.renderActionButtons,O=e.toggleUninterest,j=u||{},w=j.videoId,C=j.url,k=Object(s.useRef)();Object(ce.a)({videoId:w,iframeRef:k});var x=Object(y.useSelector)((function(e){return z()(c)?e.entities.users[c]:c})),S=Object(Q.p)(x),A=Object(s.useState)(!1),R=Pe(N.a,A,2),E=R[0],I=R[1],B=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),M=Pe(N.a,B,2),D=M[0],U=M[1],F=Object(ze.a)(h,E,x),V=Pe(N.a,F,1)[0];return Object(l.b)(Ee.a,{data:t,children:Object(l.c)(T.e,{className:"ZVideoItem",data:t,title:Object(l.b)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:i}),link:a,meta:V,lastreadTouchable:b,"data-zop":JSON.stringify({authorName:null==x?void 0:x.name,itemId:r,title:i,type:"zvideo"}),children:[S&&(d||f)&&Object(l.b)(Be.a,{}),E&&w&&Object(l.b)("div",{className:"ZVideoItem-video",children:Object(l.b)(te.a,{className:"ZVideoItem-player",type:"video",ref:k,src:"https://".concat(ie.a.videoHost,"/video/").concat(w,"?").concat(new URLSearchParams([["itemId",r],["itemType","zvideo"]]).toString()),iframeProps:{allowFullScreen:!0},zaProps:{token:r}})}),E&&Object(l.b)(Ne.a,{}),Object(l.b)(L.b,{excerpt:Object(P.c)(o),html:o,cover:C,hasVideo:!0,truncateDisabled:!0,allowCollapseWithEmptyExcerpt:!0,expanded:E,onToggleExpend:function(e){I(e),m&&m(e)},children:Object(l.b)(Ie.a,{className:"ZVideoItem-toolbar",zvideo:t,author:x,commentsShown:D.commentsShown,onCommentButtonClick:function(e,t){return U(t)},renderOptions:v,renderActionButtons:g,toggleUninterest:O})}),Object(l.b)(_.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:t,shown:D.commentsShown,commentPattern:D.commentPattern,autoFocus:D.autoFocus,onClose:function(){return U(Object.assign(Object.assign({},D),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}_e.defaultProps={renderOptions:function(){return[null]}};var Le=Object(w.compose)(Object(M.a)((function(e){var t,n=e.target;return{content:{type:"Answer",token:String(n.id)},extra:{mediaInfo:{videoInfo:{videoId:null===(t=n.thumbnailExtraInfo)||void 0===t?void 0:t.videoId}}}}})))(_e),Me=n(1667),De=n(1065),Ue=n(1872),Fe=n(1348),Ve=n(1598);function qe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Ge(e){var t,n,r=e.zvideo,a=e.zvideo,o=a.id,i=a.description,c=void 0===i?"":i,u=a.title,d=a.author,f=a.isVisible,b=a.creationRelationship,p=a.attachedInfoBytes,h=e.lastreadTouchable,m=e.preset,v=void 0===m?"primary":m,g=e.onToggleExpand,O=e.renderOptions,j=e.couldShowHiddenSign,w=e.renderActionButtons,C=e.shouldAlwaysShowPlayer,k=e.truncateDisabled,x=e.limit,S=e.showMetaAfterPlayer;r.thumbnailExtraInfo&&(t=r.thumbnailExtraInfo.videoId,n=r.thumbnailExtraInfo.url),r.video&&(t=r.video.videoId,n=r.video.thumbnail);var A=Object(y.useSelector)((function(e){return z()(d)?e.entities.users[d]:d})),R=Object(Q.p)(A),E=Object(s.useState)(!1),I=qe(N.a,E,2),B=I[0],M=I[1],D=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),U=qe(N.a,D,2),F=U[0],V=U[1],q=Object(ze.a)(v,B,A,b),G=qe(N.a,q,1)[0],H=R&&!f&&j,W="https://".concat(ie.a.wwwHost,"/zvideo/").concat(o),K=t&&(C||B),Z=Object(De.isCoCreateRelation)(b),Y=Object(Ve.a)({expanded:B,isVideoCoverFullSize:C&&S,renderFlag:Z}),J=Z?140:200;return Object(l.b)(Ee.a,{data:r,children:Object(l.c)(T.e,{className:"ZVideoItem",data:r,title:Object(l.c)(l.a,{children:[H&&Object(l.c)("span",{className:"ZVideoItem-hiddenSign",children:[Object(l.b)(Me.a,{}),"隐藏"]}),Object(l.b)(ne.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(l.b)("a",{href:W,target:"_blank",rel:"noopener noreferrer",children:u})})]}),link:W,meta:S?null:G,lastreadTouchable:h,"data-zop":JSON.stringify({authorName:null==A?void 0:A.name,itemId:o,title:u,type:"zvideo"}),children:[R&&(r.isReviewing||r.isUpdateReviewing)&&Object(l.b)(Be.a,{}),K&&Object(l.c)(ae.Box,{my:"16px",children:[Object(l.b)("div",{className:"ZVideoItem-video",css:{margin:"0px"},children:Object(l.b)(Ue.a,{itemId:o,itemType:"zvideo",videoId:t,zaProps:{type:"Zvideo",token:r.id,attachedInfo:p}})}),B&&Object(l.b)(De.CreationRelationshipBar,{id:o,creationRelationship:b})]}),S&&G,Object(l.b)(L.b,Object.assign(Object.assign({excerpt:Object(P.c)(c,J),html:c,cover:C?null:n,hasVideo:!C},x?{limit:x}:{}),{},{truncateDisabled:k,allowCollapseWithEmptyExcerpt:!0,expanded:B,onToggleExpend:function(e){M(e),g&&g(e)},data:Object.assign(Object.assign({},r),{},{id:o}),prefix:Y,children:Object(l.b)(Ie.a,{className:"ZVideoItem-toolbar",zvideo:r,author:A,commentsShown:F.commentsShown,onCommentButtonClick:function(e,t){return V(t)},renderOptions:O,renderActionButtons:w})})),Object(l.b)(_.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:r,shown:F.commentsShown,commentPattern:F.commentPattern,autoFocus:F.autoFocus,onClose:function(){return V(Object.assign(Object.assign({},F),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}Ge.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var He=Object(w.compose)(Object(M.a)((function(e){var t=e.zvideo;return{content:{type:"Zvideo",token:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:t.id}}}}})),Object(y.connect)((function(e,t){return Object.assign(Object.assign({},t),{},{zvideo:Object.assign(Object.assign({},t.zvideo),{},{creationRelationship:Object(Fe.c)(t.zvideo)})})})))(Ge),We=n(32),Ke=n(198),Ze=n(216),Qe=n(1123),Ye=n(157);function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var Xe=function(e){Object(o.a)(n,e);var t=Je(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.eventcard,r=n.linkTitle,a=n.linkUrl,o=n.title,i=n.eventUrl,c=n.extraInfo,s=n.content,u=n.bannerUrl,d=t.eventcard,f=t.lastreadTouchable,b=t.renderOptions,p=t.zaIds.options;return Object(l.c)("div",{className:"EventcardItem",children:[u&&Object(l.b)("a",{className:"EventcardItem-cover",href:i,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:u,srcSet:"".concat(u," 2x"),alt:o})}),Object(l.c)(T.e,{data:d,link:i,onRef:function(t){e.contentItem=t},title:Object(l.b)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:o}),lastreadTouchable:f,children:[Object(l.b)("div",{className:"EventcardItem-content",children:s}),Object(l.c)(T.a,{children:[Boolean(r)&&Object(l.b)(Ye.a,{a:!0,color:"blue",to:a,children:r}),Object(l.b)("span",{children:c}),b&&b((function(){return e.contentItem}),p)]})]})]})}}]),n}(s.Component);Xe.propTypes={preset:f.a.oneOf(Object.values(T.c)),zaIds:f.a.object,renderOptions:f.a.func};var $e=Object(k.b)((function(e){var t=e.trackCardShow;return{module:"EventItem",trackCardShow:void 0===t||t}}))(Xe),et=n(1081),tt=n(159),nt=n(174),rt=n(1275),at=n(947),ot=n(1641),it=n(1445),ct=n(52),lt=Object.assign;var st=function(e){return u.a.createElement(ct.a,lt({width:"40",height:"40",viewBox:"0 0 40 40"},e),u.a.createElement("path",{d:"M20 12c6.904 0 12.5 5.596 12.5 12.5S26.904 37 20 37c-6.903 0-12.5-5.596-12.5-12.5S13.097 12 20 12zm0 16.826l3.222 2.061c.76.486 1.218.165 1.016-.72l-.886-3.892 2.867-2.572c.677-.608.494-1.165-.413-1.241l-3.734-.314-1.467-3.693c-.334-.841-.876-.841-1.21 0l-1.467 3.693-3.734.314c-.917.077-1.092.631-.413 1.24l2.867 2.573-.886 3.891c-.202.886.253 1.209 1.016.721L20 28.826zM29.525 3a1 1 0 01.79 1.612l-4.336 5.6a1 1 0 01-.79.388h-.446a1 1 0 01-.853-.479l-3.792-6.208A.6.6 0 0120.61 3h8.915zm-8.692 6.043a1 1 0 01-.83 1.557h-5.468a1 1 0 01-.81-.413l-4.06-5.6A1 1 0 0110.476 3h5.772a1 1 0 01.83.443l3.756 5.6z"}))},ut=function(e){return"FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"===e?{labelInfo:{foregroundColor:{alpha:1,group:"GYL02A"},backgroundColor:{alpha:.08,group:"GYL02A"},text:"专业",type:"recognition"},extra:{customIcon:st,customIconClassName:"FeedSource-recognizeIcon"}}:null},dt=n(2),ft=n(1422),bt=n(1074),pt=n(1906),ht=/({})/,mt={people:{Component:at.a,type:"user"},topic:{Component:bt.a},column:{Component:ft.a},roundtable:{Component:pt.a}},vt=function(e){var t=e.actors,n=e.template,r=t.slice(0,5);return Object(l.b)(et.CJKSpace,{children:n.split(ht).map((function(e){return"{}"===e?r.map((function(e,t){if(!mt[e.type])return Object(l.c)("span",{children:[e.title,t<r.length-1&&"、"]},e.id);var n=mt[e.type],a=n.Component,o=n.type,i=void 0===o?e.type:o,c=Object.assign(Object(dt.a)({},i,e),"people"===e.type&&{noBadge:!0});return Object(l.c)("span",{children:[Object(l.b)(a,Object.assign(Object.assign({},c),{},{children:e.name||e.title})),t<r.length-1&&"、"]},e.id)})):e}))})},gt=/{}/,Ot=["pin","answer","article"],jt=["FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"],yt=Object(nt.a)((function(e){var t=e.feed,n=(e.currentUser,t.actionTextTpl),r=void 0===n?"":n,a=t.createdTime,o=t.actors,i=void 0===o?[]:o,c=t.verb,u=void 0===c?"":c,d=u.includes("MEMBER"),f=Object(s.useMemo)((function(){return d&&1e3*a<=Date.now()&&Object(tt.toRelativeString)(a)}),[d,a]);if(Object(it.b)(t)){var b=i[0],p=r.replace(gt,"");return Object(l.b)("div",{className:"FeedSource",children:Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.c)(et.CJKSpace,{children:[Object(l.b)(at.a,{user:b,noHoverCard:!1,badgeProps:{css:{margin:"0 .3em"}},children:b.name}),p]}),f&&[Object(l.b)(rt.a,{},"bull"),f]]})})}return Object(l.c)("div",{className:"FeedSource",children:[Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.b)(vt,{actors:i,template:r}),jt.includes(u)&&Object(l.b)(ot.a,Object.assign(Object.assign({},ut(u)),{},{className:"FeedSource-labelIcon"})),f&&[Object(l.b)(rt.a,{},"bull"),f]]}),t.target&&Ot.includes(t.target.type)&&Object(l.b)(oe.a,{className:"FeedSource-byline",author:t.target.author,preset:"plain",extra:!1})]})})),wt=n(1116),Ct=n(475);function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function xt(e){return e.closest(".TopstoryItem").querySelector(".ContentItem")}var St=function(e){Object(o.a)(n,e);var t=kt(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleUninterest=function(){var t=e.props,n=t.zaIgnoreId,r=t.getContainer,a=e.props,o=a.item,i=o.id,c=o.type,l=o.ad,s=o.isUninterest,u=a.toggleUninterest,d=a.type,f="feed_advert"===c;f&&Object(Ke.c)(l.closeTrack);var b=f?xt(e.el):r();return C.a.trackEvent(b,Object.assign({action:s?"UnIgnore":"Ignore",element:"Button",is_intent:!0},n&&{id:n})),u(i,d)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.ua,r=t.isVip,a=Object(l.b)(h.a,{as:S.b,zaAction:"Ignore",zaType:"Button",className:this.props.itemClassName,onClick:this.handleToggleUninterest,onRef:function(t){e.el=t},children:"不感兴趣"}),o=Object(l.b)(S.b,{className:"TopstoryItem-menuItem",onClick:this.props.authRequired((function(){})),children:Object(l.b)(O,{extra:{ua:n,isVip:r}})});return"feed_advert"===this.props.item.type?Object(l.c)(S.c,{className:"TopstoryItem-rightButton",toggler:Object(l.c)(x.c,{onRef:function(t){e.el=t},className:"TopstoryItem-advertButton",preset:"plain",children:["广告",Object(l.b)(wt.a,{center:!0})]}),children:[Object(l.b)(S.b,{className:"TopstoryItem-menuItem",onClick:this.handleToggleUninterest,children:"不感兴趣"}),Object(l.b)(S.b,{className:"TopstoryItem-menuItem",tag:"a",target:"_blank",href:"/promotion-intro",children:"知乎广告介绍"}),o]}):Object(l.c)(s.Fragment,{children:[a,o]})}}]),n}(s.Component);St.propTypes={zaIgnoreId:f.a.number,getContainer:f.a.func};var At=Object(y.connect)(null,{toggleUninterest:Ct.n})(St),Tt=n(2325),Rt=n(1394);function Et(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var It=Object(w.compose)(Object(M.a)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)},block:"写回答卡片"}})))((function(e){var t=e.question,n=e.lastreadTouchable,r=e.renderOptions,a=e.zaInfos,o=t.id,i=t.title,c=t.content,u=t.excerpt,d=t.viewCount,f=t.answerCount,b=t.recReason,p=a.options,h=a.title,m=a.expand,v=Object(s.useState)(!0),g=Et(N.a,v,2),O=g[0],j=g[1],y=Object(s.useState)(null),w=Et(N.a,y,2),C=w[0],k=w[1];return Object(l.c)("div",{className:"TopstoryQuestionAskItem",children:[Object(l.c)("div",{className:"TopstoryQuestionAskItem-hint",children:[Object(l.b)(Tt.a,{center:!0}),b]}),Object(l.b)(T.e,{data:t,title:Object(l.b)("a",Object.assign(Object.assign({href:"/question/".concat(o),target:"_blank",rel:"noopener noreferrer"},h&&{"data-za-detail-view-id":h}),{},{children:i})),lastreadTouchable:n,onRef:k,children:Object(l.c)(L.b,{html:c,excerpt:u,limit:60,limitWithImage:60,zaIds:{expand:m},onToggleExpend:function(){return j(!O)},children:[Object(l.c)(Ye.a,{className:"TopstoryQuestionAskItem-writeAnswerButton",preset:"outline",color:"blue",to:"/question/".concat(o,"?write"),target:"_blank","data-za-detail-view-id":5121,"data-za-detail-view-action":"Answer",children:[Object(l.b)(Rt.a,{}),"写回答"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(se.formatNumber)(d)," 次浏览"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(se.formatNumber)(f)," 个回答"]}),r&&r((function(){return C}),p)]})})]})})),Nt=n(1101),Bt=n(1639),zt=n(4),Pt=n(121),_t=n.n(Pt),Lt=n(1373);function Mt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Dt=_t()((function(e){return e.findIndex((function(e){return"annotation"===e.name}))}),(function(e){return e.map((function(e){return e.name})).join("-")})),Ut=Object(l.b)(Lt.a,{annotationDetail:{showOuter:!0,reasonDescription:"品牌提问"}},"BrandQuestion");var Ft=[function(e,t){var n=e.componentList,r=t.item.target,a=t.tabType;if(!Boolean("recommend"===a&&r.question&&"commercial"===r.question.questionType))return e;var o=Dt(n);if(n[o].component){var i=Mt(zt.a,n);return i[o]={name:"annotation",component:Ut},Object.assign(Object.assign({},e),{},{componentList:i})}return e}],Vt=n(5),qt=n(460);var Gt=function(e){var t=e.node,n=e.data,r=void 0===n?{}:n;return Object(s.useEffect)((function(){if(t&&r){var e=Object(Vt.camelizeKeys)(r).viewXTracks,n=void 0===e?[]:e;Object(qt.g)(t,n)}}),[t,r]),null},Ht=n(945),Wt=n(83),Kt=n(1274),Zt=n(161),Qt=function(e){return null==e?void 0:e.forEach((function(e){return Object(Wt.e)(e,{})}))};function Yt(e){var t=e.promotionExtra,n=e.children,r=Object(s.useRef)(null),a=Object(s.useMemo)((function(){return Object(Kt.a)(t)}),[t]);Object(s.useEffect)((function(){a&&(Qt(a.impression_tracks),Object(Ht.onViewedOnce)(r.current,(function(){return Qt(a.view_tracks)})))}),[a]);var o=Object(s.useCallback)((function(){a&&Qt(a.click_tracks)}),[a]);return Object(l.c)("div",{ref:r,children:[Object(l.b)(Zt.a,{children:Object(l.b)(Gt,{data:a,node:r.current})}),"function"==typeof n?n(o):n]})}Yt.propTypes={promotionExtra:f.a.string.isRequired,children:f.a.oneOfType([f.a.func,f.a.any]).isRequired};function Jt(e){var t,n=e.item,r=e.tabType,a=e.isFollowTab,o=e.preset,i=e.hasAuthorBeforeContent,c=e.handleExpand,u=e.renderIgnoreButton,d=n.actionTextTpl,f=n.actors,b=n.target,p=n.promotionExtra,h=Object(s.useMemo)((function(){return function(e){var t;if(2===(null===(t=e.attachment)||void 0===t?void 0:t.type)){var n=e.attachment,r=n.parentTitle,a=n.isComplete,o=n.parentContentToken,i=n.parentPlayCount,c=n.parentVoteupCount,l=n.splitStart,s={videoId:e.thumbnailExtraInfo.videoId,zvideoId:o,title:r,playCount:i,voteupCount:c,isComplete:a,startTime:l};return Object.assign(Object.assign({},e),{},{videoAnswerData:s})}return e}(b)}),[b]),m="recommend"===r,v=Object(s.useMemo)((function(){return null==f?void 0:f.find((function(e){return"people"===e.type}))}),[f]),g=Object(l.b)(Nt.a,Object.assign(Object.assign({answer:h},i&&{formatContent:it.a}),{},{action:a&&"{}赞同了回答"===d&&"voted",actor:v,preset:o,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,renderExtraOptions:u,onToggleExpand:c,zaInfos:Qe.c,renderActionButtons:(t={tabType:r,item:n},function(e){var n=Ft.reduce((function(e,n){return n(e,t)}),e);return Object(Bt.b)(n)}),hideCommercialInviteLabel:!0,shouldAlwaysShowPlayer:m,isRecommend:m}));return p?Object(l.b)(Yt,{promotionExtra:p,children:function(e){return Object(s.cloneElement)(g,{trackPromotionClick:e})}}):g}Jt.propTypes={item:f.a.object.isRequired,tabType:f.a.oneOf(["recommend","follow"]),isFollowTab:f.a.bool,preset:f.a.string,hasAuthorBeforeContent:f.a.bool,handleExpand:f.a.func,renderIgnoreButton:f.a.func};var Xt=n(1294);function $t(e){var t=e.item,n=e.isFollowTab,r=e.preset,a=e.hasAuthorBeforeContent,o=e.handleExpand,i=e.renderOptions,c=t.actionTextTpl,u=t.actors,d=t.target,f=t.promotionExtra,b=Object(s.useMemo)((function(){return null==u?void 0:u.find((function(e){return"people"===e.type}))}),[u]),p=Object(l.b)(Xt.a,Object.assign(Object.assign({article:d},a&&{formatContent:it.a}),{},{action:n&&("{}赞了文章"===c||"{}赞同了文章"===c)&&"voted",actor:b,preset:r,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,onToggleExpand:o,renderOptions:i}));return f?Object(l.b)(Yt,{promotionExtra:f,children:function(e){return Object(s.cloneElement)(p,{trackPromotionClick:e})}}):p}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}$t.propTypes={item:f.a.object.isRequired,isFollowTab:f.a.bool,preset:f.a.string,hasAuthorBeforeContent:f.a.bool,handleExpand:f.a.func,renderOptions:f.a.func};var tn={question:"question",answer:"answer",question_ask:"question_ask",article:"article",column:"column",collection:"collection",roundtable:"roundtable",live_course:"live_course",live:"live",ebook:"ebook",pin:"pin",eventcard:"eventcard",zvideo:"zvideo",edu_section:"edu_section"},nn=function(e){Object(o.a)(n,e);var t=en(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={preset:"special-plain",hasAuthorBeforeContent:"recommend"===e.props.type,limitProps:{}},e.handleExpand=function(t){var n=e.props.type;e.setState({preset:"recommend"===n&&t?"plain":"special-plain",hasAuthorBeforeContent:"recommend"===n&&!t})},e.handleToggleUninterest=function(t){var n=e.props,r=n.item.id,a=n.toggleUninterest,o=n.type;return C.a.trackEvent(t.target,{id:Qe.c.ignore,action:"Ignore",element:"Button",is_intent:!0}),a(r,o)},e.renderZVideoOptions=function(t,n){return[Object(l.c)(S.c,{toggler:Object(l.b)(x.c,{preset:"plain",className:"OptionsButton",icon:j.a,"aria-label":"更多"}),children:[Object(l.b)(h.a,{zaType:"Button",zaAction:"Ignore",as:S.b,className:"ZVideoToolbar-menuItem",onClick:e.handleToggleUninterest,children:"不感兴趣"}),Object(l.b)(S.b,{className:"TopstoryItem-menuItem",onClick:e.props.authRequired((function(){})),children:Object(l.b)(O,{extra:{ua:t,isVip:n}})})]},"options")]},e.renderItem=function(t,n){var r,a=e.props,o=a.ua,i=a.currentUser,c=((null==i?void 0:i.vipInfo)||{}).isVip,s=t.target,u=t.actor,d=t.actionTextTpl,f=e.state,b=f.preset,p=f.hasAuthorBeforeContent,h="follow"===n,m="recommend"===n,v=m?function(r){return Object(l.b)(At,Object.assign({type:n,item:t,zaIgnoreId:Qe.c.ignore,ua:o,isVip:c,authRequired:e.props.authRequired},r))}:void 0,g=v?E(s,i,v):void 0;switch(s.type){case tn.question:return Object(l.b)(Te.a,{preset:T.c.interactive,question:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.question_ask:return Object(l.b)(It,{question:s,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.answer:return Object(l.b)(Jt,{item:t,tabType:n,isFollowTab:h,preset:b,hasAuthorBeforeContent:p,handleExpand:e.handleExpand,renderIgnoreButton:v});case tn.article:return Object(l.b)($t,{item:t,isFollowTab:h,preset:b,hasAuthorBeforeContent:p,handleExpand:e.handleExpand,renderOptions:g});case tn.column:return Object(l.b)(A.a,{preset:T.c.interactive,column:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.collection:return Object(l.b)(Oe.a,{preset:T.c.interactive,favlist:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.roundtable:return Object(l.b)(Re.a,{preset:T.c.interactive,roundtable:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c});case tn.live_course:return Object(l.b)(xe,{liveCourse:s,preset:T.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:Qe.c});case tn.live:return Object(l.b)(Se.a,{live:s,preset:T.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:Qe.c});case tn.ebook:return Object(l.b)(I.a,{ebook:s,preset:T.c.interactive,trackCardShow:!1,lastreadTouchable:!0});case tn.pin:return Object(l.b)(Ae.a,{action:"{}赞了想法"===d&&"voted",actor:u,pin:s,preset:"plain",trackCardShow:!1,lastreadTouchable:!0});case tn.zvideo:return 1===(null===(r=s.attachment)||void 0===r?void 0:r.type)?Object(l.b)(Le,{target:s,preset:b,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,c)},lastreadTouchable:!0}):Object(l.b)(He,{zvideo:s,preset:b,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,c)},lastreadTouchable:!0,shouldAlwaysShowPlayer:m,showMetaAfterPlayer:m});case tn.eventcard:return Object(l.b)($e,{trackCardShow:!1,eventcard:s,lastreadTouchable:!0,renderOptions:g,zaIds:Qe.c});case tn.edu_section:return Object(l.b)(ge,{eduSection:s,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,c)},lastreadTouchable:!0});default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.type,r=e.className;return t.target.isDelete?null:Object(l.c)("div",{className:p()("Feed",r),children:["follow"===n&&Object(l.b)(yt,{feed:t}),this.renderItem(t,n)]})}}]),n}(s.PureComponent);nn.propTypes={item:f.a.object.isRequired,type:f.a.oneOf(["recommend","follow"]),className:f.a.string};var rn=Object(w.compose)(Ze.a,Object(y.connect)((function(e){return{ua:e.env.userAgent}})),Object(k.b)((function(e){var t=e.item,n=t.id,r=t.attachedInfo,a=t.target,o=t.target,i=o.id,c=o.type,l=t.dataZaIndex;return{module:"FeedItem",index:String(void 0===l?0:l),isAd:!1,attachedInfoBytes:r,card:{card_type:"Feed",feed_id:n,has_image:Boolean(a.thumbnailExtraInfo&&"image"===a.thumbnailExtraInfo.type),has_video:Boolean(a.thumbnailExtraInfo&&"video"===a.thumbnailExtraInfo.type),content:Object.assign(Object.assign({type:We.eb[c]},Object(Ke.a)(c,i)),{},{video_id:a.thumbnailExtraInfo&&a.thumbnailExtraInfo.videoId})},view:{id:2743},trackCardShow:!0}})))(nn)},1639:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"a",(function(){return N}));var r=n(1343),a=n(1),o=n(14),i=n(15),c=n(16),l=n(17),s=n(8),u=n(4),d=n(0),f=n(19),b=n(3),p=n.n(b),h=n(20),m=n(71),v=n.n(m),g=n(23),O=n(51),j=n(888),y=n(35),w=(n(136),n(92)),C=n(221),k=n(216),x=n(443),S=n(32),A=n(1804);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var R={answer:p.a.object.isRequired,renderThankButtonText:p.a.func,zaInfo:p.a.number},E=[].concat(function(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}(u.a,Object.keys(R)),["updateAnswerThank","dispatch","authRequired","isLogin","currentUser"]),I=function(e){Object(c.a)(n,e);var t=T(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).buttonRef=Object(d.createRef)(),e.handleUpdateThanked=e.props.authRequired((function(){var t=e.props,n=t.answer,r=n.id,a=n.relationship,o=(a=void 0===a?{}:a).isThanked,i=t.zVideoId,c=t.updateAnswerThank,l=t.zaInfo,s=t.answer,u=!o;g.a.trackEvent(e.buttonRef.current,Object.assign({action:u?"Thank":"UnThank",element:"Button"},l&&{id:l})),c(r,u,{zVideoId:i},s)}),S.bb.thank),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.renderThankButtonText,o=t.disabled,i=n.relationship,c=(i=void 0===i?{}:i).isThanked,l=v()(this.props,E),s=r(n);return Object(a.c)(a.a,{children:[Object(a.b)(x.c,{input:"l",action:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}),Object(a.b)(O.a,Object.assign({as:y.c,zaType:"Button",zaAction:c?"UnLike":"Like",zaText:!0,onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:j.a,label:s,disabled:o,"aria-live":"polite"},l))]})}}]),n}(d.Component);I.propTypes=R,I.defaultProps={renderThankButtonText:function(e){var t=e.relationship,n=(t=void 0===t?{}:t).isThanked,r=e.question.title;return Object(A.a)(r,S.Q)?n?"取消祈祷":"祈祷":n?"取消喜欢":"喜欢"}};var N=Object(f.compose)(k.a,Object(h.connect)(null,{updateAnswerThank:w.G}),Object(C.a)(null))(I)},1641:function(e,t,n){"use strict";var r=n(2),a=n(1),o=n(12),i=n.n(o),c=n(2982),l=n(221),s=n(910),u=n(2984),d=n(2985),f=n(915),b=n(2986),p=n(2987),h=n(2988),m=n(2327),v=n(2989),g={online_roundtable:s.a,relevant:u.a,editor_recommendation:d.a,roundtable:s.a,special:f.a,weekly:b.a,daily:p.a,professional:h.a,zhizhi_plan_recommend:m.a,zhizhi_plan_edu_recommend:m.a,zhizhi_plan_baby_recommend:m.a,zhizhi_plan_acg_recommend:m.a,zhizhi_plan_outing_recommend:m.a,zhizhi_plan_rumour_deny:v.a,zhizhi_plan:m.a},O={alpha:1,group:"GYL02A"},j={alpha:.08,group:"GYL02A"},y={brand_special:c.a},w=Object.assign(Object.assign({},g),{},{COMMERCIAL_ICONS:y}),C=function(e){return"GBL07A"===(e||O).group?"commercial":"positive"},k=function(e){return"GBL07A"===(e||j).group?"commercial":"positive"},x=function(e){return"recognition"===e?"professional":e};t.a=Object(l.a)(null)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,o=void 0===n?{}:n,c=e.className;if(!t)return null;var l=t.type,s=t.text,u=t.foregroundColor,d=t.backgroundColor,f=o.customIcon,b=o.customIconClassName,p=C(u),h=k(d),m=f||w[x(l)];return m?Object(a.c)("span",{className:i()("Label-icon","Label-iconColor--".concat(p),Object(r.a)({},"Label-iconColor--".concat(h,"Background"),d),c),children:[Object(a.b)(m,{center:!0,className:i()("Label-iconImg",b)}),s]}):null}))},1651:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(86),i=n(16),c=n(17),l=n(8),s=n(1),u=n(0),d=n(3),f=n.n(d),b=n(23),p=n(236),h=n(945),m=n(961);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=v(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!0},e.handleTitleClick=function(t){b.a.trackEvent(Object(o.a)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,r=t.url,a=t.author;return Object(s.c)("div",{className:"AbstractCard-header",children:[Object(s.c)("div",{className:"AbstractCard-desc",children:[Object(s.b)("span",{role:"button",tabIndex:0,className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(r,n)},children:n}),Object(s.b)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),Object(s.b)(m.a,{zaId:6120,className:"AbstractCard-author",author:a,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,r=t.member.name,a=t.theme;return Object(s.c)("div",{className:"AbstractCard-content",children:[Object(s.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(a),children:n}),Object(s.b)("div",{className:"AbstractCard-tip",children:Object(s.c)("span",{className:"AbstractCard-info",children:[r," 摘录于 ",e.createdFormat]})})]})},e}return Object(a.a)(n,[{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(p.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}},{key:"componentDidMount",value:function(){Object(h.onViewedOnce)(this.node,(function(){b.a.trackCardShow(null,{id:6118})}))}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}}]),n}(u.Component);g.propTypes={title:f.a.string.isRequired,url:f.a.string.isRequired,author:f.a.object,member:f.a.object,content:f.a.string.isRequired,created:f.a.number,theme:f.a.string.isRequired};t.a=g},1667:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--EyeSlash24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M7.517 4.474c1.206-.453 2.608-.724 4.234-.724 6.036 0 8.834 3.715 9.985 6.161a5.255 5.255 0 01-.393 5.219 11.207 11.207 0 01-3.027 3.036.75.75 0 11-.835-1.245c.058-.04.115-.078.171-.118a9.704 9.704 0 002.447-2.511 3.755 3.755 0 00.28-3.742c-1.003-2.131-3.374-5.3-8.628-5.3-1.456 0-2.679.242-3.706.628a.75.75 0 11-.528-1.404zM5.498 6.382a.75.75 0 01-.07 1.059c-1.126.987-1.854 2.148-2.306 3.105a3.756 3.756 0 00.281 3.749c1.206 1.787 3.71 4.26 8.348 4.26 1.237 0 2.315-.175 3.253-.462a.75.75 0 11.438 1.435c-1.084.33-2.31.527-3.69.527-5.28 0-8.198-2.855-9.592-4.921a5.256 5.256 0 01-.394-5.228c.513-1.09 1.353-2.435 2.674-3.593a.75.75 0 011.058.07z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M20.048 20.012a.75.75 0 01-1.06.036l-15.5-14.5a.75.75 0 011.025-1.096l15.5 14.5a.75.75 0 01.035 1.06z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M9.559 11.535c-.203 1.067.554 2.164 1.808 2.374a2.36 2.36 0 001.707-.36.75.75 0 011.043.191.75.75 0 01-.215 1.04 3.893 3.893 0 01-2.816.602c-1.984-.331-3.381-2.13-3.007-4.094.06-.311.16-.607.297-.881a.768.768 0 011.01-.358.733.733 0 01.338.995 1.908 1.908 0 00-.165.491zm1.219-2.362a.769.769 0 01.716-.797c.302-.02.61-.007.92.045 1.784.299 3.086 1.775 3.066 3.501a.77.77 0 01-.762.754.73.73 0 01-.744-.74c.011-.948-.72-1.854-1.842-2.041a2.427 2.427 0 00-.566-.028.732.732 0 01-.788-.694z",fillRule:"evenodd",clipRule:"evenodd"}));var t}},1742:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ArrowRight24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M9.53 3.47a.75.75 0 00-1.06 1.06L15.94 12l-7.47 7.47a.75.75 0 101.06 1.06l8-8a.75.75 0 000-1.06l-8-8z",fillRule:"evenodd",clipRule:"evenodd"}));var t}},1744:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Org24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M10.786 8.41a8.938 8.938 0 00-3.968-2.528c-.305-1.719.814-3.337 2.442-3.741 1.221-.405 2.646.101 3.46 1.011 1.045 1.38.915 3.64.814 4.348-.102 1.315-1.221 3.034-1.323 3.135-.305-.809-.814-1.517-1.425-2.225zm-2.442 2.832c-1.526.202-3.052 1.01-4.171 2.123-1.12-.404-1.934-1.314-2.137-2.427-.316-2.427 1.526-3.64 2.849-3.842 1.628-.372 2.849.505 4.07 1.415 1.146 1.012 2.035 2.63 2.035 2.73-.916-.202-1.832-.1-2.646 0zm4.986.303c.509-.607.931-1.585 1.12-2.225.318-1.039.61-3.134.203-4.651 1.323-1.011 3.154-1.011 4.477.303 1.235 1.146 1.018 2.933.814 3.438-.663 1.581-1.933 2.326-3.256 2.832-1.221.404-3.256.303-3.358.303zm-2.645 1.011c-.51.607-.916 1.416-1.221 2.326-.407 1.314-.643 3.06-.102 4.55-1.323 1.011-3.256 1.011-4.477-.202-1.198-1.124-1.018-2.933-.814-3.438.599-1.605 1.933-2.326 3.256-2.831.916-.304 3.256-.405 3.358-.405zm9.259-1.82c1.018.404 1.933 1.315 2.035 2.427.233 2.57-1.526 3.64-2.849 3.842-1.526 0-2.85-.505-4.07-1.415-1.018-.81-2.035-2.528-2.035-2.63.916.203 1.831.102 2.645 0 1.628-.404 3.053-1.112 4.274-2.224zm-6.716 4.854c1.065 1.08 2.442 2.022 4.07 2.528.306 1.719-.814 3.235-2.442 3.741-1.22.404-2.645-.101-3.46-1.011-1.1-1.481-1.017-3.54-.915-4.247.102-1.315 1.221-3.034 1.323-3.135.305.708.721 1.44 1.424 2.124z"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Org"+(e.className?" "+e.className:"")}}))}},1791:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),a=n(31),o=n(6),i=Object(o.a)("promotion",["LIKE"]);function c(e){return function(t,n){var o=n().entities.promotions[e]||{},c=o.voteupCount,l=o.voting,s=l?0:1;return t({API:{types:i.LIKE,endpoint:"v3/promotions/".concat(e,"/voters"),query:{voting:s},method:"POST"},UPDATE:{request:{promotions:Object(r.a)({},e,{voteupCount:c+(l?-1:1),voting:s})},success:function(t){return{promotions:Object(r.a)({},e,t)}},failure:{promotions:Object(r.a)({},e,o)}},NOTIFICATION:{failure:a.a}})}}},1792:function(e,t,n){},1793:function(e,t,n){"use strict";var r=n(1),a=n(1003),o=n(1362),i=n(1376);t.a=function(e){var t=e.eduSection,n=e.renderContent,c=e.renderActions,l=t.id;return Object(r.c)(a.a,{data:t,children:[null==n?void 0:n(),Object(r.b)(o.a,{contentId:l,contentType:"edu_section",children:null==c?void 0:c(i.a)})]})}},1796:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(58),o=n(670),i=n(428),c=function(e){var t=Object(o.a)();return Object(r.b)(a.Flex,Object.assign(Object.assign({width:"58px",height:"20px",bg:Object(i.a)(t.colors.GYL01A).alpha(.08),color:t.colors.GYL01A,alignItems:"center",justifyContent:"center",css:{fontWeight:"normal",fontSize:12,borderRadius:4,overflow:"hidden"}},e),{},{children:"联合创作"}))}},1797:function(e,t){},1798:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(886),o=n(161),i=function(e){var t=e.zvideo,n=t.id,r=t.imageUrl,a=t.author,o=t.video,i=t.playCount,c=t.voteupCount,l=e.stats,s=l.memberCount,u=l.count;return{zvideoId:n,thumbnail:r,duration:o.duration,avatarUrl:a.avatarUrl,userName:a.name,memberCount:s,videoCount:u,playCount:i,voteupCount:c}};function c(e){var t=e.coCreationRefBy,o=e.referenceRefBy,c=e.type,l=Boolean(t),s=!l&&Boolean(o),u=Object(a.a)((function(){return n.e(93).then(n.bind(null,2869))}));if(l){if(u){var d=i(t),f=d.zvideoId,b=d.thumbnail,p=d.duration,h=d.avatarUrl,m=d.userName,v=d.memberCount,g=d.videoCount,O=d.playCount,j=d.voteupCount;return Object(r.b)(u.CoCreationCard,{zaContentId:f,thumbnail:b,duration:p,avatarUrl:h,userName:m,isMultiMember:v>1,videoCount:g,playCount:O,voteupCount:j,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(f),showSingleVideoUI:!0})}return Object(r.b)("div",{css:{height:82}})}if(s){if(u){var y=i(o),w=y.zvideoId,C=y.avatarUrl,k=y.userName,x=y.memberCount;return Object(r.b)(u.ReferenceCard,{type:c,zaContentId:w,avatarUrl:C,userName:k,isMultiMember:x>1,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(w),showSingleVideoUI:!0})}return Object(r.b)("div",{css:{height:44}})}return null}function l(e){return Object(r.b)(o.a,{replacement:null,children:Object(r.b)(c,Object.assign({},e))})}},1799:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(58),o=n(961),i=n(1200),c=function(e){var t=e.mainAuthor,n=e.subAuthor,i=function(e){return"plain"===e||"special-plain"===e}(e.preset);return Object(r.c)(a.Flex,{mt:"10px",children:[Object(r.b)(o.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:t,coCreationAuthorDescriptionText:"视频作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1,css:{marginRight:i?16:30}})),Object(r.b)(o.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:n,coCreationAuthorDescriptionText:"图文作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1}))]})};function l(e,t,n,a){var o=Object(i.b)(t,n),l=Object(i.c)(n);return a&&Object(r.b)(c,{preset:e,mainAuthor:o,subAuthor:l},"coCreateAuthors")}},1800:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},1802:function(e,t,n){"use strict";var r=n(34),a=n(50),o=n(0),i=n(376);function c(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}t.a=function(e){var t=e.disabled,n=e.children,l=Object(o.useState)(null),s=c(r.a,l,2),u=s[0],d=s[1];return Object(i.a)((function(){d(document.querySelector("#AnswerFormPortalContainer"))})),t?n:Boolean(u)&&Object(a.createPortal)(n,u)}},1803:function(e,t,n){"use strict";function r(e){var t,n=null==e||null===(t=e.reactionInstruction)||void 0===t?void 0:t.rEACTIONANONYMOUS;return void 0!==n?n||"该问题暂不支持启用匿名":""}function a(e){return 0===Number(null==e?void 0:e.id)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},1804:function(e,t,n){"use strict";t.a=function(e,t){return t.every((function(t){return e.includes(t)}))}},1805:function(e,t,n){e.exports=n.p+"assets/logo.804f083e.png"},1806:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(0),o=n(58),i=n(2449),c=n(51);function l(e){var t=e.handleClick,n=Object(a.useRef)(null);return Object(r.c)(c.a,{as:o.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:t,ref:n,children:[Object(r.b)(o.Text,{mr:"10px",children:"全屏编辑"}),Object(r.b)(i.a,{text:!0,center:!0})]})}},1807:function(e,t,n){},1808:function(e,t,n){"use strict";var r=n(36),a=n(1),o=n(20),i=n(376),c=n(99),l=n(299),s=n(92),u=n(216),d=n(32),f=n(1164),b=["disabled","currentUser","authRequired","answer","isOwner"];t.a=Object(u.a)((function(e){var t,n=e.disabled,u=e.currentUser,p=e.authRequired,h=e.answer,m=e.isOwner,v=Object(r.default)(e,b),g=Object(o.useDispatch)(),O=Boolean(!n&&u);Object(i.a)((function(){O&&g(Object(l.b)(["opposeRight"]))}));var j=Object(c.a)(p((function(e){g(Object(s.H)(h.id,e,{cardType:h.cardType},h))}),d.bb.vote));return Object(a.b)(f.a,Object.assign({count:h.voteupCount,voting:h.relationship&&h.relationship.voting,isOwner:Boolean(m||(null===(t=h.relationship)||void 0===t?void 0:t.isAuthor)),onVote:j},v))}))},1809:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(1),a=n(1019),o=n(905),i=n(968),c=n(0),l=n(154),s=n(1065),u=n(40),d=n(1810),f=n(1028),b=(n(1811),function(e,t){return null!=e&&e.plainText?"".concat(e.plaintext," · "):Object(s.isReferenceRelation)(t)?"引用创作 · ":null});function p(e){var t=e.videoId,n=e.zvideoId,s=e.title,p=e.playCount,h=void 0===p?0:p,m=e.voteupCount,v=void 0===m?0:m,g=e.isComplete,O=void 0!==g&&g,j=e.startTime,y=void 0===j?0:j,w=e.creationReferences,C=e.creationRelationship,k=e.shouldExpandState,x=e.videoRef,S=e.alwaysShowVolumeButton,A=e.itemId,T=e.itemType,R=Number(y/1e3),E=Object(c.useRef)(),I=Object(c.useRef)({currentTime:0}),N=Object(c.useRef)(Object(i.c)(t,"*",!0));Object(f.a)({videoId:t,iframeRef:E}),Object(c.useEffect)((function(){var e=N.current.subscribeMessage((function(e,t){e===i.b.DOM.TIMEUPDATE&&(I.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return Object(r.c)("div",{className:"VideoAnswerPlayer",children:[Object(r.b)("div",{className:"VideoAnswerPlayer-video",children:Object(r.b)(a.a,{zaProps:{type:"Answer",token:A},ref:Object(o.a)(E,x),className:"VideoAnswerPlayer-iframe",type:"video",src:"https://".concat(u.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",A],["itemType",T]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:S}})}),k&&Object(r.c)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){N.current.dispatchMessage(E.current.contentWindow,i.a.PAUSE,{});var e=(I.current.currentTime+R).toFixed(1);window.open("https://".concat(u.a.wwwHost,"/zvideo/").concat(n,"?playTime=").concat(e))},children:[Object(r.c)("div",{className:"VideoAnswerPlayer-state",children:[Object(r.b)("div",{className:"VideoAnswerPlayer-state--title",children:s}),Object(r.c)("div",{className:"VideoAnswerPlayer-state--data",children:[b(w,C),Object(l.cnNiceNumber)(h),"播放",v>0?" · ".concat(Object(l.cnNiceNumber)(v),"赞同"):null]})]}),!O&&Object(r.c)("div",{className:"VideoAnswerPlayer-action",children:[Object(r.b)(d.a,{style:{marginRight:"6px"}}),"完整版"]})]})]})}},1810:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(52),i=Object.assign;var c=function(e){return a.a.createElement(o.a,i({width:"8",height:"10",fill:"none",viewBox:"0 0 8 10"},e),a.a.createElement("path",{fill:"#121212",d:"M1.315 9.302a.6.6 0 01-.915-.51v-7.52a.6.6 0 01.914-.51l6.11 3.754a.6.6 0 010 1.022l-6.11 3.764z",fillRule:"evenodd",clipRule:"evenodd"}))}},1811:function(e,t,n){},1812:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(2945),i=n(35),c=n(1020),l=n(437),s=n(23);t.a=function(e){var t=e.className,n=e.onClick,u=e.html,d=e.sourceId,f=Object(a.useCallback)((function(e){s.a.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)}),[n]),b=Object(a.useMemo)((function(){return Object(c.c)(u,d).catalog}),[u,d]);return null!=b&&b.length?Object(r.b)(l.a,{trackCardShow:!0,view:{id:9856},children:Object(r.b)(i.c,{preset:"plain",className:t,onClick:f,icon:o.a,label:"目录"})}):null}},1813:function(e,t,n){},1814:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(39),a=n.n(r),o=n(103),i=n.n(o),c=n(0),l=n(51),s=n(1059),u=n(1909),d=function(){var e=Object(l.l)().trackEvent;return Object(c.useCallback)(function(){var t=i()(a.a.mark((function t(n){var r,o,i,c,l,d,f,b,p,h,m,v,g,O,j;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.element,o=n.id,i=n.url,c=n.source,l=n.scenes,d=void 0===l?s.b.Content:l,f=n.utmInfo,b=void 0===f?{}:f,p=n.appSchemaIos,h=n.appSchemaAndroid,m=n.isOpenPopup,v=void 0!==m&&m,g=n.extraInfo,O=void 0===g?{}:g,j=n.onClick,Object(u.a)({element:r,id:o,url:i,source:c,scenes:d,utmInfo:b,appSchemaIos:p,appSchemaAndroid:h,isOpenPopup:v,extraInfo:O,trackEvent:e,onClick:j});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}},1815:function(e,t,n){"use strict";var r=n(34),a=n(39),o=n.n(a),i=n(68),c=n(15),l=n(14),s=n(1),u=n(450),d=n(99),f=n(906),b=n(891),p=n(0),h=n(50);function m(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var v={backdrop:{type:"spring",bounce:0,duration:.5},image:{type:"spring",bounce:.2,duration:.5}},g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(l.a)(this,e),this.x=t,this.y=n,this.x=t,this.y=n},O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(l.a)(this,e),this.x=t,this.y=n,this.width=r,this.height=a,this.x=t,this.y=n,this.width=r,this.height=a}return Object(c.a)(e,[{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}}]),e}(),j=function(e){return new g(e.left+e.width/2,e.top+e.height/2)},y=function(e){var t=!1;return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];t||(t=!0,requestAnimationFrame((function(){t=!1,e.apply(void 0,r)})))}},w=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.addEventListener.apply(e,n),function(){e.removeEventListener.apply(e,n)}},C=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=new Image).decode){e.next=4;break}return n.src=t,e.abrupt("return",n.decode().then((function(){return n})));case 4:return e.abrupt("return",new Promise((function(e,r){n.onload=function(){return e(n)},n.onerror=r,n.src=t})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=function(e){var t=e.img,n=e.onClose,a=Object(p.useState)(null),o=m(r.a,a,2),i=o[0],c=o[1],l=Object(p.useRef)(null),k=function(){n()},x=Object(p.useRef)(0),S=Object(d.a)((function(e){if(t){x.current=window.scrollY;var n,r,a,o,i,l,s,u,d=t.getBoundingClientRect(),f=function(e,t){var n=e.width,r=e.height,a=Math.min(t.width,n),o=Math.min(t.height,r),i=Math.min(a/n,o/r),c=n*i,l=r*i;return new O((t.width-c)/2,(t.height-l)/2,c,l)}((n=t.naturalWidth,r=t.naturalHeight,a=t.width,o=t.height,i=Number(t.dataset.rawwidth),l=Number(t.dataset.rawheight),i>0&&l>0&&Math.abs(i/l-n/r)<.01?{width:i,height:l}:n>0&&r>0?{width:n,height:r}:{width:a,height:o}),new O(0,0,window.innerWidth,window.innerHeight)),b=f.width/d.width,p=document.scrollingElement.getBoundingClientRect(),h=(u=p,new O((s=d).left-u.left,s.top-u.top,s.width,s.height)),m={width:h.width,height:h.height,left:h.left,top:h.top};t.style.visibility="hidden";var v,y,w=(v=j(f),y=j(d),new g(v.x-y.x,v.y-y.y)),C={src:t.currentSrc||t.src,style:Object.assign({},m),animate:{x:w.x,y:w.y,scale:b,name:"animate"},exit:{x:0,y:0,scale:1,name:"exit"},onAnimationComplete:function(n){"exit"===n.name?t.style.visibility="":"animate"===n.name&&(null==e||e())}};c(C)}}));Object(p.useEffect)((function(){if(t){var e=t.currentSrc||t.src,n=t.dataset.original,r=!!n&&n!==e?C(n):void 0,a=!1;return S((function(){null==r||r.then((function(e){!a&&l.current&&(l.current.src=e.src)}))})),function(){a=!0,c(null)}}}),[t,S]);var A=Object(p.useState)(!1),T=m(r.a,A,2),R=T[0],E=T[1];if(Object(f.a)((function(){return E(!1)}),R?300:null),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=Object(d.a)(t);Object(p.useEffect)((function(){if(e)return w(window,"resize",y(n))}),[e,n])}(!!i,(function(){S(),E(!0)})),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=Object(d.a)(t);Object(p.useEffect)((function(){if(e)return w(window,"scroll",y(n))}),[e,n])}(!!i,(function(){var e=window.scrollY;!R&&Math.abs(x.current-e)>=40&&k()})),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=Object(d.a)(n);Object(p.useEffect)((function(){if(e)return w(document,t,r)}),[e,t,r])}(!!i,"keydown",(function(e){"Escape"===e.key&&k()})),"undefined"==typeof document)return null;var I=i&&Object(s.c)(s.a,{children:[Object(s.b)(u.a.div,{css:{position:"fixed",zIndex:999,inset:0,cursor:"zoom-out",background:"rgba(18,18,18,.65)",opacity:0,willChange:"opacity"},animate:{opacity:1},exit:{opacity:0},transition:v.backdrop,onClick:k}),Object(s.b)(u.a.img,Object.assign(Object.assign({ref:l,css:{position:"absolute",zIndex:999,inset:0,cursor:"zoom-out",background:"#fff",backgroundClip:"content-box",padding:.5,willChange:"transform"}},i),{},{transition:v.image,onClick:k}))]});return Object(h.createPortal)(Object(s.b)(b.a,{children:I}),document.body)}},1816:function(e,t,n){},1869:function(e,t,n){"use strict";n.d(t,"a",(function(){return He})),n.d(t,"b",(function(){return bt}));var r=n(1),a=n(20),o=n(0),i=n.n(o),c=n(3),l=n.n(c),s=n(12),u=n.n(s),d=n(155),f=n(670),b=n(39),p=n.n(b),h=n(103),m=n.n(h),v=n(47),g=function(){var e=m()(p.a.mark((function e(t,n,r){var a,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(e){return{state:-1,message:e}},o=function(e){return{state:0,data:e}},t.Android&&t.Zhihu){e.next=4;break}return e.abrupt("return",a("「先用后付」激活仅支持安卓端内哦"));case 4:return e.prev=4,e.next=7,v.a.supportsAction("payment/activePayScore");case 7:if(!e.sent){e.next=17;break}return e.next=11,Object(v.a)("payment/activePayScore").dispatch({sku_id:n||"",type:r||0});case 11:if(null==(i=e.sent)||!i.orderId){e.next=14;break}return e.abrupt("return",o(i));case 14:throw new Error("激活获取订单号失败");case 17:return e.abrupt("return",a("当前客户端版本不支持，请升级后重试 ~"));case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(4),e.abrupt("return",a(e.t0.errMsg||e.t0.message||"激活失败，请稍后重试"));case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),O=n(22),j=n.n(O),y=n(28),w=n.n(y),C=n(105),k=n.n(C),x=n(25),S=n.n(x),A=n(29),T=n.n(A),R=n(18),E=n.n(R),I=n(945),N=n(933),B=n(23),z=n(51),P=n(56),_=n(24),L=n.n(_);function M(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var n=e[t];return null!=n&&"".concat(t,"=").concat(encodeURIComponent(n))})).filter(Boolean).join("&")},U=function(e){if(!e)return{};var t=e.match(/\?([^#]+)/)||[],n=M(L.a,t,2)[1];return n?n.split("&").reduce((function(e,t){var n=t.split("="),r=M(L.a,n,2),a=r[0],o=r[1];return e[a]=decodeURIComponent(o),e}),{}):{}},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=D(Object.assign(Object.assign({},U(e)),t));return n?/\?([^#]+)/.test(e)?e.replace(/\?([^#]+)/,"?".concat(n)):/(#[\w]+)$/.test(e)?e.replace(/(#[\w]+)$/,"?".concat(n,"$1")):"".concat(e,"?").concat(n):e};function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){S()(n,e);var t=V(n);function n(e){var r;return j()(this,n),r=t.call(this,e),q(k()(r),"handleClick",(function(e,t){var n=r.props.onClick;B.a.trackEvent(r.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),"function"==typeof n&&n(r.node),r.unlisten=v.a.listen("base/viewDidAppear",(function(){var e=r.props.popupCallback;e&&e(),r.unlisten&&r.unlisten()}))})),q(k()(r),"handleQuery",(function(e){var t=r.props.extra,n=((void 0===t?{}:t)||{}).ua,a=void 0===n?{}:n;if(null!=a&&a.Mobile&&(null==a||!a.Zhihu)){var o,i,c=Object(P.parse)(null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.search.substring(1));if("svipgrowth"===(c||{}).utm_medium){var l=encodeURIComponent(Object(P.stringify)(c));r.setState({url:F(e,{growth_ref_url:l})})}}})),r.state={url:""},r}return w()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.btnInfo;if(t){var n=t.btnText,r=t.link;this.setState({url:r}),this.handleQuery(r),v.a.dispatch("vip/preloadVIPHybridPopup",{url:r}),Object(I.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:n},{link:{url:r,anchor:n}})}))}}},{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,r=t.zaInfo,a=void 0===r?{}:r,o=t.className,c=this.state.url;if(!n)return null;var l=n.btnText;return i.a.createElement("div",{className:u()("KfeCollection-PurchaseBtn",o)},i.a.createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),i.a.createElement(z.b,{block:"textLink",content:Object.assign({},a||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:c}}},i.a.createElement("a",{className:"KfeCollection-PurchaseBtn-HybridLink",href:c,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(c,l)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("span",{className:"KfeCollection-PurchaseBtn-text"},l)," ",i.a.createElement(N.b,{className:"KfeCollection-PurchaseBtn-ArrowRight"})))))}}]),n}(i.a.Component);G.propTypes={popupCallback:l.a.func};var H=G,W=n(50),K=n(459),Z=n(1013);function Q(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Y(e){var t=e.zaInfo,n=e.btnInfo,r=e.picsInfo,a=e.className,c=e.onClick,l=e.popupCallback,s=e.theme,d=e.isMobile,f=e.extra,b=void 0===f?{}:f,p=n.btnText,h=n.link,m=Object(o.useState)(h),g=Q(L.a,m,2),O=g[0],j=g[1],y=r.pcPic,w=r.dayPic,C=r.nightPic,k=Object(o.useRef)(),x=Object(o.useRef)(null),S=Object(o.useRef)(!0),A=(b||{}).ua,T=void 0===A?{}:A,R=Object(o.useMemo)((function(){return d?"dark"===s?C:w:y}),[d,s,y,C,w]),E=null;return Object(o.useEffect)((function(){if(d&&(null==T||!T.Zhihu)){var e,t,n=Object(P.parse)(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.search.substring(1));if("svipgrowth"===(n||{}).utm_medium){var r=encodeURIComponent(Object(P.stringify)(n));j(F(h,{growth_ref_url:r}))}}}),[d,null==T?void 0:T.Zhihu,h]),Object(o.useEffect)((function(){return function(){E&&E()}}),[E]),i.a.createElement("div",{className:u()("KfeCollection-VipBenefitsCard",a)},i.a.createElement(z.b,{block:"vipBenefitsCard",content:Object.assign(Object.assign({},t),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer})},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:O}}},i.a.createElement("a",{className:"KfeCollection-VipBenefitsCard-HybridLink",href:O,target:"_blank",rel:"noopener noreferrer",onClick:function(){B.a.trackEvent(k.current,{id:4240,action:"OpenUrl",name:p},{link:{url:O,anchor:p}}),"function"==typeof c&&c(k.current),E=v.a.listen("base/viewDidAppear",(function(){l&&l(),E&&E()}))},ref:k,"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[t]}})},R&&i.a.createElement(K.a,{onObserve:function(e){e[0].isIntersecting&&S.current&&(Object(v.a)("base/postMessage").dispatch({type:"vip/truncation",data:{ShowVipTc:!0}}),S.current=!1)},threshold:1},i.a.createElement("img",{className:"KfeCollection-VipBenefitsCard-pic",src:R,ref:x}))))))}Y.propTypes={zaInfo:l.a.object,btnInfo:l.a.object,popupCallback:l.a.func,onClick:l.a.func,className:l.a.string,theme:l.a.string.isRequired,isMobile:l.a.bool.isRequired,picsInfo:l.a.object.isRequired};var J=Y,X=n(118);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te="dark",ne="light",re=function(e){S()(n,e);var t=$(n);function n(e){var r;return j()(this,n),r=t.call(this,e),ee(k()(r),"handleClick",(function(e,t){var n=r.props.onClick;B.a.trackEvent(r.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),n&&n({target:r.node})})),ee(k()(r),"handleQuery",(function(e){var t=r.props.extra,n=((void 0===t?{}:t)||{}).ua,a=void 0===n?{}:n;if(null!=a&&a.Mobile&&(null==a||!a.Zhihu)){var o,i,c=Object(P.parse)(null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.search.substring(1));"svipgrowth"===(c||{}).utm_medium&&r.setState({url:F(e,c)})}})),r.state={url:""},r}return w()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;this.setState({url:t}),Object(I.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})})),this.handleQuery(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaInfo,a=void 0===r?{}:r,o=t.goodsCard,c=t.className,l=n===te,s=this.state.url,d=o.header,f=d.title,b=d.subTitle,p=o.body,h=p.title,m=p.cover,v=p.coverLabel,g=p.desc,O=p.label,j=p.vipNote,y=o.catalog;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV2",c),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(f).concat(b?" · ".concat(b):"")),i.a.createElement(z.b,{content:Object.assign(Object.assign({},a),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"oldSkuCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:s}}},i.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(s,h)},ref:function(t){return e.node=t}},i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},i.a.createElement("img",{className:u()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":l}),src:Object(X.imgUrl)(m,{size:"200x0"})}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},v)),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},i.a.createElement("div",null,i.a.createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},h),g&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},g),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},O)),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:j}}))))),y&&y.length>0&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},y.map((function(e){var t=e.manuscriptUrl,n=e.sectionId,r=e.title;return i.a.createElement(z.a,{zaType:"Text",key:n,zaBlock:"catalog",extra:{link:{url:t}},zaAction:"OpenUrl"},i.a.createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,target:"_blank",rel:"noopener noreferrer",key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:r}})},r,i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"})))}))))))}}]),n}(i.a.Component);ee(re,"propTypes",{theme:l.a.oneOf([te,ne]),onClick:l.a.func,extra:l.a.object}),ee(re,"defaultProps",{theme:ne});var ae=re,oe=n(477),ie=n(1173),ce=n(1742),le=function(e){return e?-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa"):""},se=n(1599);function ue(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var de={IOS:"8.34.0",ANDROID:"8.34.0"};var fe=function(e){var t=e.className,n=e.nextSectionInfo,r=e.goodsCard,a=e.zaInfo,c=void 0===a?{}:a,l=e.theme,s=void 0===l?"light":l,f=e.productLabel,b=e.abParam,p=void 0===b?{}:b,h=r.header,m=void 0===h?{}:h,v=m.brandImage,g=m.brandLink,O=n.title,j=n.content,y=n.url,w=n.skuUrl,C=n.voteNum,k=n.isShowVote,x=n.trackNum,S=n.skuName,A="dark"===s,T=Object(z.l)().trackEvent,R=le(y),E=Object(o.useRef)(),I=Object(o.useState)(!1),B=ue(L.a,I,2),P=B[0],_=B[1],M=Object(d.b)(),D=!O||!y||0===x,U=M.Mobile&&Object(oe.versionControl)(M,de)&&"0"!==p.vpNewLabel;Object(o.useEffect)((function(){if(E.current&&j){var e=E.current.clientWidth,t=document.createElement("p");t.style="visibility:hidden;position:absolute;left:-9999px;top:-9999px;width:".concat(e,"px;line-height:21px;font-size:13px;"),t.innerText=j.replace(/[\r\n]/g,""),document.body.appendChild(t);var n=t.clientHeight>63;_(n),document.body.removeChild(t)}}),[E,j]);var F=Object(o.useCallback)((function(){T({action:"OpenUrl",eventType:"Click",elementLocation:{text:O,block:{blockText:"StoryCardTitle"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:y}})}),[O,T,y]),V=Object(o.useCallback)((function(){T({action:"OpenUrl",eventType:"Click",elementLocation:{block:{blockText:"StoryCardButton"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:w}})}),[w,T]),q=function(){M.ZhihuHybrid&&g&&(T({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Button",page:{pageId:"8028"},moduleId:"brand_title",content:{type:"PaidColumn"}}},{link:{url:g}}),Object(se.a)(g,M))},G=function(){return U?null!=f&&f.length?i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-tagsBottom"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-tagsBottomWrapper"},f.filter((function(e){return null==e?void 0:e.labelName})).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-tagsBottomTag",key:e.labelId,onClick:function(){return function(e,t){var n=e.labelLink;n&&(T({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Button",page:{pageId:"8028"},moduleId:"tag_btn",moduleIndex:t+1,text:e.labelName,content:{type:"PaidColumn"}}},{link:{url:n}}),Object(se.a)(n,M))}(e,t)}},i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-tagText"},e.labelName),i.a.createElement(ce.a,{className:"KfeCollection-GoodsCardV4-tagsArrowRight",size:10}))})))):null:i.a.createElement("a",{className:"KfeCollection-GoodsCardV4-bottom",target:"_blank",rel:"noopener noreferrer",href:le(w),onClick:V},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-bottomText"},"查看本专栏全部",i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-num"},x),"篇",i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV4-arrowRight",text:!0,center:!0})))};return i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV4",{"KfeCollection-GoodsCardV4-dark":A},t),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[c]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideBefore"},"来自",i.a.createElement("span",{className:u()("KfeCollection-GoodsCardV4-guideBeforeBold",{"KfeCollection-GoodsCardV4-link":M.ZhihuHybrid}),onClick:q},"「",v,"」"),"专栏"),S&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideTitle"},"《".concat(S)),i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideAfter"},"》"))),D?null:i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-wrapper"},i.a.createElement("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV4-header",onClick:F},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-title"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-titleText"},"继续阅读下一篇：".concat(O)),i.a.createElement(ie.a,{className:"KfeCollection-GoodsCardV4-headerIcon"})),i.a.createElement("img",{className:"KfeCollection-GoodsCardV4-vipIcon",src:"https://pic2.zhimg.com/v2-d296124c7c5db450cd7cb5d567afd0f0.png"})),i.a.createElement(z.b,{content:Object.assign(Object.assign({},c),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"StoryCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:y}}},i.a.createElement("a",{href:R,target:"_blank",rel:"noopener noreferrer"},j?i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-contentWrapper".concat(M.iOS?" KfeCollection-GoodsCardV4-iosContent":"")},i.a.createElement("p",{className:"KfeCollection-GoodsCardV4-content",ref:E},j),P&&k&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorse"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-mask"}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-ellipsis"},"..."),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorseText"},C))):null))),G()))},be=n(908),pe=n(1257),he=function(e){return i.a.createElement(pe.a,Object.assign({viewBox:"0 0 43 41"},e),i.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z"}))};he.defaultProps={name:"FullStar"};var me=he,ve=function(e){return i.a.createElement(pe.a,Object.assign({viewBox:"0 0 43 41"},e),i.a.createElement("g",{fillRule:"evenodd"},i.a.createElement("path",{d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z",opacity:".2"}),i.a.createElement("path",{d:"M21.5.162v34.931c-.716.01-1.43.188-2.083.53L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165c.29-.59.872-.94 1.486-.965z"})))};ve.defaultProps={name:"HalfStar"};var ge=ve,Oe=function(e){var t=e.value,n=void 0===t?5:t,r=e.size,a=void 0===r?13:r,c=Object(o.useMemo)((function(){return function(e){return 0===e?0:e%1==0?e/2:e>=10?5:(parseInt(e)+1)/2}(n)}),[n]),l=Object(o.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=e%1,r=parseInt(e/1),a=n?1:0;return{full:r,half:a,empty:parseInt(t-r-a)}}(c)}),[c]),s=l.full,d=l.half,f=l.empty;return i.a.createElement("div",{className:"KfeCollection-RatingNew"},!!s&&new Array(s).fill(1).map((function(e,t){return i.a.createElement(me,{className:u()("KfeCollection-RatingNew-FullStar","KfeCollection-RatingNew-Star"),key:t,size:a})})),!!d&&i.a.createElement(ge,{className:u()("KfeCollection-RatingNew-HalfStar","KfeCollection-RatingNew-Star"),size:a}),!!f&&new Array(f).fill(1).map((function(e,t){return i.a.createElement(me,{className:u()("KfeCollection-RatingNew-EmptyStar","KfeCollection-RatingNew-Star"),key:t,size:a})})))};function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}var ye,we,Ce,ke=function(e){S()(n,e);var t=je(n);function n(){return j()(this,n),t.apply(this,arguments)}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.total,n=e.value;if(e.isNew)return i.a.createElement(Oe,this.props);var r=Math.floor(Math.round(2*n)/2),a=Math.round(2*n)%2,o=t-r-a;return i.a.createElement("div",{className:"KfeCollection-Rating"},Array.from({length:r}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star",key:"full-".concat(t)},i.a.createElement(be.a,null))})),Boolean(a)&&i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--half",key:"half"},i.a.createElement(be.a,null),i.a.createElement(be.a,null)),Array.from({length:o}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--empty",key:"empty-".concat(t)},i.a.createElement(be.a,null))})))}}]),n}(i.a.Component);Ce={value:5,total:5,size:13,isNew:!1},(we="defaultProps")in(ye=ke)?Object.defineProperty(ye,we,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):ye[we]=Ce;var xe=ke,Se=["Live","RemixAlbum","RemixInstabook"],Ae={Live:"Live 讲座","课程":"盐选专栏"};var Te=function(e){var t=e.goodsCard,n=e.zaInfo,r=void 0===n?{}:n,a=e.isMobile,c=e.theme,l=void 0===c?"light":c,s=e.resourceType,f=t.header,b=void 0===f?{}:f,p=t.body,h=void 0===p?{}:p,m=b.skuTitle,v=b.brandImage,g=b.brandLink,O=b.link,j=h.title,y=h.coverLabel,w=h.link,C=h.desc,k=h.activeLink,x=h.vipNote,S=h.icons,A=h.cover,T=h.introduce,R=h.score,E=h.activeText,I=h.contentType,B=Object(d.b)(),P=Object(z.l)().trackEvent,_=!a&&Se.includes(I)?w:k,L=24===s,M=Object(o.useCallback)((function(){Object(se.a)(le(_),B)}),[_,B]),D=Object(o.useCallback)((function(){L?Object(se.a)(le(O),B):M()}),[L,O,B,M]),U=function(){B.ZhihuHybrid&&g&&(P({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Button",moduleId:"brand_title",content:{type:"PaidColumn"}}},{link:{url:g}}),Object(se.a)(g,B))},F=function(){var e=S||{},t=e.centerIcon,n=e.leftTopDayIcon,r=e.leftTopNightIcon;return i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentWrapper"},A&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentLeft"},n&&r&&i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverVip",src:"light"===l?n:r}),i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverImg",style:L?{objectFit:"cover"}:{},src:A}),t&&i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverBtn",src:t}),y&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-coverLabel"},Ae[y]||y)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentRight"},i.a.createElement("div",null,j&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentTitle"},j),C&&L&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentDes"},C),R?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentStar"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-score"},R),i.a.createElement(xe,{value:+R/2})):T&&T.length?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentIntro"},T.map((function(e){return i.a.createElement("div",{key:e,className:"KfeCollection-GoodsCardNew-contentIntroItem"},e)}))):null),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentBottom"},x?i.a.createElement("p",{className:"KfeCollection-GoodsCardNew-vipNote",dangerouslySetInnerHTML:{__html:x}}):i.a.createElement("div",null),E&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-readBtn"},E,i.a.createElement(N.b,{className:u()("KfeCollection-GoodsCardNew-arrowRight",{"KfeCollection-GoodsCardNew-arrowRightFix":B.Android}),size:20})))))};return i.a.createElement("section",{className:"KfeCollection-GoodsCardNew","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-guideBefore"},"以上回答来自"),v&&i.a.createElement("span",{className:u()("KfeCollection-GoodsCardNew-brandImg",{"KfeCollection-GoodsCardNew-link":B.ZhihuHybrid}),onClick:U},"「",v,"」"),y&&i.a.createElement("span",null,y)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-wrapper"},i.a.createElement(z.b,{content:Object.assign(Object.assign({},r),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"".concat(s,"_card")},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:_}}},i.a.createElement("div",{onClick:D,className:"KfeCollection-GoodsCardNew-header"},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-headerTitle"},m),i.a.createElement(ie.a,{className:"KfeCollection-GoodsCardNew-headerIcon"})),i.a.createElement("a",{onClick:M,rel:"noopener noreferrer"},F())))))};function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=function(e){S()(n,e);var t=Re(n);function n(){var e;j()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Ee(k()(e),"handleObserve",(function(t){var n=e.props.logPaidAnswerProgress;t.forEach((function(t){if(0!==t.intersectionRatio){var r=t.target;e.observer.unobserve(r),n&&n("card")}}))})),Ee(k()(e),"renderVipCard",(function(){var t=e.props,n=t.result,r=void 0===n?{}:n,a=t.theme,o=t.isMobile,c=r.zaInfo,l=r.className,s=r.nextSectionInfo,u=r.goodsCard,d=r.abParam,f=r.resourceType,b=r.productLabel;return s?i.a.createElement(fe,{nextSectionInfo:s,productLabel:b,goodsCard:u,zaInfo:c,theme:a,className:l,abParam:d}):u?i.a.createElement(Te,{isMobile:o,goodsCard:u,zaInfo:c,theme:a,resourceType:f,abParam:d}):null})),e}return w()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hasPurchased,r=t.logPaidAnswerProgress;if(n&&r&&"undefined"!=typeof window&&window.IntersectionObserver){if(this.target=Object(W.findDOMNode)(this),!this.target)return;this.observer=new window.IntersectionObserver(this.handleObserve,{threshold:[.1]}),setTimeout((function(){e.observer.observe(e.target)}))}}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.target)}},{key:"render",value:function(){var e=this.props,t=e.hasPurchased,n=e.result,r=void 0===n?{}:n,a=e.theme,o=e.className,c=e.isMobile,l=e.logPaidAnswerProgress,s=e.extra,u=void 0===s?{}:s,d=r.goodsCard,f=r.zaInfo,b=r.btnInfo,p=r.abParam,h=r.benefitsPics,m=r.popupCallback,v="1"===(null==p?void 0:p.benefitsPicsShow);return t?this.renderVipCard():v?i.a.createElement(J,{btnInfo:b||{},zaInfo:f||{},picsInfo:h||{},popupCallback:m,theme:a,isMobile:c||!1,onClick:l,extra:u}):d?i.a.createElement(ae,{goodsCard:d,zaInfo:f,className:o,extra:u}):null}}]),n}(i.a.Component);Ee(Ie,"propTypes",{result:l.a.object.isRequired,theme:l.a.string,hasPurchased:l.a.bool,onBookshelfButtonClick:l.a.func,logPaidAnswerProgress:l.a.func,extra:l.a.object}),Ee(Ie,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var Ne=Ie,Be=n(923);n(190);function ze(e){return!e&&0!==e}var Pe={yellow:{day:"https://pic1.zhimg.com/v2-74a907bc68ec906c4cbe6fbcd7b382f1.png",night:"https://pic1.zhimg.com/v2-f6840db8368fe995a6a81b20866c90e8.png"},blue:{day:"https://pic1.zhimg.com/v2-176249162145d8ec58435bfab44d2d6e.png",night:"https://pic3.zhimg.com/v2-ae3c36cfe91b5ce4faf4908a551413a3.png"}};var _e=function(e){var t=e.result,n=void 0===t?{}:t,r=e.isDarkMode,a=n.paidConsult,o=n.zaInfo;if(!a)return null;var c,l,s=a.userId,u=a.consultUrl,d=a.name,f=a.avatarPath,b=a.description,p=a.descriptionType,h=a.answerCount,m=a.averageScore;return i.a.createElement("div",{className:"KfeCollection-PaidConsultCard"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Header"},"向作者咨询"),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{id:s,type:Z.e.Conversation}),block:"PaidConsultCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:u}}},i.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},(l=null,3!==p&&(l=1===p?Pe.yellow:Pe.blue),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-CardWrapper"},i.a.createElement("img",{className:"KfeCollection-PaidConsultCard-Avatar",src:f}),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Right"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-NameWrapper"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Name"},d),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Action"},"去咨询",i.a.createElement(N.a,{className:"KfeCollection-PaidConsultCard-ArrowRight",text:!0,center:!0}))),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-SubInfo"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultTime"},i.a.createElement(Be.a,{className:"KfeCollection-PaidConsultCard-ConsultTimeIcon",text:!0,center:!0}),i.a.createElement("div",null,h," 次咨询")),!ze(m)&&i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultScore"},i.a.createElement(be.a,{className:"KfeCollection-PaidConsultCard-ConsultScoreIcon",text:!0,center:!0}),i.a.createElement("div",null,ze(c=m)?"":-1===c.toString().indexOf(".")?c.toFixed(1):c))),b&&i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Info"},l&&i.a.createElement("img",{className:"KfeCollection-PaidConsultCard-InfoIcon",src:r?l.night:l.day}),i.a.createElement("p",null,b)))))))))};function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}var Me=function(e){S()(n,e);var t=Le(n);function n(){return j()(this,n),t.apply(this,arguments)}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.url,r=e.zaInfo,a=void 0===r?{}:r;return t&&n?i.a.createElement("div",{className:"KfeCollection-TextLink"},i.a.createElement("div",{className:"KfeCollection-TextLink-mask"}),i.a.createElement(z.b,{block:"textLinkV2",content:Object.assign({},a||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n}}},i.a.createElement("a",{className:"KfeCollection-TextLink-HybridLink",href:n,target:"_blank",rel:"noopener noreferrer","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("span",{className:"KfeCollection-TextLink-text"},t)," ",i.a.createElement(N.a,{className:"KfeCollection-TextLink-ArrowRight"}))))):null}}]),n}(i.a.Component);Me.propTypes={zaInfo:l.a.object,text:l.a.string.isRequired,url:l.a.string.isRequired};var De=Me;function Ue(e){var t=e.paidContent,n=void 0===t?{}:t,r=e.hasPurchased,a=e.className,c=e.popupCallback,l=e.onLogPaidAnswerProgress,s=e.handleBookshelfButtonClick,b=e.onPayScoreCallback,p=n.resourceType,h=n.btnInfo,m=n.zaInfo,v=n.advertorialInfo||{},O=v.text,j=v.url,y=Object(f.a)().isDarkMode,w=void 0!==y&&y,C=Object(d.b)(),k=Object(o.useRef)(null);return function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{threshold:[.6]},c=Object(o.useRef)(!0),l=t&&e&&e.Zhihu&&e.Android&&"undefined"!=typeof window&&window.IntersectionObserver&&r&&r.current,s=Object(o.useCallback)((function(t){Array.isArray(t)&&t.length&&t[0].isIntersecting&&l&&c.current&&(c.current=!1,g(e,n,0).then((function(e){"function"==typeof a&&a(e)})))}),[a,l,n,e]);Object(o.useEffect)((function(){if(l){var e=new window.IntersectionObserver(s,i),t=r.current;return setTimeout((function(){e&&e.observe(t)}),0),function(){e.unobserve(t)}}}),[l,s,r,i])}(C,!r&&"function"==typeof b&&20!==p,n.id,k,(function(e){return b(e)})),20===p&&O&&j?i.a.createElement(De,{text:O,url:j}):i.a.createElement("div",{className:u()("KfeCollection-PaidAnswerFooter",a),ref:k},!r&&i.a.createElement(H,{btnInfo:h,zaInfo:m||{},popupCallback:c,extra:{ua:C},onClick:l}),i.a.createElement(Ne,{isMobile:C.Mobile,extra:{ua:C},isDarkMode:w,result:n,hasPurchased:r,onBookshelfButtonClick:s,theme:w?"dark":"light",popupCallback:c,logPaidAnswerProgress:l}),i.a.createElement(_e,{result:n,isDarkMode:w,extra:{ua:C}}))}Ue.propTypes={paidContent:l.a.object.isRequired,hasPurchased:l.a.bool.isRequired,className:l.a.string,popupCallback:l.a.func,onLogPaidAnswerProgress:l.a.func,handleBookshelfButtonClick:l.a.func,onPayScoreCallback:l.a.func};var Fe=Ue,Ve=n(221),qe=n(92);function Ge(e){var t,n=e.answer,o=(Object(a.useSelector)((function(e){return Object(qe.x)(e,null==n?void 0:n.id)}))||{}).result;if(!o)return null;var i=null==n||null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased;return Object(r.b)(Fe,{hasPurchased:i,paidContent:o})}var He=Object(Ve.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(Ge,{answer:t}):null}));function We(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze=function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n,r=Array.from(t.childNodes),a=function(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return Ke(t,void 0!==n&&n<r?n:r)}return e(t,n)}(L.a,r,3),o=a[0].nodeValue,i=a[1],c=i.innerText,l=i.attributes,s=a[2].nodeValue,u={},d=We(l,!0);try{for(d.s();!(n=d.n()).done;){var f=n.value;u[f.name]=f.value}}catch(e){d.e(e)}finally{d.f()}return o&&c&&s?{prefixText:o,content:c,status:s,linkInfo:{name:"a",attr:u}}:null}catch(e){return null}};function Qe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ye=function(e){var t=e.content;t=void 0===t?[]:t;var n=Qe(L.a,t,2),r=n[0],a=n[1],o=e.className,c=e.onClick;return i.a.createElement("div",{className:u()("KfeCollection-CertainEndEllipsis",o),onClick:c},i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},r),i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},a))},Je=function(e){var t=e.contentName,n=e.fallbackContent,r=e.onClick,a=Object(o.useMemo)((function(){return function(e){return Ze(e)}(t)}),[t]);if(null===a)return n;var c=a.prefixText,l=a.content,s=a.status,u=a.linkInfo,d=u.name,f=i.a.createElement(i.a.Fragment,null,c,i.a.createElement(d,u.attr,l.slice(0,-1))),b=i.a.createElement(i.a.Fragment,null,i.a.createElement(d,u.attr,l.slice(-1)),s);return i.a.createElement(Ye,{onClick:r,content:[f,b],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})};var Xe=function(e){var t=e.introCard,n=e.paidConsult,r=e.RichTextComponent,a=e.className,o=e.zaInfo,c=void 0===o?{}:o,l=e.handleTrack,s=e.extra,d=void 0===s?{}:s,f=t.statement,b=t.description,p=t.contentName,h=t.authorDesc,m=d.isNewStyle,v=d.isMobile,g=Object(z.l)().trackEvent,O=function(e,t){var n=e.target,r=e.target,a=r.text,o=r.href,i=5325===t?"userName":"bookTitle";"A"===r.tagName&&(B.a.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:a},link:{url:o}}),g({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Text",block:{blockText:i}}},{link:{url:o}})),l&&l(e,o)},j=function(e){return m?"".concat(e,v?"-newStyle-mobile":"-newStyle-pc"):e};return i.a.createElement("section",{className:u()(j("KfeCollection-IntroCard"),a),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[c]}})},!m&&i.a.createElement(i.a.Fragment,null,!!f&&i.a.createElement("p",null,f),!!b&&i.a.createElement("p",null,b),(!!f||!!b)&&i.a.createElement("p",{className:"KfeCollection-IntroCard-spacing"})),i.a.createElement(Je,{contentName:p,onClick:function(e){return O(e,5326)},fallbackContent:i.a.createElement("p",{onClick:function(e){return O(e,5326)},className:j("KfeCollection-IntroCard-contentName"),dangerouslySetInnerHTML:{__html:p}})}),r?i.a.createElement(r,{className:j("KfeCollection-IntroCard-authorDesc"),html:h,onClick:function(e){return O(e,5325)}}):i.a.createElement("p",{onClick:function(e){return O(e,5325)},className:j("KfeCollection-IntroCard-authorDesc"),dangerouslySetInnerHTML:{__html:h}}),n&&n.consultUrl&&i.a.createElement(z.b,{content:Object.assign(Object.assign({},c),{},{id:n.userId,type:Z.e.Conversation}),block:"PaidConsultTopText"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n.consultUrl}}},i.a.createElement("div",{className:j("KfeCollection-IntroCard-paidConsult")},"作者已开通付费咨询，可向作者",i.a.createElement("a",{href:n.consultUrl,target:"_blank",rel:"noopener noreferrer"},"发起咨询")))))},$e=n(1061),et=function(e){return i.a.createElement(pe.a,Object.assign({viewBox:"0 0 140 43"},e),i.a.createElement("defs",null,i.a.createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),i.a.createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},i.a.createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};et.defaultProps={name:"PrivilegeLabel"};var tt=et,nt=function(e){var t=e.data,n=e.className,r=e.extra,a=t||{},o=a.vipText,c=a.worthText,l=a.cardColor,s=void 0===l?0:l,d=r||{},f=d.isNewStyle,b=d.isMobile,p=function(e){return f?"".concat(e,b?"-newStyle-mobile":"-newStyle-pc"):e};return 0===s?null:i.a.createElement("div",{className:u()(p("KfeCollection-Privilege"),n)},i.a.createElement($e.a,{className:p("KfeCollection-Privilege-vipIcon")}),i.a.createElement("div",{className:p("KfeCollection-Privilege-content")},i.a.createElement("span",{className:"KfeCollection-Privilege-vipText"},o),i.a.createElement("span",null," ".concat(c))),!f&&i.a.createElement(tt,{className:"KfeCollection-Privilege-label"}))},rt=function(e){var t=e.data,n=e.className,r=e.extra,a=t||{},o=a.worthText,c=a.cardColor,l=void 0===c?0:c,s=r||{},d=s.isNewStyle,f=s.isMobile;return 2!==l?null:i.a.createElement("div",{className:u()(d?f?"KfeCollection-OrdinaryLabel-newStyle-mobile":"KfeCollection-OrdinaryLabel-newStyle-pc":"KfeCollection-OrdinaryLabel",n)},i.a.createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},o))},at=n(1474),ot=n(937),it=function(e){var t=e.ua,n=void 0===t?{}:t,r=e.isDarkMode,a=void 0!==r&&r,o=e.isFixed,c=void 0!==o&&o;return i.a.createElement("div",{className:c?"KfeCollection-FabledStatement-fixed":"KfeCollection-FabledStatement"},i.a.createElement(ot.a,{isDarkMode:a,ua:n},i.a.createElement(d.a.Provider,{value:n},i.a.createElement(at.g,{disclaimerInfo:{excerpt:"包含虚构创作",description:"创作声明",subDescription:"内容中的情节存在虚构加工，仅供参考"}}))))};function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st=function(e){S()(n,e);var t=ct(n);function n(){return j()(this,n),t.apply(this,arguments)}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.result,n=t.introCard,r=t.vipWorthInfo,a=t.isFabled,o=void 0!==a&&a,c=t.abParam,l=t.paidConsult,s=t.zaInfo,u=e.extra,d=u.ua,f=void 0===d?{}:d,b=u.isDarkMode,p=(r||{}).cardColor,h={isNewStyle:"1"===(c||{}).paTopLabel,isMobile:Boolean(f.Mobile)},m=h.isNewStyle&&!h.isMobile&&0!==p;return i.a.createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},i.a.createElement("div",{className:m?"KfeCollection-AnswerTopCard-FlexContainer":""},2===p?i.a.createElement(rt,{data:r,extra:h}):i.a.createElement(nt,{data:r,className:h.isNewStyle?"":"KfeCollection-AnswerTopCard-Privilege",extra:h}),o&&h.isNewStyle&&i.a.createElement(it,{ua:f,isDarkMode:b,isFixed:m})),Boolean(n)&&i.a.createElement("div",null,i.a.createElement(Xe,{introCard:n,paidConsult:l,zaInfo:s,extra:h})))}}]),n}(i.a.Component);lt(st,"propTypes",{className:l.a.string,result:l.a.object.isRequired}),lt(st,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}}});var ut=st,dt=n(65),ft=function(e){var t=e.answer,n=Object(a.useSelector)((function(e){return Object(qe.x)(e,null==t?void 0:t.id)}))||{},i=n.isRequesting,c=n.error,l=n.result,s=Boolean(!i&&!c&&!l),u=Object(a.useDispatch)();Object(o.useEffect)((function(){s&&u(Object(qe.u)(t.id))}),[s,u,t.id]);var d=Object(a.useSelector)(dt.m),b=Object(f.a)().isDarkMode;return Object(r.b)(ut,{result:l,extra:{ua:d,isDarkMode:b}})},bt=Object(Ve.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(ft,{answer:t}):null}))},1872:function(e,t,n){"use strict";var r=n(1),a=n(1019),o=n(30),i=n.n(o),c=n(39),l=n.n(c),s=n(103),u=n.n(s),d=n(33),f=n.n(d),b=n(24),p=n.n(b),h=n(25),m=n.n(h),v=n(29),g=n.n(v),O=n(18),j=n.n(O),y=n(22),w=n.n(y),C=n(28),k=n.n(C),x=n(0),S=n.n(x),A=n(1153),T=n(1801),R=n(968),E=n(2433),I=n(2438),N=n.n(I),B=n(73),z=n.n(B),P=n(1066),_=n.n(P),L=n(1430),M=n.n(L),D=n(1431),U=n.n(D),F=n(1432),V=n.n(F),q=n(1433),G=n.n(q),H=n(1434),W=n.n(H),K=n(1435),Z=n.n(K),Q=n(1436),Y=n.n(Q),J=n(1437),X=n.n(J),$=n(1438),ee=n.n($),te=n(1439),ne=n.n(te),re=n(1440),ae=n.n(re),oe=n(1441),ie=n.n(oe),ce=n(1442),le=n.n(ce),se=n(1067),ue=n.n(se),de=/([A-Z])/g,fe=function(e){return"-"+String(e.toLowerCase())},be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var pe=["Webkit","ms","Moz","O"];Object.keys(be).forEach((function(e){pe.forEach((function(t){be[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=be[e]}))}));var he=function(e,t){return"number"==typeof t?be[e]?""+t:t+"px":""+t},me=function(e,t){return ge(he(e,t))},ve=function(e,t){return _()(e).toString(36)},ge=function(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:String(e)+" !important"},Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ye="undefined"!=typeof Map,we=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.keyOrder=[]}return je(e,[{key:"forEach",value:function(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])}},{key:"set",value:function(t,n,r){if(this.elements.hasOwnProperty(t)){if(r){var a=this.keyOrder.indexOf(t);this.keyOrder.splice(a,1),this.keyOrder.push(t)}}else this.keyOrder.push(t);if(null!=n){if(ye&&n instanceof Map||n instanceof e){var o=this.elements.hasOwnProperty(t)?this.elements[t]:new e;return n.forEach((function(e,t){o.set(t,e,r)})),void(this.elements[t]=o)}if(Array.isArray(n)||"object"!==(void 0===n?"undefined":Oe(n)))this.elements[t]=n;else{for(var i=this.elements.hasOwnProperty(t)?this.elements[t]:new e,c=Object.keys(n),l=0;l<c.length;l+=1)i.set(c[l],n[c[l]],r);this.elements[t]=i}}else this.elements[t]=n}},{key:"get",value:function(e){return this.elements[e]}},{key:"has",value:function(e){return this.elements.hasOwnProperty(e)}},{key:"addStyleType",value:function(t){var n=this;if(ye&&t instanceof Map||t instanceof e)t.forEach((function(e,t){n.set(t,e,!0)}));else for(var r=Object.keys(t),a=0;a<r.length;a++)this.set(r[a],t[r[a]],!0)}}]),e}(),Ce=["Webkit"],ke=["Moz"],xe=["ms"],Se=["Webkit","Moz"],Ae=["Webkit","ms"],Te=["Webkit","Moz","ms"],Re={plugins:[M.a,U.a,V.a,G.a,W.a,Z.a,Y.a,X.a,ee.a,ne.a,ae.a,ie.a],prefixMap:{transform:Ae,transformOrigin:Ae,transformOriginX:Ae,transformOriginY:Ae,backfaceVisibility:Ce,perspective:Ce,perspectiveOrigin:Ce,transformStyle:Ce,transformOriginZ:Ce,animation:Ce,animationDelay:Ce,animationDirection:Ce,animationFillMode:Ce,animationDuration:Ce,animationIterationCount:Ce,animationName:Ce,animationPlayState:Ce,animationTimingFunction:Ce,appearance:Se,userSelect:Te,fontKerning:Ce,textEmphasisPosition:Ce,textEmphasis:Ce,textEmphasisStyle:Ce,textEmphasisColor:Ce,boxDecorationBreak:Ce,clipPath:Ce,maskImage:Ce,maskMode:Ce,maskRepeat:Ce,maskPosition:Ce,maskClip:Ce,maskOrigin:Ce,maskSize:Ce,maskComposite:Ce,mask:Ce,maskBorderSource:Ce,maskBorderMode:Ce,maskBorderSlice:Ce,maskBorderWidth:Ce,maskBorderOutset:Ce,maskBorderRepeat:Ce,maskBorder:Ce,maskType:Ce,textDecorationStyle:Se,textDecorationSkip:Se,textDecorationLine:Se,textDecorationColor:Se,filter:Ce,fontFeatureSettings:Se,breakAfter:Te,breakBefore:Te,breakInside:Te,columnCount:Se,columnFill:Se,columnGap:Se,columnRule:Se,columnRuleColor:Se,columnRuleStyle:Se,columnRuleWidth:Se,columns:Se,columnSpan:Se,columnWidth:Se,writingMode:Ae,flex:Ae,flexBasis:Ce,flexDirection:Ae,flexGrow:Ce,flexFlow:Ae,flexShrink:Ce,flexWrap:Ae,alignContent:Ce,alignItems:Ce,alignSelf:Ce,justifyContent:Ce,order:Ce,transitionDelay:Ce,transitionDuration:Ce,transitionProperty:Ce,transitionTimingFunction:Ce,backdropFilter:Ce,scrollSnapType:Ae,scrollSnapPointsX:Ae,scrollSnapPointsY:Ae,scrollSnapDestination:Ae,scrollSnapCoordinate:Ae,shapeImageThreshold:Ce,shapeImageMargin:Ce,shapeImageOutside:Ce,hyphens:Te,flowInto:Ae,flowFrom:Ae,regionFragment:Ae,textOrientation:Ce,boxSizing:ke,textAlignLast:ke,tabSize:ke,wrapFlow:xe,wrapThrough:xe,wrapMargin:xe,touchAction:xe,gridTemplateColumns:xe,gridTemplateRows:xe,gridTemplateAreas:xe,gridTemplate:xe,gridAutoColumns:xe,gridAutoRows:xe,gridAutoFlow:xe,grid:xe,gridRowStart:xe,gridColumnStart:xe,gridRowEnd:xe,gridRow:xe,gridColumn:xe,gridColumnEnd:xe,gridColumnGap:xe,gridRowGap:xe,gridArea:xe,gridGap:xe,textSizeAdjust:Ae,borderImage:Ce,borderImageOutset:Ce,borderImageRepeat:Ce,borderImageSlice:Ce,borderImageSource:Ce,borderImageWidth:Ce}};var Ee=le()(Re),Ie=[function(e,t,n){return":"!==e[0]?null:n(t+e)},function(e,t,n){if("@"!==e[0])return null;var r=n(t);return[String(e)+"{"+String(r.join(""))+"}"]}],Ne=function e(t,n,r,a,o){for(var i=new we,c=0;c<n.length;c++)i.addStyleType(n[c]);var l=new we,s=[];i.forEach((function(n,i){r.some((function(c){var l=c(i,t,(function(t){return e(t,[n],r,a,o)}));if(null!=l)return Array.isArray(l)?s.push.apply(s,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l)):(console.warn("WARNING: Selector handlers should return an array of rules.Returning a string containing multiple rules is deprecated.",c),s.push("@media all {"+String(l)+"}")),!0}))||l.set(i,n,!0)}));var u=Pe(t,l,a,o,r);return u&&s.unshift(u),s},Be=function(e,t,n){return String("m"===(r=e.replace(de,fe))[0]&&"s"===r[1]&&"-"===r[2]?"-"+String(r):r)+":"+String(n(e,t))+";";var r},ze=function(e,t){return e[t]=!0,e},Pe=function(e,t,n,r,a){!function(e,t,n){if(t)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a];e.has(o)&&e.set(o,t[o](e.get(o),n),!1)}}(t,n,a);var o=Object.keys(t.elements).reduce(ze,Object.create(null)),i=Ee(t.elements),c=Object.keys(i);if(c.length!==t.keyOrder.length)for(var l=0;l<c.length;l++)if(!o[c[l]]){var s=void 0;if((s="W"===c[l][0]?c[l][6].toLowerCase()+c[l].slice(7):"o"===c[l][1]?c[l][3].toLowerCase()+c[l].slice(4):c[l][2].toLowerCase()+c[l].slice(3))&&o[s]){var u=t.keyOrder.indexOf(s);t.keyOrder.splice(u,0,c[l])}else t.keyOrder.unshift(c[l])}for(var d=!1===r?he:me,f=[],b=0;b<t.keyOrder.length;b++){var p=t.keyOrder[b],h=i[p];if(Array.isArray(h))for(var m=0;m<h.length;m++)f.push(Be(p,h[m],d));else f.push(Be(p,h,d))}return f.length?String(e)+"{"+String(f.join(""))+"}":""},_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Le=null,Me={fontFamily:function e(t){if(Array.isArray(t)){var n={};return t.forEach((function(t){n[e(t)]=!0})),Object.keys(n).join(",")}return"object"===(void 0===t?"undefined":_e(t))?(qe(t.src,"@font-face",[t],!1),'"'+String(t.fontFamily)+'"'):t},animationName:function e(t,n){if(Array.isArray(t))return t.map((function(t){return e(t,n)})).join(",");if("object"===(void 0===t?"undefined":_e(t))){var r="keyframe_"+String((o=t,ve(JSON.stringify(o)))),a="@keyframes "+r+"{";return t instanceof we?t.forEach((function(e,t){a+=Ne(t,[e],n,Me,!1).join("")})):Object.keys(t).forEach((function(e){a+=Ne(e,[t[e]],n,Me,!1).join("")})),Ve(r,[a+="}"]),r}return t;var o}},De={},Ue=[],Fe=!1,Ve=function(e,t){var n;if(!De[e]){if(!Fe){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");Fe=!0,ue()(He)}(n=Ue).push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)),De[e]=!0}},qe=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!De[e]){var o=Ne(t,n,a,Me,r);Ve(e,o)}},Ge=function(){Fe=!1;var e=Ue;return Ue=[],e},He=function(){var e=Ge();e.length>0&&function(e){if(null==Le&&null==(Le=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(Le=document.createElement("style")).type="text/css",Le.setAttribute("data-aphrodite",""),t.appendChild(Le)}var n=Le.styleSheet||Le.sheet;if(n.insertRule){var r=n.cssRules.length;e.forEach((function(e){try{n.insertRule(e,r),r+=1}catch(e){}}))}else Le.innerText=(Le.innerText||"")+e.join("")}(e)},We=function(e){e.forEach((function(e){De[e]=!0}))},Ke=function(e,t,n){var r=[],a=[],o=function e(t,n,r,a){for(var o=0;o<t.length;o+=1)t[o]&&(Array.isArray(t[o])?a+=e(t[o],n,r,a):(n.push(t[o]._name),r.push(t[o]._definition),a+=t[o]._len));return a}(t,r,a,0);if(0===r.length)return"";var i=void 0;return i=1===r.length?"_"+String(r[0]):"_"+String(ve(r.join()))+String((o%36).toString(36)),qe(i,"."+String(i),a,e,n),i},Ze=function(e,t){return String(t)+"_"+String(ve(e))},Qe=ve,Ye={create:function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r+=1){var a=n[r],o=e[a],i=JSON.stringify(o);t[a]={_len:i.length,_name:Qe(i,a),_definition:o}}return t},rehydrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];We(e)}},Je="undefined"!=typeof window?null:{renderStatic:function(e){return Ue=[],De={},Fe=!1,Le=null,function(){if(Fe)throw new Error("Cannot buffer while already buffering");Fe=!0}(),{html:e(),css:{content:Ge().join(""),renderedClassNames:Object.keys(De)}}}};var Xe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie;return{StyleSheet:Object.assign({},Ye,{extend:function(r){var a=r.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return e(t,n.concat(a))}}),StyleSheetServer:Je,StyleSheetTestUtils:null,minify:function(e){Qe=e?ve:Ze},css:function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return Ke(t,r,n)},flushToStyleTag:He,injectAndGetClassName:Ke,defaultSelectorHandlers:Ie}}(!0),$e=(Xe.StyleSheet,Xe.StyleSheetServer,Xe.StyleSheetTestUtils,Xe.css),et=(Xe.minify,Xe.flushToStyleTag,Xe.injectAndGetClassName,Xe.defaultSelectorHandlers,n(2445)),tt=n(99),nt=n(5),rt=n(1443),at=n(485),ot=n(42),it=n(58),ct=n(472),lt=n.n(ct),st=["id","autoplay","onEvent","children","className","sources","isAbortLoadVideo","standalone","enableCrossWindowMessage","pageName","hideWatermark","defaultQuality"],ut=["id","zaProps","autoplay"],dt=["id","autoplay","defaultQuality","hideMobileControls","hideCover","noWriteDocTitle","isAbortLoadVideo","pageName","className","dispatchRef"],ft=["id","zaProps","autoplay","hybridVideoManagerRef","defaultQuality","hideMobileControls","hideCover","isAbortLoadVideo","noWriteDocTitle","pageName"];function bt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function pt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return ht(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j()(e);if(t){var a=j()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var vt=function(e){var t=e.msg;return Object(r.b)("div",{css:{position:"absolute",overflow:"hidden",top:0,bottom:0,left:0,right:0,background:"#EBEBEB"},children:Object(r.b)("div",{css:{position:"absolute",zIndex:1,top:"50%",left:"50%",color:"#BFBFBF",transform:"translate(-50%, -50%)",whiteSpace:"nowrap"},children:t})})},gt={fhd:"1080P",hd:"720P",sd:"480P",ld:"360P"},Ot=function(){function e(t){var n=this,r=t.push,a=t.update,o=t.remove,i=t.getMessageHelper;w()(this,e),this.EVENTS=[R.b.CHANGE_QUALITY_START,R.b.CHANGE_QUALITY_SUCCESS,R.b.CHANGE_QUALITY_FAIL],this.unsubscribes=[],this.timer=null,this.isUpdating=!1,this.handleMessage=function(e,t){[R.b.CHANGE_QUALITY_START,R.b.CHANGE_QUALITY_SUCCESS,R.b.CHANGE_QUALITY_FAIL].includes(e)&&n.handleChangeQuality(e,t)},this.handleChangeQuality=function(e,t){switch(e){case R.b.CHANGE_QUALITY_START:if(n.timer&&(clearTimeout(n.timer),n.remove({type:"quality"}),n.timer=null),n.isUpdating)return void n.update({type:"quality",text:"正在为你切换到".concat(gt[t],"，请稍候…")});n.push({type:"quality",text:"正在为你切换到".concat(gt[t],"，请稍候…")}),n.isUpdating=!0;break;case R.b.CHANGE_QUALITY_SUCCESS:n.update({type:"quality",text:"已成功切换清晰度"}),n.isUpdating=!1,clearTimeout(n.timer),n.timer=setTimeout((function(){n.remove({type:"quality"}),n.timer=null}),3e3);break;case R.b.CHANGE_QUALITY_FAIL:}};var c=i();this.unsubscribes=[],this.EVENTS=[R.b.CHANGE_QUALITY_START,R.b.CHANGE_QUALITY_SUCCESS,R.b.CHANGE_QUALITY_FAIL],this.EVENTS.forEach((function(e){var t=n.handleMessage.bind(n,e),r=c.subscribeMessage((function(n,r){n===e&&t(r)})).unsubscribe;n.unsubscribes.push({handler:t,unsubscribe:function(){clearTimeout(n.timer),r()}})})),this.push=r,this.update=a,this.remove=o,this.timer=null,this.isUpdating=!1}return k()(e,[{key:"destroy",value:function(){this.unsubscribes.forEach((function(e){var t=e.handler;(0,e.unsubscribe)(t)}))}}]),e}(),jt=function(){function e(t){var n=this,r=t.push,a=t.update,o=t.remove,i=t.getMessageHelper;w()(this,e),this.EVENTS=R.b.PLAYBACK_RATE_CHANGE,this.unsubscribes=[],this.timer=null,this.isUpdating=!1,this.handleChange=function(e){var t=e.rate;n.timer&&(clearTimeout(n.timer),n.remove({type:"rate"}),n.timer=null),n.push({type:"rate",text:"已成功切换到".concat(t.text,"倍速")}),n.timer=setTimeout((function(){n.remove({type:"rate"}),n.timer=null}),3e3)};var c=this.handleChange.bind(this),l=i().subscribeMessage((function(e,t){e===n.EVENTS&&c(t)})).unsubscribe;this.unsubscribes=[{handler:c,unsubscribe:function(){clearTimeout(n.timer),l()}}],this.push=r,this.update=a,this.remove=o}return k()(e,[{key:"destroy",value:function(){this.unsubscribes.forEach((function(e){var t=e.handler;(0,e.unsubscribe)(t)}))}}]),e}(),yt=function(e){var t=e.thumbnail,n=e.msg;return Object(r.c)("div",{css:{position:"absolute",overflow:"hidden",top:"50%",transform:"translateY(-50%)",width:"100%",height:"100%"},children:[t&&Object(r.b)("img",{css:{width:"100%",filter:"blur(8px)",transform:"scale(1.1)"},src:t,alt:""}),Object(r.b)("div",{css:{position:"absolute",zIndex:1,top:"50%",left:"50%",color:"#fff",transform:"translate(-50%, -50%)"},children:n})]})},wt=function(){return Object(r.b)("div",{css:{width:"100%",height:"100%",backgroundColor:"#000",position:"absolute",top:0,left:0}})},Ct="playfailed",kt="playcount",xt="playbuffering",St="bufferingtime",At="firstframetime";function Tt(e){var t=e.msg,n=e.id,r=e.time,a=void 0===r?0:r,o=e.quality,i=e.detail,c=void 0===i?"":i,l=e.f,s=e.bu,u=e.v,d=e.platform;if(n){var f,b=N()(navigator.userAgent),p=Object(E.stringify)({type:"msg",msg:t,time:a,videoid:n,playtype:"inline",quality:o,platform:d,version:"1.0.0",f:l,bu:s,v:u,timestamp:Date.now(),dummy:Math.random(),btype:b.browser.name,bversion:b.browser.version,ostype:b.os.name,osversion:b.os.version,detail:c});(f="report?".concat(p),fetch("".concat("https://lens.zhihu.com","/").concat(f),{headers:{"X-Referer":document.referrer,"Content-Type":"application/json","X-App-Za":"OS=webplayer"},credentials:"include"})).catch(z.a)}}var Rt=function(e,t,n,r){if(!e||!t||!n)return z.a;var a=Object(E.parse)(n),o=a.v,i=a.bu,c=a.f,l=r?"webmse":"web";return function(n,r){return Tt({msg:n,id:e,time:r,quality:t,v:o,bu:i,f:c,platform:l})}},Et=function(){function e(t){var n=t.onStart,r=void 0===n?z.a:n,a=t.onStop,o=void 0===a?z.a:a;w()(this,e),this._onStart=r,this._onStop=o,this._startTime=0}return k()(e,[{key:"start",value:function(e){this.isRunning()||(this._startTime=Date.now(),this._onStart(this._startTime,e))}},{key:"reset",value:function(){this._startTime=0}},{key:"stop",value:function(e){if(this.isRunning()){var t=Date.now()-this._startTime;this._onStop(t,e),this.reset()}}},{key:"isRunning",value:function(){return this._startTime>0}}]),e}(),It=function(e){m()(n,e);var t=mt(n);function n(){var e;return w()(this,n),(e=t.apply(this,arguments)).firstFrameStopwatch=new Et({onStart:function(){return e.sendReport(kt)},onStop:function(t){return e.sendReport(At,t)}}),e.bufferStopwatch=new Et({onStop:function(t,n){t>100&&(e.sendReport(xt,1e3*n),e.sendReport(St,t))}}),e.allowReportPlayfailed=!1,e.handleWaiting=function(){e.firstFrameStopwatch.isRunning()||e.bufferStopwatch.start()},e.handlePlaying=function(t){e.firstFrameStopwatch.stop(),e.bufferStopwatch.stop(t.currentTime)},e.sendReport=function(t,n){if(t===Ct){if(!e.allowReportPlayfailed)return;e.allowReportPlayfailed=!1}else t===kt&&(e.allowReportPlayfailed=!0);e.props.sendReport(t,n)},e}return k()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;this.messageHelper=Object(R.c)(t,"*",!0);var n=this.messageHelper.subscribeMessage;n(R.b.PLAY_COUNT,(function(){e.firstFrameStopwatch.start()})),n(R.b.PLAY_FAILED,(function(t){e.sendReport(Ct,t.currentTime)})),n(R.b.WAITING,(function(){e.handleWaiting()})),n(R.b.PLAYING,(function(t){e.handlePlaying(t)}))}},{key:"componentWillUnmount",value:function(){this.messageHelper.dispose()}},{key:"render",value:function(){return null}}]),n}(S.a.PureComponent),Nt=function(e){var t=e.id,n=e.useMSE,a=e.source,o=Object(x.useRef)(Object(R.c)(t,"*",!0)),i=Object(x.useState)(),c=pt(p.a,i,2),l=c[0],s=c[1],u=Object(x.useState)(),d=pt(p.a,u,2),f=d[0],b=d[1];return Object(x.useEffect)((function(){var e=o.current.subscribeMessage((function(e,t){var n;if(e===R.b.QUALITY_CHANGE&&a){var r=t.quality;s(r),b(null===(n=a[r])||void 0===n?void 0:n.play_url)}}));return function(){return e.unsubscribe()}}),[a]),Object(r.b)(It,{id:t,sendReport:Rt(t,l,f,n)},t)},Bt=et.StyleSheet.create({toastRoot:{position:"absolute",left:"1em",bottom:"4em",padding:0},toastItem:{display:"flex",textAlign:"left",color:"#fff",padding:"0 0.5em",height:"2em",backgroundColor:"rgba(0,0,0,0.3)",alignItems:"center",marginTop:"0.3em",borderRadius:"20px",fontSize:"14px"},toastButton:{position:"absolute",right:0,bottom:"100px"}}),zt=function(e){var t=e.toast;return Object(r.b)("li",{className:$e(Bt.toastItem),children:t.text},t.id)},Pt=function(e){var t=e.toastConstructors,n=e.id,a=Object(x.useRef)(0),o=Object(x.useState)([]),i=pt(p.a,o,2),c=i[0],l=i[1],s=Object(tt.a)((function(e){c.push(Object.assign(Object.assign({},e),{},{id:a.current++})),l(pt(f.a,c))})),u=Object(tt.a)((function(e){var t=e.type;l(c.filter((function(e){return e.type!==t})))})),d=Object(tt.a)((function(e){var t=e.type,n=c.findIndex((function(e){return e.type===t}));-1!==n&&(c[n]=Object.assign(Object.assign({},c[n]),e),l(pt(f.a,c)))})),b=Object(x.useRef)([]);return Object(x.useEffect)((function(){return b.current=[],t.forEach((function(e){b.current.push(new e({push:s,update:d,remove:u,getMessageHelper:function(){return Object(R.c)(n,"*",!0)}}))})),function(){b.current.forEach((function(e){return e.destroy&&e.destroy()}))}}),[b,n,s,d,u,t]),Object(x.useEffect)((function(){return function(){b.current.forEach((function(e){return e.destroy&&e.destroy()}))}}),[n]),Object(r.b)("ul",{className:$e(Bt.toastRoot),children:c.map((function(e){return Object(r.b)(zt,{toast:e},e.id)}))})};var _t=[{min:0,max:60,timeType:"<1min"},{min:60,max:180,timeType:"1_3min"},{min:180,max:300,timeType:"3_5min"},{min:300,max:600,timeType:"5_10min"},{min:600,max:1200,timeType:"10_20min"},{min:1200,max:1800,timeType:"20_30min"},{min:1800,timeType:">30min",max:1/0}],Lt=function(e,t,n){var r,a,o=bt(_t,!0);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(e<i.max&&e>=i.min){r="BizVideoPlayer.".concat(n,".player.").concat(i.timeType,".").concat(t,".count");break}}}catch(e){o.e(e)}finally{o.f()}r&&(ot.b.increment("BizVideoPlayer.".concat(n,".player.all.").concat(t,".count")),ot.b.increment(r))},Mt=function(e){var t=e.id,n=e.isAbortLoadVideo,r=e.pageName,a=e.onEvent,o=e.ref,i=e.sources,c=Object(x.useRef)(),s=function(e){var t=Object(rt.d)().mutate,n=Object(at.b)(),r="".concat("https://lens.zhihu.com","/api/v4/videos/").concat(null!=e?e:""),a=Object(rt.b)(e?r:null,function(){var e=u()(l.a.mark((function e(t){var r,a,o,i,c,s,u,d,f,b,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t,{headers:{"X-App-Za":"OS=webplayer","X-Referer":document.referrer,"Content-Type":"application/json"}});case 3:if(a=e.sent,o=Object.keys(a.playlist).reduce((function(e,t){return a.playlist[t]&&(e[t.toLowerCase()]=Object(nt.decamelizeKeys)(a.playlist[t])),e}),{}),a.playlist=o,i=o.sd,c=o.ld,s=o.hd,u=c||i||s){e.next=10;break}return e.abrupt("return",a);case 10:return d=u.width,f=u.height,b=u.duration,a.width=d||0,a.height=f||0,a.duration=b||0,a.smallWhPercent=!!a.height&&Math.abs(a.width/a.height-16/9)<.012,e.abrupt("return",a);case 18:throw e.prev=18,e.t0=e.catch(0),(p=null===(r=e.t0.payload)||void 0===r?void 0:r.error)?ot.b.increment("BizVideoPlayer.default.api.fetchVideoInfo.error.responseError.".concat(p.code||"unknown",".count")):ot.b.increment("BizVideoPlayer.default.api.fetchVideoInfo.error.fetchError.default.count"),e.t0||{message:"视频加载失败"};case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),{revalidateOnFocus:!1});return{data:a.data,error:a.error,reload:Object(tt.a)((function(){return t(r)}))}}(t),d=s.data,f=s.error,b=s.reload,h=Object(x.useState)(!1),m=pt(p.a,h,2),v=m[0],g=m[1],O=function(){var e=Object(x.useState)(),t=pt(p.a,e,2),n=t[0],r=t[1],a=Object(tt.a)((function(e){var t=e.data||{},n=t.message,a=t.data;"data-set"===n&&r(a)}));return Object(x.useEffect)((function(){return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[a]),n}(),j=Object(x.useRef)(null),y=Object(x.useState)(!1),w=pt(p.a,y,2),C=w[0],k=w[1],S=Object(x.useState)(),A=pt(p.a,S,2),T=A[0],I=A[1];!function(e){var t=e.id,n=e.pageName,r=Object(x.useRef)({t0:0,t1:0,duration:0,videoDuration:0}),a=Object(x.useRef)(!1),o=Object(x.useRef)(!1),i=Object(tt.a)((function(){a.current||(r.current.t1=Date.now(),r.current.t1-r.current.t0+r.current.duration>6e3?(a.current=!0,Lt(r.current.videoDuration,"6svv",n)):r.current.duration+=r.current.t1-r.current.t0)})),c=Object(tt.a)((function(){a.current||(r.current.t0=Date.now())})),l=Object(tt.a)((function(e){o.current||(r.current.videoDuration=e.duration?e.duration:0,o.current=!0,Lt(r.current.videoDuration,"vv",n))}));Object(x.useLayoutEffect)((function(){var e=Object(R.c)(t,"*",!0),n=e.subscribeMessage,r=e.dispose;return n(R.b.PLAY,c),n(R.b.PAUSE,i),n(R.b.ENDED,i),n(R.b.CANPLAY,l),function(){r()}}),[c,l,i,t]),Object(x.useLayoutEffect)((function(){return window.addEventListener("pagehide",i,!1),window.addEventListener("beforeunload",i,!1),function(){i(),window.removeEventListener("pagehide",i,!1),window.removeEventListener("beforeunload",i,!1)}}),[i])}({pageName:r,id:t}),function(e){var t=e.id,n=e.isAbortLoadVideo,r=e.pageName,a=e.isStartLoadVideo,o=Object(x.useMemo)((function(){return Object(R.c)(t,"*",!0)}),[t]),i=Object(x.useRef)(!1),c=Object(x.useRef)(0),l=Object(x.useRef)([]),s=Object(x.useRef)(),u=Object(tt.a)((function(e){return setTimeout((function(){ot.b.increment("BizVideoPlayer.".concat(r,".player.play.loading.timeBucket_").concat(e,".count"))}),e)})),d=Object(tt.a)((function(){l.current.forEach((function(e){e&&clearTimeout(e)}))}));Object(x.useEffect)((function(){return d}),[d]),Object(x.useLayoutEffect)((function(){a&&!s.current&&(s.current=Date.now())}),[a]);var f=Object(tt.a)((function(e,t){var a,o;switch(e){case R.b.PLAY_COUNT:i.current=!0,c.current=Date.now(),ot.b.increment("BizVideoPlayer.".concat(r,".player.play.intention.count")),l.current=[u(5e3),u(1e4),u(15e3),u(2e4)];break;case R.b.PLAYING:if(i.current){i.current=!1,d(),ot.b.increment("BizVideoPlayer.".concat(r,".player.play.success.count"));var f=Date.now()-c.current;ot.b.timing("BizVideoPlayer.".concat(r,".player.play.firstFramePlay.default.timing"),f)}break;case R.b.PLAY_FAILED:i.current=!1,d(),i&&!n&&ot.b.increment("BizVideoPlayer.".concat(r,".player.play.failure.count"));break;case R.b.ERROR:(null==t?void 0:t.error)&&(i.current=!1,d(),n||ot.b.increment("BizVideoPlayer.".concat(r,".player.play.error.default.").concat((null===(a=t.error)||void 0===a?void 0:a.code)||"unknown","_").concat((null===(o=t.error)||void 0===o?void 0:o.message)||"unknown",".count")));break;case R.b.LOADEDDATA:s.current&&ot.b.timing("BizVideoPlayer.".concat(r,".player.firstFrameTime"),Date.now()-s.current)}}));Object(x.useEffect)((function(){return o.subscribeMessage(f),o.dispose}),[o,f])}({id:t,isAbortLoadVideo:n,pageName:r,isStartLoadVideo:Boolean(i||d&&!d.isConverting&&!f)});var N=Object(tt.a)((function(e){return e?function(e){var t=Object(E.parse)(e).expiration,n=Date.now()/1e3;return t&&Number(t)<n+900}(e)?b:Promise.resolve():Promise.reject()})),B=function(e){g(e)},z=Object(tt.a)((function(e,t){switch(a&&a(e,t),e){case R.b.ENTER_FULLSCREEN:case R.b.ENTER_PAGE_FULLSCREEN:B(!0);break;case R.b.EXIT_FULLSCREEN:case R.b.EXIT_PAGE_FULLSCREEN:B(!1);break;case R.b.SUBSCRIPTION_READY:k(!0)}}));return Object(x.useImperativeHandle)(o,(function(){return T}),[T]),Object(x.useEffect)((function(){g(!1)}),[t]),Object(x.useEffect)((function(){var e,t,n;I({dispatchAction:null===(e=c.current)||void 0===e?void 0:e.dispatchAction,subscribeEvent:null===(t=c.current)||void 0===t?void 0:t.subscribeEvent,videoElement:C?null===(n=j.current)||void 0===n?void 0:n.querySelector("video"):null})}),[c.current,j.current,C]),{messageContextRef:c,wrapperRef:j,data:d,error:f,externalData:O,handleBeforePlay:N,handleMessage:z,fullScreen:v}},Dt=Object(x.memo)((function(e){var t=e.zhihuLogoSrc,n=e.nickNameSrc;return Object(r.c)(it.Flex,{alignItems:"center",height:"8.57%",width:"max-content",justifyContent:"flex-end",css:{position:"absolute",top:"1.9%",right:"1.07%"},children:[Boolean(n)&&Object(r.b)(it.Image,{src:n,css:{display:"block"},height:"60%",mr:"-2px"}),Object(r.b)(it.Image,{src:t||"https://pica.zhimg.com/80/v2-57c72e66dd4e5cdcc6c137915d81eb88_1440w.png",css:{display:"block"},height:"100%"})]})})),Ut={"zh-Hans":{"quality-ld":{text:"流畅 360P",narrow:"流畅"},"quality-sd":{text:"清晰 480P",narrow:"清晰"},"quality-hd":{text:"高清 720P",narrow:"高清"},"quality-fhd":{text:"超清 1080P",narrow:"超清"}}},Ft=Object(x.forwardRef)((function(e,t){var n=e.id,a=e.autoplay,o=e.onEvent,c=e.children,s=e.className,d=e.sources,f=e.isAbortLoadVideo,b=void 0!==f&&f,h=e.standalone,m=e.enableCrossWindowMessage,v=void 0===m||m,g=e.pageName,O=void 0===g?"default":g,j=e.hideWatermark,y=void 0!==j&&j,w=e.defaultQuality,C=void 0===w?"hd":w,k=i()(e,st),S=Mt({id:n,isAbortLoadVideo:b,pageName:O,onEvent:o,ref:t,sources:d}),A=S.messageContextRef,E=S.wrapperRef,I=S.data,N=S.error,B=S.externalData,P=S.handleBeforePlay,_=S.handleMessage,L=S.fullScreen,M=Object(x.useMemo)((function(){return[Ot,jt]}),[]),D=function(e,t){var n=Object(x.useState)(""),r=pt(p.a,n,2),a=r[0],o=r[1],i=Object(x.useState)(""),c=pt(p.a,i,2),s=c[0],d=c[1],f=Object(x.useState)(!1),b=pt(p.a,f,2),h=b[0],m=b[1],v=Object(x.useState)(!1),g=pt(p.a,v,2),O=g[0],j=g[1],y=Object(x.useState)(!1),w=pt(p.a,y,2),C=w[0],k=w[1],S=Object(x.useState)(!0),A=pt(p.a,S,2),T=A[0],E=A[1],I=Object(x.useRef)(Object(R.c)(e,"*",!0));return Object(x.useEffect)((function(){return I.current.subscribeMessage((function(e){e===R.b.PLAY_COUNT&&j(!0)})),I.current.dispose}),[]),Object(x.useEffect)((function(){if(!t){var n=fetch("https://www.zhihu.com/api/v4/video/play/watermark",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({video_id:e})}),r=fetch("https://www.zhihu.com/api/v4/video/play/watermark_switch");Promise.all([n,r]).then(function(){var e=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].json();case 2:return e.t0=e.sent,e.next=5,t[1].json();case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=pt(p.a,e,2),n=t[0],r=t[1];o(n.logo),d(n.nick_name_url),m(r.watermark||n.watermarked)})).catch(z.a)}}),[e,t]),Object(x.useEffect)((function(){var e=new URL(location.href).searchParams;k(Boolean(e.get("vzuu")))}),[]),Object(x.useEffect)((function(){E(C||!O||h)}),[C,O,h]),{off:T,zhihuLogoSrc:a,nickNameSrc:s}}(n,y),U=D.off,F=void 0===U||U,V=D.zhihuLogoSrc,q=D.nickNameSrc,G=!F&&0===(null==I?void 0:I.watermarked);if(Object(x.useEffect)((function(){requestAnimationFrame((function(){window.parent.postMessage({from:"biz-video-player",event:"onGriffithMount",id:n,timestamp:Date.now()},"*")}))}),[]),N)return Object(r.b)(vt,{msg:N.message||"视频加载失败"});if(!d&&!I)return Object(r.b)(wt,{});var H=I||{},W=H.title,K=H.coverUrl,Z=H.thumbnail,Q=H.isConverting,Y=H.smallWhPercent,J=H.duration,X=Y&&!L?"cover":"contain";return Q?Object(r.b)(yt,{thumbnail:Z,msg:"视频正在转码中..."}):Object(r.b)("div",{className:s,ref:E,children:Object(r.c)(T.default,Object.assign(Object.assign(Object.assign({},k),B),{},{autoplay:a,localeConfig:Ut,standalone:h,enableCrossWindowMessage:v,id:n,title:W,error:N?N||{message:"视频已被删除"}:void 0,cover:K,duration:J,sources:d||(null==I?void 0:I.playlist),onBeforePlay:P,locale:"zh-Hans",shouldObserveResize:!0,defaultQuality:C,initialObjectFit:X,onEvent:_,layerContent:G&&Object(r.b)(Dt,{nickNameSrc:q,zhihuLogoSrc:V}),messageContextRef:A,children:[Object(r.b)(Nt,{id:n,useMSE:!1,source:d||(null==I?void 0:I.playlist)}),Object(r.b)(Pt,{toastConstructors:M,id:n}),c]}))})})),Vt=Object(x.forwardRef)((function(e,t){var n=e.id,a=e.zaProps,o=e.autoplay,c=i()(e,ut);return Object(r.b)(A.b,Object.assign(Object.assign({id:n,autoplay:o},a),{},{children:Object(r.b)(Ft,Object.assign({ref:t,id:n,autoplay:o},c))}))})),qt=Object(x.forwardRef)((function(e,t){var n=e.id,a=e.autoplay,o=void 0!==a&&a,c=e.defaultQuality,l=void 0===c?"hd":c,s=e.hideMobileControls,u=void 0!==s&&s,d=e.hideCover,f=void 0!==d&&d,b=e.noWriteDocTitle,p=void 0!==b&&b,h=e.isAbortLoadVideo,m=void 0!==h&&h,v=e.pageName,g=void 0===v?"default":v,O=e.className,j=e.dispatchRef,y=i()(e,dt),w=Mt({id:n,isAbortLoadVideo:m,pageName:g,ref:t}),C=w.messageContextRef,k=w.wrapperRef,x=w.data,S=w.error,A=w.handleBeforePlay,R=w.handleMessage,E=w.fullScreen;if(S)return Object(r.b)(vt,{msg:S.message||"视频加载失败"});if(!x)return Object(r.b)(wt,{});var I=x.title,N=x.coverUrl,B=x.thumbnail,z=x.playlist,P=x.smallWhPercent,_=x.duration;if(x.isConverting)return Object(r.b)(yt,{thumbnail:B,msg:"视频正在转码中..."});var L=lt()(z);return m&&L&&Object.values(L).forEach((function(e){e.play_url=""})),Object(r.b)("div",{className:O,ref:k,children:Object(r.b)(T.default,Object.assign(Object.assign({},y),{},{standalone:!0,shouldObserveResize:!0,autoplay:o,id:n,title:I,noWriteDocTitle:p,hideCover:f,cover:N,duration:_,sources:L,hideMobileControls:u,locale:"zh-Hans",defaultQuality:l,initialObjectFit:P&&!E?"cover":"contain",messageContextRef:C,error:S,onBeforePlay:A,onEvent:R,dispatchRef:j}))})})),Gt=(Object(x.forwardRef)((function(e,t){var n=e.id,a=e.zaProps,o=e.autoplay,c=void 0!==o&&o,l=e.hybridVideoManagerRef,s=e.defaultQuality,u=void 0===s?"sd":s,d=e.hideMobileControls,f=void 0!==d&&d,b=e.hideCover,p=void 0!==b&&b,h=e.isAbortLoadVideo,m=void 0!==h&&h,v=e.noWriteDocTitle,g=void 0!==v&&v,O=e.pageName,j=void 0===O?"default":O,y=i()(e,ft);return Object(r.b)(A.a,Object.assign(Object.assign({id:n},a),{},{ref:l,children:Object(r.b)(qt,Object.assign(Object.assign({},y),{},{ref:t,autoplay:c,id:n,defaultQuality:u,hideMobileControls:f,hideCover:p,isAbortLoadVideo:m,noWriteDocTitle:g,pageName:j}))}))})),n(376)),Ht=n(68),Wt=n(34),Kt=n(1483),Zt=n(40),Qt=n(224),Yt=n(51),Jt=n(886),Xt=n(52),$t=Object.assign;var en=function(e){return S.a.createElement(Xt.a,$t({fill:"none",viewBox:"0 0 40 40"},e),S.a.createElement("path",{fill:"#fff",d:"M18.194 28.016a9.844 9.844 0 110-19.688 9.844 9.844 0 010 19.688zm10.362-1.813a13.069 13.069 0 10-2.317 2.331l6.045 6.045a1.684 1.684 0 002.317-2.331l-6.045-6.045z",fillRule:"evenodd",clipRule:"evenodd"}))},tn=Object.assign;var nn=function(e){return S.a.createElement(Xt.a,tn({fill:"none",viewBox:"0 0 124 64"},e),S.a.createElement("path",{fill:"#fff",d:"M0 6a6 6 0 016-6h117v64H6a6 6 0 01-6-6V6z"}),S.a.createElement("path",{fill:"#0767FB",d:"M35.274 31.36h5.729A1.642 1.642 0 0142.629 33v1.813h-7.657a37.718 37.718 0 01-1.44 6.794 19.258 19.258 0 01-4.159 7.412 7.082 7.082 0 01-6.966 1.238 41.498 41.498 0 004.016-3.872 21.589 21.589 0 003.872-6.836 23.184 23.184 0 001.021-4.736h-8.39a3.44 3.44 0 013.44-3.44h5.281c.058-.623.087-1.256.087-1.9v-7.196h-2.98c-.115.144-.115.274-.115.389a5.413 5.413 0 01-2.62 3.756 7.542 7.542 0 01-3.266.778s1.51-3.052 2.13-4.779l.059-.172c.378-1.106.968-2.831 1.61-4.635a4.174 4.174 0 011.77-2.519 5.455 5.455 0 013.11-.92s-1.094 3.252-1.44 4.317l-.033.073a.628.628 0 00-.082.258h10.19a1.77 1.77 0 011.77 1.756v1.684h-6.563v9.096zm8.694-12.48H59.8l.043 27.707h-6.189l-5.282 3.368-.518-3.368h-3.886V18.88zm6.045 26.224l3.094-1.957h3.109V22.321h-8.708v20.826h2.202l.303 1.957zM88.6 32.712V20.58l12.133-.633h1.094c.679-1.193.99-2.56.892-3.93l-.001-.002c-.101-.317-.274-.86-.819-.732a41.76 41.76 0 01-5.498.936c-3.364.407-4.925.52-9.248.832l-.827.06c-8.636.634-16.336.936-16.336.936a3.282 3.282 0 003.44 3.296c2.878-.115 7.196-.317 11.514-.533v11.903H68.579a3.44 3.44 0 003.44 3.44h12.954v9.197c0 1.152-.59 1.54-1.57 1.569h-5.037a5.412 5.412 0 002.879 3.397c1.12.374 2.31.497 3.483.36 1.756-.087 3.814-1.08 3.814-4.635v-9.888h14.508a1.638 1.638 0 001.52-1.023c.082-.2.123-.415.121-.632v-1.785H88.6zm-12.207-9.054c.333.206.622.475.85.793l3.7 5.181-2.879 2.087-5.47-7.585.49-.36a2.979 2.979 0 013.31-.116zm19.792.548l-4.016 5.31 2.879 2.16 5.757-7.7-.49-.36a2.941 2.941 0 00-2.203-.575 2.95 2.95 0 00-1.956 1.165h.029zM33.92 40.398l3.023-1.929 3.972 5.93c.45.863.577 1.858.36 2.807a9.04 9.04 0 01-.863 2.878l-6.492-9.686z",fillRule:"evenodd",clipRule:"evenodd"}))},rn=Object.assign;var an=function(e){return S.a.createElement(Xt.a,rn({width:"31",height:"17",fill:"none",viewBox:"0 0 31 17"},e),S.a.createElement("path",{fill:"#fff",d:"M2.928 14.638L0 0h31L5.962 15.933a2 2 0 01-3.034-1.295z"}))},on={width:null},cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";if(on.width)return t?"".concat(on.width/1920*e).concat(t," "):on.width/1920*e},ln=function(e){var t=e.currentUser;return Object(r.c)("div",{css:{display:"flex",alignItems:"center",border:"".concat(cn(3)," solid #fff"),backgroundColor:"#fff",position:"relative",height:cn(70),boxSizing:"border-box",borderRadius:cn(3),width:cn(400)},children:[Object(r.b)(an,{css:{position:"absolute",bottom:parseInt(cn(-18)),right:cn(30),width:cn(31),height:cn(17.5)}}),Object(r.b)(nn,{css:{width:cn(123),height:"100%"}}),Object(r.c)("div",{css:{backgroundColor:"#000",display:"inline-flex",alignItems:"center",position:"relative",height:"100%",paddingRight:cn(10),paddingLeft:cn(20),borderTopRightRadius:cn(3),borderBottomRightRadius:cn(3),flex:1},children:[Object(r.b)("span",{css:{fontSize:cn(34),color:"#fff",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:cn(180),WebkitLineClamp:1},children:t.name}),Object(r.b)(en,{css:{position:"absolute",right:cn(10),width:cn(40),height:cn(40)}})]})]})},sn=n(1429),un=function(e){var t=e.showKanShan,n=e.src;return Object(r.b)("div",{css:{position:"absolute",top:cn(-120),left:cn(100),backgroundColor:"#000",width:cn(300),height:cn(250),overflow:"hidden"},children:n&&Object(r.b)(sn.a,{loop:!1,autoPlay:!0,src:n,css:{position:"absolute",top:cn(-80),left:cn(-250),opacity:t?1:0,width:cn(600),height:cn(600)}})})},dn=Object.assign;var fn=function(e){return S.a.createElement(Xt.a,dn({width:"318",height:"28",fill:"none",viewBox:"0 0 318 28"},e),S.a.createElement("path",{fill:"#fff",d:"M290.976 20.112a.862.862 0 00.61.253l9.471-.043a26.203 26.203 0 01-9.802 3.972 1.172 1.172 0 00-.536.62c-.098.264-.097.555.004.82a1.337 1.337 0 001.612.417 25.695 25.695 0 0010.435-5.268v5.599a1.077 1.077 0 001.079 1.079 1.079 1.079 0 001.08-1.08v-5.757a24.248 24.248 0 0010.434 5.268 1.21 1.21 0 001.512-.432c.144-.72-.044-1.223-.547-1.439a27.624 27.624 0 01-9.687-3.756h9.471a.976.976 0 00.979-.864c0-.576-.331-.864-.979-.864h-11.183v-1.611a1.078 1.078 0 00-1.08-1.08 1.079 1.079 0 00-1.079 1.08v1.611h-11.184a.863.863 0 00-.61 1.475zm.144-10.414a.891.891 0 00.567.217l5.901.044c-.193.238-.384.436-.574.634-.234.244-.468.487-.707.805-.432.576-.331.993.317 1.281l5.268 1.295a54.534 54.534 0 01-9.572 1.44.78.78 0 00-.701.71c-.01.121.008.242.054.355a1.062 1.062 0 001.18.762 54.98 54.98 0 0012.104-2.475c4.011 1.142 6.847 1.967 8.507 2.475a1.222 1.222 0 001.439-.546.936.936 0 00.08-.576.916.916 0 00-.613-.706c-1.007-.215-2.691-.618-5.066-1.194-.849-.216-1.497-.389-1.929-.533a10.786 10.786 0 003.656-3.77h4.851c.561-.072.964-.173.964-.749 0-.576-.331-.863-.964-.863h-14.293c.192-.27.409-.52.648-.749.288-.36.504-.619.648-.763a.74.74 0 00.117-.712.741.741 0 00-.549-.468 1.44 1.44 0 00-1.612.432c-.278.466-.606.9-.979 1.295-.36.432-.604.749-.748.965h-7.427a.937.937 0 00-.863.863.888.888 0 00.296.53zm22.257-2.575c.058.504.418.864 1.065.864.705 0 1.037-.288 1.022-.749V4.763a1.194 1.194 0 00-1.194-1.18h-8.924a12 12 0 00-.763-2.375c-.187-.504-.647-.648-1.439-.648a1.05 1.05 0 00-.864 1.18 2.564 2.564 0 00.216.648c.174.387.318.786.432 1.195h-9.514c-.863 0-1.295.388-1.295 1.18v2.36c.067.5.427.787 1.079.864a.963.963 0 00.965-.864V5.684a.46.46 0 01.532-.533h18.25c.288 0 .432.173.432.533v1.44zm-11.327 5.268l-2.878-.748h.057c-.36-.072-.59-.173-.245-.533a20.893 20.893 0 001.065-1.195h8.463a8.272 8.272 0 01-3.871 3.124l-2.591-.648zM136.762 5.913c.178.16.41.247.649.246l12.061-.043a.92.92 0 00.849-.864.965.965 0 00-.849-.964h-4.635v-.23a.558.558 0 00.059-.11 1.08 1.08 0 00.041-.123.797.797 0 00.016-.084 9.725 9.725 0 01-.432-1.828 3.386 3.386 0 00-.216-.648 1.124 1.124 0 00-1.295-.647.88.88 0 00-.759.711.879.879 0 00.01.368c.023.07.049.154.079.252.049.164.107.368.176.612l.062.216c.077.487.187.968.331 1.439v.115h-5.498a1.004 1.004 0 00-.964.964.96.96 0 00.315.618zm.132 17.768c.084.095.187.17.301.224h-.014a.944.944 0 001.079-.125.947.947 0 00.23-.306 35.592 35.592 0 002.145-4.635c.144-.432-.029-.82-.533-1.18-.647-.072-1.036.144-1.18.648-.144.33-.36.791-.648 1.439a62.54 62.54 0 01-1.511 2.878.947.947 0 00-.097.57.931.931 0 00.228.488zm1.725-7.975c.221.224.521.352.836.355l3.137-.043v7.096c0 1.08-.504 1.511-1.439 1.511h-1.439c-.576 0-.864.317-.864.964a1.183 1.183 0 001.108 1.008 7.872 7.872 0 001.713-.101c2.015 0 2.951-1.036 2.807-3.123V16.06h3.008a1.195 1.195 0 001.18-1.194V9.815a1.186 1.186 0 00-.729-1.09 1.177 1.177 0 00-.451-.09h-8.031a1.238 1.238 0 00-1.181 1.28v4.952c0 .314.124.616.345.84zm1.598-1.933v-2.879h-.014a.482.482 0 01.133-.414.472.472 0 01.414-.133h5.484a.488.488 0 01.28.048l.028.015a.498.498 0 01.241.39.48.48 0 01-.002.095v2.878a.49.49 0 01-.304.5l-.015.006-.012.004a.49.49 0 01-.216.022h-5.484a.473.473 0 01-.511-.318.474.474 0 01-.022-.214zm8.234 7.959a.877.877 0 00.258-.086h-.014a1.036 1.036 0 00.446-1.137c-.144-.331-.389-.792-.748-1.44l-.864-1.295a1.021 1.021 0 00-1.295-.317.808.808 0 00-.44.45.813.813 0 00.008.63c.288.49.863 1.396 1.727 2.677a.856.856 0 00.735.527.831.831 0 00.187-.01zm1.371-11.808a.98.98 0 00.614.323l2.274.014c-.076 6.237-1.727 11.15-4.951 14.738a1.207 1.207 0 00.202 1.44 1.193 1.193 0 001.439-.216c3.234-3.877 4.994-9.221 5.282-16.034h.864a.858.858 0 00-.064.146l-.006.02-.016.054a.943.943 0 00-.029.212v12.694c0 1.986.906 2.879 2.691 2.879h.979c1.857.1 2.907-.864 3.109-2.879a6.564 6.564 0 01.115-.964c.121-.859.193-1.724.216-2.59a1.034 1.034 0 00-.749-1.181.675.675 0 00-.863.648c-.015.433-.053.866-.115 1.295a20.009 20.009 0 01-.216 2.044c-.087 1.209-.59 1.713-1.44 1.713h-.547c-.791.13-1.18-.375-1.18-1.44V10.463l-.1-.216h4.087a.978.978 0 000-1.943h-6.678c0-.72.029-1.857.115-3.44V1.625a1.083 1.083 0 00-1.08-.964 1.022 1.022 0 00-.978.964c0 1.285-.028 2.51-.054 3.674-.024 1.053-.047 2.055-.047 3.005h-2.26a.98.98 0 00-.614 1.62zm7.293-5.391c1.065.935 1.755 1.554 2.043 1.842h-.014c.576.36 1.022.417 1.454.029.431-.389.46-.864.1-1.44a16.122 16.122 0 01-1.281-1.065c-.647-.503-1.079-.834-1.295-.978-.619-.36-1.094-.36-1.439 0a.748.748 0 00-.246.237.739.739 0 00.131.943 3.539 3.539 0 00.547.432zM1.629 5.295c0 .648.288.965.85.965l6.462.043a38.14 38.14 0 01-7.643 8.938 1.353 1.353 0 00-.216 1.612.95.95 0 00.66.482l.018.003a.948.948 0 00.834-.27 33.572 33.572 0 003.555-3.44v12.48a1.151 1.151 0 001.18 1.079 1.108 1.108 0 001.08-1.08V20.94h13.226v1.828c.072 1.296-.561 1.9-1.929 1.828h-3.022c-.49 0-.749.288-.749.864.077.652.51 1.012 1.296 1.08h3.152c2.447 0 3.584-1.109 3.454-3.34V10.722a1.295 1.295 0 00-1.295-1.296H9.588a118.968 118.968 0 001.943-3.123h14.623a.965.965 0 000-1.929H12.597c.445-.673.807-1.398 1.079-2.159a1.137 1.137 0 00-.648-1.439 1.252 1.252 0 00-1.612.964l-1.295 2.591H2.478c-.561 0-.849.317-.849.964zm6.78 8.924v-2.476a.475.475 0 01.532-.532h12.162a.474.474 0 01.331.08l.01.006.007.006.01.008a.496.496 0 01.039.035.475.475 0 01.135.397v2.476H8.408zm0 4.85v-3.008h13.226v3.008H8.408zm32.966 7.851c.201.201.471.317.755.324a1.109 1.109 0 001.08-1.08V7.34a.951.951 0 00-1.08-1.08 1.109 1.109 0 00-1.079 1.08v18.826c.007.284.123.554.324.755zm4.992-20.744c.148-.047.284-.127.398-.233h-.029a.993.993 0 00.058-1.511 37.095 37.095 0 00-2.792-2.879 1.166 1.166 0 00-1.613-.216.993.993 0 00-.114 1.44c.523.434 1.004.916 1.439 1.439.508.476.989.98 1.439 1.511a1.05 1.05 0 001.214.45zm1.83 13.43l.075.005.025.001a1.174 1.174 0 00.18-.01l8.334.072a1.324 1.324 0 001.44-1.281v-8.046a1.224 1.224 0 00-1.44-1.44h-8.333c-.85 0-1.281.505-1.281 1.44v7.974a1.135 1.135 0 001 1.284zm7.73 6.583c.236.197.533.306.84.307h.044c1.828 0 3.08-.043 3.757-.086 2.648-.072 3.914-1.396 3.77-3.973V3.928a1.44 1.44 0 00-1.439-1.44H49.341a1.022 1.022 0 00-.964.98 1.05 1.05 0 00.964 1.065h12.162c.432 0 .648.187.648.546v16.898c.072 1.64-.72 2.36-2.36 2.36h-3.455c-.72.067-1.007.427-.863 1.08.056.302.217.575.453.772zm.193-9.063c0 .36-.216.547-.647.547h-5.758c-.431 0-.647-.187-.647-.547v-5.584a.763.763 0 01.648-.648h5.757a.763.763 0 01.647.648v5.584zm22.755-1.713a.892.892 0 01-.748-.863c.072-.576.317-.864.748-.864h10.766c.504 0 .749.288.749.864a.892.892 0 01-.749.863h-3.555v2.879h3.224c.504 0 .763.288.763.85 0 .56-.26.69-.763.762h-3.224v3.656a11.3 11.3 0 004.088.647c4.02.144 8.338.144 12.953 0 .777 0 1.18.317 1.18.965a.992.992 0 01-.217.586 1.022 1.022 0 01-.963.378h-5.383c-3.526.072-6.102.072-7.757 0-4.443-.144-7.322-1.468-8.636-3.972a16.162 16.162 0 01-1.44 3.972.874.874 0 01-.936.472.879.879 0 01-.344-.14.979.979 0 01-.331-1.296 15.544 15.544 0 001.727-7.643.936.936 0 01.863-.863c.648 0 .965.287.965.863a9.196 9.196 0 01-.115 1.08c.017.362-.017.726-.101 1.08a9.267 9.267 0 002.519 3.022v-7.312l-5.283.014zm2.26-3.871c-.864 0-1.295-.403-1.295-1.195V3.251c0-.791.431-1.194 1.295-1.194h6.678a1.236 1.236 0 011.281 1.194v7.096c0 .792-.417 1.195-1.28 1.195h-6.679zm.533-7.326v1.828h5.498V4.216c0-.36-.144-.533-.432-.533h-4.419c-.432 0-.647.173-.647.533zm5.066 5.757c.288 0 .432-.187.432-.547V7.497h-5.498v1.929c0 .36.215.547.647.547h4.419zm5.052 13.241a.99.99 0 01-1.428-.335.994.994 0 01.463-1.392 7.34 7.34 0 005.268-8.175v-2.59c0-.576.331-.864.979-.864.648 0 .921.36.864.863v2.591a19.18 19.18 0 01-.332 3.757l2.879 2.26c1.079.863 1.871 1.438 2.375 1.827a.89.89 0 01.348 1.105.9.9 0 01-.247.334c-.36.432-.821.461-1.44.101-.356-.207-.693-.543-1.121-.969-.315-.314-.68-.677-1.138-1.075-1.08-.935-1.871-1.568-2.375-1.928a10.306 10.306 0 01-5.095 4.548v-.058zm-.502-19.369a.763.763 0 01-.678-.867.935.935 0 01.863-.864h11.629a.878.878 0 010 1.728h-5.282l-.431 3.108h4.044a1.167 1.167 0 01.251.02l.024.005a1.156 1.156 0 01.861.779c.05.159.065.327.044.492v8.635c0 .576-.317.864-.964.864a.765.765 0 01-.864-.864V9.138a.46.46 0 00-.532-.532h-6.146c-.432 0-.633.172-.633.532v7.815a.863.863 0 11-1.727 0V8.246c0-.792.431-1.195 1.295-1.195h2.26l.532-3.109-4.36-.1a.762.762 0 01-.186.003zm85.487 8.459a1.226 1.226 0 01-.678.022 1.24 1.24 0 01-.772-.583c-.287-.56-.1-1.108.547-1.612a29.074 29.074 0 0010.651-8.074 2.69 2.69 0 011.612-.964 2.117 2.117 0 011.612.964 24.714 24.714 0 0010.55 7.758 1.048 1.048 0 01.46.218 1.034 1.034 0 01.188 1.394 1.339 1.339 0 01-1.728.431A30.56 30.56 0 01188.462 3.9c-.216-.216-.403-.216-.547 0a34.166 34.166 0 01-10.866 8.276 1.264 1.264 0 01-.278.129zm-.039 5.628a1.078 1.078 0 01-.979-1.08 1.021 1.021 0 01.979-.963h22.697a1.064 1.064 0 011.08.964 1.11 1.11 0 01-1.08 1.08h-12.162a71.474 71.474 0 01-5.397 5.612.292.292 0 00-.086.202s0 .1.216.1c3.655-.143 7.527-.32 11.615-.532a30.668 30.668 0 00-2.26-2.26 1.065 1.065 0 010-1.439 1.268 1.268 0 011.626.1l1.713 1.728c1.25 1.198 2.199 2.17 2.884 2.872.261.268.484.496.671.683a.957.957 0 01.206.344.994.994 0 01-.307 1.096 1.122 1.122 0 01-1.626-.101 6.447 6.447 0 01-.532-.648l-.648-.648c-.648 0-1.684 0-3.123.216-5.095.216-8.996.389-11.731.547-.935 0-1.54-.187-1.827-.763a1.811 1.811 0 01.647-1.928 34.96 34.96 0 005.052-5.283l-7.628.101zm5.052-5.599a1.051 1.051 0 01-.965-1.065 1.022 1.022 0 01.965-.978h12.594a1.024 1.024 0 01.964.978 1.054 1.054 0 01-.964 1.065h-12.594zm32.499-7.038c0 .648.288.965.849.965l6.549.043a37.813 37.813 0 01-7.643 8.938 1.353 1.353 0 00-.216 1.612.955.955 0 001.08.415.95.95 0 00.36-.2 33.584 33.584 0 003.555-3.44v12.48a1.15 1.15 0 001.18 1.079 1.107 1.107 0 001.079-1.08V20.94h13.242v1.828c.057 1.296-.504 1.9-1.943 1.828h-3.009c-.503 0-.762.288-.762.864.067.652.499 1.012 1.295 1.08h3.224c2.447 0 3.584-1.109 3.454-3.34V10.722a1.294 1.294 0 00-1.295-1.296h-13.097a118.765 118.765 0 001.942-3.123h14.696a.962.962 0 00.964-.964.964.964 0 00-.964-.965H225.25a10.08 10.08 0 001.08-2.159 1.138 1.138 0 00-.648-1.439 1.252 1.252 0 00-1.612.964l-1.295 2.591h-7.643c-.561 0-.849.317-.849.964zm6.779 8.924v-2.476h-.058a.484.484 0 01.151-.425.481.481 0 01.206-.11l.016-.003a.51.51 0 01.132-.008.46.46 0 01.085.014h12.162a.489.489 0 01.547.532v2.476h-13.241zm0 4.85v-3.008h13.241v3.008h-13.241zm32.599-2.26c-.863.145-1.439 0-1.626-.532a1.22 1.22 0 01.763-1.44 26.994 26.994 0 0010.651-6.03 1.175 1.175 0 01.316-.216 2.166 2.166 0 011.627-.748c.489 0 1.108.288 1.827 1.065a24.738 24.738 0 0010.335 5.498 1.146 1.146 0 01.682.662 1.157 1.157 0 01-.049.95c-.144.504-.677.69-1.612.532a35.98 35.98 0 01-10.867-6.232.518.518 0 00-.748 0 35.353 35.353 0 01-5.464 3.838.868.868 0 01.254-.038h10.866a.864.864 0 010 1.727H259.75a.865.865 0 01-.574-1.509 35.332 35.332 0 01-5.515 2.474zm-1.079-7.642a1.037 1.037 0 010-1.511 18.427 18.427 0 004.519-6.347 1.183 1.183 0 011.512-.533c.561.144.748.533.532 1.18a8.214 8.214 0 01-.748 1.44h6.664a.961.961 0 01.863.964.94.94 0 01-.863.863h-7.744a20.168 20.168 0 01-3.238 3.872 1.44 1.44 0 01-1.526.072h.029zm5.383 16.681c-.864 0-1.339-.46-1.439-1.439v-4.85a1.302 1.302 0 01.376-1.063 1.309 1.309 0 011.063-.377h14.637a1.342 1.342 0 011.215.91c.058.17.08.35.066.53v4.85a1.316 1.316 0 01-.566 1.205 1.327 1.327 0 01-.715.234h-14.637zm3.224-16.364a1.037 1.037 0 01-1.439-.216 10.083 10.083 0 01-1.44-1.929c-.359-.504-.331-.892.101-1.18a1.108 1.108 0 011.439.1c.395.453.756.934 1.08 1.44.094.152.2.296.316.432a1.126 1.126 0 01-.057 1.353zm10.075 14.536a.5.5 0 00.343-.086.48.48 0 00.204-.446v-2.879a.497.497 0 00-.14-.407.486.486 0 00-.407-.14h-11.831c-.432 0-.648.188-.648.547v2.879c0 .345.216.532.648.532h11.831zm-5.167-16.364a1.092 1.092 0 01-.115-1.44 15.455 15.455 0 003.022-4.85 1.14 1.14 0 011.439-.648.936.936 0 01.533 1.296 7.425 7.425 0 01-.748 1.44h7.326a1.009 1.009 0 01.964.963.981.981 0 01-.964.864h-8.291c-.1.184-.211.361-.331.533l-1.18 1.51a1.28 1.28 0 01-1.612.332h-.043zm7.743 1.943a1.02 1.02 0 01-1.439-.331 81.324 81.324 0 01-.222-.284l-.006-.007c-.282-.36-.741-.95-1.384-1.753a.905.905 0 01.216-1.18 1.121 1.121 0 011.439.115l.439.54c.619.761 1.032 1.268 1.173 1.504a1.05 1.05 0 01-.173 1.396h-.043z",fillRule:"evenodd",clipRule:"evenodd"}))},bn=function(e){var t=e.showSlogn;return Object(r.b)(fn,{css:{position:"absolute",left:"50%",bottom:"8%",transform:"translate(-50%,0%)",opacity:t?1:0,transition:"opacity 0.3s linear",width:"30%"}})},pn=function(e){var t=e.src;return Object(r.b)("div",{css:{margin:"auto 0",width:cn(240),height:cn(240),borderRadius:cn(240),position:"absolute",left:"50%",transform:"translate(-50%,0)",backgroundColor:"#eee",fontSize:0},children:t&&Object(r.b)("img",{width:"100%",css:{borderRadius:cn(240)},src:t,alt:"头像"})})};function hn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var mn=function(e){var t=e.setShowEndVideo,a=e.handleOpacityChange,o=e.subscribeEvent,i=e.hasEndVideo,c=e.currentUser,l=e.itemType,s=e.itemId,u=Object(x.useState)(!1),d=hn(Wt.a,u,2),f=d[0],b=d[1],p=Object(x.useState)(!1),h=hn(Wt.a,p,2),m=h[0],v=h[1],g=Object(x.useState)(!1),O=hn(Wt.a,g,2),j=O[0],y=O[1],w=Object(x.useState)(!1),C=hn(Wt.a,w,2),k=C[0],S=C[1],A=Object(x.useRef)(!1),T=Object(x.useRef)(!1),E=Object(x.useRef)([]),I=Object(x.useRef)(new Audio),N=Object(Jt.a)((function(){return n.e(126).then(n.t.bind(null,2843,7))})),B=Object(tt.a)((function(e){if(e){var t=E.current.findIndex((function(t){return t[e]}));E.current[t]&&clearTimeout(E.current[t][e]),E.current.splice(t,1)}else E.current.forEach((function(e){"object"==typeof e?clearTimeout(Object.values(e)[0]):clearTimeout(e)})),E.current=[]})),z=Object(tt.a)((function(){t(!1),v(!1),S(!1),y(!1)})),P=Object(tt.a)((function(){v(!0),E.current.push({author:setTimeout((function(){S(!0),E.current.push({content:setTimeout((function(){b(!0),y(!0),I.current.play()}),200)})}))}),E.current.push({exit:setTimeout((function(){a({value:0}),E.current.push({destroy:setTimeout((function(){z(),B()}),500)})}),2300)})}));Object(x.useEffect)((function(){T.current&&!A.current&&i&&(B("timeout"),P()),i&&T.current&&!A.current&&(B("timeout"),P());var e=function(){t(!0),a({value:1,time:0}),T.current=!0,!1!==i?A.current?z():i?P():E.current.push({timeout:setTimeout((function(){A.current=!0,v(!1),t(!1)}),3e3)}):z()};if(o){var n=o(R.b.ENDED,e).unsubscribe;return function(){n(e),B()}}}),[i,o]);var _,L={type:(_=l,_?_.charAt(0).toUpperCase()+_.slice(1):"")};return"answer"===l?L.token=s:L.id=s,Object(x.useEffect)((function(){I.current.src="https://zhstatic.zhihu.com/heifetz_static/1632738186715.wav"}),[]),m&&N&&Object(r.b)(Yt.b,{content:L,children:Object(r.c)(Yt.f,{zaType:"Video",zaBlock:"EndVideo",children:[Object(r.c)("div",{css:{position:"absolute",left:"50%",top:cn(250),transform:"translate(-50%,0)",textAlign:"center",opacity:k?1:0,transition:"opacity 0.2s linear"},children:[Object(r.c)("div",{css:{position:"relative",height:cn(250),width:cn(300),margin:"0 auto ".concat(cn(53))},children:[f&&Object(r.b)(un,{src:"https://zhstatic.zhihu.com/heifetz_static/kanshan.json",showKanShan:f}),Object(r.b)(pn,{src:c.avatarUrl})]}),Object(r.b)(ln,{currentUser:c})]}),Object(r.b)(bn,{showSlogn:j})]})})};function vn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var gn=function(e){return new Promise((function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.src=e}))},On=function(e){var t=e.itemId,n=e.itemType,a=e.subscribeEvent,o=Object(x.useState)(!1),i=vn(Wt.a,o,2),c=i[0],s=i[1],u=Object(x.useState)({value:1,time:.5}),d=vn(Wt.a,u,2),f=d[0],b=d[1],p=Object(x.useState)(null),h=vn(Wt.a,p,2),m=h[0],v=h[1],g=Object(x.useState)({}),O=vn(Wt.a,g,2),j=O[0],y=O[1],w=Object(x.useRef)(!0),C=Object(x.useState)(!1),k=vn(Wt.a,C,2),S=k[0],A=k[1],T=Object(Qt.b)(),E=Object(x.useRef)(),I=Object(Kt.a)(0),N=vn(Wt.a,I,2),B=N[0],z=N[1],P=Object(tt.a)((function(e){var t=e.value,n=e.time;b({value:t,time:void 0===n?.5:n})})),_=Object(tt.a)((function(){T("".concat(Zt.a.fetchRoot.www,"/api/v4/video/tail?object_id=").concat(t,"&object_type=").concat(n),{headers:{"X-Referer":document.referrer,"Content-Type":"application/json","X-App-Za.OS":"webplayer"},credentials:"include"}).then(function(){var e=Object(Ht.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.payload).displayAnimation){e.next=14;break}return e.prev=2,e.next=5,gn(n.author.avatarUrl);case 5:v(!0),y({name:n.author.name,avatarUrl:n.author.avatarUrl}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),v(!1);case 12:e.next=15;break;case 14:v(!1);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(){v(!1)}))})),L=Object(tt.a)((function(){w.current&&(A(!0),w.current=!1)}));return Object(x.useEffect)((function(){if(t&&n&&S&&T&&_(),a){var e=a(R.b.PLAY,L).unsubscribe;return function(){e(L)}}}),[_,S,T,a]),Object(x.useEffect)((function(){if(E.current&&(on.width=E.current.clientWidth,B(E.current)),a){var e=function(){setTimeout((function(){on.width=E.current.clientWidth}))},t=[a(R.b.ENTER_FULLSCREEN,e).unsubscribe,a(R.b.EXIT_FULLSCREEN,e).unsubscribe,a(R.b.ENTER_PAGE_FULLSCREEN,e).unsubscribe,a(R.b.EXIT_PAGE_FULLSCREEN,e).unsubscribe];return function(){t.forEach((function(e){return e()}))}}}),[E.current,a]),Object(x.useEffect)((function(){z&&(on.width=z&&z.width)}),[z]),Object(r.b)("div",{ref:E,children:Object(r.b)("div",{css:{position:"absolute",height:"100%",width:cn(1920),left:0,top:0,backgroundColor:"black",visibility:c?"visible":"hidden"},children:Object(r.b)("div",{css:{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",opacity:f.value,transition:"opacity ".concat(f.time,"s linear"),backgroundColor:"black",height:9*cn(1920,null)/16,width:"100%"},children:E.current&&Object(r.b)(mn,{itemId:t,itemType:n,currentUser:j,hasEndVideo:m,handleOpacityChange:P,subscribeEvent:a,setShowEndVideo:s})})})})},jn=n(1028),yn=n(65),wn="mount",Cn="ready",kn="first_frame",xn="sec_opening",Sn="timing_maximum",An=function(e){var t=e.videoId,n=e.itemId,o=e.itemType,i=e.zaProps,c=Object(x.useRef)(),l=Object(x.useRef)(!1),s=Object(x.useRef)(Date.now()),u=Object(x.useRef)(Object(R.c)(t,"*",!0)),d="1"===Object(yn.o)("pc_player_rp"),f="feed.videoPlayerCard.".concat(d?"new":"old");Object(jn.a)({videoId:t,playerRef:c});var b=Object(tt.a)((function(e){if(!l.current){var t=Date.now()-s.current;t>1e4?ot.b.increment("".concat(f,".").concat(Sn,".count")):(t<1e3&&e===kn&&ot.b.increment("".concat(f,".").concat(xn,".count")),e===Cn&&ot.b.increment("".concat(f,".").concat(Cn,".count")),ot.b.timing("".concat(f,".").concat(e,".timing"),t,.01),e===kn&&(l.current=!0))}}));Object(Gt.a)((function(){ot.b.increment("".concat(f,".").concat(wn,".count"))}));var p=Object(tt.a)((function(e){e===R.b.SUBSCRIPTION_READY&&b(Cn),e===R.b.LOADEDDATA&&b(kn)}));return Object(x.useEffect)((function(){return u.current.subscribeMessage(p).unsubscribe}),[u,p]),Object(r.b)("div",{css:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:d?Object(r.b)(Vt,{className:"video-player",ref:c,id:t,shouldShowPageFullScreenButton:!0,zaProps:i,pageName:o,standalone:!1,children:c.current&&n&&Object(r.b)(On,{subscribeEvent:c.current.subscribeEvent,itemId:n,itemType:o})}):Object(r.b)(a.a,{ref:c,className:"ZVideoItem-player",type:"video",src:"https://".concat(Zt.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",n],["itemType",o]]).toString()),iframeProps:{allowFullScreen:!0},zaProps:i})})};t.a=Object(x.memo)(An)},1885:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(19),b=n(1777),p=n(916),h=n(159),m=n(118),v=(n(154),n(35)),g=n(174),O=n(1478),j=n(36),y=n(9),w=n(286),C=n(12),k=n.n(C),x=["className","src"],S=["className"],A=["imageUrls"],T=function(e){var t=e.className,n=e.children;return Object(l.b)("div",{className:k()(t,"LiveAvatar-column"),children:n})},R=function(e){var t=e.className,n=e.speakers,r=e.size,a=e.alt;if(!n||!n.length)return null;var o=n.map((function(e){return e.avatarUrl})).slice(0,4),i=function(e){var t=e.className,n=e.src,r=Object(j.default)(e,x);return Object(l.b)(w.b,Object.assign(Object.assign({url:n},r),{},{className:k()("LiveAvatar-img",t)}))},c=function(e){var t=e.className,n=Object(j.default)(e,S);return Object(l.b)(T,{children:Object(l.b)(i,Object.assign(Object.assign({},n),{},{className:k()(t,"alignCenter"),size:r}))})},s=function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:r/2-1}))},u=function(e){var t=e.imageUrls,n=Object(j.default)(e,A);return Object(l.b)(T,{children:t.map((function(e,t){return Object(y.e)(s,Object.assign(Object.assign({},n),{},{key:t,src:e}))}))})},d=[];switch(o.length){case 1:d=Object(l.b)((function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:r}))}),{src:o[0],alt:a});break;case 2:d=o.map((function(e,t){return Object(l.b)(c,{src:e,alt:a},t)}));break;case 3:d=[Object(l.b)(c,{src:o[0],alt:a},"1"),Object(l.b)(u,{imageUrls:o.slice(1,3),alt:a},"2")];break;default:d=[o.slice(0,2),o.slice(2)].map((function(e,t){return Object(l.b)(u,{imageUrls:e,alt:a},t)}))}return Object(l.b)("div",{className:k()(t,"LiveAvatar-wrapper"),style:{width:r,height:r},children:d})},E=n(950),I=n(1361),N=n(1e3),B=n(993),z=n(437),P=n(1589),_=n(1034),L=n(1426);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var D=function(e){Object(o.a)(n,e);var t=M(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.live,a=t.live,o=a.id,i=a.type,c=a.subject,s=a.speaker.member,u=a.startsAt,d=a.price,f=a.promotionPrice,g=a.description,j=void 0===g?"":g,y=a.image,w=a.isLiked,C=a.likedNum,k=a.seats,x=t.lastreadTouchable,S=t.zaIds.options,A=t.renderOptions,T=t.isSticky,z=t.handleToggleSticky,M=t.currentUser,D=M&&M.urlToken===s.urlToken,U="function"==typeof z,F=(k||{}).taken,V="/lives/".concat(o);if(n!==E.c.interactive)return Object(l.b)(E.e,{data:r,link:V,title:Object(l.c)(l.a,{children:[U&&T&&Object(l.b)(O.a,{}),Object(l.b)("a",{href:V,target:"_blank",rel:"noopener noreferrer",children:c})]}),children:U&&D&&Object(L.a)(M)&&Object(l.b)(v.c,{preset:"plain",onClick:z,icon:T?b.b:p.b,label:T?"取消置顶":"置顶"})});Object(l.b)(R,{className:"LiveItem-avatar",speakers:[s],size:60});var q={id:o,type:i};return Object(l.c)("div",{className:"LiveItem",children:[y&&Object(l.b)("a",{className:"LiveItem-cover",href:V,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(m.imgUrl)(y,"640w"),srcSet:"".concat(Object(m.imgUrl)(y,"r")," 2x"),alt:c})}),Object(l.b)(E.e,{image:!1,data:r,link:V,onRef:function(t){e.contentItem=t},title:Object(l.c)("span",{children:[s.name,"：",Object(l.b)("a",{href:V,target:"_blank",rel:"noopener noreferrer",children:c})]}),meta:!1,lastreadTouchable:x,children:Object(l.c)(N.b,{className:"LiveItem-description",excerpt:Object(_.b)(j,60),limit:60,limitWithImage:60,html:j,data:r,extra:Object(l.c)(E.b,{children:[Boolean(F)&&Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),F]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"时间："}),Object(h.toSimpleDateTimeString)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof f?Object(l.c)("span",{className:"LiveItem-price",children:[Object(P.a)(f),Object(l.b)("del",{children:Object(P.a)(d)})]}):Object(P.a)(d)]})]}),children:[Object(l.b)(I.a,Object.assign(Object.assign({},q),{},{liked:w,count:C,icon:"thank"})),Object(l.b)(B.a,Object.assign(Object.assign({},q),{},{title:c,authorName:s&&s.name,url:V})),A&&A((function(){return e.contentItem}),S)]})})]})}}]),n}(d.Component);D.propTypes={preset:u.a.oneOf(Object.values(E.c)),renderOptions:u.a.func,zaIds:u.a.object},D.defaultProps={zaIds:{}};t.a=Object(f.compose)(g.a,Object(z.b)((function(e){var t=e.live,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=(a=void 0===a?{}:a).cardShow;return Object.assign(Object.assign({module:"LiveItem",card:{content:{type:"Live",id:t.id,author_member_hash_id:t.speaker.member.id}}},o&&{view:{id:o}}),{},{trackCardShow:r})})))(D)},1886:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(4),s=n(1),u=n(0),d=n(20),f=n(92),b=n(486),p=n(462),h=n(380),m=n(3),v=n.n(m),g=n(91),O=n(451),j=n(1081),y=n(35),w=n(154),C=n(947),k=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,a=e.canClick,o=e.onClick;if(!n)return null;var i=t.length,c=i===n?"":"".concat(Object(w.formatNumber)(n)," 人");return Object(s.c)(j.CJKSpace,{children:[t.map((function(e,t){return Object(s.c)("span",{children:[t>0&&"、",Object(s.b)(C.a,{noBadge:!0,user:e,children:e.name},t)]},t)})),i>0&&n-i>0&&"等",a?Object(s.c)(y.c,{preset:"plain",onClick:o,children:[c,r]}):c+r]})};k.propTypes={voteupCount:v.a.number.isRequired,upvotedFollowees:v.a.array.isRequired,actionText:v.a.string.isRequired,canClick:v.a.bool,onClick:v.a.func},k.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var x=k,S=n(1487);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var T=function(e){Object(o.a)(n,e);var t=A(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={modalShown:e.props.defaultModalShown},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,a=e.type,o=e.too,i=e.isFetching,c=e.isDrained,l=e.items,u=e.onLoad;if(t<=0)return null;var d,f=this.state.modalShown;return d="pin"===a?"为该".concat(O.b[a],"鼓掌"):"column"===a?"关注":"".concat(o?"也":"","赞同了该").concat(O.b[a]),Object(s.c)("span",{className:"Voters",children:[Object(s.b)(x,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),Object(s.b)(g.b,{size:"fullPage",onClose:this.handleListHide,children:f&&Object(s.b)(S.a,{isFetching:i,isDrained:c,text:"column"===a?"关注了":"赞同了",items:l,voteupCount:t,onLoad:u})})]})}}]),n}(u.Component);T.propTypes={openable:v.a.bool,upvotedFollowees:v.a.array,id:v.a.oneOfType([v.a.number,v.a.string]),type:v.a.oneOf(["pin","answer","article","column"]).isRequired,defaultModalShown:v.a.bool},T.defaultProps={openable:!0,defaultModalShown:!1};var R=T;function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function I(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var N={answer:"answers",article:"articles",pin:"pins",column:"columns"};var B=function(e){Object(o.a)(n,e);var t=E(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleLoad=function(){var t=e.props,n=t.type,r=t.id,a=t.loadAnswerVoters,o=t.loadPinVoters,i=t.loadArticleVoters,c=t.loadColumnsFollowers;switch(n){case"answer":return a(r);case"pin":return o(r);case"article":return i(r);case"column":return c(r);default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){return Object(s.b)(R,Object.assign({onLoad:this.handleLoad},this.props))}}]),n}(u.Component);B.propsTypes=Object.assign({},R.propsTypes),B.defaultProps=Object.assign({},R.defaultProps);t.a=Object(d.connect)((function(e,t){var n=t.id,r=t.type,a=e.entities.users,o=e[N[r]]||{},i=o.voters,c=void 0===i?{}:i,s=o.concernedUpvoters,u=void 0===s?{}:s,d=c[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},f=d.isFetching,b=d.isDrained,p=d.order,h=d.ids,m=(u[n]||{ids:[]}).ids;return{isFetching:f,isDrained:b,order:p,items:[].concat(I(l.a,m),I(l.a,h.filter((function(e){return!m.includes(e)})))).map((function(e){return a[e]}))}}),{loadAnswerVoters:f.t,loadArticleVoters:b.e,loadPinVoters:p.k,loadColumnsFollowers:h.c})(B)},1887:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n.n(a),i=n(52),c=Object.assign;var l=function(e){return o.a.createElement(i.a,c({viewBox:"0 0 15 15"},e),o.a.createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},o.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),o.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},s=Object.assign;var u=function(e){return o.a.createElement(i.a,s({width:"15",height:"15",viewBox:"0 0 15 15"},e),o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),o.a.createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},d=Object.assign;var f=function(e){return o.a.createElement(i.a,d({viewBox:"0 0 15 15"},e),o.a.createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},o.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),o.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return Object(r.b)("div",{className:"Rating",children:Array.from({length:5}).map((function(e,t){var a=function(e,t){return t>=e+1?l:t>=e+.5?u:f}(t,n);return Object(r.b)(a,{size:15},t)}))})}},1888:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(1),a=n(58),o=n(933),i=n(51),c=n(99),l=n(0),s=n.n(l),u=n(52),d=Object.assign;var f=function(e){return s.a.createElement(u.a,d({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),s.a.createElement("path",{fill:"url(#paint0_linear_269:46630)",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("path",{fill:"#06F",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"url(#paint1_linear_269:46630)",rx:".8"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"#06F",rx:".8"}),s.a.createElement("path",{fill:"#fff",stroke:"#fff",d:"M8.962 11.153h.725V13.5H8.3v-2.754c0-.66.293-1.181.7-1.567.064-.06.129-.116.196-.168a2.654 2.654 0 00-.205.227c-.295.369-.53.864-.53 1.415v.5h.5zM12.974 11.153h.726V13.5h-1.387v-2.754c0-.66.293-1.181.7-1.567.063-.06.129-.116.195-.168a2.657 2.657 0 00-.204.227c-.295.369-.53.864-.53 1.415v.5h.5z"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"paint0_linear_269:46630",x1:"15",x2:"2",y1:"2",y2:"15",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"})),s.a.createElement("linearGradient",{id:"paint1_linear_269:46630",x1:"17.5",x2:"4.5",y1:"4.5",y2:"17.5",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"}))))},b=n(32);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.title,l=e.question,s=(l=void 0===l?{}:l).title,u=e.url,d=e.id,p="answer"===t?"原回答：".concat(s):"原文章：".concat(n),h=Object(c.a)((function(){window.open(u)}));return Object(r.b)(i.b,{content:{type:b.eb[t],token:String(d)},children:Object(r.c)(i.a,{shouldTrackShow:!0,zaText:"zvideo_origin_content",zaType:"Card",zaAction:"OpenUrl",extra:{link:{url:u}},as:a.Flex,bg:"GBK10A",padding:"12px 10px 12px 18px",justifyContent:"space-between",onClick:h,css:{cursor:"pointer"},children:[Object(r.c)(a.Flex,{children:[Object(r.b)(f,{css:{marginRight:"6.5px"}}),Object(r.b)(a.Text,{color:"GBK06A",fontSize:"14px",lineHeight:"19.6px",children:p})]}),Object(r.b)(o.a,{size:20,css:function(e){return{flexShrink:"0",fill:e.colors.GBK06A}}})]})})}var h=n(34),m=n(286),v=n(1031),g=n(20),O=n(95),j=n(1011),y=n(154),w=(n(1065),n(126)),C=n(453),k=n(943);function x(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var S=function(e){var t=e.author,n=t.author,o=t.identity,c=t.id,s=Object(g.useSelector)((function(e){return Object(w.e)(e,{urlToken:n})})),u=s||{},d=u.avatarUrl,f=u.isFollowing,b=u.name,p=Object(l.useRef)(),h=Object(l.useCallback)((function(){return window.open("https://www.zhihu.com/people/".concat(n))}),[n]),O=Object(l.useCallback)((function(){return p.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",text:f?"取消关注":"关注"},action:f?"UnFollow":"Follow"}),!0}),[f]);return s?Object(r.c)(i.b,{content:{type:"User",token:n,id:c},children:[Object(r.b)(i.e,{ref:p}),Object(r.c)(a.Flex,{mt:"16px",css:{"& + &":{marginTop:"24px"}},alignItems:"center",children:[Object(r.b)(m.b,{url:d,size:38,css:{cursor:"pointer"},onClick:h}),Object(r.c)(a.Box,{ml:"14px",flex:"1",children:[Object(r.b)(a.Box,{color:"GBK03A",fontSize:"15px",lineHeight:"17px",fontWeight:"bold",onClick:h,css:[Object(v.a)(1),{cursor:"pointer"}],children:b}),Object(r.b)(a.Box,{color:"GBK04A",fontSize:"14px",lineHeight:"16px",mt:"3px",children:o})]}),Object(r.b)(k.a,{useCustomZa:!0,preset:"primary",type:"people",id:n,isFollowing:f,onClick:O,css:{padding:"0 14px",minWidth:"0px"}})]})]}):null},A=function(e){var t,n,o,c,l,s=e.item,u=e.index;if("ANSWER"===s.type)o="Answer",c=(l=s.answer).question.title;else{if("ARTICLE"!==s.type)return null;o="Post",c=(l=s.article).title}var d=l,f=d.id,b=d.thumbnailInfo,p=d.url,h=d.voteupCount,m=d.commentCount,g=null==b||null===(t=b.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,O="".concat(Object(y.cnNiceNumber)(h),"赞同 · ").concat(Object(y.cnNiceNumber)(m),"评论");return Object(r.b)(i.b,{content:{type:o,id:String(f)},children:Object(r.c)(i.a,{as:"a",view:{elementLocation:{card:{index:u}}},zaType:"Card",zaAction:"OpenUrl",zaText:"视频引用的原文",extra:{link:{url:p}},href:p,target:"_blank",css:function(e){return{marginTop:"16px",display:"flex",alignItems:"center",height:"84px",borderRadius:"8px",padding:"0 12px",backgroundColor:e.colors.GBK10A}},children:[g&&Object(r.b)(a.Image,{src:g,width:"60px",height:"60px",mr:"12px",css:{borderRadius:"6px"}}),Object(r.c)(a.Box,{flex:"1",children:[Object(r.b)(a.Box,{fontWeight:"bold",fontSize:"15px",css:Object(v.a)(1),children:c}),Object(r.b)(a.Box,{color:"GBK06A",fontSize:"13px",children:O})]})]})})},T=function(e){var t,n,c=e.id,s=e.subAuthor,u=e.before,d=e.after,p=e.content,y=p||{},w=y.type,k=y.id,T=b.eb[w],R=Object(g.useDispatch)(),E=Object(g.useSelector)((function(e){return e.zvideos.creationReferences[c]})),I=Object(l.useState)(!1),N=x(h.a,I,2),B=N[0],z=N[1],P=Object(l.useCallback)((function(){z(!0),R(Object(C.m)(c))}),[R,c]);return s?Object(r.c)(r.a,{children:[Object(r.b)(i.b,{block:"CreationReferencesBar",content:p?{type:T,token:String(k)}:{},children:Object(r.c)(i.f,{zaText:!0,shouldTrackClick:!0,zaType:"Card",as:a.Flex,onClick:P,justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"10px",py:"12px",color:"GBK06A",bg:"GBK10A",fontSize:"14px",lineHeight:"20px",css:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[Object(r.c)(a.Flex,{children:[Object(r.b)(f,{css:{marginRight:"6.5px"}}),Object(r.b)(a.Box,{flexShrink:"0",children:u}),Object(r.c)(a.Flex,{alignItems:"center",mx:"6px",children:[Object(r.b)(m.b,{url:s.avatarUrl,round:!0,size:18,css:function(e){return{border:"1px solid ".concat(e.colors.GBK99A)}}}),Object(r.b)(a.Box,{flex:"1",ml:"6px",css:Object(v.a)(1),children:s.name})]}),Object(r.b)(a.Box,{flexShrink:"0",children:d})]}),Object(r.b)(o.a,{size:20,css:{flexShrink:"0"}})]})}),Object(r.b)(O.b,{onClose:function(){return z(!1)},title:"引用详情",children:B&&(E?Object(r.c)(i.b,{block:"CreationReferencesModal",children:[Object(r.b)(a.Box,{fontSize:"15px",fontWeight:"bold",children:"作者"}),null===(t=E.authors)||void 0===t?void 0:t.map((function(e){return Object(r.b)(S,{author:e},e.author)})),Object(r.b)(a.Box,{my:"24px",css:function(e){return{borderTop:"1px solid ".concat(e.colors.GBK10A)}}}),Object(r.b)(a.Box,{fontSize:"15px",fontWeight:"bold",children:"视频引用的原文"}),null===(n=E.originalContent)||void 0===n?void 0:n.map((function(e,t){return Object(r.b)(A,{item:e,index:t},t)}))]}):Object(r.c)(r.a,{children:[Object(r.b)(j.a,{variant:"P01"}),Object(r.b)(j.a,{variant:"T02"})]}))})]}):null},R=n(1200),E=function(e){var t=e.id,n=e.creationRelationship;if(!n)return null;if(Object(R.e)(n)){var a,o=Object(R.a)(n);return(null!==(a=null==o?void 0:o.author)&&void 0!==a?a:null)&&Object(r.b)(p,Object.assign({},o))}if(Object(R.f)(n)){var i,c=Object(R.d)(n),l=null!==(i=null==c?void 0:c.author)&&void 0!==i?i:null,s="answer"===(null==c?void 0:c.type)?"回答":"文章";return l&&Object(r.b)(T,{id:t,subAuthor:l,before:"本视频引用",after:"的".concat(s,"进行创作"),content:c})}return null}},1896:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(0),u=n(3),d=n.n(u),f=n(20),b=n(35),p=n(91),h=n(43),m=n(134);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=v(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleAnonymousConfirm=function(){var t=e.props,n=t.question.id,r=t.updateQuestionAnonymous;(0,t.onClose)(),r(n)},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,r=e.shown,a=e.isMCNUser,o=n.relationship.isAnonymous;return Object(l.b)(p.b,{title:o?"确认取消匿名身份？":"启用匿名后",onClose:t,size:"default",children:r&&Object(l.c)("div",{children:[o?Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.b)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.c)("ul",{children:[Object(l.b)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),Object(l.b)("li",{children:"不能邀请别人回答问题"}),Object(l.b)("li",{children:"不能将回答同步到圈子"}),Object(l.b)("li",{children:"除提问者本人，不能匿名编辑问题"}),Object(l.b)("li",{children:"匿名身份不能使用视频功能"}),Object(l.b)("li",{children:"不能被视频引用和联合创作"}),Object(l.b)("li",{children:"启用匿名将自动取消所有已获得的「专业认可」"}),Object(l.b)("li",{children:"匿名身份不能参与芝士任务"}),a&&Object(l.b)("li",{children:"不能使用商品信息发布功能"})]})}),Object(l.c)(p.a,{direction:"horizontal",children:[Object(l.b)(b.c,{onClick:t,color:"grey",children:"取消"}),Object(l.b)(b.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})}}]),n}(s.Component);g.propTypes={question:d.a.object.isRequired};t.a=Object(f.connect)((function(e){var t,n=Object(h.b)(e);return{isMCNUser:2===(null==n||null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status)}}),{updateQuestionAnonymous:m.qb,fillCurrentUserIfNeeded:h.f})(g)},1898:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(118),b=n(947),p=n(950),h=(n(1887),n(1004)),m=n(963),v=n(993),g=n(1361),O=n(1589),j=n(437);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var w=function(e){Object(o.a)(n,e);var t=y(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.preset,r=e.ebook,a=e.lastreadTouchable,o=r.id,i=r.type,c=r.url,s=r.title,u=r.cover,d=r.authors,f=r.price,j=r.promotionPrice,y=r.description,w=r.relationship,C=void 0===w?{}:w,k=r.voteupCount,x=r.commentCount,S=(r.score,this.state),A=S.commentsShown,T=S.commentsAutoFocus,R=S.commentPattern;if(t!==p.c.interactive)return Object(l.b)(p.e,{title:Object(l.b)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:s}),data:r,link:c});var E={id:o,type:i},I=d.slice(0,2);return Object(l.c)(p.e,{className:"EBookItem",data:r,link:c,title:Object(l.b)("a",{className:"EBookItem-title",href:c,target:"_blank",rel:"noopener noreferrer",children:s}),image:Object(l.b)(n.Cover,{url:c,title:s,cover:u}),meta:Object(l.c)("div",{children:[Object(l.b)("div",{className:"EBookItem-description",children:y}),Object(l.c)(p.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),I.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(b.a,{user:e}),t<I.length-1&&"、"]},t)}))]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"知乎价："}),"number"==typeof j?Object(l.c)("span",{className:"EBookItem-price",children:[Object(O.a)(j),Object(l.b)("del",{children:Object(O.a)(f)})]}):Object(O.a)(f)]})]})]}),lastreadTouchable:a,children:[Object(l.c)(p.a,{className:"EBookItem-actions",children:[Object(l.b)(g.a,Object.assign(Object.assign({},E),{},{liked:Boolean(C.voting),count:k})),Object(l.b)(h.a,{onClick:this.handleCommentsShown,commentsShown:A,count:x}),Object(l.b)(v.a,Object.assign(Object.assign({},E),{},{title:s,authorName:d[0]&&d[0].name,href:c}))]}),Object(l.b)(m.a,{parent:r,commentPattern:R,shown:A,autoFocus:T,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);w.propTypes={preset:u.a.oneOf(Object.values(p.c))},w.defaultProps={preset:p.c.default},w.Cover=function(e){var t=e.url,n=e.cover,r=e.title;return Object(l.b)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{className:"EBookItem-image",style:{width:"78px",height:"104px"},src:Object(f.imgUrl)(n,"100w"),srcSet:"".concat(Object(f.imgUrl)(n,"xld")," 2x"),alt:r})})};t.a=Object(j.b)((function(e){var t=e.trackCardShow;return{module:"EBookItem",trackCardShow:void 0===t||t}}))(w)},1899:function(e,t,n){"use strict";var r=n(34),a=n(1),o=n(0),i=n.n(o),c=n(12),l=n.n(c),s=n(99),u=n(884),d=n(51),f=n(41),b=n.n(f),p=n(35),h=n(52),m=Object.assign;var v=function(e){return i.a.createElement(h.a,m({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),i.a.createElement("path",{d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003zM18 2a2 2 0 012 2v1.134a1 1 0 011.207 1.573l-1.5 1.5a1 1 0 01-1.414 0l-1.5-1.5A1 1 0 0118 5.134V4h-2a1 1 0 110-2h2zm-8 4a1 1 0 010 2H4a1 1 0 110-2h6zm2-4a1 1 0 010 2H4a1 1 0 110-2h8z",fillRule:"evenodd"}))},g=n(1601),O=n(1192),j=n(57);function y(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var w=!1,C=function(){var e=Object(o.useState)(!1),t=y(r.a,e,2),n=t[0],i=t[1],c=Object(o.useRef)(null);Object(o.useEffect)((function(){b.a.get("vessayTipShown")||i(!0)}),[]),Object(O.a)((function(){i(!1),b.a.set("vessayTipShown",!0)}),c);var l=Object(s.a)((function(e){e.stopPropagation(),i(!1),b.a.set("vessayTipShown",!0)}));return n&&Object(a.b)("img",{ref:c,onClick:l,onKeyUp:l,src:"https://pic1.zhimg.com/v2-97ce1cdeee383ce98263fc787f08ba9e.png",alt:"一键生成视频",css:{width:"347px",height:"120px",objectFit:"cover",transform:"translate(-50%, -100%)",position:"absolute",top:"4px",left:"50%"}})};t.a=function(e){var t=e.className,n=e.type,i=e.id,c=e.useVessayV2,s=e.isAuthor,f=Object(g.c)(n,i,c),h=Object(j.isBrowser)()&&location.href.includes("/people"),m=Object(o.useState)(!1),O=y(r.a,m,2),k=O[0],x=O[1],S=Object(u.a)({once:!0}),A=y(r.a,S,2),T=A[0],R=A[1];return Object(o.useEffect)((function(){R&&!w&&(w=!0,x(!0))}),[R]),Object(a.c)(d.a,{as:p.c,zaAction:"OpenUrl",zaText:"生成视频",zaType:"Button",preset:"plain",onClick:function(){b.a.set("vessayTipShown",!0),window.open(f)},className:l()("ContentItem-convertVideoButton",t),css:{position:"relative"},extra:{link:{url:f}},children:[k&&s&&h&&Object(a.b)(C,{}),Object(a.b)(v,{}),Object(a.b)("span",{ref:T,children:"一键生成视频"})]})}},1900:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(0),u=n(19),d=n(20),f=n(1603),b=n.n(f),p=n(262),h=n.n(p),m=n(198),v=n(596);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function O(e,t){var n=t.os,r=t.id,a=t.sessionId,o=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",a).replace("__SESSIONID__",a).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",o)}var j=function(e){Object(o.a)(n,e);var t=g(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={urls:null,logged:!1},e.handleObserve=function(t){t&&e.log()},e.log=function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then((function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]}))).then((function(e){return e.forEach((function(e){return e&&Object(m.c)(e)}))})).then((function(){return e.setState({logged:!0})}))},e.load=function(){var t=e.props,n=t.type,r=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:r}).then((function(e){return e&&e.payload&&e.payload.data}))},e.normalize=function(t){var n=h()(),r=e.props,a=r.ua,o=r.id,i=r.type,c=encodeURIComponent("其他");a.Android?c="android":a.iOS&&(c="ios");var l={os:c,id:o,sessionId:n,type:i};return t.map((function(e){return O(e,l)}))},e}return Object(a.a)(n,[{key:"render",value:function(){return!this.state.logged&&Object(l.b)(b.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),n}(s.Component),y=Object(u.compose)(Object(d.connect)((function(e){return{ua:e.env.userAgent}}),{loadBrandEntityTrackUrl:v.b}))(j)},1901:function(e,t,n){"use strict";var r=n(217),a=n(1),o=n(0),i=n(12),c=n.n(i),l=n(91),s=n(159),u=n(220),d=n.n(u),f=n(1020),b=n(34),p=n(36),h=n(58),m=n(933),v=n(1031),g=n(437),O=n(23),j=n(1078),y=["children","targetId","active","setCursor"];function w(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var C,k=function(e){var t=e.children,n=e.targetId,r=e.active,o=e.setCursor,i=Object(p.default)(e,y);return Object(a.b)(h.Text,Object.assign(Object.assign({color:r?"GBL01A":"GBK02A",fontWeight:r?"bold":"normal",css:{fontSize:"14px"}},i),{},{children:Object(a.b)(g.a,{module:"Content",moduleName:String(t),children:Object(a.c)(h.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){O.a.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);o(n),t&&Object(j.a)(t)},children:[Object(a.b)(h.Text,{css:Object(v.a)(1),children:t}),Object(a.b)(m.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},x=function(e){return Object(a.b)(k,Object.assign({},e))},S={1:x,2:function(e){return Object(a.b)(k,Object.assign({pl:"20px"},e))}},A=function(e){var t=e.catalog,n=e.className,r=e.zaContent,i=Object(o.useState)(null),l=w(b.a,i,2),s=l[0],u=l[1];return Object(o.useEffect)((function(){if(null!=t&&t.length){var e=null,n=Object(j.d)();t.forEach((function(t){var r=document.querySelector("#"+t.targetId);(null==r?void 0:r.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),u(e)}}),[]),null!=t&&t.length?Object(a.b)(g.a,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:r,module:"Content",children:Object(a.b)(h.Box,{className:c()(n),children:Object(a.b)(h.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,o=S[t]||x;return Object(a.b)(o,{targetId:r,active:s===r,setCursor:u,children:n},r)}))})})}):null};t.a=function(e){var t=e.className,n=e.shown,i=e.onClose,u=e.html,b=e.sourceId,p=e.updated,h=e.author,m=e.zaContent,v=Object(o.useMemo)((function(){return Object(f.c)(u,b).catalog}),[u,b]);return Object(a.b)(l.b,{wrapperClassName:"CatalogModal-wrapper",className:c()("CatalogModal",t),title:"目录",subtitle:d()(C||(C=Object(r.a)([""," 编辑于",""])),null==h?void 0:h.name,Object(s.toDateTimeString)(p)),onClose:i,children:n&&Object(a.b)(A,{css:{paddingBottom:"16px"},catalog:v,zaContent:m})})}},1902:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(14),a=n(15),o=n(16),i=n(17),c=n(8),l=n(1),s=n(286),u=n(2209),d=n(3),f=n.n(d),b=n(0),p=n(154),h=n(159),m=n(1004),v=n(963),g=n(950),O=n(943),j=n(1906),y=n(993),w=n(947);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var k=function(e){Object(o.a)(n,e);var t=C(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.roundtable,a=t.lastreadTouchable,o=t.zaInfos.follow,i=r||{},c=i.id,d=i.logo,f=i.type,b=i.guests,C=void 0===b?[]:b,k=i.stopTime,x=i.startTime,S=i.followers,A=i.commentCount,T=i.isFollowing,R=this.state,E=R.commentsShown,I=R.commentsAutoFocus,N=R.commentPattern,B=Object(l.b)(j.a,{roundtable:r,target:"_blank"}),z="/roundtable/".concat(c);if(n!==g.c.interactive)return Object(l.b)(g.e,{data:r,link:z,title:B});var P,_,L,M={id:c,type:f};return Object(l.c)(g.e,{data:r,link:z,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"RoundtableItem-title",children:[B,Object(l.c)("div",{className:"RoundtableItem-badge",children:[Object(l.b)(u.a,{text:!0,center:!0})," ",(P=x,_=k,L=Date.now()/1e3,L>_?"已结束":L<P?"".concat(Object(h.toRelativeString)(P)," 开始"):"".concat(Object(h.toRelativeString)(_)," 结束"))]})]}),image:Object(l.b)(s.b,{url:d,size:60}),meta:Object(l.c)("div",{className:"RoundtableItem-meta",children:[Object(p.formatNumber)(S)," 人关注","了该圆桌"]}),lastreadTouchable:a,children:[C.length>0&&Object(l.b)(g.b,{children:Object(l.c)("div",{children:[Object(l.b)("span",{children:"嘉宾："}),C.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(w.a,{user:e}),t<C.length-1&&"、"]},t)}))]})}),Object(l.c)(g.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},M),{},{isFollowing:T,zaId:o})),Object(l.b)(m.a,{onClick:this.handleCommentsShown,commentsShown:E,count:A}),Object(l.b)(y.a,Object.assign(Object.assign({},M),{},{title:r.name}))]}),Object(l.b)(v.a,{parent:r,commentPattern:N,shown:E,autoFocus:I,onClose:this.handleCommentsHide})]})}}]),n}(b.Component);k.propTypes={preset:f.a.oneOf(Object.values(g.c)),zaInfos:f.a.shape({follow:f.a.number,options:f.a.number}),renderOptions:f.a.func},k.defaultProps={preset:g.c.default,zaInfos:{}}},1903:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(39),a=n.n(r),o=n(68),i=n(1),c=n(20),l=n(51),s=n(218),u=n(6),d=Object(u.a)("coCreation",["CANCEL"]);function f(e){var t=e.contentType,n=e.contentId,r=Object(c.useDispatch)(),u=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.confirm("",{title:"你确定要取消联合创作吗？",text:{ok:"同意"}});case 2:return e.next=4,r((a=t,o=n,{API:{types:d.CANCEL,endpoint:"creation-relationship/cancel",method:"PUT",body:{content_type:a,content_id:String(o)}}}));case 4:window.location.reload();case 5:case"end":return e.stop()}var a,o}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.b)(l.a,{zaType:"Button",zaText:!0,zaBlock:"CancelCoCreation",onClick:u,children:"取消联合创作"})}},1906:function(e,t,n){"use strict";var r=n(36),a=n(14),o=n(15),i=n(16),c=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(0),b=n(12),p=n.n(b),h=n(1143),m=n(2209),v=n(1744),g=n(20),O=n(48),j=n(23),y=n(1073),w=n(159),C=n(445),k=n(943),x=n(157),S=["userKey","isLast"],A=["toggler","roundtable","id","isLoading","onRef"];function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var R=function(e){var t=e.userKey,n=e.isLast,a=Object(r.default)(e,S),o=Object(g.useSelector)((function(e){return e.entities.users[t]}));if(!o)return null;var i=o.urlToken,c=o.name,l=o.isOrg;return Object(s.c)(O.Link,Object.assign(Object.assign({to:"/".concat(l?"org":"people","/").concat(i)},a),{},{children:[c,!n&&"、"]}))},E=function(e){Object(i.a)(n,e);var t=T(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.dispatch,r=t.id;n(Object(C.d)(r))},e.track=function(){var t=e.props.roundtable;e.hoverCardElement&&t&&(j.a.setModule(e.hoverCardElement,{module:"RoundtableItem"},{card:{content:{type:"Roundtable",token:t.id,item_num:t.questionsCount,follower_num:t.followers,publish_timestamp:1e3*t.stopTime}}}),j.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,a=t.roundtable,o=t.id,i=t.isLoading,c=t.onRef,l=Object(r.default)(t,A),u=a||{},d=u.name,f=u.type,b=u.description,p=u.guests,g=void 0===p?[]:p,O=u.activitiesCount,j=u.questionsCount,C=u.followers,S=u.logo,T=u.stopTime,E=u.isFollowing,I=g.length,N="/roundtable/".concat(o);return Object(s.c)(h.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{ref:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(h.a,{title:Object(s.b)("a",{target:"_blank",href:"/roundtable/".concat(o),rel:"noopener noreferrer",children:d}),avatarUrl:S,attrInfo:Object(s.c)("div",{children:[Object(s.b)(m.a,{text:!0,center:!0})," ",Object(w.toRelativeString)(T)]})}),b&&Object(s.b)("div",{children:Object(s.b)("div",{className:"HoverCard-description",children:b})}),Object(s.c)("div",{children:[Object(s.b)(v.a,{text:!0,center:!0})," 组织机构",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),Object(s.b)("a",{href:"/topic/19793502",children:"圆桌"})]}),I>0&&Object(s.c)("div",{children:["嘉宾",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),g.map((function(e,t){var n=e.member;return Object(s.b)(R,{userKey:n,isLast:t===I-1},t)}))]}),Object(s.c)("div",{children:[Object(s.c)(y.a,{children:[Object(s.b)(y.a.Item,{tag:x.a,preset:"plain",a:!0,to:N,name:"动态",value:O}),Object(s.b)(y.a.Item,{tag:x.a,preset:"plain",a:!0,to:"".concat(N,"/question"),name:"问题",value:j}),Object(s.b)(y.a.Item,{tag:x.a,preset:"plain",a:!0,to:"".concat(N,"/followers"),name:"关注者",value:C})]}),Object(s.b)("div",{className:"HoverCard-buttons",children:Object(s.b)(k.a,{id:o,type:f,isFollowing:E,preset:"primary"})})]})]}))}}]),n}(f.Component),I=Object(g.connect)((function(e,t){var n=t.id,r=e.entities.roundtables,a=e.loading.local;return{roundtable:r[n],isLoading:Boolean(a["roundtable/".concat(n)])}}))(E),N=["roundtable","noHoverCard","style","className","children"];function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var z=function(e){Object(i.a)(n,e);var t=B(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.roundtable,n=t.name,a=t.id,o=e.noHoverCard,i=e.style,c=e.className,l=e.children,u=Object(r.default)(e,N),d=l||n;return o||(d=Object(s.b)(I,{toggler:d,id:a})),Object(s.b)("a",Object.assign(Object.assign({style:i,className:p()("RoundTableLink",c),href:"/roundtable/".concat(a)},u),{},{children:d}))}}]),n}(f.Component);z.propTypes={roundtable:d.a.object.isRequired,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},z.defaultProps={noHoverCard:!1};t.a=z},2433:function(e,t,n){"use strict";var r=n(24),a=n(33);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return c(t,void 0!==n&&n<r?n:r)}return e(t,n)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n(2434),s=n(2435),u=n(2436),d=n(2437);function f(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function b(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function p(e,t){return t.decode?s(e):e}function h(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function m(e){var t=(e=h(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function v(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){f((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var a="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!a&&p(n,e).includes(e.arrayFormatSeparator);n=o?p(n,e):n;var i=a||o?n.split(e.arrayFormatSeparator).map((function(t){return p(t,e)})):null===n?n:p(n,e);r[t]=i};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;var c,l=o(e.split("&"),!0);try{for(l.s();!(c=l.n()).done;){var s=c.value;if(""!==s){var d=u(t.decode?s.replace(/\+/g," "):s,"="),b=i(r,d,2),h=b[0],m=b[1];m=void 0===m?null:["comma","separator"].includes(t.arrayFormat)?m:p(m,t),n(p(h,t),m,a)}}}catch(e){l.e(e)}finally{l.f()}for(var g=0,O=Object.keys(a);g<O.length;g++){var j=O[g],y=a[j];if("object"==typeof y&&null!==y)for(var w=0,C=Object.keys(y);w<C.length;w++){var k=C[w];y[k]=v(y[k],t)}else a[j]=v(y,t)}return!1===t.sort?a:(!0===t.sort?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce((function(e,t){var n=a[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))}t.extract=m,t.parse=g,t.stringify=function(e,t){if(!e)return"";f((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n]},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(a,n),null===r?[[b(t,e),"[",o,"]"].join("")]:[[b(t,e),"[",b(o,e),"]=",b(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(a,n),null===r?[[b(t,e),"[]"].join("")]:[[b(t,e),"[]=",b(r,e)].join("")])}};case"comma":case"separator":return function(t){return function(n,r){return null==r||0===r.length?n:0===n.length?[[b(t,e),"=",b(r,e)].join("")]:[[n,b(r,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(a,n),null===r?[b(t,e)]:[[b(t,e),"=",b(r,e)].join("")])}}}}(t),o={},c=0,l=Object.keys(e);c<l.length;c++){var s=l[c];n(s)||(o[s]=e[s])}var u=Object.keys(o);return!1!==t.sort&&u.sort(t.sort),u.map((function(n){var a=e[n];return void 0===a?"":null===a?b(n,t):Array.isArray(a)?a.reduce(r(n),[]).join("&"):b(n,t)+"="+b(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=u(e,"#"),a=i(r,n,2),o=a[0],c=a[1];return Object.assign({url:o.split("?")[0]||"",query:g(m(e),t)},t&&t.parseFragmentIdentifier&&c?{fragmentIdentifier:p(c,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign({encode:!0,strict:!0},n);var r=h(e.url).split("?")[0]||"",a=t.extract(e.url),o=t.parse(a,{sort:!1}),i=Object.assign(o,e.query),c=t.stringify(i,n);c&&(c="?".concat(c));var l=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l="#".concat(b(e.fragmentIdentifier,n))),"".concat(r).concat(c).concat(l)},t.pick=function(e,n,r){r=Object.assign({parseFragmentIdentifier:!0},r);var a=t.parseUrl(e,r),o=a.url,i=a.query,c=a.fragmentIdentifier;return t.stringifyUrl({url:o,query:d(i,n),fragmentIdentifier:c},r)},t.exclude=function(e,n,r){var a=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,a,r)}},2434:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},2435:function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function i(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),c=0;c<o.length;c++){var l=o[c];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},2436:function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},2437:function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),o=0;o<r.length;o++){var i=r[o],c=e[i];(a?-1!==t.indexOf(i):t(i,c,e))&&(n[i]=c)}return n}},2438:function(e,t,n){var r;!function(a,o){"use strict";var i="model",c="name",l="type",s="vendor",u="version",d="mobile",f="tablet",b="smarttv",p=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},h=function(e,t){return"string"==typeof e&&-1!==m(t).indexOf(m(e))},m=function(e){return e.toLowerCase()},v=function(e,t){if("string"==typeof e)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===t?e:e.substring(0,255)},g=function(e,t){for(var n,r,a,o,i,c,l=0;l<t.length&&!i;){var s=t[l],u=t[l+1];for(n=r=0;n<s.length&&!i;)if(i=s[n++].exec(e))for(a=0;a<u.length;a++)c=i[++r],"object"==typeof(o=u[a])&&o.length>0?2===o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,c):this[o[0]]=o[1]:3===o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=c?c.replace(o[1],o[2]):void 0:this[o[0]]=c?o[1].call(this,c,o[2]):void 0:4===o.length&&(this[o[0]]=c?o[3].call(this,c.replace(o[1],o[2])):void 0):this[o]=c||void 0;l+=2}},O=function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(h(t[n][r],e))return"?"===n?void 0:n}else if(h(t[n],e))return"?"===n?void 0:n;return e},j={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,u],[/opios[\/ ]+([\w\.]+)/i],[u,[c,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[u,[c,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[c,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[u,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[u,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[u,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure Browser"],u],[/\bfocus\/([\w\.]+)/i],[u,[c,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[u,[c,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[c,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[c,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[u,[c,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 Browser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,u],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,"Facebook"],u],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[c,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,"Chrome WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[c,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,u],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[u,[c,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[u,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[u,O,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[c,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",m]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",m]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",m]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[i,[s,"Samsung"],[l,f]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[i,[s,"Samsung"],[l,d]],[/\((ip(?:hone|od)[\w ]*);/i],[i,[s,"Apple"],[l,d]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[i,[s,"Apple"],[l,f]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[i,[s,"Huawei"],[l,f]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[i,[s,"Huawei"],[l,d]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[i,/_/g," "],[s,"Xiaomi"],[l,d]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[i,/_/g," "],[s,"Xiaomi"],[l,f]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[i,[s,"OPPO"],[l,d]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[i,[s,"Vivo"],[l,d]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[i,[s,"Realme"],[l,d]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[i,[s,"Motorola"],[l,d]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[i,[s,"Motorola"],[l,f]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[i,[s,"LG"],[l,f]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[i,[s,"LG"],[l,d]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[i,[s,"Lenovo"],[l,f]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[i,/_/g," "],[s,"Nokia"],[l,d]],[/(pixel c)\b/i],[i,[s,"Google"],[l,f]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[i,[s,"Google"],[l,d]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[i,[s,"Sony"],[l,d]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[i,"Xperia Tablet"],[s,"Sony"],[l,f]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[i,[s,"OnePlus"],[l,d]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[i,[s,"Amazon"],[l,f]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[i,/(.+)/g,"Fire Phone $1"],[s,"Amazon"],[l,d]],[/(playbook);[-\w\),; ]+(rim)/i],[i,s,[l,f]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[i,[s,"BlackBerry"],[l,d]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[i,[s,"ASUS"],[l,f]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[i,[s,"ASUS"],[l,d]],[/(nexus 9)/i],[i,[s,"HTC"],[l,f]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[s,[i,/_/g," "],[l,d]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[i,[s,"Acer"],[l,f]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[i,[s,"Meizu"],[l,d]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[i,[s,"Sharp"],[l,d]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[s,i,[l,d]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[s,i,[l,f]],[/(surface duo)/i],[i,[s,"Microsoft"],[l,f]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[i,[s,"Fairphone"],[l,d]],[/(u304aa)/i],[i,[s,"AT&T"],[l,d]],[/\bsie-(\w*)/i],[i,[s,"Siemens"],[l,d]],[/\b(rct\w+) b/i],[i,[s,"RCA"],[l,f]],[/\b(venue[\d ]{2,7}) b/i],[i,[s,"Dell"],[l,f]],[/\b(q(?:mv|ta)\w+) b/i],[i,[s,"Verizon"],[l,f]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[i,[s,"Barnes & Noble"],[l,f]],[/\b(tm\d{3}\w+) b/i],[i,[s,"NuVision"],[l,f]],[/\b(k88) b/i],[i,[s,"ZTE"],[l,f]],[/\b(nx\d{3}j) b/i],[i,[s,"ZTE"],[l,d]],[/\b(gen\d{3}) b.+49h/i],[i,[s,"Swiss"],[l,d]],[/\b(zur\d{3}) b/i],[i,[s,"Swiss"],[l,f]],[/\b((zeki)?tb.*\b) b/i],[i,[s,"Zeki"],[l,f]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[s,"Dragon Touch"],i,[l,f]],[/\b(ns-?\w{0,9}) b/i],[i,[s,"Insignia"],[l,f]],[/\b((nxa|next)-?\w{0,9}) b/i],[i,[s,"NextBook"],[l,f]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[s,"Voice"],i,[l,d]],[/\b(lvtel\-)?(v1[12]) b/i],[[s,"LvTel"],i,[l,d]],[/\b(ph-1) /i],[i,[s,"Essential"],[l,d]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[i,[s,"Envizen"],[l,f]],[/\b(trio[-\w\. ]+) b/i],[i,[s,"MachSpeed"],[l,f]],[/\btu_(1491) b/i],[i,[s,"Rotor"],[l,f]],[/(shield[\w ]+) b/i],[i,[s,"Nvidia"],[l,f]],[/(sprint) (\w+)/i],[s,i,[l,d]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[s,"Microsoft"],[l,d]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[i,[s,"Zebra"],[l,f]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[i,[s,"Zebra"],[l,d]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[s,i,[l,"console"]],[/droid.+; (shield) bui/i],[i,[s,"Nvidia"],[l,"console"]],[/(playstation [345portablevi]+)/i],[i,[s,"Sony"],[l,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[i,[s,"Microsoft"],[l,"console"]],[/smart-tv.+(samsung)/i],[s,[l,b]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[s,"Samsung"],[l,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[s,"LG"],[l,b]],[/(apple) ?tv/i],[s,[i,"Apple TV"],[l,b]],[/crkey/i],[[i,"Chromecast"],[s,"Google"],[l,b]],[/droid.+aft(\w)( bui|\))/i],[i,[s,"Amazon"],[l,b]],[/\(dtv[\);].+(aquos)/i],[i,[s,"Sharp"],[l,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[s,v],[i,v],[l,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,b]],[/((pebble))app/i],[s,i,[l,"wearable"]],[/droid.+; (glass) \d/i],[i,[s,"Google"],[l,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[i,[s,"Zebra"],[l,"wearable"]],[/(quest( 2)?)/i],[i,[s,"Facebook"],[l,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[s,[l,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[i,[l,d]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[i,[l,f]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,f]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[l,d]],[/(android[-\w\. ]{0,9});.+buil/i],[i,[s,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,u],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[u,O,j]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[u,O,j]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,"Mac OS"],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[u,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,u],[/\(bb(10);/i],[u,[c,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[c,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[u,[c,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[c,"Chromium OS"],u],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,u],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,u]]},w=function e(t,n){if("object"==typeof t&&(n=t,t=void 0),!(this instanceof e))return new e(t,n).getResult();var r=t||(void 0!==a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),o=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(y,n):y;return this.getBrowser=function(){var e,t={};return t[c]=void 0,t[u]=void 0,g.call(t,r,o.browser),t.major="string"==typeof(e=t.version)?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,t},this.getCPU=function(){var e={architecture:void 0};return g.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return g.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return g.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return g.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r="string"==typeof e&&e.length>255?v(e,255):e,this},this.setUA(r),this};w.VERSION="1.0.2",w.BROWSER=p([c,u,"major"]),w.CPU=p(["architecture"]),w.DEVICE=p([i,s,l,"console",d,b,f,"wearable","embedded"]),w.ENGINE=w.OS=p([c,u]),void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=w),t.UAParser=w):n(1490)?void 0===(r=function(){return w}.call(t,n,t,e))||(e.exports=r):void 0!==a&&(a.UAParser=w);var C=void 0!==a&&(a.jQuery||a.Zepto);if(C&&!C.ua){var k=new w;C.ua=k.getResult(),C.ua.get=function(){return k.getUA()},C.ua.set=function(e){k.setUA(e);var t=k.getResult();for(var n in t)C.ua[n]=t[n]}}}("object"==typeof window?window:this)},2439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)};var r,a=n(2440),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},2440:function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,a=/^ms-/,o={};function i(e){return"-"+e.toLowerCase()}t.default=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,i);return o[e]=a.test(t)?"-"+t:t}},2441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t)){for(var r={},a=e[t],i=(0,o.default)(t),c=Object.keys(n),l=0;l<c.length;l++){var s=c[l];if(s===t)for(var u=0;u<a.length;u++)r[a[u]+i]=n[t];r[s]=n[s]}return r}return n};var r,a=n(1800),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},2442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){for(var o=0,i=e.length;o<i;++o){var c=e[o](t,n,r,a);if(c)return c}},e.exports=t.default},2443:function(e,t,n){"use strict";function r(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var n=0,a=t.length;n<a;++n)r(e,t[n]);else r(e,t)},e.exports=t.default},2444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)},e.exports=t.default},2445:function(e,t,n){e.exports=n(2446)},2446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2447);n(1066),n(1430),n(1431),n(1432),n(1433),n(1434),n(1435),n(1436),n(1437),n(1438),n(1439),n(1440),n(1441),n(1442),n(1067);var a=r.makeExports(!1),o=a.StyleSheet,i=a.StyleSheetServer,c=a.StyleSheetTestUtils,l=a.css,s=a.minify,u=a.flushToStyleTag,d=a.injectAndGetClassName,f=a.defaultSelectorHandlers;t.StyleSheet=o,t.StyleSheetServer=i,t.StyleSheetTestUtils=c,t.css=l,t.minify=s,t.flushToStyleTag=u,t.injectAndGetClassName=d,t.defaultSelectorHandlers=f},2447:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=r(n(1066)),o=r(n(1430)),i=r(n(1431)),c=r(n(1432)),l=r(n(1433)),s=r(n(1434)),u=r(n(1435)),d=r(n(1436)),f=r(n(1437)),b=r(n(1438)),p=r(n(1439)),h=r(n(1440)),m=r(n(1441)),v=r(n(1442)),g=r(n(1067)),O=/([A-Z])/g,j=function(e){return"-"+String(e.toLowerCase())},y={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var w=["Webkit","ms","Moz","O"];Object.keys(y).forEach((function(e){w.forEach((function(t){y[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=y[e]}))}));var C=function(e,t){return"number"==typeof t?y[e]?""+t:t+"px":""+t},k=function(e,t){return S(C(e,t))},x=function(e,t){return a(e).toString(36)},S=function(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:String(e)+" !important"},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var R="undefined"!=typeof Map,E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.keyOrder=[]}return T(e,[{key:"forEach",value:function(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])}},{key:"set",value:function(t,n,r){if(this.elements.hasOwnProperty(t)){if(r){var a=this.keyOrder.indexOf(t);this.keyOrder.splice(a,1),this.keyOrder.push(t)}}else this.keyOrder.push(t);if(null!=n){if(R&&n instanceof Map||n instanceof e){var o=this.elements.hasOwnProperty(t)?this.elements[t]:new e;return n.forEach((function(e,t){o.set(t,e,r)})),void(this.elements[t]=o)}if(Array.isArray(n)||"object"!==(void 0===n?"undefined":A(n)))this.elements[t]=n;else{for(var i=this.elements.hasOwnProperty(t)?this.elements[t]:new e,c=Object.keys(n),l=0;l<c.length;l+=1)i.set(c[l],n[c[l]],r);this.elements[t]=i}}else this.elements[t]=n}},{key:"get",value:function(e){return this.elements[e]}},{key:"has",value:function(e){return this.elements.hasOwnProperty(e)}},{key:"addStyleType",value:function(t){var n=this;if(R&&t instanceof Map||t instanceof e)t.forEach((function(e,t){n.set(t,e,!0)}));else for(var r=Object.keys(t),a=0;a<r.length;a++)this.set(r[a],t[r[a]],!0)}}]),e}(),I=["Webkit"],N=["Moz"],B=["ms"],z=["Webkit","Moz"],P=["Webkit","ms"],_=["Webkit","Moz","ms"];var L=v({plugins:[o,i,c,l,s,u,d,f,b,p,h,m],prefixMap:{transform:P,transformOrigin:P,transformOriginX:P,transformOriginY:P,backfaceVisibility:I,perspective:I,perspectiveOrigin:I,transformStyle:I,transformOriginZ:I,animation:I,animationDelay:I,animationDirection:I,animationFillMode:I,animationDuration:I,animationIterationCount:I,animationName:I,animationPlayState:I,animationTimingFunction:I,appearance:z,userSelect:_,fontKerning:I,textEmphasisPosition:I,textEmphasis:I,textEmphasisStyle:I,textEmphasisColor:I,boxDecorationBreak:I,clipPath:I,maskImage:I,maskMode:I,maskRepeat:I,maskPosition:I,maskClip:I,maskOrigin:I,maskSize:I,maskComposite:I,mask:I,maskBorderSource:I,maskBorderMode:I,maskBorderSlice:I,maskBorderWidth:I,maskBorderOutset:I,maskBorderRepeat:I,maskBorder:I,maskType:I,textDecorationStyle:z,textDecorationSkip:z,textDecorationLine:z,textDecorationColor:z,filter:I,fontFeatureSettings:z,breakAfter:_,breakBefore:_,breakInside:_,columnCount:z,columnFill:z,columnGap:z,columnRule:z,columnRuleColor:z,columnRuleStyle:z,columnRuleWidth:z,columns:z,columnSpan:z,columnWidth:z,writingMode:P,flex:P,flexBasis:I,flexDirection:P,flexGrow:I,flexFlow:P,flexShrink:I,flexWrap:P,alignContent:I,alignItems:I,alignSelf:I,justifyContent:I,order:I,transitionDelay:I,transitionDuration:I,transitionProperty:I,transitionTimingFunction:I,backdropFilter:I,scrollSnapType:P,scrollSnapPointsX:P,scrollSnapPointsY:P,scrollSnapDestination:P,scrollSnapCoordinate:P,shapeImageThreshold:I,shapeImageMargin:I,shapeImageOutside:I,hyphens:_,flowInto:P,flowFrom:P,regionFragment:P,textOrientation:I,boxSizing:N,textAlignLast:N,tabSize:N,wrapFlow:B,wrapThrough:B,wrapMargin:B,touchAction:B,gridTemplateColumns:B,gridTemplateRows:B,gridTemplateAreas:B,gridTemplate:B,gridAutoColumns:B,gridAutoRows:B,gridAutoFlow:B,grid:B,gridRowStart:B,gridColumnStart:B,gridRowEnd:B,gridRow:B,gridColumn:B,gridColumnEnd:B,gridColumnGap:B,gridRowGap:B,gridArea:B,gridGap:B,textSizeAdjust:P,borderImage:I,borderImageOutset:I,borderImageRepeat:I,borderImageSlice:I,borderImageSource:I,borderImageWidth:I}}),M=[function(e,t,n){return":"!==e[0]?null:n(t+e)},function(e,t,n){if("@"!==e[0])return null;var r=n(t);return[String(e)+"{"+String(r.join(""))+"}"]}],D=function e(t,n,r,a,o){for(var i=new E,c=0;c<n.length;c++)i.addStyleType(n[c]);var l=new E,s=[];i.forEach((function(n,i){r.some((function(c){var l=c(i,t,(function(t){return e(t,[n],r,a,o)}));if(null!=l)return Array.isArray(l)?s.push.apply(s,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l)):(console.warn("WARNING: Selector handlers should return an array of rules.Returning a string containing multiple rules is deprecated.",c),s.push("@media all {"+String(l)+"}")),!0}))||l.set(i,n,!0)}));var u=V(t,l,a,o,r);return u&&s.unshift(u),s},U=function(e,t,n){return String("m"===(r=e.replace(O,j))[0]&&"s"===r[1]&&"-"===r[2]?"-"+String(r):r)+":"+String(n(e,t))+";";var r},F=function(e,t){return e[t]=!0,e},V=function(e,t,n,r,a){!function(e,t,n){if(t)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a];e.has(o)&&e.set(o,t[o](e.get(o),n),!1)}}(t,n,a);var o=Object.keys(t.elements).reduce(F,Object.create(null)),i=L(t.elements),c=Object.keys(i);if(c.length!==t.keyOrder.length)for(var l=0;l<c.length;l++)if(!o[c[l]]){var s=void 0;if((s="W"===c[l][0]?c[l][6].toLowerCase()+c[l].slice(7):"o"===c[l][1]?c[l][3].toLowerCase()+c[l].slice(4):c[l][2].toLowerCase()+c[l].slice(3))&&o[s]){var u=t.keyOrder.indexOf(s);t.keyOrder.splice(u,0,c[l])}else t.keyOrder.unshift(c[l])}for(var d=!1===r?C:k,f=[],b=0;b<t.keyOrder.length;b++){var p=t.keyOrder[b],h=i[p];if(Array.isArray(h))for(var m=0;m<h.length;m++)f.push(U(p,h[m],d));else f.push(U(p,h,d))}return f.length?String(e)+"{"+String(f.join(""))+"}":""},q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var G=null,H={fontFamily:function e(t){if(Array.isArray(t)){var n={};return t.forEach((function(t){n[e(t)]=!0})),Object.keys(n).join(",")}return"object"===(void 0===t?"undefined":q(t))?(Y(t.src,"@font-face",[t],!1),'"'+String(t.fontFamily)+'"'):t},animationName:function e(t,n){if(Array.isArray(t))return t.map((function(t){return e(t,n)})).join(",");if("object"===(void 0===t?"undefined":q(t))){var r="keyframe_"+String((o=t,x(JSON.stringify(o)))),a="@keyframes "+r+"{";return t instanceof E?t.forEach((function(e,t){a+=D(t,[e],n,H,!1).join("")})):Object.keys(t).forEach((function(e){a+=D(e,[t[e]],n,H,!1).join("")})),Q(r,[a+="}"]),r}return t;var o}},W={},K=[],Z=!1,Q=function(e,t){var n;if(!W[e]){if(!Z){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");Z=!0,g(X)}(n=K).push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)),W[e]=!0}},Y=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!W[e]){var o=D(t,n,a,H,r);Q(e,o)}},J=function(){Z=!1;var e=K;return K=[],e},X=function(){var e=J();e.length>0&&function(e){if(null==G&&null==(G=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(G=document.createElement("style")).type="text/css",G.setAttribute("data-aphrodite",""),t.appendChild(G)}var n=G.styleSheet||G.sheet;if(n.insertRule){var r=n.cssRules.length;e.forEach((function(e){try{n.insertRule(e,r),r+=1}catch(e){}}))}else G.innerText=(G.innerText||"")+e.join("")}(e)},$=function(e){e.forEach((function(e){W[e]=!0}))},ee=function(e,t,n){var r=[],a=[],o=function e(t,n,r,a){for(var o=0;o<t.length;o+=1)t[o]&&(Array.isArray(t[o])?a+=e(t[o],n,r,a):(n.push(t[o]._name),r.push(t[o]._definition),a+=t[o]._len));return a}(t,r,a,0);if(0===r.length)return"";var i=void 0;return i=1===r.length?"_"+String(r[0]):"_"+String(x(r.join()))+String((o%36).toString(36)),Y(i,"."+String(i),a,e,n),i},te=function(e,t){return String(t)+"_"+String(x(e))},ne=x,re={create:function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r+=1){var a=n[r],o=e[a],i=JSON.stringify(o);t[a]={_len:i.length,_name:ne(i,a),_definition:o}}return t},rehydrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];$(e)}},ae="undefined"!=typeof window?null:{renderStatic:function(e){return K=[],W={},Z=!1,G=null,function(){if(Z)throw new Error("Cannot buffer while already buffering");Z=!0}(),{html:e(),css:{content:J().join(""),renderedClassNames:Object.keys(W)}}}};t.makeExports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;return{StyleSheet:Object.assign({},re,{extend:function(r){var a=r.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return e(t,n.concat(a))}}),StyleSheetServer:ae,StyleSheetTestUtils:null,minify:function(e){ne=e?x:te},css:function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return ee(t,r,n)},flushToStyleTag:X,injectAndGetClassName:ee,defaultSelectorHandlers:M}}},2449:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ArrowExpand24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M20 3.25h-6.5a.75.75 0 000 1.5h4.69l-5.22 5.22a.75.75 0 101.06 1.06l5.22-5.22v4.69a.75.75 0 001.5 0V4a.747.747 0 00-.75-.75zM9.97 12.97l-5.22 5.22V13.5a.75.75 0 00-1.5 0V20a.748.748 0 00.75.75h6.5a.75.75 0 000-1.5H5.81l5.22-5.22a.75.75 0 10-1.06-1.06z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--FullscreenEnter"+(e.className?" "+e.className:"")}}))}},2450:function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},2451:function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},2980:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Clap24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M6.02 4.198a.707.707 0 001.15.29l.051-.048a3.76 3.76 0 012.852-.996l.832.064a.717.717 0 00.139-1.427l-.37-.043a5.675 5.675 0 00-4.12 1.143l-.297.229a.707.707 0 00-.237.788z"}),a.a.createElement("path",{d:"M2.594 9.339a2.097 2.097 0 00.124 2.296 2.11 2.11 0 00-.435.531c-.577 1-.245 2.279.751 2.854l.733.423c-.116.12-.22.258-.307.409-.577 1-.246 2.279.751 2.854l4.397 2.539a7.306 7.306 0 008.439-.807 7.278 7.278 0 004.164-3.325c1.512-2.62.716-6.075-1.249-8.49-.67-.826-1.456-1.55-2.242-2.276-.72-.664-1.44-1.328-2.072-2.07a2.087 2.087 0 00-2.848.777c-.019.034-.07.117-.137.228l-.251.418c-1.798-.77-2.495.591-2.954 2.175L7.734 6.88a2.087 2.087 0 00-2.847.776 2.11 2.11 0 00-.243.643 2.097 2.097 0 00-2.05 1.04zm17.25 6.982a5.737 5.737 0 01-.662.923c.924-2.78-.017-5.787-2.303-7.682-.223-.185-.45-.363-.678-.541-.467-.367-.934-.733-1.356-1.15l-1.01-.999c.074-.31.17-.663.334-1.029.175-.39.45-.326.685-.19.56.656 1.194 1.251 1.828 1.846.868.816 1.736 1.631 2.413 2.6 1.312 1.878 1.83 4.35.749 6.222zM4.14 10.816a.503.503 0 01-.178-.688.503.503 0 01.685-.19l5.572 3.217a.795.795 0 00.795-1.376L6.433 9.134a.503.503 0 01-.178-.688.503.503 0 01.685-.19l5.572 3.217a.795.795 0 00.795-1.377l-2.103-1.213c-.335-.194.102-2.022.901-1.56l1.957 1.932c.355.351.745.664 1.136.977.297.238.594.476.875.73 1.913 1.732 2.495 4.477 1.144 6.818a5.716 5.716 0 01-7.808 2.091L5.006 17.33a.503.503 0 01-.178-.688.503.503 0 01.685-.19l2.846 1.643a.795.795 0 00.795-1.376l-5.325-3.074a.503.503 0 01-.177-.689.503.503 0 01.685-.19l4.58 2.645a.795.795 0 00.795-1.376L4.14 10.816z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Clap"+(e.className?" "+e.className:"")}}))}},2981:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Crab24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M17.526 5.497a.75.75 0 01.657-.744 4.621 4.621 0 013.644 1.113c.893.78 1.479 1.892 1.479 2.993a3.807 3.807 0 01-3.807 3.807c-1.46 0-2.618-.65-3.298-1.671-.67-1.005-.839-2.307-.48-3.564a.75.75 0 01.959-.506l.846.283v-1.71zm1.5.729v2.022a.75.75 0 01-.987.712l-1-.334c-.02.585.13 1.119.41 1.537.389.583 1.066 1.003 2.05 1.003a2.307 2.307 0 002.307-2.307c0-.586-.331-1.309-.966-1.864a3.124 3.124 0 00-1.814-.77zM6.436 4.737a.75.75 0 01.657.744v1.725l.856-.286a.75.75 0 01.958.506c.361 1.262.192 2.57-.48 3.579-.684 1.025-1.846 1.678-3.313 1.678A3.822 3.822 0 011.29 8.86c0-1.106.589-2.222 1.486-3.006a4.641 4.641 0 013.659-1.117zM3.764 6.984c-.64.558-.973 1.286-.973 1.876a2.322 2.322 0 002.323 2.323c.99 0 1.672-.423 2.064-1.01.281-.423.434-.962.413-1.552l-1.011.337a.75.75 0 01-.987-.712V6.21a3.144 3.144 0 00-1.83.775zM16.75 18.405c0-2.014-1.864-3.906-4.5-3.906s-4.5 1.892-4.5 3.906c0 .316.114.513.28.655.19.16.518.302.976.302h6.488c.458 0 .787-.142.975-.302.167-.142.281-.34.281-.655zm1.5 0c0 1.517-1.239 2.457-2.756 2.457H9.006c-1.517 0-2.756-.94-2.756-2.457 0-2.985 2.686-5.406 6-5.406s6 2.42 6 5.406z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M11.25 12.75a1 1 0 11-2 0 1 1 0 012 0zm4 0a1 1 0 11-2 0 1 1 0 012 0z"}),a.a.createElement("path",{d:"M5.848 17.446a.6.6 0 01-.544.65l-1.979.18a.6.6 0 01-.107-1.196l1.978-.178a.6.6 0 01.652.544zm-.018 1.986a.6.6 0 01-.336.78l-1.444.573a.6.6 0 11-.443-1.115l1.444-.574a.6.6 0 01.779.336zm.133-4.185a.6.6 0 01-.6.6h-1.72a.6.6 0 110-1.2h1.72a.6.6 0 01.6.6zm12.802 2.199a.6.6 0 00.544.65l1.979.18a.6.6 0 00.107-1.196l-1.978-.178a.6.6 0 00-.652.544zm.018 1.986a.6.6 0 00.336.78l1.444.573a.6.6 0 10.443-1.115l-1.444-.574a.6.6 0 00-.779.336zm-.133-4.185a.6.6 0 00.6.6h1.721a.6.6 0 000-1.2h-1.72a.6.6 0 00-.6.6z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Crab"+(e.className?" "+e.className:"")}}))}},2982:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--BadgeWriteFill24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 011.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 010 1.989l-1.414 2.029a1.74 1.74 0 00-.285.688l-.435 2.435a1.74 1.74 0 01-1.407 1.407l-2.435.435a1.74 1.74 0 00-.688.285l-2.03 1.414a1.74 1.74 0 01-1.989 0l-2.029-1.414a1.74 1.74 0 00-.688-.285l-2.435-.435a1.74 1.74 0 01-1.407-1.407l-.435-2.435a1.74 1.74 0 00-.285-.688l-1.414-2.03a1.74 1.74 0 010-1.989l1.414-2.029a1.74 1.74 0 00.285-.688l.435-2.435a1.74 1.74 0 011.407-1.407l2.435-.435a1.74 1.74 0 00.688-.285l2.03-1.414a1.74 1.74 0 011.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 00.255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 000-.385l-1.524-1.524a.273.273 0 00-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 00-1.111 0l-.882.88a.262.262 0 000 .371l1.465 1.465a.262.262 0 00.37 0l.881-.881a.786.786 0 000-1.112z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--BadgeWrite"+(e.className?" "+e.className:"")}}))}},2984:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--BadgeRelevantFill24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 010 1.857l-1.32 1.893a1.626 1.626 0 00-.266.643l-.406 2.272a1.624 1.624 0 01-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.267l-1.894 1.319a1.624 1.624 0 01-1.856 0l-1.894-1.32a1.624 1.624 0 00-.643-.266l-2.272-.406a1.624 1.624 0 01-1.313-1.313l-.406-2.272a1.625 1.625 0 00-.266-.643l-1.32-1.893a1.624 1.624 0 010-1.857l1.32-1.894a1.64 1.64 0 00.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.041.45-.132.643-.266l1.894-1.32a1.624 1.624 0 011.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.208 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.977.209-1.352.625a2.166 2.166 0 00-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.417.825.625 1.351.625zm3.436-3.159a.373.373 0 00-.278-.121.372.372 0 00-.277.121.402.402 0 00-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 01-.81-2.027v-.82a.402.402 0 00-.118-.289.372.372 0 00-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 00-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 00-.117-.289z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--LabelRelevant"+(e.className?" "+e.className:"")}}))}},2985:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--BadgeRecommendationFill24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.538.31.868.882.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 01-.868-1.5V8.199c0-.618.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 011.736 0zm-2.614 11.85a.29.29 0 01.255.148l1.239 2.207a.289.289 0 00.505 0l1.238-2.207a.29.29 0 01.255-.148l2.52.023a.29.29 0 00.253-.434l-1.284-2.192a.288.288 0 010-.292l1.284-2.192a.288.288 0 00-.253-.434l-2.52.023a.29.29 0 01-.255-.148l-1.239-2.207a.289.289 0 00-.505 0L10.51 9.103a.29.29 0 01-.255.148l-2.52-.023a.29.29 0 00-.253.434l1.284 2.192a.288.288 0 010 .292L7.48 14.338a.288.288 0 00.253.434l2.52-.023z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--LabelEditorRecommendation"+(e.className?" "+e.className:"")}}))}},2986:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--LabelWeekly24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 01.346.543v10.309a.24.24 0 01-.342.217c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.603.737a.6.6 0 01-.825-.556V6.957a1.8 1.8 0 011.182-1.691zm9.045.339c1.335-.626 2.672-.939 4.01-.939 1.07 0 2.152.2 3.246.6a1.8 1.8 0 011.182 1.69v8.96a.6.6 0 01-.824.555c-1.216-.49-2.418-.736-3.604-.736-1.339 0-2.677.313-4.014.94a.24.24 0 01-.342-.218V6.148a.6.6 0 01.346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.805.419.173.62.657.45 1.082a.813.813 0 01-1.065.456c-1.107-.456-2.207-.683-3.303-.683-1.08 0-2.162.22-3.254.664-.207.08-.426.12-.648.12l-2.079.002c-.195 0-.389-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.683a.813.813 0 01-1.065-.456.834.834 0 01.45-1.082c1.3-.535 2.607-.805 3.918-.805a10.007 10.007 0 013.391.604 3 3 0 001.025.18l.974.001a3 3 0 001.027-.18 10.012 10.012 0 013.393-.604z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--LabelWeekly"+(e.className?" "+e.className:"")}}))}},2987:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--LabelDaily24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.713a4.846 4.846 0 012.016 2.016c.464.869.712 1.73.712 4.108v3.926c0 2.378-.248 3.24-.712 4.109a4.846 4.846 0 01-2.017 2.016c-.869.465-1.73.712-4.108.712h-3.926c-2.377 0-3.24-.247-4.109-.712a4.846 4.846 0 01-2.016-2.016c-.465-.87-.712-1.731-.712-4.109v-3.926c0-2.377.247-3.24.712-4.108a4.846 4.846 0 012.016-2.016c.87-.465 1.732-.713 4.109-.713zM12 17.61a1.027 1.027 0 000-2.053A3.557 3.557 0 1115.557 12a1.027 1.027 0 002.053 0A5.61 5.61 0 1012 17.61z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--LabelDaily"+(e.className?" "+e.className:"")}}))}},2988:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--BadgeProFill24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 011.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 010 1.989l-1.414 2.029a1.74 1.74 0 00-.285.688l-.435 2.435a1.74 1.74 0 01-1.407 1.407l-2.435.435a1.739 1.739 0 00-.688.285l-2.03 1.414a1.74 1.74 0 01-1.989 0l-2.029-1.414a1.739 1.739 0 00-.688-.285l-2.435-.435a1.74 1.74 0 01-1.407-1.407l-.435-2.435a1.74 1.74 0 00-.285-.688l-1.414-2.03a1.74 1.74 0 010-1.989l1.414-2.029c.144-.206.24-.44.285-.688l.435-2.435a1.74 1.74 0 011.407-1.407l2.435-.435a1.74 1.74 0 00.688-.285l2.03-1.414a1.74 1.74 0 011.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 100 8.42 4.21 4.21 0 000-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 00-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 00.062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 00-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 00.062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027V8.46z"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--LabelProfessional"+(e.className?" "+e.className:"")}}))}},2989:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Stamp24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M12.3 3a9.3 9.3 0 110 18.6 9.3 9.3 0 010-18.6zm4.5 15H7.2v.6h9.6V18zm-9.99-5.785l-.394 1.082a.18.18 0 00.084.213l.04.02.678.247-.162.443 8.989 3.272.161-.444.678.247c.087.032.18.004.226-.063l.019-.036.393-1.082L6.81 12.215zm.25-.673l-.045.11 10.713 3.899c.326-.897-.163-1.906-1.097-2.311l-.119-.047-7.05-2.566c-.971-.354-2.02.055-2.403.915zm6.467-5.502l-1.462 4.895 2.255.821 2.026-4.69a1.5 1.5 0 10-2.82-1.026z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Stamp"+(e.className?" "+e.className:"")}}))}},2993:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(27),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--AlarmFill24"+(t?" "+t:""))}),a.a.createElement("path",{d:"M12 22.486a9 9 0 100-18 9 9 0 000 18zM11 10.5v2.97a.75.75 0 00.374.68l2.598 1.5a.75.75 0 00.75-1.3L12.5 13.067V10.5a.75.75 0 00-1.5 0zM7.374 3.584a.75.75 0 01-.208 1.04l-3 2a.75.75 0 01-.832-1.248l3-2a.75.75 0 011.04.208zm9.002 0a.75.75 0 00.208 1.04l3 2a.75.75 0 00.832-1.248l-3-2a.75.75 0 00-1.04.208z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function l(e){return a.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Clock"+(e.className?" "+e.className:"")}}))}}}]);
//# sourceMappingURL=main.shared_3b14b6a6793bcf6a28a30e974ba641b4cb31d3af.f54113a3576129152b07.js.map