(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1019:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n(24),r=n.n(a),o=n(30),i=n.n(o),c=n(0),s=n(3),l=n.n(s),u=n(1153),d=n(1),f=n(968),p=["src","griffithProps"],m=["type"];function h(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}function v(e){if(!e)return null;var t=new URL(e).pathname.match(/^\/video\/(\d+)$/);return t&&t[1]?t[1]:null}var g=Object(c.forwardRef)((function(e,t){var n=e.style,a=e.src,r=e.className,o=e.iframeProps,i=e.griffithProps,s=e.griffithProps.autoplay,l=e.zaProps,f=Object(c.useMemo)((function(){return function(e,t){for(var n=new URL(e),a=0,r=Object.keys(t);a<r.length;a++){var o=r[a];n.searchParams.set(o,t[o])}return n.toString()}(a,{player:JSON.stringify(i)})}),[a,i]),p=v(a),m=Object(c.useRef)(null),h=Object(c.useMemo)((function(){return Object.assign({autoplay:s},l)}),[s,l]);return Object(d.b)(u.b,Object.assign(Object.assign({id:p},h),{},{children:Object(d.b)("div",{style:n,ref:m,className:r,children:Object(d.b)("iframe",Object.assign(Object.assign({title:"video",ref:t,src:f},o),{},{frameBorder:"0",css:{width:"100%",height:"100%"}}))})}))}));g.propTypes={className:l.a.string,src:l.a.string.isRequired,iframeProps:l.a.object,griffithProps:l.a.object},g.defaultProps={src:"",griffithProps:{autoplay:!1,useMSE:!1,shouldShowPageFullScreenButton:!1}};var b={video:Object(c.forwardRef)((function(e,t){var n=e.src,a=e.griffithProps,o=void 0===a?{}:a,s=i()(e,p),l=Object(c.useState)(!1),u=h(r.a,l,2),m=u[0],b=u[1],C=Object(c.useRef)(o);C.current.shouldShowPageFullScreenButton=!0;var y=v(n),O=Object(c.useRef)(Object(f.c)(y,"*",!0)),j=Object(c.useCallback)((function(e){e===f.b.ENTER_PAGE_FULLSCREEN?b(!0):e===f.b.EXIT_PAGE_FULLSCREEN&&b(!1)}),[b]);return Object(c.useEffect)((function(){var e=O.current.subscribeMessage(j);return function(){return e&&e.unsubscribe()}}),[j]),Object(d.b)(g,Object.assign(Object.assign({ref:t,griffithProps:C.current},s),{},{src:n,style:m?{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e5}:{width:"100%",height:"100%"}}))})),log:g},C=Object(c.forwardRef)((function(e,t){var n=e.type,a=void 0===n?"video":n,r=i()(e,m),o=b[a];return Object(d.b)(o,Object.assign({ref:t},r))}));C.propTypes={type:l.a.oneOf(["video","log"])}},1020:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m}));n(0);var a=n(259),r=n(955),o=n(1176),i=n(1395),c=n(1138),s=n(9),l=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,u={h2:1,h3:2},d=function(e,t){return"h_".concat(e||"editor","_").concat(t)},f=function(e){return e.replace(o.b,"").replace(/<[^>]*>/g,"")},p=function(e){return u[e]},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var a=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(l,(function(e,r){var o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=f(s),u=p(r),m=d(t,a.length),h=(null===(o=e.match(/(data-into-catalog-status=\\{0,1}"\S{1,}\\{0,1}")/))||void 0===o||null===(i=o[0])||void 0===i?void 0:i.indexOf(c.a.removed))>-1?c.a.removed:"";return a.push({text:l,titleLevel:u,Tag:r,targetId:m,status:h}),n({text:l,titleLevel:u,targetId:m,Tag:r,originText:s,status:h})})),{catalog:a,html:e}},h=function(e){var t=e.originText,n=e.targetId,a=e.Tag,o=e.status;return Object(r.renderToStaticMarkup)(Object(s.g)(a,{id:n,"data-into-catalog-status":o,dangerouslySetInnerHTML:{__html:t}}))};t.a=function(e,t){return function(n,o){var c=o.sourceId,l=o.theme,u=o.shouldShowCatalog,d=o.shouldFoldCatalog;if(!n)return n;if(!u)return n;var f=m(n,c,h),p=f.catalog,v=f.html;return p.length?(t&&(t.current=p),e?v:Object(r.renderToStaticMarkup)(Object(s.g)(a.a,{theme:l},Object(s.g)(i.b,{catalog:p,canFold:d}))).concat(v)):v}}},1040:function(e,t,n){"use strict";var a=n(0),r=n(9);function o(e){var t=e.className,n=e.children,o=e.onEvent,i=Object(a.useCallback)((function(e){o(e)||e.stopPropagation()}),[o]);return Object(r.g)("div",{className:t,onBeforeInput:i,onBlur:i,onCompositionEnd:i,onCompositionStart:i,onCopy:i,onCut:i,onDragEnd:i,onDragEnter:i,onDragLeave:i,onDragOver:i,onDragStart:i,onDrop:i,onFocus:i,onInput:i,onKeyDown:i,onKeyPress:i,onKeyUp:i,onMouseUp:i,onPaste:i,onSelect:i,onClick:i},n)}o.defaultProps={onEvent:function(){return!1}},t.a=o},1059:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return p}));var a={Normal:"",Invalid:"isInvalid",Fold:"isCollapsed",NotEditable:"isNotEditable"},r={Editor:"editor",Content:"content"},o={Content:0,MentionedInContent:1,Showcase:2,LivingTheater:3},i={CPSCommonCard:"cpsCommonCard",CPSMeituanCard:"cpsMeituanCard",ZhiGoodsCard:"zhihuGoodsCard",RedPacketCard:"redPacketCard",EducationCard:"educationCard",PolymericCard:"polymericCard",MainCard:"mainCard",HideCard:""},c={jingdong:0,taobao:1,zhihu:2,pinduoduo:3,meituanhotel:4,suning:5,youzan:6,zhiGoods:7,zhi_goods:7,zhiEducation:8,zhi_education:8},s={0:"jingdong",1:"taobao",2:"zhihu",3:"pinduoduo",4:"meituanhotel",5:"suning",6:"youzan",7:"zhiGoods",8:"zhiEducation"},l={0:"京东",1:"淘宝",2:"知乎会员",3:"拼多多",4:"美团酒旅",5:"苏宁易购",6:"有赞",7:"知乎商品",8:"知乎教育课程"},u={Ecommerce:1,Hotel:2,Tickets:3,Advertising:4,Store:5,RedPacket:6,Vop:7,Kepler:8,SelfPurchase:9,SelfPublishedBooks:10,Education:11},d={2:"酒店",3:"门票"},f={Common:"common",Datum:"datum"},p={ZhiXuanGoods:1}},1078:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l}));var a=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,r=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.decodeValue,o=void 0!==r&&r,c={};t=a.exec(e);){var s=t[1],l=t[3]||t[4];c[s]=(o?i(l):l)||""}return c},o=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function c(){return Math.max(window.innerHeight/10,100)}var s=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=s(e),r=e.getBoundingClientRect().top+(a.pageYOffset||a.scrollTop||0)-(n?c():0)-t;a.scrollTo({top:r,behavior:"smooth"})}},1104:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a={ONLY_SHOW:"ONLY_SHOW"},r=[1,2],o={1:{type:"invalid",text:"已失效"},2:{type:"audit",text:"审核中"}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.validStatus;return r.includes(t)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.validStatus,n=o[t];return n}},1153:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z})),n.d(t,"b",(function(){return G}));var a,r=n(39),o=n.n(r),i=n(103),c=n.n(i),s=n(24),l=n.n(s),u=n(33),d=n.n(u),f=n(1),p=n(0),m=n.n(p),h=n(51),v=n(99),g=n(883),b=n(47),C=n(477),y=n(155),O=n(42),j=n(968),k=n(73),E=n.n(k),w=new Uint8Array(16);function x(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(w)}var N=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var A=function(e){return"string"==typeof e&&N.test(e)},L=[],S=0;S<256;++S)L.push((S+256).toString(16).substr(1));var T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(L[e[t+0]]+L[e[t+1]]+L[e[t+2]]+L[e[t+3]]+"-"+L[e[t+4]]+L[e[t+5]]+"-"+L[e[t+6]]+L[e[t+7]]+"-"+L[e[t+8]]+L[e[t+9]]+"-"+L[e[t+10]]+L[e[t+11]]+L[e[t+12]]+L[e[t+13]]+L[e[t+14]]+L[e[t+15]]).toLowerCase();if(!A(n))throw TypeError("Stringified UUID is invalid");return n};var I=function(e,t,n){var a=(e=e||{}).random||(e.rng||x)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return T(a)},R=n(377),P=n.n(R);function _(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var M=m.a.forwardRef((function(e,t){var n=e.id,a=e.attachedInfo,r=e.type,o=e.token,i=e.children,c=Object(p.useRef)(null),s=Object(v.a)((function(){return{trackPlayer:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Play",r=arguments.length>1?arguments[1]:void 0,o=r.playId,i=r.elapsed,s=void 0===i?0:i,l=r.duration,u=void 0===l?0:l,d=r.progressTime,f=r.playMode,p=r.playSpeed,m=void 0===p?"":p,h=r.name,v=void 0===h?"":h;null===(e=null==c?void 0:c.current)||void 0===e||e.trackPlayer({eventType:"Unknown",action:t,elementLocation:{type:"Video",text:v}},{attachedInfoBytes:a||"",mediaInfo:{videoInfo:{videoId:n,soundRate:m},playEventIdentifier:o||"",elapsed:s,duration:u,progressTime:d,playMode:f}})}}}));return Object(p.useImperativeHandle)(t,s),Object(f.c)(h.b,{content:{type:r,id:o,token:o},children:[Object(f.b)(h.e,{ref:c}),i]})})),z={Play:{type:"Play",txt:"开始播放"},Pause:{type:"Pause",txt:"播放暂停"},EndPlay:{type:"EndPlay",txt:"播放结束"},AutoPlay:{type:"AutoPlay",txt:"自动播放"}},D={IOS:"7.33",ANDROID:"7.33"};function B(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function U(e){return{statscIncrement:function(t){O.b.increment("VideoLog.".concat(e,".").concat(t,".count"))}}}var V={NaN:isNaN,Infinity:function(e){return e===1/0},negative:function(e){return e<0},isTimestamp:function(e){return 13===e.toString().length},overThreshold:function(e){return e>72e5}};function F(e){for(var t in V)if(V[t](e))return t;return null}var H=function(e){var t=e.id,n=e.onSuspend,a=e.ref,r=e.handleTrack,o=e.getPlayerInfo,i=e.autoplay,c=void 0!==i&&i,s=e.useTrack,l=void 0===s||s,u=e.reporter,f=void 0===u?{current:{}}:u,m=Object(p.useRef)({isPlaying:!1,currentTime:0,duration:0,playMode:1,playSpeed:"1",elapsed:0,playId:"",sumElapsed:0}),h=Object(p.useMemo)((function(){return Object(j.c)(t,"*",!0)}),[t]),g=Object(p.useRef)(!0),b=Object(p.useRef)(0),C=Object(p.useRef)(0),y=Object(p.useRef)(0),O=Object(p.useRef)(0),k=Object(p.useRef)([]),w=Object(p.useCallback)((function(){return new Promise((function(e,t){return o().then((function(t){e(t)}),t)}))}),[o]),x=Object(p.useCallback)((function(e){var t,a,r,o,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=m.current;if(!i||c.isPlaying){if(C.current){y.current=Date.now(),b.current=y.current-C.current-O.current;var s=F(b.current);s&&(null===(o=(r=f.current).statscIncrement)||void 0===o||o.call(r,"default.process.elapsed.pause.".concat(s)));var l=Object.assign(Object.assign(Object.assign({},c),e),{},{elapsed:b.current});return n&&n(l),l}null===(a=(t=f.current).statscIncrement)||void 0===a||a.call(t,"default.process.event.pauseNoPlay")}}),[f,n]),N=Object(v.a)((function(){O.current=0,b.current=0,C.current=0,g.current=!0,m.current.elapsed=0})),A=Object(v.a)((function(){m.current.isPlaying?k.current.push(N):N()})),L=Object(p.useCallback)((function(){C.current||(C.current=Date.now())}),[]),S=Object(v.a)((function(e,t){var n=x(t,!0);if(n){m.current.isPlaying=!1,k.current.length>0&&(_(d.a,new Set(k.current)).forEach((function(e){return null==e?void 0:e()})),k.current=[]);var a=(n||{}).elapsed;r(e,Object.assign(Object.assign({},n),{},{elapsed:a+m.current.sumElapsed}))}}));Object(p.useEffect)((function(){return function(){A(),S(z.Pause,m.current)}}),[S,A,t]);var T=Object(v.a)(l?function(e,t){var n,a,o,i,s,l,u=m.current,d=Object.assign(Object.assign({},u),t);switch(e){case j.b.TIMEUPDATE:m.current=Object.assign(Object.assign({},u),{},{currentTime:t.currentTime,duration:t.duration});break;case j.b.PLAYING:L();break;case j.b.PLAY:if(!g.current){if(!y.current)return void(null===(a=(n=f.current).statscIncrement)||void 0===a||a.call(n,"default.process.event.playNoPause"));var p=Date.now()-y.current;O.current+=p;var h=F(O.current);h&&(null===(i=(o=f.current).statscIncrement)||void 0===i||i.call(o,"default.process.elapsed.start.".concat(h)))}w().then((function(e){var t,n,a=e.playId,o=e.elapsed,i=F(o);i&&(null===(n=(t=f.current).statscIncrement)||void 0===n||n.call(t,"default.process.elapsed.native.".concat(i))),a!==m.current.playId&&(N(),L()),m.current=Object.assign(Object.assign({},u),{},{playId:a,isPlaying:!0,sumElapsed:o}),r(!o&&g.current&&c?z.AutoPlay:z.Play,Object.assign(Object.assign({},d),{},{playId:a,elapsed:o+b.current})),g.current=!1}));break;case j.b.PLAYBACK_RATE_CHANGE:m.current.playSpeed=String(null===(s=t.rate)||void 0===s?void 0:s.value),r(z.Play,Object.assign(Object.assign({},d),{},{playSpeed:String(null===(l=t.rate)||void 0===l?void 0:l.value)}));break;case j.b.ENTER_FULLSCREEN:m.current.playMode=2,r(z.Play,Object.assign(Object.assign({},d),{},{playMode:2}));break;case j.b.ENTER_PAGE_FULLSCREEN:m.current.playMode=4,r(z.Play,Object.assign(Object.assign({},d),{},{playMode:4}));break;case j.b.EXIT_FULLSCREEN:case j.b.EXIT_PAGE_FULLSCREEN:m.current.playMode=1,r(z.Play,Object.assign(Object.assign({},d),{},{playMode:1}));break;case j.b.PAUSE:S(z.Pause,d);break;case j.b.ENDED:S(z.EndPlay,d)}}:E.a);Object(p.useEffect)((function(){return h.subscribeMessage(T),h.dispose}),[T,h]);var I=Object(v.a)((function(){return{reStart:N,getIfPause:x,reset:A}}));Object(p.useImperativeHandle)(a,I)},Z=Object(p.forwardRef)((function(e,t){var n=e.id,a=e.type,r=e.autoplay,i=void 0!==r&&r,s=e.token,u=void 0===s?"":s,d=e.attachedInfo,m=void 0===d?"":d,h=e.onSuspend,O=e.children,j=Object(y.b)(),k=Object(p.useRef)(null),E=Object(p.useRef)(null),w=Object(p.useRef)(U("HybridVideoManager")),x=Object(p.useState)(n),N=_(l.a,x,2),A=N[0],L=N[1],S=Object(p.useState)(!0),T=_(l.a,S,2),I=T[0],R=T[1],P=Object(g.a)(n),z=Object(p.useMemo)((function(){return Object(C.versionControl)(j,D)}),[j]);Object(p.useEffect)((function(){R(P===n)}),[n,P]);var V=Object(v.a)((function(e,t){var a,r=e.type,o=e.txt;if(t){var i=t.currentTime,c=t.duration,s=t.playMode,l=void 0===s?1:s,u=t.playSpeed,d=t.elapsed,f=t.playId;!r&&w.current.statscIncrement("default.result.playType");var p=F(d);p&&w.current.statscIncrement("default.result.elapsed.all.".concat(p)),null===(a=k.current)||void 0===a||a.trackPlayer(r,{elapsed:d,duration:1e3*c,playMode:l,playSpeed:u,progressTime:1e3*i,name:o,playId:f}),P!==n&&L(n),w.current.statscIncrement("default.result.intention")}})),Z=Object(p.useCallback)(c()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=4;break;case 4:return e.next=6,Object(b.a)("base/getPlayInfo").dispatch({videoId:n});case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)}))),[n]);H({id:n,autoplay:i,onSuspend:h,handleTrack:V,getPlayerInfo:Z,ref:B(E,t),useTrack:z,reporter:w});var G=Object(p.useRef)({attachedInfo:m,type:a,token:String(u)});return Object(f.b)(M,Object.assign(Object.assign({ref:k,id:A},G.current),{},{children:I&&O}))})),G=Object(p.forwardRef)((function(e,t){var n=e.id,a=e.type,r=e.autoplay,o=void 0!==r&&r,i=e.token,c=void 0===i?"":i,s=e.attachedInfo,u=void 0===s?"":s,d=e.onSuspend,m=e.children,h=Object(p.useRef)(null),b=Object(p.useRef)(I()),C=Object(p.useRef)(null),y=Object(p.useRef)(U("WebPlayer")),O=Object(p.useState)(n),j=_(l.a,O,2),k=j[0],E=j[1],w=Object(p.useState)(!0),x=_(l.a,w,2),N=x[0],A=x[1],L=Object(g.a)(n),S=Object(p.useRef)({attachedInfo:u,type:a,token:String(c)}),T=function(e,t){var n=Object(p.useRef)(!1),a=Object(v.a)((function(){var e,t;try{var n=new URL(location.href),a=n.hostname,r=(null===(e=n.pathname.match(/^\/([\w|-]+).*/))||void 0===e?void 0:e[1])||"index";if("www.zhihu.com"===a)return"".concat(r,".default");var o=(null===(t=a.match(/(.+).zhihu\.com$/))||void 0===t?void 0:t[1])||"unknown";return"other.".concat(o,"_").concat(r)}catch(e){return"unknown.unknown"}}));return Object(p.useEffect)((function(){n.current=!1}),[e]),Object(v.a)((function(){if(!n.current){var e=a();null==t||t.current.statscIncrement("".concat(e,".process.event.playback")),n.current=!0}}))}(n,y);Object(p.useEffect)((function(){b.current=I()}),[n]),Object(p.useEffect)((function(){A(L===n)}),[n,L]);var R=Object(v.a)((function(e,t){var a,r=e.type,o=e.txt;if(t){var i=t.currentTime,c=t.duration,s=void 0===c?0:c,l=t.playMode,u=void 0===l?1:l,d=t.playSpeed,f=t.elapsed,p=t.playId;null===(a=h.current)||void 0===a||a.trackPlayer(r,{elapsed:f,duration:1e3*s,playMode:u,playSpeed:d,progressTime:1e3*i,name:o,playId:p}),T(),L!==n&&E(n)}})),D=Object(p.useCallback)((function(){return Promise.resolve({playId:b.current,elapsed:0})}),[]);H({id:n,autoplay:o,onSuspend:d,handleTrack:R,getPlayerInfo:D,ref:B(C,t)});var V=Object(v.a)(P()((function(){var e=C.current.getIfPause();R(z.Pause,e)}),50,{trailing:!1,leading:!0}));return Object(p.useEffect)((function(){return window.addEventListener("pagehide",V,!1),window.addEventListener("beforeunload",V,!1),function(){window.removeEventListener("pagehide",V,!1),window.removeEventListener("beforeunload",V,!1)}}),[V]),Object(f.b)(M,Object.assign(Object.assign({ref:h,id:k},S.current),{},{children:N&&m}))}))},1166:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(25),s=n.n(c),l=n(29),u=n.n(l),d=n(18),f=n.n(d),p=n(3),m=n.n(p),h=n(0),v=n(459),g=n(9);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var C=function(e){s()(n,e);var t=b(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={shown:!1},e.handleChange=function(t){e.state.shown||(t.isIntersecting||t.intersectionRatio>0)&&e.setState({shown:!0})},e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,a=e.children;return this.state.shown?a:Object(g.g)(v.a,{rootMargin:n,onChange:this.handleChange,threshold:[0,.1]},t||Object(g.g)("div",{style:{height:"1px"}}))}}]),n}(h.Component);C.propTypes={placeholder:m.a.element,rootMargin:m.a.string},C.defaultProps={rootMargin:"200px"};var y=C},1172:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return s(e);if("number"==typeof e)return c(e,t);return null},e.exports.format=c,e.exports.parse=s;var a=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function c(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",c=t&&t.unitSeparator||"",s=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,l=Boolean(t&&t.fixedDecimals),u=t&&t.unit||"";u&&o[u.toLowerCase()]||(u=n>=o.pb?"PB":n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var d=(e/o[u.toLowerCase()]).toFixed(s);return l||(d=d.replace(r,"$1")),i&&(d=d.replace(a,i)),d+c+u}function s(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),a="b";return n?(t=parseFloat(n[1]),a=n[4].toLowerCase()):(t=parseInt(e,10),a="b"),Math.floor(o[a]*t)}},1176:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));n(0);var a=n(955),r=n(1078),o=n(1653),i=n(9),c=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g;t.a=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,s=[];return n=n.replace(c,(function(e,n){var o=Object(r.e)(n,{decodeValue:!0}),c=o["data-text"],l=void 0===c?"":c,u=o["data-url"],d=void 0===u?"":u,f=o["data-numero"],p=t?"ref_".concat(t,"_").concat(f):"ref_".concat(f),m=s.filter((function(e){return e.refKey===p})),h="".concat(p,"_").concat(m.length);s.push({refKey:p,text:l,url:d,numero:f});var v=[l,d].filter(Boolean).join(" ");return Object(a.renderToStaticMarkup)(Object(i.g)("sup",{"data-text":l,"data-url":d,"data-numero":f,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":v,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(i.g)("a",{className:"ztext-referene-tooltip",id:h,href:"#".concat(p),"data-reference-link":!0,"aria-labelledby":p},"[",f,"]")))})),s.length?n=n.concat(Object(a.renderToStaticMarkup)(Object(i.g)(o.a,{referenceList:s}))):n}(t,e)}}},1240:function(e,t,n){"use strict";n.d(t,"b",(function(){return k}));var a=n(49),r=n.n(a),o=n(0),i=n.n(o),c=n(955),s=n(1880),l=n(1488),u=n(1521),d=n(12),f=n.n(d),p=n(5),m=n(1728),h=n(9),v=function(e){var t=e.className,n=e.html;return n?Object(h.g)("span",{className:"LinkCard-richText ".concat(t),dangerouslySetInnerHTML:{__html:"<object>".concat(n,"</object>")}}):null},g=function(e){var t=e.data,n=t.title,a=t.desc,r=t.url,o=t.image,c=t.ratio,s=t.isVideo;return Object(h.g)(i.a.Fragment,null,Object(h.g)("span",{className:"LinkCard-contents"},Object(h.g)(m.c,{key:"title",twoLine:!0},n),Object(h.g)(v,{key:"desc",className:"LinkCard-desc",html:a}),!a&&Object(h.g)(m.b,{key:"url",url:r})),Object(h.g)(m.a,{url:o,ratio:c,isVideo:s}))},b=(n(1727),{ANSWER:"Answer",ARTICLE:"Column",ZVIDEO:"Zvideo",QUESTION:"Question",COLLECTION:"Collection",ROUNDTABLE:"Roundtable",SPECIAL:"Special",TOPIC:"Topic"}),C=function(e){if(!e.notCommerce&&Object(l.b)(e.url))return Object(h.g)(l.a,r()({},e,{className:f()("old",e.className)}));var t=Object(o.useMemo)((function(){return function(e){var t={};if(e.data){var n="string"==typeof e.data?JSON.parse(e.data):e.data,a=Object(p.camelizeKeys)(n),r=a.source,o=void 0===r?{}:r,i=a.display,c=void 0===i?{}:i,s=a.zaData,l=void 0===s?{}:s,u=c.cardOpenUrl,d=c.title,f=c.content,m=c.desc,h=c.image||{};t={source:o,url:u,title:d,content:f,desc:m,image:h.imageUrl,ratio:h.ratio,isVideo:h.isVideo,zaAttachInfo:l.attachInfo}}return Object.assign(Object.assign(Object.assign({},t),e),{},{title:e.text||t.title,image:t.image||e.image})}(e)}),[e]),n=t.source,a=t.target,i=t.title,c=t.url,s=t.zaAttachInfo;return Object(h.g)(u.a,{notCommerce:!0,target:a,text:i,url:c,"data-za-attach-info":s,"data-za-content-type":b[null==n?void 0:n.contentType]||"Unknown",className:"static"},Object(h.g)(g,{data:t}))},y=n(1078),O=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,j=/<a\b([^>]*data-draft-type="(?:ad-)?link-card"[^>]*)>(.*?)<\/a>/g,k=function(e){return e.reduce((function(e,t){var n=JSON.parse(t.payload);return e[t.url]=n,e}),{})},E=function(e){var t=e.linkCardInfo,n=e.linkCards;return n?k(n):t||{}},w=function(e,t,n,a){var r=function(e){var t=e["data-ad-id"],n=e.href;if(t)return"https://xg.zhihu.com/plugin/".concat(t,"?BIZ=ECOMMERCE");var a=new URL(n);return"link.zhihu.com"===a.host?a.searchParams.get("target"):n}(e),o=n.ua,i=n.adLinkCardProps,l=(i=void 0===i?{}:i).parentId,u=i.parentType,d=i.suger;return Object(c.renderToStaticMarkup)(Object(h.g)(s.a,{url:r,parentId:l,parentType:u,suger:d,ua:o,cardIndex:a,data:t[r]}))},x=function(e,t,n,a){var o=n.linkCardInfo,i=n.linkCards,s=e.target,l=void 0===s?"_blank":s,d=e.href,f=void 0===d?"":d,p=e["data-image"],m=e["data-image-width"],v=e["data-image-height"],g=e["data-entity-type"],b=e["data-entity-data"],O=e["data-size"],j=a.replace(/<[^>]*>/g,"");j=Object(y.b)(j);var k=t[f],E=o||i?C:u.a,w=Boolean(i);return Object(c.renderToStaticMarkup)(Object(h.g)(E,r()({notCommerce:w,text:j,url:f,target:l,image:p,imageWidth:m,imageHeight:v,entityType:g,entityData:Object(y.f)(b),size:O},k&&{data:k})))};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return e;var n=E(t),a=0;return e.replace(t.linkCards?j:O,(function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=Object(y.e)(r,{decodeValue:!0}),c=i.href,s=i["data-draft-type"];return t.linkCards&&("ad-link-card"===s||Object(l.b)(c))?w(i,n,t,a++):x(i,n,t,o)}))}},1243:function(e,t,n){"use strict";var a=n(30),r=n.n(a),o=n(24),i=n.n(o),c=n(49),s=n.n(c),l=n(0),u=n(73),d=n.n(u),f=n(50),p=n(9),m=["root"];function h(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}t.a=function(e){return function(t){var n=Object(l.useState)(null),a=h(i.a,n,2),o=a[0],c=a[1],u=e.idAttr,v=e.selector,g=e.component,b=e.targetClassName,C=e.cardDataFilter,y=e.getCardProps,O=t.root,j=r()(t,m),k=u&&v&&b&&Object(l.useCallback)(function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var a=e.getAttribute(t),r=document.createElement("div");return r.className=n,e.parentNode.replaceChild(r,e),{data:{id:a},target:r}}}({idAttr:u,targetClassName:b}),[u,b]),E=Object(l.useMemo)((function(){return k?function(e){return Array.from(e.querySelectorAll(v)).map(k)}:d.a}),[k,O,v]);return Object(l.useEffect)((function(){if(O||v&&C){var e=(C||E)(O,t).map((function(e){var t=e.data,n=e.target,a=null;return"function"==typeof y&&(a=y(t)),Object(f.createPortal)(Object(p.g)(g,s()({key:t.id,id:t.id},a,j)),n)}));e.length>0&&c(e)}}),[O]),o}}},1253:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))}},1255:function(e,t,n){"use strict";n.d(t,"a",(function(){return G})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return W}));var a,r,o,i,c,s,l,u=n(39),d=n.n(u),f=n(103),p=n.n(f),m=n(33),h=n.n(m),v=n(24),g=n.n(v),b=n(290),C=n.n(b),y=n(0),O=n(50),j=n(2200),k=n.n(j),E=n(884),w=n(64);function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function N(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return A(t,void 0!==n&&n<a?n:a)}return e(t,n)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var L=/<img src="([^"]*)" alt="([^"]*)" eeimg="(\w+)"\/?>/g,S=function(e){return e?e.replace(L,(function(e,t,n,a){return'<span class="ztext-math" data-eeimg="'.concat(a,'" data-tex="').concat(n,'">').concat(n,"</span>")})):e},T=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(void 0,arguments)),t}},I={skipStartupTypeset:!0,showProcessingMessages:!1,messageStyle:"none",showMathMenu:!1,styles:{'html[data-theme="dark"] .MathJax_SVG .noError':{filter:"invert(1)"},".ztext-math-scrollable .MathJax_SVG":{"max-width":"100%","overflow-x":"auto","overflow-y":"hidden"},".ztext-math-scrollable .MathJax_SVG svg":{"max-width":"unset"},".MathJax_SVG svg":{"max-width":"100%"},"div.MathJax_SVG_Display":{display:"none"},".MathJax_Preview ~ .math-holder":{display:"none"}},SVG:{linebreaks:{automatic:!0}},TeX:{extensions:["autoload-all.js"],Macros:{bm:"\\boldsymbol",bold:["{\\bf #1}",1],hdots:"\\ldots",textendash:"–",emph:"\\textit",dag:"\\dagger",ddag:"\\ddagger",DeclareMathOperator:{disabled:!0},begingroup:{disabled:!0},endgroup:{disabled:!0},gdef:{disabled:!0},global:{disabled:!0},def:{disabled:!0},let:{disabled:!0},newcommand:{disabled:!0},renewcommand:{disabled:!0},newenvironment:{disabled:!0},renewenvironment:{disabled:!0}}},Safe:{allow:{require:"safe"},safeRequire:{begingroup:!1,newcommand:!1}}},R=T((function(){return window.MathJax=I,(e="https://unpkg.zhimg.com/mathjax@2.7.9/MathJax.js?config=TeX-AMS_SVG",new Promise((function(t,n){var a=document.createElement("script");a.onload=function(){return t()},a.onerror=n,a.src=e,document.body.appendChild(a)}))).then((function(){MathJax.Hub.processSectionDelay=0,MathJax.Hub.Register.StartupHook("TeX autoload-all Ready",(function(){var e=MathJax.InputJax.TeX.Definitions.macros;e.color="Color",delete e.fcolorbox,delete e.colorbox,delete e.definecolor,delete e.textcolor}))}));var e})),P=[[String.raw(a||(a=C()(["("],["\\("]))),String.raw(r||(r=C()([")"],["\\)"])))]],_=[[String.raw(o||(o=C()(["$$"]))),String.raw(i||(i=C()(["$$"])))],[String.raw(c||(c=C()(["["],["\\["]))),String.raw(s||(s=C()(["]"],["\\]"])))]],M=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?_[0]:P[0],a=N(g.a,n,2),r=a[0],o=a[1];return r+e+o},z=[].concat(N(h.a,P.map((function(e){return[].concat(N(h.a,e),["inline"])}))),N(h.a,_.map((function(e){return[].concat(N(h.a,e),["display"])})))),D=function(e){var t=e.querySelector(".MathJax_SVG_Display");if(t){var n,a,r=document.createElement("span");r.className=t.className,null===(n=t.parentNode)||void 0===n||n.insertBefore(r,t),Array.from(t.children).forEach((function(e){return r.appendChild(e)})),null===(a=t.parentNode)||void 0===a||a.removeChild(t)}},B=k()(1,function(){var e=p()(d.a.mark((function e(t){var n,a,r,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},a=n.linebreak,r=void 0!==a&&a,e.next=3,R();case 3:return e.abrupt("return",new Promise((function(e){MathJax.Hub.Config({SVG:{linebreaks:{automatic:r}}}),MathJax.Hub.Queue(["Typeset",MathJax.Hub,t]),MathJax.Hub.Queue((function(){D(t),e()}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=T((function(){var e,t=document.createElement("style");t.textContent=".MathJax_Preview ~ .math-holder {display: none}",null===(e=document.head)||void 0===e||e.appendChild(t)})),V=String.raw(l||(l=C()(["\\"],["\\\\"]))),F=/\\tag(\d+|\{.*\})$/,H=function(e){return!(e===V||!e.endsWith(V))||!!F.test(e)},Z=function(e){var t=e.tex,n=e.display,a=e.encloseMode,r=void 0===a?"script":a,o=e.children,i=Object(E.a)({once:!0,rootMargin:"500px"}),c=N(g.a,i,2),s=c[0],l=c[1],u=Object(y.useRef)(null),d=Object(y.useMemo)((function(){var e=function(e){var t,n=x(z,!0);try{for(n.s();!(t=n.n()).done;){var a=N(g.a,t.value,3),r=a[0],o=a[1],i=a[2];if(e.startsWith(r)&&e.endsWith(o))return[e.slice(r.length,-o.length),i]}}catch(e){n.e(e)}finally{n.f()}return[e,null]}(t),a=N(g.a,e,1)[0];return[a,(null!=n?n:H(a))?"display":"inline"]}),[n,t]),f=N(g.a,d,2),p=f[0],m=f[1],h=p.length<800;return Object(y.useEffect)((function(){l&&u.current&&B(u.current,{linebreak:h})}),[l,p,h]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{ref:s}),Object(w.jsxs)("span",Object.assign(Object.assign({ref:u},!h&&{className:"ztext-math-scrollable"}),{},{children:["script"===r?Object(w.jsx)("script",{type:"math/tex;mode=".concat(m),dangerouslySetInnerHTML:{__html:p}}):"span"===r?M(p,"display"===m):null,o]}),p)]})},G=y.memo(Z),W=function(e){var t=Object(y.useState)([]),n=N(g.a,t,2),a=n[0],r=n[1];return Object(y.useEffect)((function(){if(e){var t=e.querySelectorAll(".ztext-math");t.length&&(U(),r(Array.from(t).map((function(e){var t=e.dataset.tex;return e.textContent="",Object(O.createPortal)(Object(w.jsx)(G,{tex:t,encloseMode:"script",children:Object(w.jsx)("span",{className:"tex2jax_ignore math-holder",children:t})}),e)}))))}}),[e]),a}},1256:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return M}));var a=n(24),r=n.n(a),o=n(1),i=n(0),c=n(51),s=n(47),l=n(155),u=n(2201),d=n.n(u),f=n(2969),p=n(1031),m=n(5);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function v(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return g(t,void 0!==n&&n<a?n:a)}return e(t,n)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var b={RICHCONTENT:'<a data-draft-node="block" data-draft-type="edu-card" data-edu-card-id="1"></a>',IDAttr:"data-edu-card-id",TYPE:"edu-card",WebInsertCommand:"insert-edu-card:",HybridInsertCommand:"editor/insertEduCard",AvailableCardID:"1470725970378772481",EDU_CARD_LIMIT:30},C={1:"production",2:"text",3:"picture-text"},y=function(e){var t=e.id,n=e.url,a=e.eduCardShowId,r=e.contentType,u=e.templateType,f=e.token,p=e.materialId,m=e.missionId,h=e.skuId,v=Object(l.b)(),g=Object(c.l)().trackEvent,b=Object(i.useRef)(null);Object(i.useEffect)((function(){b.current=document.createElement("a"),b.current.setAttribute("target","_blank")}),[]);var y={id:(null==t?void 0:t.toString())||"",materialId:(null==p?void 0:p.toString())||"",missionId:(null==m?void 0:m.toString())||"",templateType:C[u]||"",skuId:(null==h?void 0:h.toString())||"",contentType:(null==r?void 0:r.toString())||"",token:(null==f?void 0:f.toString())||""};return Object(o.b)(c.b,{content:{type:"Training"},children:Object(o.b)(c.f,{as:"div",shouldTrackShow:!0,shouldTrackClick:!1,zaType:"Card",zaBlock:"edu_card_".concat(r||"unknow","_show"),extra:{configMap:y},onClick:function(){if(n&&t){var e="".concat(a||"").concat(+new Date);g({action:"OpenUrl",eventType:"Click",block:"edu_card_".concat(r||"unknow","_click"),elementLocation:{type:"Card",content:{type:"Training"}}},{configMap:Object.assign(Object.assign({},y),{},{click_id_fe:e})});var o=n.split("?")[0],i=d.a.parse(n.split("?")[1]),c="".concat(o,"?").concat(d.a.stringify(Object.assign(Object.assign({},i),{},{edu_card_id:t,edu_click_id_fe:e,refer:window.location.href})));v.ZhihuHybrid?Object(s.a)("base/openURL").dispatch({url:c}).catch((function(e){return console.error(e)})):b.current&&(b.current.href=c,b.current.click())}},css:{display:"block",margin:"1em auto",maxWidth:"390px",cursor:"pointer",":hover":{textDecoration:"none"}},"data-draft-node":"block","data-draft-type":"edu-card","data-edu-card-id":t,children:e.children},void 0)},void 0)},O={display:"flex",justifyContent:"space-between",flexWrap:"nowrap",alignItems:"center"},j={display:"flex",flexDirection:"column",justifyContent:"space-around",height:"100%"},k=function(e){var t;return{boxSizing:"border-box",padding:"12px",background:(null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.GBK10A)||"#F6F6F6",backdropFilter:"blur(27.1828px)",borderRadius:"8px"}},E=function(e){var t;return Object.assign({flex:"0 0 auto",width:"100%",lineHeight:"20px",fontWeight:700,fontSize:"15px",wordBreak:"break-word",color:(null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.GBK02A)||"#121212"},Object(p.a)(2))},w=function(e){var t;return Object.assign({flex:"0 0 auto",width:"100%",lineHeight:"18px",fontSize:"13px",wordBreak:"break-word",color:(null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.GBK06A)||"#999999"},Object(p.a)(1))},x=function(e){return function(t){var n,a,r=(null===(n=null==t?void 0:t.colors)||void 0===n?void 0:n.GBK06A)||"#999999",o=(null===(a=null==t?void 0:t.colors)||void 0===a?void 0:a[e])||e;return{display:"flex",justifyContent:"flex-end",alignItems:"center",flex:"0 0 auto",textAlign:"right",fontSize:"13px",lineHeight:"17px",fontWeight:700,color:e?o:r}}},N=function(e){var t=e.title,n=e.subtitle,a=e.enableButton,r=e.buttonText,i=e.buttonTextColor;return Object(o.c)("div",{css:function(e){return Object.assign(Object.assign(Object.assign({},O),k(e)),{},{height:"84px"})},children:[Object(o.c)("div",{css:function(){return Object.assign({},j)},children:[Object(o.b)("span",{css:E,children:t},void 0),n&&Object(o.b)("span",{css:w,children:n},void 0)]},void 0),Object(o.b)("div",{css:{flex:"0 1 12px"}},void 0),Object(o.c)("div",{css:x(a&&i||""),children:[a?r:"",Object(o.b)(f.b,{size:12},void 0)]},void 0)]},void 0)},A=function(e){var t=e.title,n=e.subtitle,a=e.thumbnail,r=e.enableButton,i=e.buttonText,c=e.buttonTextColor,s=function(){return Object.assign(Object.assign({},j),{},{justifyContent:"center",width:"100%"})},l=function(){return Object(o.b)("span",{css:{display:"block",content:'""',flex:"0 1 auto",height:"20px",width:"100%"}},void 0)};return Object(o.c)("div",{css:function(e){return Object.assign(Object.assign(Object.assign({},O),k(e)),{},{height:"99px"})},children:[Object(o.b)("div",{css:function(e){return Object.assign(Object.assign({},Object.assign(Object.assign({},{flex:"0 0 auto",marginRight:"12px",borderRadius:"6px",backgroundColor:"#E2E2E2",backgroundSize:"100% 100%",img:{borderRadius:"6px",width:"100%",height:"100%"}}),{},{width:"75px",height:"75px"})),{},{backgroundImage:a?"url(".concat(a,")"):""})}},void 0),Object(o.b)("div",{css:function(){return Object.assign(Object.assign({},O),{},{flex:"1 1 auto",height:"100%"})},children:r?Object(o.c)("div",{css:s,children:[Object(o.b)("span",{css:E,children:t},void 0),n&&Object(o.b)("span",{css:w,children:n},void 0),Object(o.b)(l,{},void 0),Object(o.c)("span",{css:x(c||""),children:[Object(o.b)("span",{children:i},void 0),Object(o.b)(f.b,{size:12},void 0)]},void 0)]},void 0):Object(o.c)(o.a,{children:[Object(o.c)("div",{css:s,children:[Object(o.b)("span",{css:E,children:t},void 0),n&&Object(o.c)(o.a,{children:[Object(o.b)(l,{},void 0),Object(o.b)("span",{css:w,children:n},void 0)]},void 0)]},void 0),Object(o.b)("div",{css:{flex:"0 1 12px"}},void 0),Object(o.b)("div",{css:x(""),children:Object(o.b)(f.b,{size:12},void 0)},void 0)]},void 0)},void 0)]},void 0)},L=function(e){var t=e.title,n=e.subtitle,a=e.thumbnail,r=e.buttonText,i=e.buttonTextColor;return Object(o.c)("div",{css:function(e){return Object.assign(Object.assign(Object.assign({},O),k(e)),{},{height:"124px"})},children:[Object(o.b)("div",{css:function(e){return Object.assign(Object.assign({},Object.assign(Object.assign({},{flex:"0 0 auto",marginRight:"12px",borderRadius:"6px",backgroundColor:"#E2E2E2",backgroundSize:"100% 100%",img:{borderRadius:"6px",width:"100%",height:"100%"}}),{},{width:"75px",height:"100px"})),{},{backgroundImage:a?"url(".concat(a,")"):""})}},void 0),Object(o.b)("div",{css:function(){return Object.assign(Object.assign({},O),{},{flex:"1 1 auto",height:"100%"})},children:Object(o.c)("div",{css:function(){return Object.assign(Object.assign({},j),{},{justifyContent:"center",width:"100%"})},children:[Object(o.b)("span",{css:E,children:t},void 0),Object(o.b)((function(){return Object(o.b)("span",{css:{display:"block",content:'""',flex:"0 1 auto",height:"30px",width:"100%"}},void 0)}),{},void 0),Object(o.c)("div",{css:function(){return Object.assign(Object.assign({},O),{},{"span:first-of-type":{fontSize:"15px"}})},children:[Object(o.b)("span",{css:x("GRD10A"),children:n},void 0),Object(o.c)("span",{css:x(i||""),children:[r,Object(o.b)(f.b,{size:12},void 0)]},void 0)]},void 0)]},void 0)},void 0)]},void 0)},S=function(e){var t=e.templateType,n=e.className;return Object(o.b)("div",{css:{margin:"0 auto",maxWidth:"390px",borderRadius:"8px"},className:n,children:3===t?Object(o.b)(A,Object.assign({},e),void 0):2===t?Object(o.b)(N,Object.assign({},e),void 0):1===t?Object(o.b)(L,Object.assign({},e),void 0):null},void 0)},T=function(e,t){return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))}))},I=function(){var e;if("undefined"!=typeof window){var t=(null===(e=window.location)||void 0===e?void 0:e.host)||"";if(t.indexOf(".zpres.zhihu.com")>-1){var n=t.split("--");return n[1]?"https://education-card--".concat(n[1],"--www-zhihu-com.zpres.zhihu.com"):""}}return""}()||"https://api.zhihu.com",R=I.indexOf("ming.in.zhihu.com")>0?"".concat(I,"/api/mocks/education-card.web/edu_cards"):"".concat(I,"/education-card/edu-cards"),P=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=Object(i.useState)(null),o=v(r.a,a,2),c=o[0],s=o[1];return Object(i.useEffect)((function(){e&&t&&T("".concat(R,"?card_ids=").concat(e)).then((function(e){e&&e.data&&s(Object(m.camelizeKeys)(e.data))})).catch((function(t){(n||"undefined"!=typeof window&&window.Raven&&window.Raven.captureException.bind(window.Raven)||function(){})(new Error("EducationCard Fetch Error: ".concat((null==t?void 0:t.message)||"unknow")),{level:"warning",extra:{eduCardId:e}})}))}),[e,n,t]),c},_=i.memo((function(e){var t=e.id,n=e.position,a=void 0===n?"editor":n,r=e.originData,i=e.contentType,c=e.token,s=e.className,l=e.onData,u=e.onError,d=!(r||!t),f=P((null==t?void 0:t.toString())||"",d,u),p=r||(null==f?void 0:f[t]);return"function"==typeof l&&l(p),p?"editor"===a?Object(o.b)(S,Object.assign(Object.assign({},p),{},{className:s}),void 0):Object(o.b)(y,Object.assign(Object.assign({},p),{},{contentType:i,token:c,id:t,children:Object(o.b)(S,Object.assign(Object.assign({},p),{},{className:s}),void 0)}),void 0):null})),M=function(e){var t=e.root,n=e.eduCardProps,a=e.createLinkCardPortal,c=e.onError,s=Object(i.useState)([]),l=v(r.a,s,2),u=l[0],d=l[1];Object(i.useEffect)((function(){var e,n,a=t&&t.querySelectorAll("*[data-draft-type=".concat(b.TYPE,"]"));if(a&&0!==a.length){var r,o=[],i=h(a.keys(),!0);try{for(i.s();!(r=i.n()).done;){var c=null===(n=null===(e=a[r.value])||void 0===e?void 0:e.dataset)||void 0===n?void 0:n.eduCardId;c&&o.push(c)}}catch(e){i.e(e)}finally{i.f()}d(o)}}),[t]);var f=P(u.join(","),!!u.length,c),p=function(e){return Object(o.b)(_,Object.assign(Object.assign({},e),{},{position:"content"}),void 0)},m=Object(i.useMemo)((function(){return a({idAttr:b.IDAttr,selector:"a[".concat(b.IDAttr,"]"),targetClassName:"RichText-EduCardContainer",component:p,getCardProps:function(e){return{id:e.id,originData:f&&f[e.id]}}})}),[f,a]);return f&&Object(o.b)(m,Object.assign(Object.assign({},n),{},{root:t}),void 0)}},1287:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ne}));var a=n(24),r=n.n(a),o=n(0),i=n.n(o),c=n(3),s=n.n(c),l=n(949),u=n.n(l),d=n(5),f=n(47),p=n(1309),m=n(1392),h=n(1059),v=n(12),g=n.n(v),b=n(23),C=n(51),y=n(2147),O=n(933),j=n(94),k=n.n(j),E=n(49),w=n.n(E),x=n(945),N=n(1909),A=n(1520),L=n(9),S=function(e){var t=e.text,n=void 0===t?"已失效":t;return Object(L.g)("div",{className:"GoodsRecommendCard-invalid",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(L.g)("div",{className:"GoodsRecommendCard-invalidButton"},Object(L.g)(A.a,{size:17,center:!0}),Object(L.g)("span",{className:"GoodsRecommendCard-invalidText"},n)))},T=n(670),I=function(e){var t=e.width,n=void 0===t?"16":t,a=e.height,r=void 0===a?"16":a;return Object(L.g)("svg",w()({width:n,height:r,viewBox:"0 0 17 18",fill:"none"},e),Object(L.g)("path",{d:"M1.0625 9.35608C1.0625 8.30122 1.58765 7.0788 2.4781 5.98825C2.57525 5.86927 2.75342 5.86364 2.86204 5.97226L3.61782 6.72804C3.71564 6.82587 3.72141 6.98213 3.63591 7.09089C2.96496 7.94435 2.65625 8.78889 2.65625 9.35608C2.65625 10.0917 3.17553 11.2939 4.33089 12.3769C5.44533 13.4217 6.93093 14.1373 8.5 14.1373C9.16884 14.1373 9.8225 14.0073 10.4387 13.7772C10.5388 13.7398 10.652 13.7622 10.7275 13.8378L11.5457 14.656C11.6734 14.7837 11.6392 14.9988 11.4746 15.0731C10.5636 15.4846 9.5576 15.7311 8.5 15.7311C4.39238 15.7311 1.0625 12.0123 1.0625 9.35608Z",fill:"#0066FF"}),Object(L.g)("path",{d:"M5.3125 9.35608C5.3125 9.22968 5.31986 9.105 5.33417 8.98244C5.35789 8.77928 5.60131 8.71153 5.74594 8.85617L8.99991 12.1101C9.14455 12.2548 9.0768 12.4982 8.87364 12.5219C8.75108 12.5362 8.6264 12.5436 8.5 12.5436C6.73959 12.5436 5.3125 11.1165 5.3125 9.35608Z",fill:"#0066FF"}),Object(L.g)("path",{d:"M8.12591 6.1903C7.92276 6.21405 7.85504 6.45745 7.99966 6.60208L11.254 9.85642C11.3986 10.001 11.642 9.93332 11.6658 9.73017C11.6801 9.60747 11.6875 9.48264 11.6875 9.35608C11.6875 7.59567 10.2604 6.16858 8.5 6.16858C8.37344 6.16858 8.24861 6.17595 8.12591 6.1903Z",fill:"#0066FF"}),Object(L.g)("path",{d:"M14.3438 9.35608C14.3438 9.92333 14.035 10.768 13.3639 11.6215C13.2784 11.7303 13.2841 11.8866 13.382 11.9844L14.1377 12.7402C14.2464 12.8488 14.4245 12.8432 14.5217 12.7242C15.4123 11.6336 15.9375 10.411 15.9375 9.35608C15.9375 6.69983 12.6076 2.98108 8.5 2.98108C7.44227 2.98108 6.4361 3.22767 5.52509 3.6392C5.36051 3.71354 5.32623 3.92864 5.45392 4.05634L6.27212 4.87454C6.34765 4.95006 6.46088 4.97249 6.56094 4.93512C7.17726 4.70491 7.83104 4.57483 8.5 4.57483C10.0691 4.57483 11.5547 5.2905 12.6691 6.33522C13.8245 7.41829 14.3438 8.62045 14.3438 9.35608Z",fill:"#0066FF"}),Object(L.g)("path",{d:"M3.43966 3.1689C3.33592 3.06517 3.16774 3.06517 3.06401 3.1689L2.3127 3.92021C2.20897 4.02394 2.20897 4.19212 2.3127 4.29586L13.5822 15.5654C13.686 15.6691 13.8541 15.6691 13.9579 15.5654L14.7092 14.8141C14.8129 14.7103 14.8129 14.5422 14.7092 14.4384L3.43966 3.1689Z",fill:"#0066FF"}))},R=function(e){var t=e.text,n=void 0===t?"隐藏中":t,a=Object(T.a)().isDarkMode;return Object(L.g)("div",{className:"GoodsRecommendCard-shade",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(L.g)("div",{className:"GoodsRecommendCard-shadeHide",style:{backgroundColor:a?"#182232":"#dde8f7"}},Object(L.g)(I,{width:"17",height:"18"}),Object(L.g)("span",{className:"GoodsRecommendCard-shadeHideText"},n)))};var P=function(e){var t=e.width,n=void 0===t?"18":t,a=e.height,r=void 0===a?"18":a;return Object(L.g)("svg",w()({width:n,height:r,viewBox:"0 0 18 18",fill:"none"},e),Object(L.g)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17ZM12.7778 11.6667C12.9005 11.6667 13 11.5672 13 11.4444V9.88889C13 9.76616 12.9005 9.66667 12.7778 9.66667H9.70703C9.5843 9.66667 9.48481 9.56717 9.48481 9.44444V5.22222C9.48481 5.09949 9.38531 5 9.26258 5H7.88889C7.76616 5 7.66667 5.09949 7.66667 5.22222V10.7778C7.66667 11.2687 8.06464 11.6667 8.55556 11.6667H12.7778Z",fill:"#FD5409"}))};var _=function(e){var t=e.width,n=void 0===t?"65":t,a=e.height,r=void 0===a?"18":a;return Object(L.g)("svg",{width:n,height:r,viewBox:"0 0 65 18",fill:"none"},Object(L.g)("path",{d:"M7.70741 7.17922C8.0658 8.32992 8.13105 9.52489 7.90317 10.7641C7.72592 11.7279 7.35197 12.8098 6.78132 14.0097H4.98132C5.67548 12.6819 6.10124 11.5903 6.25859 10.7346C6.34902 10.2428 6.36898 9.72651 6.31845 9.18558C6.2625 8.67415 6.12245 8.15781 5.89831 7.63655L7.51851 3.63859H6.12351L3.88263 15.8243H2.20263L4.72023 2.13382H9.82023L7.70741 7.17922ZM14.2726 12.0181C14.7205 12.736 15.3743 13.3409 16.2339 13.8327L15.8676 15.8243C14.5197 15.1063 13.5047 14.1818 12.8227 13.0508C12.127 11.9394 11.7902 10.5084 11.8121 8.75775H10.7921L9.88058 13.7146L12.3655 12.6819L12.0426 14.4375L7.80321 15.957L10.3452 2.13382H17.6202L16.4021 8.75775H13.5521C13.5329 9.51505 13.5926 10.1691 13.7313 10.7198L16.7409 9.36261L16.4181 11.1182L14.2726 12.0181ZM11.7389 3.60908L11.0607 7.29724L14.973 7.31199L15.6539 3.60908H11.7389ZM11.8928 4.73028H15.0278L14.7619 6.17604H11.6269L11.8928 4.73028ZM32.8637 5.70396H31.0937L29.5446 14.1277C29.4415 14.6883 29.2465 15.0965 28.9594 15.3522C28.6642 15.5981 28.2366 15.721 27.6766 15.721H25.3666L25.3105 14.0687H27.1555C27.3855 14.0687 27.5695 14.0195 27.7076 13.9212C27.8339 13.8327 27.916 13.6851 27.954 13.4786L29.3837 5.70396L24.7664 5.6892L25.0513 4.14018L29.6686 4.15493L30.1596 1.48471H31.8696L31.3786 4.15493H33.1486L32.8637 5.70396ZM24.9145 2.35511L22.5868 15.0129H17.3218L19.6495 2.35511H24.9145ZM22.9701 3.87463H21.0201L20.2849 7.87259H22.2349L22.9701 3.87463ZM27.051 7.6218L27.7552 10.9706H25.8352L25.056 7.6218H27.051ZM19.254 13.4786H21.204L21.9609 9.36261H20.0109L19.254 13.4786Z",fill:"#FD5409"}),Object(L.g)("path",{d:"M45.1938 1.54372L43.5714 10.3658H41.9214L43.5438 1.54372H45.1938ZM38.247 12.4016C37.6853 11.5952 37.2517 10.6903 36.9462 9.68717L35.8122 15.8538H34.1622L35.2908 9.71667C34.4485 11.1428 33.3957 12.4361 32.1323 13.5966L32.645 10.8084C33.6323 9.84453 34.5629 8.59055 35.4368 7.04645H33.5318L33.8113 5.52693H36.0613L36.4167 3.59433L34.2799 3.71235L34.5485 2.25184L40.2768 1.85352L39.9973 3.37304L38.0856 3.49106L37.7113 5.52693H39.6163L39.3368 7.04645H37.5818C37.8254 7.95127 38.1912 8.76267 38.6792 9.48063C39.5037 7.55295 40.2673 5.63019 40.97 3.71235H42.635C41.8514 5.6892 41.0629 7.66606 40.2693 9.64291H38.7543L38.247 12.4016ZM46.0292 9.48063C45.4059 10.7494 44.6674 11.8017 43.8136 12.6377C42.9563 13.4933 41.9888 14.1867 40.9111 14.7178C39.8571 15.2292 38.6316 15.6669 37.2346 16.0308L37.5683 14.2162C39.4597 13.7736 41.024 13.0704 42.2613 12.1066C43.5022 11.1231 44.4458 9.77076 45.0923 8.04962H45.5123C45.5092 6.65304 45.48 5.20729 45.425 3.71235H47.09C47.1227 4.67619 47.1441 6.59895 47.1542 9.48063H46.0292ZM61.6659 7.97586L55.8068 5.6597L48.9459 7.97586L49.2579 6.27931L53.6352 4.90731L53.8615 4.8188L50.1986 3.28453L50.516 1.55847L55.9498 4.06642L62.456 1.55847L62.1386 3.28453L57.8938 4.83355L61.9779 6.27931L61.6659 7.97586ZM55.859 10.1888L55.1183 14.2162C55.0207 14.7473 54.826 15.126 54.5344 15.3522C54.2092 15.5981 53.7666 15.721 53.2066 15.721H51.2416L51.225 14.0982H52.8C53.02 14.0982 53.1882 14.0539 53.3045 13.9654C53.4225 13.8671 53.4952 13.7441 53.5223 13.5966L54.149 10.1888H48.224L48.5034 8.66923H54.4284L54.697 7.20872H56.407L56.1384 8.66923H61.8834L61.604 10.1888H55.859ZM52.5393 11.0297C51.2354 12.5738 50.0322 13.9507 48.9297 15.1604H46.7997C47.9022 13.9507 49.1254 12.5738 50.4693 11.0297H52.5393ZM59.1543 11.0297C59.7867 12.4852 60.4384 13.8622 61.1097 15.1604H58.9647C58.2953 13.8523 57.6435 12.4754 57.0093 11.0297H59.1543Z",fill:"#121212"}))},M=n(1393);function z(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var D="GoodsRecommendCardPromo",B=function(e){var t=e.countdown,n=Object(o.useState)(t),a=z(r.a,n,2),c=a[0],s=a[1],l=Object(o.useRef)();Object(o.useEffect)((function(){return c<=0?(clearInterval(l.current),void s(0)):(l.current=setInterval((function(){s(c-1)}),1e3),function(){return clearInterval(l.current)})}),[c]);var u=Object(M.b)(c),d=u.d,f=u.h,p=u.m,m=u.s,h="".concat(d?d+"天":""," ").concat(f,":").concat(p,":").concat(m);return Object(L.g)("div",{className:D},Object(L.g)("div",{className:"".concat(D,"-left")},Object(L.g)(P,null),Object(L.g)(_,null)),Object(L.g)("div",{className:"".concat(D,"-right")},c?Object(L.g)(i.a.Fragment,null,Object(L.g)("span",null,"距结束还剩 "),Object(L.g)("span",{className:"".concat(D,"-rightText")},h)):Object(L.g)("span",null,"活动已结束")))},U=n(1523);var V=function(e){var t=e.id,n=e.skuId,a=e.bottomInfo,r=e.type,o=e.scenes,i=e.attachedInfoBytes,c=a||{},s=c.icon,l=c.text,u=s||{},f=u.iconUrl,h=u.iconText,v=u.clickUrl,b=u.clickType,y=l||{},j=y.text,k=y.clickUrl,E=Object(p.a)(),w=E.iOS,x=E.Android,N=function(e,t){if(e){var n=e.clickUrl,a=e.clickType;if(n)if(t.preventDefault(),t.stopPropagation(),"redirect"!==a){if("linkcard"===a)return Object(U.a)(n,{hybridOpenAction:"mcn/openURL"});if("showcase"===a){var i="https://www.zhihu.com/appview/goods/show_case/".concat(n);return Object(U.a)(i,{hybridOpenAction:"base/openURL"})}Object(U.a)(n)}else Object(m.a)(n).then((function(e){var t=Object(d.camelizeKeys)(e.data)||{},n=t.url,a=t.appSchemaIos,i=t.appSchemaAndroid;Object(U.a)(w?a:x?i:n,{hybridOpenAction:"mcn/openURL",params:{type:r,scenes:o,url:n,fallbackUrl:n}})}))}};return Object(L.g)(C.b,{content:{id:String(n),token:String(t),type:"GoodsRecommend"},extra:{attachedInfoBytes:i}},Object(L.g)(C.f,{as:"div",zaType:"Card",shouldTrackClick:!0,shouldTrackShow:!0,zaBlock:"goodsRecommendCard_bottomInfo",className:"BottomInfo",extra:{link:{url:v},configMap:{type:b}}},Object(L.g)(C.a,{as:"div",zaText:!0,zaAction:"OpenUrl",zaBlock:"goodsRecommendCard_bottomInfo_icon",zaType:"Button",extra:{link:{url:v},configMap:{type:b}},onClick:function(e){return N(s,e)}},f&&Object(L.g)("img",{src:f,alt:""}),h&&Object(L.g)("span",{className:g()({"MCNLinkCard-cardBottom-iconText":["linkcard","redirect"].includes(b),"MCNLinkCard-cardBottom-showCaseText":["showcase"].includes(b)})},h)),Object(L.g)(C.a,{as:"span",className:"MCNLinkCard-cardBottom-arrowText",zaText:!0,zaAction:"OpenUrl",zaBlock:"goodsRecommendCard_bottomInfo_text",zaType:"Text",extra:{link:{url:k},configMap:{type:b}},onClick:function(e){return N(l,e)}},j,k&&Object(L.g)(O.a,null))))},F=function(e){return Object(o.forwardRef)((function(t,n){var a=Object(C.l)().trackEvent,r=Object(o.useRef)(null),i=t.component,c=void 0===i?"a":i,s=t.className,l=t.trackInfo,d=t.position,f=t.scenes,m=t.id,v=void 0===m?"":m,y=t.goods,O=t.promoInfo,j=void 0===O?{}:O,k=t.bottomInfo,E=void 0===k?{}:k,A=t.utmInfo,T=t.isPolymericCard,I=void 0!==T&&T,P=t.isInvalid,_=void 0!==P&&P,M=t.isFolded,z=void 0!==M&&M,D=t.onMouseDown,U=void 0===D?function(){}:D,F=t.onClick,H=void 0===F?function(){}:F,Z=y||{},G=Z.skuId,W=Z.source,K=Z.productType,q=Z.goodsUrl,Y=Z.limitFlag,J=void 0===Y?3:Y,Q=q||{},X=Q.url,$=Q.iosSchema,ee=Q.androidSchema,te=l||{},ne=te.blockText,ae=void 0===ne?"goodsRecommendCard":ne,re=te.zaText,oe=void 0===re||re,ie=te.trackExtra,ce=void 0===ie?{}:ie,se=Number((null==j?void 0:j.countdown)||0)>0,le=Object(p.a)().ZhihuHybrid,ue=3==J||2==J&&le,de=1==J&&le,fe=!u()(E)&&d===h.a.Content&&ue;Object(o.useEffect)((function(){r.current&&Object(x.onViewedOnce)(r.current.parentNode,(function(){b.a.trackCardShow(r.current.parentNode,{id:6108,path:[{module_name:"".concat(v,"_").concat(G,"_").concat(W,"_").concat(K)}]})}))}),[v,G,W,K]);var pe=Object(o.useCallback)((function(e){d!==h.a.Editor?(e.preventDefault(),e.stopPropagation(),b.a.trackEvent(null,{id:6208,action:"Click",path:[{module_name:"".concat(v,"_").concat(G,"_").concat(W,"_").concat(K)}]}),Object(N.a)({element:e,id:v,url:X,source:W,scenes:f,utmInfo:A,appSchemaIos:$,appSchemaAndroid:ee,isOpenPopup:I,trackEvent:a,extraInfo:{},onClick:H})):H(e,{scenes:f,position:d,id:v,goods:y})}),[ee,y,v,$,I,H,d,K,f,G,W,a,X,A]);return Object(L.g)(C.b,{content:{type:"GoodsRecommend",id:String(G),token:String(v)},extra:ce},Object(L.g)(C.f,{as:c,ref:n,shouldTrackClick:!0,zaBlock:ae,zaText:oe,zaType:"Card",zaEventType:"Click",zaAction:"OpenUrl",className:g()("GoodsRecommendCard",s,{"GoodsRecommendCard-promo":se,"GoodsRecommendCard-link":de}),"data-draft-node":"block","data-draft-type":"mcn-link-card","data-mcn-id":v,"data-mcn-skuid":G,"data-mcn-source":W,"data-mcn-product-type":K,"data-mcn-app-schema-android":ee,"data-mcn-app-schema-ios":$,href:X,target:"_blank",rel:"noopener noreferrer",onClick:pe,onMouseDown:U},se&&Object(L.g)(B,{countdown:null==j?void 0:j.countdown}),Object(L.g)(e,w()({},t,{ref:r})),_&&Object(L.g)(S,null),z&&Object(L.g)(R,null),fe&&Object(L.g)(V,{id:v,skuId:G,type:h.i[W],scenes:f,bottomInfo:E,attachedInfoBytes:null==ce?void 0:ce.attachedInfoBytes})))}))},H=n(1636);function Z(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var G=function(e){var t=e.price,n=e.prefix,a=e.suffix,i=e.zhihuVipText,c=function(){var e=Object(o.useState)(!1),t=Z(r.a,e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){document.body.clientWidth<=370&&a(!0)}),[]),n}();return null===t?null:i?Object(L.g)("div",{className:"".concat("GoodsRecommendCardPrice","-vip")},Object(L.g)("span",{className:"".concat("GoodsRecommendCardPrice","-vipHint")},i),Object(L.g)("span",{className:"".concat("GoodsRecommendCardPrice","-original"),style:{display:c?"none":"inline"}},"¥".concat(Object(M.a)(t)).concat(a))):Object(L.g)("div",{className:"GoodsRecommendCardPrice"},n&&!c&&Object(L.g)("span",{className:"".concat("GoodsRecommendCardPrice","-prefix")},n),Object(L.g)("span",{className:"".concat("GoodsRecommendCardPrice","-sell")},"¥".concat(Object(M.a)(t,{onlyKeepUnit:c}))),a&&Object(L.g)("span",{className:"".concat("GoodsRecommendCardPrice","-suffix")},a))},W=n(30),K=n.n(W),q=n(22),Y=n.n(q),J=n(28),Q=n.n(J),X=n(25),$=n.n(X),ee=n(29),te=n.n(ee),ne=n(18),ae=n.n(ne);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ae()(e);if(t){var r=ae()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return te()(this,n)}}var oe=function(e){$()(n,e);var t=re(n);function n(){return Y()(this,n),t.apply(this,arguments)}return Q()(n,[{key:"render",value:function(){return Object(L.g)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(L.g)("g",null,Object(L.g)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),n}(o.Component),ie=n(1889);var ce=function(e){var t=e.className,n=e.url,a=e.source,r=K()(e,["className","url","source"]),o=a===h.h.suning?"拼购":"",i="目前".concat(h.g[a],"暂不支持在电脑端购买").concat(o,"商品"),c="zhihu://hybrid?zh_url=".concat(n);return Object(L.g)(ie.a,w()({className:g()("QRCodeModal",t)},r),Object(L.g)("div",{className:"QRCodeModal-title"},"用知乎 App 扫码查看"),Object(L.g)("div",{className:"QRCodeModal-tip"},i),Object(L.g)("div",{className:"QRCodeModal-qrcode"},Object(L.g)(oe,null),Object(L.g)("img",{src:"https://www.zhihu.com/qrcode?url=".concat(encodeURI(c))})))};function se(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var le=F(Object(o.forwardRef)((function(e,t){var n=e.id,a=e.goods,c=e.tags,s=e.goodsExtra,l=e.trackInfo,d=void 0===l?{}:l,f=e.position,m=Object(o.useState)(!1),v=se(r.a,m,2),j=v[0],E=v[1],w=Object(C.l)().trackEvent,x=a||{},N=x.title,A=x.subtitle,S=x.price,T=x.goodsImg,I=x.goodsUrl,R=x.btnText,P=x.source,_=x.skuId,M=x.productType,z=x.iconImg,D=x.imgType,B=x.goodsTags,U=x.limitFlag,V=void 0===U?3:U,F=T||{},Z=F.imgUrl,W=F.imgShape,K=F.cornerText,q=!u()(S),Y=S||{},J=Y.price,Q=Y.prefix,X=Y.suffix,$=s||{},ee=$.zhihu,te=$.suning,ne=z?[{type:"common",value:"",imgUrl:z}]:[],ae=Object(p.a)().ZhihuHybrid,re=(null==B?void 0:B.length)?B.map((function(e){return{type:"text",value:e}})):[],oe=2==V&&ae,ie=function(e){var t=k()(navigator.userAgent)||{},a=t.Zhihu,r=t.ZhihuHybrid,o=t.Mobile,i=t.Tablet;if(!a&&!r&&!o&&!i&&(P===h.h.pinduoduo||P===h.h.suning&&(null==te?void 0:te.isPingou))){if(f===h.a.Editor)return;e.preventDefault(),e.stopPropagation(),E(!0),w({block:"goodsConsumptionCard_cpsCommonCard",action:"OpenUrl",eventType:"Click",elementLocation:{type:"Card",content:{id:String(_),token:String(n),type:"GoodsRecommend"}}},(null==d?void 0:d.trackExtra)||{}),b.a.trackEvent(null,{id:6208,action:"Click",path:[{module_name:"".concat(n,"_").concat(_,"_").concat(P,"_").concat(M)}]})}};return 1==V&&ae?Object(L.g)(C.f,{shouldTrackShow:!0,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"goodsRecommendCard_Link",extra:{configMap:{id:String(_),text:N}}},Object(L.g)("div",{className:"CPSCommonCard-link",onClick:ie},Object(L.g)(y.a,{size:18,center:!0,className:"CPSCommonCard-link-icon"}),N)):Object(L.g)(i.a.Fragment,null,Object(L.g)("div",{className:"CPSCommonCard",onClick:ie,ref:t},Object(L.g)("div",{className:g()("CPSCommonCard-imageBox","CPSCommonCard-imageBox--".concat(W))},Object(L.g)("img",{className:"CPSCommonCard-image",src:Z,alt:""}),K&&Object(L.g)("div",{className:"CPSCommonCard-imageTag"},K)),Object(L.g)("div",{className:"CPSCommonCard-info"},Object(L.g)("div",{className:"CPSCommonCard-title"},N),Object(L.g)("div",{className:"CPSCommonCard-subtitle"},Object(L.g)("div",{className:g()("CPSCommonCard-subtitle-text")},A),D===h.c.ZhiXuanGoods&&Object(L.g)(H.a,{className:"CPSCommonCard-subtitle-img",tags:ne}),oe&&Object(L.g)(H.a,{tags:re})),!u()(c)&&Object(L.g)(H.a,{tags:c}),Object(L.g)("div",{className:"CPSCommonCard-tool"},Object(L.g)("div",{className:"CPSCommonCard-toolLeft"},q&&Object(L.g)(G,{price:J,prefix:Q,suffix:X,zhihuVipText:(null==ee?void 0:ee.vipText)||""})),Object(L.g)("div",{className:"CPSCommonCard-button"},R,Object(L.g)(O.a,{size:24,center:!0,css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GRD10A}}}))))),j&&Object(L.g)(ce,{url:null==I?void 0:I.url,source:P,onClose:function(e){e.preventDefault(),e.stopPropagation(),E(!1)}}))}))),ue=F(Object(o.forwardRef)((function(e,t){var n=e.goods,a=e.tags,r=n||{},o=r.title,c=r.subtitle,s=r.price,l=r.goodsImg,d=r.btnText,f=!u()(s),p=s||{},m=p.price,h=p.prefix,v=p.suffix;return Object(L.g)(i.a.Fragment,null,Object(L.g)("div",{className:"ZhiGoodsCard",ref:t},Object(L.g)("div",{className:"ZhiGoodsCard-imageBox"},Object(L.g)("img",{className:"ZhiGoodsCard-image",src:null==l?void 0:l.imgUrl,alt:""})),Object(L.g)("div",{className:"ZhiGoodsCard-info"},Object(L.g)("div",{className:"ZhiGoodsCard-title"},o),Object(L.g)("div",{className:g()("ZhiGoodsCard-subtitle")},c),!u()(a)&&Object(L.g)(H.a,{tags:a}),Object(L.g)("div",{className:"ZhiGoodsCard-tool"},Object(L.g)("div",{className:"ZhiGoodsCard-toolLeft"},f&&Object(L.g)(G,{price:m,prefix:h,suffix:v,zhihuVipText:""})),Object(L.g)("div",{className:"ZhiGoodsCard-button"},d,Object(L.g)(O.a,{size:24,center:!0,css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GRD10A}}}))))))}))),de=n(300),fe=n(1132),pe=n(1031);var me=function(e){return Object(L.g)("svg",w()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 12",fill:"currentColor"},e),Object(L.g)("path",{d:"M5,0 C7.7615,0 10,2.074 10,4.632 C10,8 8.681,9.6805 6.043,11.657 C5.463,12.0915 4.6455,12.1135 4.041,11.722 L3.952,11.66 L3.766,11.5195 C1.2555,9.5815 0,8 0,4.632 C0,2.074 2.2385,0 5,0 Z M5,1.5 C3.0425,1.5 1.5,2.929 1.5,4.632 C1.5,7.1075 2.159,8.3245 4.368,10.0855 L4.672,10.3235 L4.8565,10.463 C4.926,10.508 5.033,10.5115 5.109,10.4765 L5.144,10.4565 C7.708,8.535 8.5,7.2275 8.5,4.631 C8.5,2.9295 6.9575,1.5 5,1.5 Z M5,3 C5.82842712,3 6.5,3.67157288 6.5,4.5 C6.5,5.32842712 5.82842712,6 5,6 C4.17157288,6 3.5,5.32842712 3.5,4.5 C3.5,3.67157288 4.17157288,3 5,3 Z"}))};var he={name:"gg4vpm",styles:"display:flex;justify-content:space-between;"},ve={name:"1q27zj9",styles:"flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"},ge=F(Object(o.forwardRef)((function(e,t){var n=e.goods,a=e.goodsExtra,r=n||{},o=r.title,i=r.subtitle,c=r.price,s=r.goodsImg,l=r.btnText,d=r.productType,f=!u()(c),p=c||{},m=p.price,v=p.prefix,g=p.suffix,b=(a||{}).meituan,C=Object(fe.a)();return Object(L.g)("div",{className:"CPSMeituanCard",ref:t},Object(L.g)("img",{src:null==s?void 0:s.imgUrl,css:Object(de.a)([{width:75,height:100,borderRadius:6,flexShrink:0,objectFit:"cover"},C],"")}),Object(L.g)("div",{className:"CPSMeituanCard-main"},Object(L.g)("div",null,Object(L.g)("div",{css:he},Object(L.g)("div",{css:function(e){return Object.assign({color:e.colors.GBK02A,fontSize:15,fontWeight:e.fontWeights.bold,lineHeight:1.2,maxHeight:36},Object(pe.a)(2))}},o)),Object(L.g)("div",{css:function(e){return{color:e.colors.GBK05A,fontSize:12,marginTop:4,fontWeight:e.fontWeights.bold,height:16,lineHeight:"16px"}}},i," · ",h.j[d])),Object(L.g)("div",null,Object(L.g)("div",{css:function(e){return{display:"flex",alignItems:"center",color:e.colors.GRD08A,marginTop:8,height:18,lineHeight:"18px"}}},Object(L.g)("div",{css:function(e){return{fontSize:15,fontWeight:e.fontWeights.bold}}},f&&Object(L.g)(G,{price:m,prefix:v,suffix:g,zhihuVipText:""})),Object(L.g)("div",{role:"button",css:function(e){var t;return{marginLeft:"auto",cursor:"pointer",fontSize:13,fontWeight:e.fontWeights.bold,color:null===(t=e.colors)||void 0===t?void 0:t.GRD10A}}},l,Object(L.g)(O.a,{size:16,center:!0,css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GRD10A}}}))),Object(L.g)("div",{css:function(e){return{display:"flex",alignItems:"center",marginTop:2,height:18,lineHeight:1,fontSize:12,color:e.colors.GBK06A,fontWeight:e.fontWeights.bold,overflow:"hidden",transform:"scale(0.92)",transformOrigin:"left"}}},Object(L.g)(me,{width:"12",height:"12",css:Object(de.a)({flexShrink:0,marginTop:-1,marginRight:2},"")}),Object(L.g)("span",{css:ve},null==b?void 0:b.area)))))}))),be=F(Object(o.forwardRef)((function(e,t){var n=e.goods,a=e.goodsExtra,r=n||{},o=r.title,i=r.subtitle,c=r.goodsImg,s=r.btnText,l=(c||{}).imgUrl,u=(a||{}).redPacket;return Object(L.g)("div",{className:"RedPacketCard",ref:t},Object(L.g)("div",{className:"RedPacketCard-imageBox"},Object(L.g)("img",{className:"RedPacketCard-image",src:l,alt:""})),Object(L.g)("div",{className:"RedPacketCard-info"},Object(L.g)("div",{className:"RedPacketCard-title"},o),Object(L.g)("div",{className:g()("RedPacketCard-subtitle")},i),Object(L.g)("div",{className:"RedPacketCard-tool"},Object(L.g)("div",{className:"RedPacketCard-toolLeft"},null==u?void 0:u.description),Object(L.g)("div",{className:"RedPacketCard-button"},s,Object(L.g)(O.a,{size:24,center:!0,css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GRD10A}}})))))}))),Ce=Object(o.memo)(Object(o.forwardRef)((function(e,t){var n=e.component,a=void 0===n?"a":n,r=e.className,o=e.position,i=void 0===o?"editor":o,c=e.id,s=e.skuId,l=e.imgUrl,u=e.title,d=e.isFolded,f=e.url,p=e.trackInfo||{},m=p.blockText,v=p.zaText,b=void 0===v||v,y=p.trackExtra,j=void 0===y?{}:y;return Object(L.g)(C.b,{block:m,content:{type:"GoodsRecommend",token:String(c),id:String(s)}},Object(L.g)(C.f,{shouldTrackClick:!0,zaAction:"OpenUrl",zaType:"Card",zaText:b,zaEventType:"Click",extra:j,as:a,ref:t,className:g()("EducationGoodsZIPCard",r),"data-draft-node":"block","data-draft-type":"mcn-link-card",style:{cursor:d?"default":"pointer"},onClick:function(e){i!==h.a.Editor&&(e.preventDefault(),e.stopPropagation(),Object(U.a)(f))}},d&&Object(L.g)(R,null),Object(L.g)("div",{className:"EducationGoodsZIPCard-container"},Object(L.g)("div",{className:"EducationGoodsZIPCard-left"},Object(L.g)("img",{className:"EducationGoodsZIPCard-image",src:l,alt:""})),Object(L.g)("div",{className:"EducationGoodsZIPCard-right"},Object(L.g)("div",{className:"EducationGoodsZIPCard-title"},u),Object(L.g)(O.a,{className:"EducationGoodsZIPCard-icon",size:24,center:!0})))))}))),ye=F(Object(o.forwardRef)((function(e,t){var n=e.goods,a=e.goodsExtra,r=n||{},o=r.title,i=r.subtitle,c=r.price,s=r.goodsImg,l=r.btnText,d=s||{},f=d.imgUrl,p=d.cornerText,m=!u()(c),h=c||{},v=h.price,b=h.prefix,C=h.suffix,y=(a||{}).zhihu;return Object(L.g)("div",{className:"EducationCommonCard",ref:t},Object(L.g)("div",{className:"EducationCommonCard-imageBox"},Object(L.g)("img",{className:"EducationCommonCard-image",src:f,alt:""}),p&&Object(L.g)("div",{className:"EducationCommonCard-imageTag"},p)),Object(L.g)("div",{className:"EducationCommonCard-info"},Object(L.g)("div",{className:"EducationCommonCard-title"},o),Object(L.g)("div",{className:g()("EducationCommonCard-subtitle")},i),Object(L.g)("div",{className:"EducationCommonCard-tool"},Object(L.g)("div",{className:"EducationCommonCard-toolLeft"},m&&Object(L.g)(G,{price:v,prefix:b,suffix:C,zhihuVipText:(null==y?void 0:y.vipText)||""})),Object(L.g)("div",{className:"EducationCommonCard-button"},l,Object(L.g)(O.a,{size:24,center:!0})))))}))),Oe=Object(o.forwardRef)((function(e,t){var n,a=e.component,r=void 0===a?"a":a,o=e.className,i=e.position,c=e.id,s=e.trackInfo,l=e.isFolded,u=e.goods,d=e.goodsExtra,f=e.onMouseDown,p=u||{},m=p.title,v=p.skuId,g=p.goodsImg,b=p.source,C=p.productType,y=p.goodsUrl;return b===h.h.zhiEducation&&(null==d||null===(n=d.education)||void 0===n?void 0:n.type)===h.e.Datum?Object(L.g)(Ce,{ref:t,component:r,className:o,position:i,trackInfo:Object.assign({},s,{zaText:"教育课程资料模板"}),id:c,skuId:v,source:b,productType:C,imgUrl:null==g?void 0:g.imgUrl,title:m,url:null==y?void 0:y.url,isFolded:l,onMouseDown:f}):Object(L.g)(ye,{ref:t,component:r,className:o,position:i,trackInfo:Object.assign({},s,{zaText:"教育课程常规模板"}),id:c,isFolded:l,goods:u,goodsExtra:d,onMouseDown:f})}));var je=function(e){var t=e.width,n=void 0===t?"20":t,a=e.height,r=void 0===a?"20":a;return Object(L.g)("svg",w()({width:n,height:r,viewBox:"0 0 20 20",fill:"none"},e),Object(L.g)("rect",{width:"20",height:"20",rx:"10",fill:"url(#zhihu_linear)"}),Object(L.g)("path",{d:"M14.6483 9.82166V7.30499L17.179 7.17565L17.3983 7.16159C17.5381 6.91469 17.6017 6.63193 17.5811 6.34894C17.5614 6.28146 17.5248 6.16898 17.4124 6.19429C17.0367 6.28555 16.6553 6.35132 16.2707 6.39112C15.534 6.47829 15.2106 6.50079 14.1899 6.5739C12.3959 6.70606 10.8156 6.76792 10.8156 6.76792C10.8155 6.86019 10.8341 6.95152 10.8701 7.03646C10.9062 7.1214 10.959 7.19819 11.0254 7.26224C11.0918 7.32629 11.1705 7.37629 11.2567 7.40925C11.3429 7.4422 11.4348 7.45743 11.527 7.45403C12.1344 7.42872 13.0258 7.38654 13.9256 7.34155V9.82166H10.4979C10.4979 10.0111 10.5731 10.1928 10.7071 10.3267C10.841 10.4606 11.0227 10.5359 11.2121 10.5359H13.9059V12.4396C13.9059 12.6814 13.7822 12.7629 13.5797 12.7686H12.5365C12.5809 12.9214 12.6572 13.0632 12.7605 13.1844C12.8637 13.3055 12.9915 13.4034 13.1354 13.4715C13.3671 13.5486 13.6127 13.5745 13.8553 13.5475C14.2208 13.5278 14.6483 13.3225 14.6483 12.5858V10.5359H17.657C17.748 10.5359 17.8352 10.4997 17.8996 10.4354C17.9639 10.3711 18.0001 10.2838 18.0001 10.1928V9.82166H14.6483Z",fill:"white"}),Object(L.g)("path",{d:"M12.2918 8.12052C12.2446 8.05472 12.1849 7.99887 12.1161 7.95618C12.0472 7.91349 11.9707 7.8848 11.8908 7.87174C11.8108 7.85868 11.7291 7.86151 11.6503 7.88008C11.5715 7.89864 11.4971 7.93257 11.4314 7.97993L11.3301 8.05304L12.4549 9.62771L13.0567 9.19467L12.2918 8.12052Z",fill:"white"}),Object(L.g)("path",{d:"M16.2229 8.06697L15.3793 9.17205L15.9923 9.61914L17.1986 8.02197L17.0974 7.94887C17.0325 7.89851 16.9582 7.86158 16.8789 7.84024C16.7996 7.8189 16.7168 7.81357 16.6354 7.82457C16.554 7.83556 16.4756 7.86266 16.4048 7.90427C16.334 7.94589 16.2721 8.0012 16.2229 8.06697Z",fill:"white"}),Object(L.g)("path",{d:"M9.75559 6.96472H6.46283V12.7123H7.27547L7.38233 13.4068L8.47616 12.7123H9.76121L9.75559 6.96472ZM8.3665 11.9981L7.72819 12.3917L7.66633 11.9868H7.20518V7.67895H9.01324V11.9981H8.3665Z",fill:"white"}),Object(L.g)("path",{d:"M5.8692 9.55164H4.67695C4.67695 9.42511 4.67695 9.29576 4.67695 9.16078V7.6789H6.03792V7.33022C6.03792 7.23376 5.99979 7.1412 5.93185 7.07273C5.8639 7.00426 5.77164 6.96542 5.67518 6.96468H3.55218C3.55798 6.94165 3.5655 6.91909 3.57468 6.89719C3.64779 6.67505 3.88117 6.00019 3.88117 6.00019C3.65236 5.99602 3.42772 6.06174 3.23725 6.18859C3.05287 6.30963 2.92201 6.49686 2.8717 6.7116C2.72829 7.10527 2.5905 7.48207 2.52302 7.70702C2.39367 8.06695 2.08155 8.69963 2.08155 8.69963C2.31657 8.69745 2.54812 8.64268 2.75922 8.53935C2.90078 8.45635 3.02279 8.34381 3.11693 8.2094C3.21107 8.07499 3.27513 7.92186 3.30473 7.76045C3.30473 7.73514 3.30473 7.70983 3.32723 7.6789H3.94304V9.16078C3.94304 9.29576 3.94304 9.42511 3.92617 9.55164H2.83233C2.6429 9.55164 2.46124 9.62689 2.32729 9.76083C2.19335 9.89478 2.1181 10.0764 2.1181 10.2659H3.85868C3.8226 10.5997 3.75096 10.9287 3.64497 11.2472C3.46502 11.7605 3.19349 12.2368 2.84358 12.6532C2.58024 12.9385 2.29844 13.2062 2 13.4546C2.24273 13.5419 2.50409 13.5643 2.75812 13.5194C3.01216 13.4745 3.25003 13.3639 3.44814 13.1987C3.84602 12.7565 4.14 12.231 4.30859 11.6606C4.45258 11.2024 4.55331 10.7316 4.60946 10.2546H6.20663V9.89469C6.20665 9.80468 6.17127 9.71826 6.10815 9.65409C6.04503 9.58991 5.95921 9.55312 5.8692 9.55164Z",fill:"white"}),Object(L.g)("path",{d:"M5.02604 11.0278L4.40179 11.4299L5.74589 13.4376C5.83897 13.2504 5.89982 13.0489 5.92585 12.8415C5.97024 12.6436 5.94335 12.4365 5.84993 12.2566L5.02604 11.0278Z",fill:"white"}),Object(L.g)("defs",null,Object(L.g)("linearGradient",{id:"zhihu_linear",x1:"-6.7082",y1:"29.9095",x2:"25.5036",y2:"-8.47649",gradientUnits:"userSpaceOnUse"},Object(L.g)("stop",{offset:"0.42",stopColor:"#0066FF"}),Object(L.g)("stop",{offset:"0.92",stopColor:"#00C4FF"}))))},ke={jingdong:function(e){var t=e.width,n=void 0===t?"20":t,a=e.height,r=void 0===a?"20":a;return Object(L.g)("svg",w()({width:n,height:r,viewBox:"0 0 20 20",fill:"none"},e),Object(L.g)("rect",{width:"20",height:"20",rx:"5",fill:"#FF0C00"}),Object(L.g)("path",{d:"M9.22821 4.01082L8.55615 5.70148L10.5828 7.71767H13.6176L14.7727 6.74108C14.7727 6.74108 14.9408 6.41555 15.0983 6.05852L14.8672 5.02942L14.6572 4.89291L12.536 4.68289L11.5069 3.39127L9.22821 4.01082Z",fill:"#414141"}),Object(L.g)("path",{d:"M5.59495 6.03752C5.59495 6.27904 5.63695 6.53106 5.64745 6.78309C5.67895 7.22413 5.46893 7.64417 5.1014 7.88569C4.81787 8.09571 4.49234 8.24272 4.14581 8.32673C3.87278 8.40024 3.58926 8.24272 3.51575 7.9697C3.49475 7.87519 3.49475 7.78068 3.51575 7.68617C3.56826 7.45515 3.65226 7.22413 3.77828 7.02461C4.0618 6.52056 4.27182 5.98501 4.40834 5.41796C4.43984 5.31295 4.47134 5.20794 4.52385 5.11343C4.60785 4.94541 4.79687 4.85091 4.97539 4.90341C5.1119 4.94541 5.23791 4.99792 5.36392 5.06092C5.55294 5.15543 5.75246 5.27094 5.92048 5.37595C6.03599 5.26044 6.141 5.12393 6.26701 5.00842C6.67655 4.63038 7.15959 4.31535 7.67414 4.09483C8.48272 3.7063 9.3333 3.41227 10.2154 3.21275C10.6249 3.12874 11.045 3.07624 11.465 3.04474C11.9585 3.01323 12.4626 2.99223 12.9561 3.00273C13.6072 2.99223 14.2478 3.11824 14.8358 3.39127C15.1613 3.51728 15.4029 3.79031 15.4764 4.13684C15.5079 4.38886 15.5079 4.65139 15.4764 4.90341C15.4029 5.33395 15.2664 5.75399 15.0773 6.14253C15.0143 6.25804 14.9198 6.34204 14.8043 6.39455C14.5313 6.54156 14.2373 6.63607 13.9432 6.68858C13.1137 6.86709 12.2526 6.81459 11.444 6.53106C10.9715 6.34204 10.5514 6.04802 10.2154 5.68048C10.1839 5.63848 10.1419 5.59647 10.0999 5.56497C10.0474 5.54397 9.97386 5.52297 9.94235 5.56497C9.90035 5.60698 9.88985 5.65948 9.90035 5.71199C9.92135 5.77499 9.95285 5.8275 10.0054 5.8695C10.5094 6.42605 11.1605 6.80409 11.885 6.9721C12.7566 7.18212 13.6597 7.15062 14.5103 6.87759C14.5628 6.86709 14.6048 6.84609 14.6573 6.82509C14.7098 6.80409 14.7623 6.78309 14.8148 6.77258C14.7203 6.9196 14.6258 7.05611 14.5313 7.19262C13.8802 8.07471 12.9666 8.71527 11.9165 9.0198C11.234 9.20881 10.5199 9.20881 9.83734 9.0198C8.69274 8.75727 7.62164 8.23222 6.70805 7.48665C6.41402 7.25563 6.162 6.9721 5.97298 6.65707C5.89948 6.54156 5.84697 6.40505 5.80497 6.26854C5.77346 6.15303 5.73146 6.07952 5.63695 6.05852L5.59495 6.03752ZM13.9957 3.28626C13.8592 3.28626 13.7227 3.28626 13.5967 3.32826C13.3867 3.34926 13.1977 3.43327 13.0296 3.55928C12.9246 3.62229 12.8931 3.7588 12.9561 3.85331C12.9771 3.89532 13.0191 3.92682 13.0611 3.93732C13.1242 3.96882 13.1977 4.00033 13.2712 4.02133C13.5967 4.09483 13.9327 4.10534 14.2583 4.05283C14.4263 4.03183 14.5943 3.97932 14.7518 3.91632C14.8673 3.87431 14.9408 3.7693 14.9408 3.64329C14.9408 3.51728 14.8253 3.47528 14.7413 3.42277C14.4998 3.32826 14.2478 3.27576 13.9957 3.28626ZM10.1524 4.7774C10.3309 4.7879 10.4884 4.65139 10.4989 4.48337V4.47287C10.4884 4.29435 10.3414 4.15784 10.1629 4.15784C9.99486 4.13684 9.83734 4.26285 9.81634 4.43087C9.79534 4.59888 9.92135 4.7564 10.0894 4.7774H10.1524ZM11.654 12.2331H11.3915C11.3705 12.2331 11.339 12.1911 11.3285 12.1596C11.2655 11.9181 11.213 11.666 11.1395 11.414C11.108 11.3195 11.066 11.225 11.0135 11.141C10.9715 11.0465 10.8559 11.015 10.7614 11.057C10.7299 11.0675 10.7089 11.0885 10.6879 11.12C10.5934 11.2355 10.5094 11.3615 10.4569 11.5085C10.3834 11.708 10.3099 11.9181 10.2574 12.1281C10.2259 12.2121 10.2049 12.2541 10.1104 12.2436H9.93185C9.93185 11.8866 9.96336 11.54 9.97386 11.162C9.90035 11.1935 9.83734 11.225 9.77434 11.267C9.65883 11.3615 9.55382 11.456 9.44881 11.5505C9.25979 11.7396 9.06027 11.9391 8.90276 12.1386C8.78725 12.2646 8.75574 12.2751 8.55622 12.2331L9.24929 11.057C9.02877 11.0255 8.82925 10.8785 8.73474 10.6684C8.68224 10.5319 8.68224 10.3744 8.73474 10.2274C8.73474 10.2799 8.75574 10.3324 8.77674 10.3849C8.82925 10.6159 9.06027 10.7735 9.30179 10.7105C9.31229 10.7105 9.3333 10.7 9.3438 10.7C9.4173 10.679 9.48031 10.6264 9.52231 10.5634C9.75334 10.1749 9.96336 9.82837 10.1839 9.45034C10.2049 9.38733 10.2784 9.35583 10.3414 9.37683C10.6984 9.45034 11.0555 9.45034 11.4125 9.37683C11.486 9.35583 11.57 9.32432 11.654 9.29282V12.2331ZM7.38011 13.6507C7.34861 13.7452 7.17009 13.7662 6.48753 13.7662C5.80497 13.7662 5.64745 13.7872 5.64745 13.8818C5.64745 13.9763 5.92048 14.0078 7.65314 14.0078C9.3858 14.0078 9.65883 14.0078 9.65883 13.8818C9.65883 13.7557 9.50131 13.7662 8.77674 13.7662C8.04168 13.7662 7.89466 13.7452 7.89466 13.6507C7.89466 13.5562 7.81065 13.5352 7.66364 13.5352C7.54813 13.5142 7.44312 13.5562 7.38011 13.6507ZM11.1395 13.6507C11.108 13.7347 10.982 13.7662 10.6984 13.7662C10.4149 13.7662 10.3099 13.7977 10.3099 13.8818C10.3099 13.9658 10.3939 14.0078 10.6354 14.0078C10.8139 14.0078 10.9504 14.0078 10.9504 14.0498C10.8874 14.2283 10.8034 14.4068 10.7089 14.5748C10.6144 14.7533 10.5304 14.9424 10.4674 15.1314C10.4674 15.1839 10.7614 15.2154 11.234 15.2154H12.0005V15.8559C12.0005 16.4125 11.9795 16.5175 11.843 16.591C11.759 16.633 11.7065 16.717 11.6855 16.8115C11.6855 16.99 12.1791 16.8535 12.3891 16.612C12.5466 16.444 12.5676 16.318 12.5676 15.8139V15.2154H13.3657C14.0167 15.2154 14.1743 15.1944 14.1743 15.0999C14.1743 15.0054 14.0167 14.9844 13.4077 14.9634L12.6201 14.9319L12.5571 14.6063C12.5361 14.2808 12.5256 14.2703 12.2526 14.2703C11.9795 14.2703 11.9795 14.2703 11.9795 14.6273V14.9844H11.591C11.444 14.9949 11.297 14.9739 11.15 14.9319C11.171 14.7638 11.234 14.5958 11.318 14.4488L11.528 14.0183H12.9141C14.0902 14.0183 14.3003 14.0183 14.3003 13.8923C14.3003 13.7662 14.1007 13.7767 12.9771 13.7767C11.8535 13.7767 11.6645 13.7767 11.696 13.6612C11.7275 13.5457 11.696 13.5457 11.465 13.5457C11.234 13.5457 11.171 13.5877 11.1395 13.6612V13.6507ZM5.78396 14.7008C5.77346 14.8583 5.77346 15.0264 5.78396 15.1839C6.05699 15.2154 6.33002 15.2259 6.61354 15.2154H7.38011V15.6459C7.38011 16.2655 7.29611 16.5595 7.13859 16.612C7.05458 16.633 6.99158 16.7065 6.98108 16.7905C6.98108 16.969 7.44312 16.8745 7.67414 16.633C7.83166 16.486 7.86316 16.3915 7.86316 15.8349V15.2049H9.46981V14.2388H5.81547L5.78396 14.7008ZM8.99727 14.7008L8.97626 14.9213H6.33002L6.30901 14.7008L6.27751 14.4803H9.01827L8.99727 14.7008ZM6.08849 15.8559C6.01499 16.1185 5.90998 16.381 5.78396 16.6225L5.62645 16.885H5.79447C5.98348 16.885 6.37202 16.402 6.61354 15.8769C6.82356 15.4359 6.80256 15.3624 6.49803 15.3624C6.1935 15.3624 6.23551 15.3624 6.08849 15.8559ZM8.52472 15.4674C8.65073 15.8874 8.85025 16.276 9.12328 16.6225C9.21779 16.738 9.3438 16.8325 9.48031 16.8745C9.61682 16.8745 9.61682 16.8535 9.43831 16.528C9.30179 16.2865 9.20729 16.024 9.15478 15.7614C9.06027 15.3729 9.04977 15.3414 8.76624 15.3414C8.57723 15.3414 8.50372 15.3834 8.50372 15.4569L8.52472 15.4674ZM10.8349 15.4044C10.7929 15.5304 10.7614 15.6564 10.7404 15.7929C10.6879 16.045 10.6039 16.297 10.4779 16.528C10.3309 16.822 10.3099 16.9165 10.4044 16.9165C10.6249 16.9165 11.192 16.129 11.3705 15.5724C11.423 15.4149 11.402 15.3939 11.1395 15.3939C10.9925 15.3939 10.8454 15.4149 10.8244 15.4464L10.8349 15.4044ZM13.1032 15.3834C13.1557 15.5409 13.2187 15.6984 13.2922 15.8559C13.5022 16.3285 13.9432 16.8745 14.1112 16.8745C14.2793 16.8745 14.2583 16.8325 14.0797 16.591C13.9642 16.381 13.8697 16.15 13.7962 15.9189C13.6597 15.4359 13.6492 15.4149 13.3762 15.3939H13.0821L13.1032 15.3834Z",fill:"white"}))},taobao:function(e){var t=e.width,n=void 0===t?"20":t,a=e.height,r=void 0===a?"20":a;return Object(L.g)("svg",w()({width:n,height:r,viewBox:"0 0 20 20",fill:"none"},e),Object(L.g)("rect",{width:"20",height:"20",rx:"10",fill:"url(#taobao_linear)"}),Object(L.g)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.98534 4.51663C8.56471 4.67929 9.14261 4.84152 9.74546 5.01076C9.60093 5.29335 9.46111 5.56673 9.30772 5.86675C9.5272 5.80989 9.72485 5.75744 9.92314 5.70753C11.0549 5.42268 12.198 5.21103 13.3703 5.22297C14.1411 5.2308 14.898 5.32996 15.5947 5.69319C16.1319 5.97325 16.5625 6.36462 16.7299 6.96459C16.8227 7.29699 16.8737 7.647 16.8953 7.99208C16.9481 8.83475 17.0109 9.67973 16.9984 10.5227C16.9857 11.3745 16.9396 12.2327 16.8137 13.074C16.6388 14.2426 15.9198 14.9316 14.7625 15.1614C13.8395 15.3448 12.0392 15.0494 12.0174 15.0443C11.9957 15.0392 12.1075 14.3656 12.1909 14.0293C12.2465 13.805 12.4841 13.9334 12.7202 14.0628L12.8083 14.1107C12.8956 14.1572 12.9795 14.1978 13.0503 14.2138C13.408 14.2946 13.7616 14.2739 14.107 14.1616C14.6701 13.9783 15.0141 13.4554 15.0135 12.7997C15.0118 11.0896 15.01 9.37946 15.0056 7.66937C15.0053 7.5448 14.9941 7.41834 14.9705 7.29612C14.8415 6.62916 14.4475 6.25129 13.7779 6.12918C13.1662 6.01761 12.5619 6.0888 11.9699 6.2299C11.3628 6.3746 10.7679 6.57007 10.1678 6.74408C10.1379 6.75278 10.11 6.76851 10.0485 6.79505C10.3072 6.86764 10.5348 6.93144 10.7768 6.99928C10.6439 7.35036 10.4061 7.61775 10.1769 7.92376H14.4378V8.80198H12.0326C12.0326 9.14949 12.0319 9.47817 12.033 9.80688C12.0333 9.90554 12.1111 9.88067 12.1659 9.88078C12.7514 9.88217 13.337 9.88167 13.9225 9.88167H14.4275C14.4275 10.1542 14.4304 10.4126 14.4227 10.6706C14.422 10.6948 14.3545 10.7356 14.317 10.7369C14.122 10.7437 13.9267 10.7403 13.7315 10.7403C13.2203 10.7403 12.7091 10.7434 12.198 10.7381C12.0766 10.7368 12.0259 10.7628 12.028 10.8985C12.0358 11.4003 12.031 11.9023 12.0314 12.4041C12.0314 12.4494 12.0355 12.4947 12.0396 12.5797C12.2527 12.4845 12.4488 12.4076 12.6351 12.3116C13.038 12.104 13.036 12.1 12.9174 11.6655C12.8833 11.5408 12.8495 11.416 12.8121 11.2784C13.1857 11.1622 13.5555 11.0471 13.9404 10.9272C14.2548 11.6951 14.5665 12.4563 14.8844 13.2327C14.4171 13.4272 13.9617 13.6168 13.4957 13.8108C13.411 13.5022 13.3305 13.2087 13.2489 12.9116C13.0277 13.043 12.8186 13.1796 12.5986 13.2956C11.9007 13.6636 11.1518 13.8702 10.3692 13.9367C9.87058 13.9791 9.36798 13.994 8.86738 13.9901C7.95718 13.9831 7.34524 13.4135 7.23542 12.5056C7.1888 12.1202 7.1941 11.7374 7.25902 11.3544C7.27293 11.2724 7.31228 11.2437 7.38812 11.2438L8.96356 11.2453C8.97644 11.2453 8.98935 11.2523 9.02231 11.2619C9.00566 11.4524 8.98199 11.6444 8.97421 11.8369C8.9681 11.9889 8.96794 12.1436 8.98974 12.2935C9.01749 12.4842 9.12627 12.639 9.31196 12.6979C9.53392 12.7684 9.76598 12.8071 10.0135 12.8642V10.7405H7.57741V9.87891H8.33968C8.07156 9.64348 7.83646 9.43699 7.59573 9.22562C8.12455 8.63629 8.53326 7.97399 8.91891 7.29601C8.92954 7.27733 8.93581 7.25619 8.93414 7.22326C8.85952 7.26297 8.78133 7.29487 8.70217 7.32457L8.54332 7.38272C8.33187 7.46077 8.12591 7.54984 7.97491 7.7564C7.77325 8.03232 7.522 8.27241 7.28732 8.5233C7.25846 8.55414 7.18158 8.5801 7.15141 8.56359C6.76968 8.35479 6.39245 8.13778 6.00739 7.91905C7.00353 6.97753 7.52864 5.77571 7.98534 4.51663ZM4.37996 7.42292C4.61626 7.60089 4.8559 7.76114 5.07207 7.94845C5.4998 8.31904 5.92639 8.69248 6.33131 9.08751C6.72452 9.47112 6.78155 9.97108 6.70815 10.4856C6.58716 11.3337 6.27532 12.1201 5.90283 12.8863C5.80153 13.0947 5.6674 13.3755 5.5302 13.6643L5.44775 13.838C5.17328 14.4169 4.91036 14.9764 4.8972 15.0014C4.05618 14.4762 3.42378 14.0812 3 13.8166C3.22531 13.6015 3.44605 13.3961 3.66088 13.1846C4.23702 12.6176 4.81271 12.0497 5.30025 11.4013C5.46252 11.1855 5.61759 10.9623 5.67004 10.6914C5.76042 10.2244 5.54286 9.88458 5.17661 9.63877C4.72219 9.33387 4.25004 9.05544 3.78567 8.7654C3.72332 8.7265 3.66158 8.68665 3.58777 8.63975C3.85164 8.23447 4.1112 7.83571 4.37996 7.42292ZM9.5042 8.80645C9.43828 8.81091 9.35992 8.84144 9.31335 8.88689C9.03068 9.1624 8.75679 9.44686 8.4766 9.7249C8.43535 9.76581 8.37607 9.78851 8.32515 9.81966L8.36798 9.87177H10.0144V8.80268C9.83731 8.80268 9.67011 8.79515 9.5042 8.80645Z",fill:"white"}),Object(L.g)("path",{d:"M6.38895 5.69763C6.38781 5.04102 5.85116 4.50409 5.19203 4.50002C4.52979 4.496 3.99194 5.03608 3.99249 5.70466C3.99302 6.37831 4.5212 6.90755 5.19195 6.90654C5.85685 6.90554 6.39012 6.36696 6.38895 5.69763Z",fill:"#FDEB4F"}),Object(L.g)("defs",null,Object(L.g)("linearGradient",{id:"taobao_linear",x1:"20",y1:"4.1352",x2:"1.46101e-07",y2:"15.8648",gradientUnits:"userSpaceOnUse"},Object(L.g)("stop",{stopColor:"#FF8800"}),Object(L.g)("stop",{offset:"1",stopColor:"#FF5000"}))))},zhihu:je,zhi_goods:je,zhiGoods:je},Ee=F(Object(o.forwardRef)((function(e,t){var n=e.id,a=e.goods,r=e.goodsExtra,c=a||{},s=c.title,l=c.price,d=c.goodsImg,f=c.source,p=c.skuId,m=c.productType,h=!u()(l),v=l||{},g=v.price,C=v.prefix,y=v.suffix,j=(r||{}).multipleGoods,k=(null==j?void 0:j.multipleSource)||[],E=ke[k[0]||"zhi_goods"];Object(o.useEffect)((function(){b.a.trackCardShow(null,{id:10329,path:[{module_name:"".concat(n,"_").concat(p,"_").concat(f,"_").concat(m)}]})}),[]);return Object(L.g)("div",{className:"PolymericCard",ref:t,onClick:function(){b.a.trackEvent(null,{id:10330,action:"OpenUrl",path:[{module_name:"".concat(n,"_").concat(p,"_").concat(f,"_").concat(m)}]})}},Object(L.g)("div",{className:"PolymericCard-imageBox"},Object(L.g)("img",{className:"PolymericCard-image",src:null==d?void 0:d.imgUrl,alt:""})),Object(L.g)("div",{className:"PolymericCard-main"},Object(L.g)("div",{className:"PolymericCard-title"},s),Object(L.g)("div",{className:"PolymericCard-tool"},h&&Object(L.g)(G,{isPromo:!0,price:g,prefix:C,suffix:y}),!!k.length&&Object(L.g)("div",{className:"PolymericCard-sources"},k.length<=2?k.map((function(e){var t=ke[e];return t?Object(L.g)(t,{key:e,className:"PolymericCard-sourceLogo"}):null})):Object(L.g)(i.a.Fragment,null,Object(L.g)(E,{className:"PolymericCard-sourceLogo"}),Object(L.g)("span",{className:"PolymericCard-sourceLength",style:{display:k.length>2?"inline-flex":"none"}},k.length-1)),Object(L.g)(O.a,{size:24,center:!0,css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GRD10A}}})))))})));function we(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var xe=function(e,t){var n=Object(o.useState)({}),a=we(r.a,n,2),i=a[0],c=a[1],s=Object(o.useState)({}),l=we(r.a,s,2),v=l[0],g=l[1],b=Object(p.a)().ZhihuHybrid,C=e.component,y=void 0===C?"a":C,O=e.className,j=e.id,k=e.scenes,E=void 0===k?h.b.Content:k,w=e.position,x=void 0===w?h.a.Content:w,N=e.fetcherOptions,A=e.refetchKey,S=e.originalData,T=e.originalBlockText,I=void 0===T?"":T,R=e.isAuthor,P=void 0===R||R,_=e.getUrl,M=e.onClick,z=e.onMouseDown,D=e.onData;Object(o.useEffect)((function(){if(null!==A){if(S&&!u()(S[j]))return c(Object(d.camelizeKeys)(S[j])),void(D&&D(Object(d.camelizeKeys)(S[j])));var e=_?_(j):"/api/v4/mcn/v2/linkcard/".concat(j,"?scenes=").concat(E);Object(m.a)(e,N).then((function(e){c(Object(d.camelizeKeys)((null==e?void 0:e.data)||{})),D&&D(Object(d.camelizeKeys)((null==e?void 0:e.data)||{}))})).catch((function(){}))}}),[j,E,c,D,A,_,N,S]);var B=i.cardType,U=void 0===B?h.d.CPSCommonCard:B,V=i.goods,F=void 0===V?{}:V,H=i.goodsExtra,Z=void 0===H?{}:H,G=i.status,W=void 0===G?{}:G,K=i.bottomInfo,q=i.tags,Y=i.promoInfo,J=i.attachedInfoBytes,Q=F||{},X=Q.productType,$=Q.goodsUrl;Object(o.useEffect)((function(){i&&b&&f.a.supportsAction("ad/getContentSign").then((function(e){e&&Object(f.a)("ad/getContentSign").dispatch().then((function(e){var t=e.plugcb,n={};try{var a=new URL(t).searchParams;n.utm_division=["cid","adid","zoneid","sid"].map((function(e){return a.get(e)||""})).join("_"),n.utm_campaign=a.get("adsource")||""}catch(e){n.utm_division=["","","",""].join("_"),n.utm_campaign=""}g(n)})).catch((function(){}))}))}),[i,b]);var ee=!!W[h.f.Fold]&&!P,te=!1;if(u()(i)||ee)return null;var ne=!!W[h.f.Fold]&&P;return!W[h.f.Invalid]||x!==h.a.Editor&&X!==h.k.RedPacket||(te=!0),U===h.d.CPSCommonCard?Object(L.g)(le,{ref:t,component:y,className:O,position:x,scenes:E,utmInfo:v,trackInfo:{blockText:I||"goodsConsumptionCard_cpsCommonCard",trackExtra:{attachedInfoBytes:J,link:{url:null==$?void 0:$.url},configMap:Object.assign({},b?v:{})}},id:j,isInvalid:te,isFolded:ne,goods:F,tags:q,bottomInfo:K,goodsExtra:Z,promoInfo:Y||{},onClick:M,onMouseDown:z}):U===h.d.ZhiGoodsCard?Object(L.g)(ue,{ref:t,component:y,className:O,position:x,scenes:E,utmInfo:v,trackInfo:{blockText:"goodsConsumptionCard_zhiGoodsCard",trackExtra:{attachedInfoBytes:J,link:{url:null==$?void 0:$.url},configMap:Object.assign({},b?v:{})}},id:j,isInvalid:te,isFolded:ne,goods:F,tags:q,bottomInfo:K,goodsExtra:Z,promoInfo:Y||{},onMouseDown:z}):U===h.d.RedPacketCard?Object(L.g)(be,{ref:t,component:y,className:O,position:x,trackInfo:{blockText:"goodsConsumptionCard_redPacketCard",trackExtra:{attachedInfoBytes:J,link:{url:null==$?void 0:$.url},configMap:Object.assign({},b?v:{})}},utmInfo:v,id:j,isInvalid:te,isFolded:ne,goods:F,goodsExtra:Z,onClick:M,onMouseDown:z}):U===h.d.CPSMeituanCard?Object(L.g)(ge,{ref:t,component:y,className:O,position:x,trackInfo:{blockText:"goodsConsumptionCard_cpsMeituanCard",trackExtra:{attachedInfoBytes:J,link:{url:null==$?void 0:$.url},configMap:Object.assign({},b?v:{})}},utmInfo:v,id:j,isInvalid:te,isFolded:ne,goods:F,goodsExtra:Z,onMouseDown:z}):U===h.d.EducationCard?Object(L.g)(Oe,{ref:t,component:y,className:O,position:x,trackInfo:{blockText:I||"goodsConsumptionCard_educationCard",trackExtra:{attachedInfoBytes:J,link:{url:null==$?void 0:$.url},configMap:Object.assign({},b?v:{})}},utmInfo:v,id:j,isInvalid:te,isFolded:ne,goods:F,goodsExtra:Z,onMouseDown:z}):U===h.d.PolymericCard?Object(L.g)(Ee,{ref:t,component:y,className:O,position:x,scenes:E,utmInfo:v,trackInfo:{blockText:"goodsConsumptionCard_polymericCard",trackExtra:{attachedInfoBytes:J,link:{url:null==$?void 0:$.url},configMap:Object.assign({},b?v:{})}},id:j,isInvalid:te,isFolded:ne,isPolymericCard:!0,goods:F,tags:q,bottomInfo:K,goodsExtra:Z,promoInfo:Y||{},onClick:M,onMouseDown:z}):null};xe.prototype={id:s.a.number,scenes:s.a.oneOf([0,1,2,3]),fetcherOptions:s.a.object,position:s.a.oneOf(["editor","content"]),originalData:s.a.object,isAuthor:s.a.bool,getUrl:s.a.func,onClick:s.a.func};var Ne=Object(o.forwardRef)(xe)},1288:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return ce})),n.d(t,"d",(function(){return se})),n.d(t,"e",(function(){return de})),n.d(t,"c",(function(){return ve})),n.d(t,"f",(function(){return be}));var a=n(0),r=n.n(a),o=n(23),i=n(51),c=n(1078),s=function(e,t){var n=Object(i.l)().trackEvent,r=Object(a.useCallback)((function(a){!function(e,t,n){if(!e.defaultPrevented){var a=e.target.getAttribute("data-catalog-target-id");if(a){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),o.a.trackEvent(e.target);var r=t.querySelector("#"+a);r&&(e.preventDefault(),Object(c.a)(r,10,!1))}}}(a,t||e,n)}),[e,t,n]);Object(a.useEffect)((function(){if(e)return e.addEventListener("click",r),function(){e.removeEventListener("click",r)}}),[e,r])},l=n(24),u=n.n(l),d=n(30),f=n.n(d),p=n(49),m=n.n(p),h=(n(50),n(691),n(73),n(906),n(42),n(945)),v=(n(56),n(22)),g=n.n(v),b=n(28),C=n.n(b),y=n(25),O=n.n(y),j=n(29),k=n.n(j),E=n(18),w=n.n(E),x=n(118),N=n(12),A=n.n(N),L=n(459),S=n(26),T=n.n(S),I=n(77),R=n.n(I),P=n(145),_=n.n(P),M=n(9);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return k()(this,n)}}var D,B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.a;return function(n){return R()(function(a){O()(o,a);var r=z(o);function o(){var e;g()(this,o);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))).key=t(),e}return C()(o,[{key:"render",value:function(){return Object(M.g)(n,m()({},this.props,T()({},e,this.key)))}}]),o}(r.a.Component),n)}},U=n(1519),V=n(473),F=n.n(V),H=function(e,t){return function(n){var a,r=(a=[],{value:{},listen:function(e){a.push(e)},unlisten:function(e){a=a.filter((function(t){return t!==e}))},emit:function(e){this.value=e,a.forEach((function(t){return t(e)}))}}),o=Object(U.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),i=function(e,t){return e?F()(e,(function(e){return function(){return t(e.apply(void 0,arguments))}})):{dispatch:t}}(t,(function(e){return r.emit(e(r.value))})),c=Object.assign((function(t){return Object(M.g)(o,{source:r},(function(a){return Object(M.g)(n,m()({},t,e({value:a,source:r},t),i))}))}),{source:r});return R()(c,n)}},Z=["gifKey","isPlaying"];!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(D||(D={}));var G=function(e){return Object(M.g)("svg",m()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(M.g)("g",{fill:"none",fillRule:"evenodd"},Object(M.g)("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(M.g)("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),Object(M.g)("svg",m()({x:16,y:18.5},e),Object(M.g)("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},W=function(e){return Object(M.g)("svg",m()({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),Object(M.g)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Object(M.g)("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),Object(M.g)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),Object(M.g)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},Object(M.g)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),Object(M.g)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),Object(M.g)("svg",{x:"16",y:"18.5"},Object(M.g)("g",{fill:"#ffffff"},Object(M.g)("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),Object(M.g)("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},Object(M.g)("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),Object(M.g)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},K=function(e){return Object(M.g)("svg",m()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(M.g)("g",{fill:"none",fillRule:"evenodd"},Object(M.g)("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(M.g)("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),Object(M.g)("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))},q=function(){return Object(M.g)("div",{className:"GifPlayer-cover",style:{width:"100%",paddingTop:"".concat(56.25,"%"),position:"relative"}},Object(M.g)("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}))};function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return k()(this,n)}}var J=function(){return new Promise(requestAnimationFrame)},Q=function(e){O()(n,e);var t=Y(n);function n(){var e;g()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoaded:!1},e.videoEle=null,e.imgRef=Object(a.createRef)(),e.onPlay=function(){var t=e.props.onSuccess;t&&t()},e.onError=function(t){var n=e.props,a=n.onFailed,r=n.gifKey;a&&a(t.target.error),e.props.updateGif({gifKey:r,loadState:D.Failed})},e.handleClick=function(t){var n=e.props,a=n.onClick,r=n.disableTogglePlayOnClick,o=n.loadState;a&&a(t),r&&o!==D.Failed||e.togglePlayState()},e.handleImageLoad=function(){return e.setState({isLoaded:!0})},e.handleIntersectionChange=function(t){var n,a;e.props.autoplayOnShow&&(t.isIntersecting&&t.intersectionRatio>=.3&&e.triggerPlayGif(),t.isIntersecting||0!==t.intersectionRatio||null===(n=(a=e.props).updateGif)||void 0===n||n.call(a,{gifKey:e.props.gifKey,isPlaying:!1}))},e.wrapperIcon=function(e){return Object(M.g)("div",{className:"GifPlayer-icon"},e)},e}return C()(n,[{key:"canPlay",get:function(){return this.props.loadState===D.Ok}},{key:"componentDidMount",value:function(){var e;null!==(e=this.imgRef.current)&&void 0!==e&&e.complete&&this.handleImageLoad()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPlaying,a=t.videoUrl,r=t.loadState;this.videoEle&&n&&a!==e.videoUrl&&this.videoEle.play(),e.videoUrl||!a||r!==D.Loading&&!n||this.triggerPlayGif(),this.videoEle&&this.videoEle.duration&&!n&&e.isPlaying!==n&&(this.videoEle.currentTime=0,this.videoEle.controls=!1,this.videoEle.pause())}},{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"triggerPlayGif",value:function(){this.props.isPlaying||this.togglePlayState()}},{key:"togglePlayState",value:function(){var e=this.props,t=e.onPlayChange,n=e.isPlaying,a=e.videoUrl;return t&&t(n),a?this.toggleVideo():this.canPlay?this.toggleGifImage():void this.loadGif()}},{key:"toggleGifImage",value:function(){var e=this.props,t=e.gifKey,n=e.isPlaying;this.props.updateGif({gifKey:t,isPlaying:!n})}},{key:"toggleVideo",value:function(){var e=this.props,t=e.gifKey,n=e.onLoadStart,a=e.loadState,r=e.isPlaying;this.videoEle&&(r?this.videoEle.pause():(a===D.Failed&&(this.videoEle.src=this.videoEle.src),this.videoEle.play(),n&&n())),this.props.updateGif({gifKey:t,isPlaying:!r})}},{key:"loadGif",value:function(){var e=this,t=this.props,n=t.gifKey,a=t.src,r=t.onLoadStart,o=t.onSuccess,i=t.onFailed;t.loadState!==D.Loading&&(this.props.updateGif({gifKey:n,loadState:D.Loading}),r&&r(),Promise.all([Object(x.loadImage)(a),J().then(J)]).then((function(){o&&o(),e.props.videoUrl||e.props.updateGif({gifKey:n,isPlaying:!0,loadState:D.Ok})})).catch((function(t){i&&i(t),e.props.videoUrl||e.props.updateGif({gifKey:n,loadState:D.Failed})})))}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.poster,o=a.src,i=a.size,c=a.loadState,s=a.isPlaying,l=a.onRef,u=a.videoUrl,d=a.customIcons,f=this.canPlay&&s,p=c===D.Loading,m=c===D.Failed,h=this.state.isLoaded;if(p)e=this.wrapperIcon(null!==(t=null==d?void 0:d.loading)&&void 0!==t?t:Object(M.g)(W,null));else if(m){var v;e=this.wrapperIcon(null!==(v=null==d?void 0:d.failed)&&void 0!==v?v:Object(M.g)(K,null))}else if(!s){var g;e=this.wrapperIcon(null!==(g=null==d?void 0:d.normal)&&void 0!==g?g:Object(M.g)(G,null))}return e&&(this.lastIcon=e),Object(M.g)(L.a,{threshold:[0,.3],onChange:this.handleIntersectionChange},Object(M.g)("div",{className:A()("GifPlayer",{isPlaying:s}),"data-size":i,onClick:this.handleClick,ref:l},!h&&Object(M.g)(q,null),Object(M.g)("img",{className:A()("ztext-gif",{"GifPlayer-gif2mp4Image":u}),style:{display:h?"block":"none"},role:"presentation",src:f?o:r,"data-thumbnail":r,"data-size":i,ref:this.imgRef,onLoad:this.handleImageLoad}),u&&Object(M.g)("video",{ref:function(e){n.videoEle=e},className:"ztext-gif GifPlayer-gif2mp4",src:u,"data-thumbnail":r,poster:r,"data-size":i,controls:!1,preload:"metadata",loop:!0,muted:!0,onPlay:this.onPlay,onError:this.onError,playsInline:!0}),e||this.lastIcon))}}]),n}(r.a.Component);Q.defaultProps={isPlaying:!1,loadState:D.Initial};B("gifKey")(H((function(e,t){return e.value[t.gifKey]}),{updateGif:function(e){return function(t){var n=e.gifKey,a=e.isPlaying,r=f()(e,Z),o=Object.assign({},t);if(a)for(var i=0,c=Object.keys(o);i<c.length;i++){var s=c[i],l=o[s];s!==n&&l.isPlaying&&(o[s]=Object.assign(Object.assign({},l),{},{isPlaying:!1}))}return Object.assign(Object.assign({},o),{},T()({},n,Object.assign(Object.assign({},t[n]),{},{isPlaying:a},r)))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}})(Q)),n(311);var X=n(99),$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.rootMargin,o=n.threshold,i=n.once,c=void 0===i||i;e=Array.isArray(e)?e:e?[e]:[];var s=Object(a.useRef)(null),l=Object(X.a)(t);Object(a.useEffect)((function(){if(e.length)return s.current&&e.forEach((function(e){return s.current.unobserve(e)})),s.current=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(l(e),c&&s.current.unobserve(e.target))}))}),{rootMargin:r,threshold:o}),e.forEach((function(e){return s.current.observe(e)})),function(){e.forEach((function(e){return s.current.unobserve(e)}))}}),[e,r,JSON.stringify(o),c])},ee=n(1649);var te=n(62),ne=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")};function ae(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var re=n.n(te)()((function(){return/Mobile/.test(navigator.userAgent)}));function oe(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};o.a.trackMonitor({name:t},n)}var ie=function(e){var t=e.onLoadStateChange,n=e.enableWebP,a=e.size,r=e.quality;return function(e){var o=e.target,i=function(e){var t=e.image,n=e.enableWebP,a=e.size,r=e.quality,o=void 0===r?80:r,i=t.dataset,c=i.actualsrc,s=i.actualgif;return n&&s&&s.match(/.gif$/i)?c:(a||(a="720w",!re()&&window.devicePixelRatio>=1.5&&(a="1440w"),re()&&window.devicePixelRatio*window.innerWidth>=1080&&(a="1440w")),Object(x.imgUrl)(c,{quality:o,size:a}))}({image:o,enableWebP:n,size:a,quality:r});if(n&&(i=ne(i)),o.src=i,o.complete)o.dataset.lazyStatus="ok";else{t&&o.addEventListener("loadstart",(function(){t("loadstart",i)})),o.dataset.lazyStatus="loading";var c=setTimeout((function(){o.complete||oe(o.url,"image_web_timeout_image"),t&&t("timeout",i)}),15e3);o.addEventListener("load",(function(){o.dataset.lazyStatus="ok",clearTimeout(c),oe(o.url,"image_web_success_image"),t&&t("load",i)})),o.addEventListener("error",(function(){clearTimeout(c),oe(o.url,"image_web_fail_image"),t&&t("error",i)}))}}},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,r=void 0===n||n,o=t.disabled,i=void 0!==o&&o,c=t.onLoadStateChange,s=t.size,l=t.quality,d=Object(a.useState)([]),f=ae(u.a,d,2),p=f[0],m=f[1],h=Object(ee.a)("lossless");$(p,ie({onLoadStateChange:c,enableWebP:h&&r,size:s,quality:l}),{rootMargin:"300px"}),Object(a.useEffect)((function(){if(e&&!i){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&m(t)}}),[e,i])},se=function(e,t){var n=Object(X.a)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var a=e.target.getAttribute("href"),r=t.querySelector(a);if(r){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);r.focus({preventScroll:!0}),Object(c.a)(r),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(a.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},le=(n(689),function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,o.a.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.clickViewId&&(t.dataset.zaDetailViewId=t.clickViewId)}},n=new IntersectionObserver((function(e){e.forEach(t)}),{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach((function(t){var a=t.selector,r=t.cardShowViewId,o=t.clickViewId;Array.from(e.querySelectorAll(a)).forEach((function(e){e.cardShowViewId=r,e.clickViewId=o,n.observe(e)}))})),function(){n.disconnect()}}),ue="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},de=function(e){var t=Object(a.useRef)(null);Object(a.useEffect)((function(){if(e)return ue((function(){e&&(t.current=le(e))})),function(){t.current&&t.current()}}),[e])},fe=n(1467),pe=n(1253),me=n(1377);function he(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var ve=function(e){var t=e.contentType,n=e.token,o=e.root,i=e.mcnLinkCardProps,c=e.isAuthor,s=Object(a.useState)(null),l=he(u.a,s,2),d=l[0],f=l[1],p=Object(a.useState)(!1),h=he(u.a,p,2),v=h[0],g=h[1];return Object(a.useEffect)((function(){var e=o&&o.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&Object(pe.a)("/api/v4/mcn/v2/linkcards?content_type=".concat(t,"&token=").concat(n)).then((function(e){var t=e.data;t&&(f(t),g(!0))})).catch((function(){g(!0)}))}),[o]),Object(M.g)(r.a.Fragment,null,v&&Object(M.g)(me.a,null,Object(M.g)(fe.d,m()({},i,{originalData:d,root:o,isAuthor:c}))))},ge=n(1729),be=function(e,t,n){var r=Object(a.useRef)(n),o=Object(X.a)((function(e){var n=e.currentTarget,a={title:n.dataset.text,href:n.href};"IMG"===e.target.tagName?Object(ge.b)(e,t,Object.assign(Object.assign({},a),{},{video:{}})):Object(ge.c)(e,t,a)}));Object(a.useEffect)((function(){if(e&&r.current){var t=Array.from(e.querySelectorAll(".LinkCard.new.static.zvideo"));return t.forEach((function(e){Object(h.onViewedOnce)(e,(function(){return Object(ge.d)(e)})),e.addEventListener("click",o)})),function(){t.forEach((function(e){e.removeEventListener("click",o)}))}}}),[e,r,o])}},1309:function(e,t,n){"use strict";var a=n(24),r=n.n(a),o=n(0),i=n(949),c=n.n(i),s=n(94),l=n.n(s);function u(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}t.a=function(e){var t=Object(o.useState)(e||{}),n=u(r.a,t,2),a=n[0],i=n[1];return Object(o.useEffect)((function(){(c()(e)||void 0===(null==e?void 0:e.iOS))&&i(l()(navigator.userAgent)||{})}),[]),a}},1377:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(25),s=n.n(c),l=n(29),u=n.n(l),d=n(18),f=n.n(d),p=n(0),m=n(955),h=n.n(m),v=n(2148),g=n(3),b=n.n(g);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var y=function(e){s()(n,e);var t=C(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hasError:!1},e}return i()(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props.onCatch;"function"==typeof n&&n(e,t),Object(v.a)(e,{logger:"clientErrorBoundary",fingerprint:["error-boundary"],extra:{info:t,passWhitelistUrlsTest:!0}})}},{key:"render",value:function(){var e=this.props,t=e.fallbackComponent,n=e.children;if("undefined"==typeof window||!window.document)try{return h.a.renderToString(n),n}catch(e){return Object(v.a)(e,{logger:"serverErrorBoundary",fingerprint:["error-boundary"],extra:{passWhitelistUrlsTest:!0}}),t||null}return this.state.hasError?t||null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(p.Component);y.defaultProps={fallbackComponent:null,onCatch:function(){}},y.propTypes={fallbackComponent:b.a.oneOfType([b.a.func,b.a.node,b.a.element]),onCatch:b.a.func};var O=y},1392:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))}},1393:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var a=function(e){return e>=10?String(e):"0".concat(e)},r=function(e){var t=0,n="00",r="00",o="00";if(e<=0)return{d:t,h:n,m:r,s:o};return e>172800?(t=Math.floor(e/86400),n=Math.floor(e%86400/3600),r=Math.floor(e%86400%3600/60),o=Math.floor(e%86400%3600%60)):(n=Math.floor(e/3600),r=Math.floor(e%3600/60),o=Math.floor(e%3600%60)),{d:t,h:a(n),m:a(r),s:a(o)}};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trimZero,a=void 0!==n&&n,r=t.onlyKeepUnit,o=void 0!==r&&r,i=String(e).padStart(2,"0").slice(-2);if(o){var c=e/100;return c<1e3?"".concat(Math.floor(c),".").concat(i):"".concat(Math.floor(c))}return a&&"00"===i?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(i)}},1394:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--PencilPaper24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M3.55 5.97a2.415 2.415 0 012.415-2.416h7.56a.75.75 0 010 1.5h-7.56a.915.915 0 00-.915.915v12.072c0 .505.41.915.915.915h12.074c.506 0 .915-.41.915-.915v-7.557a.75.75 0 011.5 0v7.557a2.415 2.415 0 01-2.415 2.415H5.965A2.415 2.415 0 013.55 18.04V5.969z",fillRule:"evenodd",clipRule:"evenodd"}),r.a.createElement("path",{d:"M20.239 3.77a.75.75 0 010 1.06l-8.206 8.206a.75.75 0 01-1.06-1.06l8.205-8.206a.75.75 0 011.06 0z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function s(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--WriteArticle"+(e.className?" "+e.className:"")}}))}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--EditSurround"+(e.className?" "+e.className:"")}}))}},1395:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(30),r=n.n(a),o=n(49),i=n.n(o),c=n(300),s=n(0),l=n.n(s),u=n(58),d=n(1173),f=n(1116),p=n(1525),m=n(12),h=n.n(m),v=n(1031),g=n(1138),b=n(1078),C=n(9),y=["children","pl","targetId","handleScroll","index"],O=["className"],j=["className"];var k={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},E={name:"160ybly",styles:"cursor:pointer;align-items:center;"},w=function(e){var t=e.children,n=e.pl,a=e.targetId,o=e.handleScroll,s=e.index,l=r()(e,y);return Object(C.g)(u.Text,i()({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:k},l),Object(C.g)(u.Flex,{pl:n,css:E,"data-catalog-target-id":a,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){o(e,s)}},Object(C.g)(u.Text,{css:Object(c.a)([Object(v.a)(1),{pointerEvents:"none",wordBreak:"break-all"}],""),dangerouslySetInnerHTML:{__html:t}}),Object(C.g)(d.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})))},x={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},N=function(e){var t=e.className,n=r()(e,O);return Object(C.g)(w,i()({className:h()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:x},n))},A={name:"q7f27s",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:0px;}"},L={name:"4g6ai3",styles:"cursor:pointer;"},S={name:"eg4v4b",styles:"margin-top:1px;"},T=l.a.forwardRef((function(e,t){var n=e.isFold,a=e.onClick,r=n?f.a:p.a,o=n?"展开目录":"收起目录";return Object(C.g)(l.a.Fragment,null,Boolean(n)&&Object(C.g)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(C.g)(u.Flex,{justifyContent:"center"},Object(C.g)(u.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:L,onClick:a},o,Object(C.g)(r,{size:18,css:S}))))})),I={1:N,2:function(e){var t=e.className,n=r()(e,j);return Object(C.g)(w,i()({className:h()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:A},n))}},R={name:"7cjcr7",styles:"& .Catalog-wrapper{position:relative;}"},P={name:"npr4z8",styles:"margin-bottom:18px !important;margin-top:0px !important;"};t.b=function(e){var t=e.catalog,n=e.className,a=e.canFold,r=e.inEditor,o=e.scrollOffset,i=void 0===o?0:o,c=a&&!r&&(null==t?void 0:t.length)>3,l=Object(s.useCallback)((function(e,t){if(r){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(b.a)(a,i)}))}}}),[r,i]);return null!=t&&t.length?Object(C.g)(u.Box,{className:h()(n,"Catalog"),mb:"48px",css:R,"data-za-detail-view-name":"正文"},Object(C.g)("h2",{css:P},"目录"),Object(C.g)(u.Box,{className:"Catalog-wrapper"},Object(C.g)(u.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:c?"84px":"auto"},t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,r=e.index;if(e.status===g.a.removed)return null;var o=I[t]||N;return Object(C.g)(o,{key:String([a,r]),targetId:a,handleScroll:l,index:r},n)}))),Boolean(c)&&Object(C.g)(T,{isFold:!0}))):r?Object(C.g)(u.Flex,{flexDirection:"column",alignItems:"center",mb:"18px"},Object(C.g)(u.Box,{size:"160px",mb:"10px"},Object(C.g)(u.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})),Object(C.g)(u.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center"},"在内容中设置标题将会在此处同步展示")):null}},1467:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return Z})),n.d(t,"g",(function(){return W})),n.d(t,"e",(function(){return ee})),n.d(t,"h",(function(){return ce})),n.d(t,"b",(function(){return he}));var a,r=n(1243),o=n(1477),i=Object(r.a)({idAttr:"data-ad-id",selector:'a[data-ad-id]:not([data-ad-id^="fee_"])',targetClassName:"RichText-ADLinkCardContainer",component:o.a}),c=n(0),s=n.n(c),l=n(71),u=n.n(l),d=n(1880),f=n(1240),p=n(9),m=Object(r.a)({cardDataFilter:function(e,t){var n=t.linkCards,a=Object(f.b)(n),r=Array.from(e.querySelectorAll("[data-draft-type=ad-link-card]:not([data-ad-id])")),o=r.reduce((function(e,t){var n=t.dataset.adUrl;return a[n]||e.push(n),e}),[]);return r.map((function(e,t){var n=document.createElement("div");n.className="RichText-ADLinkCardContainer",e.parentNode.replaceChild(n,e);var r=e.dataset.adUrl;return{data:{url:r,data:a[r],fetchUrls:o,cardIndex:t},target:n}}))},getCardProps:function(e){return e},component:function(e){var t=u()(e,["linkCards","id"]);return Object(p.g)(d.a,t)}}),h=Object(r.a)({idAttr:"data-ad-id",selector:'a[data-ad-id^="fee_"]',targetClassName:"RichText-ADLinkCardContainer",component:o.b}),v=n(24),g=n.n(v),b=n(30),C=n.n(b),y=n(49),O=n.n(y),j=n(23),k=n(51),E=n(5),w=n(1253),x=n(290),N=n.n(x),A=n(12),L=n.n(A),S=n(220),T=n.n(S),I=n(118),R=n(154),P=function(e){var t=e.authorName,n=e.voteupCount;return Object(p.g)(s.a.Fragment,null,T()(a||(a=N()(["","的文章"])),t),n>=100&&" · ".concat(Object(R.cnNiceNumber)(n),"赞同"))};function _(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,o=e.excerptText,i=e.imgUrlSrc,c=e.voteupCount,s=e.commentCount;return Object(p.g)("div",{className:"ArticleLinkCard",ref:t},Object(p.g)("span",{className:"ArticleLinkCard-title"},r),Boolean(o)&&Object(p.g)("div",{className:"ArticleLinkCard-excerpt"},o),i&&Object(p.g)("div",{className:"ArticleLinkCard-imageWrapper"},Object(p.g)("img",{src:Object(I.imgUrl)(i,"540x300"),className:"ArticleLinkCard-image",alt:""})),Object(p.g)("div",{className:"ArticleLinkCard-bottom"},Object(p.g)("span",{className:"ArticleLinkCard-hint"},"".concat(Object(R.cnNiceNumber)(c),"赞同 · ").concat(Object(R.cnNiceNumber)(s),"评论")),n&&Object(p.g)("span",{onClick:a,className:"ArticleLinkCard-hybridLink"},"查看完整文章")),Object(p.g)("div",{className:"ArticleLinkCard-bottomCardGradient"}))}function M(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,o=e.content,i=e.imgUrlSrc,c=e.voteupCount,s=e.authorName,l=e.avatarUrl;return Object(p.g)("div",{className:"ArticleLinkCard AvatarArticleLinkCard",ref:t},Object(p.g)("div",{className:"AvatarArticleLinkCard-info"},Object(p.g)("div",{className:"AvatarArticleLinkCard-hint"},l&&Object(p.g)("img",{className:"AvatarArticleLinkCard-avatar",src:l,alt:""}),Object(p.g)(P,{authorName:s,voteupCount:c})),n&&Object(p.g)("span",{onClick:a,className:"AvatarArticleLinkCard-hybridLink"},"查看全文")),Object(p.g)("span",{className:"ArticleLinkCard-title"},r),Object(p.g)("div",{className:L()("ArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!i})},Object(p.g)("div",{dangerouslySetInnerHTML:{__html:o}})),!i&&Object(p.g)("span",{className:"AvatarArticleLinkCard-more"},"更多内容"),i&&Object(p.g)("img",{className:"AvatarArticleLinkCard-image",src:i,alt:""}))}function z(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,o=e.content,i=e.imgUrlSrc,c=e.voteupCount,s=e.authorName;return Object(p.g)("div",{className:"ArticleLinkCard QuoteArticleLinkCard",ref:t},Object(p.g)("span",{className:"ArticleLinkCard-title"},r),Object(p.g)("div",{className:"QuoteArticleLinkCard-hint"},Object(p.g)(P,{authorName:s,voteupCount:c})),Object(p.g)("div",{className:L()("ArticleLinkCard-content QuoteArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!i})},Object(p.g)("div",{dangerouslySetInnerHTML:{__html:o}})),!i&&n&&Object(p.g)("div",{onClick:a,className:"QuoteArticleLinkCard-hybridLink"},"查看全文"),i&&Object(p.g)("img",{className:"QuoteArticleLinkCard-image",src:i,alt:""}))}function D(e){var t=e.article,n=t.title,a=t.excerpt,r=t.content,o=t.imageUrl,i=t.voteupCount,s=t.commentCount,l=t.author,u=void 0===l?{}:l,d=e.styleAbParam,f=e.cardRef,m=e.useOpenArticleButton,h=e.handleClickLink,v=Object(c.useMemo)((function(){var e=document.createElement("div");return e.innerHTML=a,e.textContent}),[a]),g=u.name,b=u.avatarUrl;return"1"===d?Object(p.g)(M,{cardRef:f,useOpenArticleButton:m,handleClickLink:h,title:n,content:r,imgUrlSrc:o,voteupCount:i,authorName:g,avatarUrl:b}):"2"===d?Object(p.g)(z,{cardRef:f,useOpenArticleButton:m,handleClickLink:h,title:n,content:r,imgUrlSrc:o,voteupCount:i,authorName:g}):Object(p.g)(_,{cardRef:f,useOpenArticleButton:m,handleClickLink:h,title:n,excerptText:v,imgUrlSrc:o,voteupCount:i,commentCount:s})}var B=["id","useOpenArticleButton","enableZa","styleAbParam"];function U(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var V=function(e){var t=e.article.id,n=e.article,a=e.useOpenArticleButton,r=e.enableZa,o=e.styleAbParam,i=Object(c.useRef)(null);Object(c.useEffect)((function(){r&&(j.a.setModule(i.current,{module:"Content"},{card:{content:{type:"Post",token:String(t)}}}),j.a.trackCardShow(i.current,{id:8589,element:"Card"}))}),[r,t]);var s="https://zhuanlan.zhihu.com/p/".concat(t),l=Object(c.useCallback)((function(){r&&j.a.trackEvent(i.current,{id:8590,action:"OpenUrl",element:"Card"})}),[r]);return Object(p.g)(k.c,{as:"a",shouldTrackShow:!0,shouldTrackClick:!0,zaBlock:"ZTextArticleLinkCard",zaAction:"OpenUrl",zaType:"Button",zaEventType:"Click",extra:{link:{url:s}},href:s,"data-za-not-track-link":!0,onClick:l,rel:"noopener noreferrer",target:"_blank"},Object(p.g)(D,{styleAbParam:o,cardRef:i,useOpenArticleButton:a,linkUrl:s,handleClickLink:l,article:n}))},F=function(e){var t=e.id,n=e.useOpenArticleButton,a=e.enableZa,r=e.styleAbParam,o=C()(e,B),i=Object(c.useState)(null),s=U(g.a,i,2),l=s[0],u=s[1],d=Object(c.useState)(null),f=U(g.a,d,2),m=f[0],h=f[1],v=r&&["1","2"].includes(r)?"1":"0";return Object(c.useEffect)((function(){var e="https://www.zhihu.com/api/v4/articles/".concat(t,"?is_article_card=").concat(v);Object(w.a)(e).then((function(e){return Object(E.camelizeKeys)(e)})).then((function(e){e.error?h(e.error.message):u(e)})).catch((function(e){h(e.message||"未知错误")}))}),[t,v]),m?Object(p.g)("div",{className:"ArticleLinkCard-error"},m):l?Object(p.g)(V,O()({article:l,useOpenArticleButton:n,enableZa:a,styleAbParam:r},o)):Object(p.g)("div",{className:"ArticleLinkCard-loading"},"加载中...")},H=(Object(r.a)({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type"),r="normal"===e.getAttribute("data-size");if(!n||!a||!r)return null;var o=null===(t=n.match(/https:\/\/zhuanlan.zhihu.com\/p\/(\d+)$/))||void 0===t?void 0:t[1];if(o){var i=document.createElement("div");return i.className="RichText-ArticleLinkCardContainer",e.parentNode.replaceChild(i,e),{data:{id:o},target:i}}return null})).filter(Boolean)},component:F}),n(1287)),Z=Object(r.a)({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:H.a}),G=n(1642),W=Object(r.a)({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]:not([data-is-ecommerce])")).map((function(e){var t,n=(t=e.attributes,Array.from(t).reduce((function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e}),{})),a=document.createElement("div");return a.className="RichText-LinkCardContainer",e.parentNode.replaceChild(a,e),{data:n,target:a}}))},getCardProps:function(e){return e.href&&e.href.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)?e.zaBlock="ZTextZVideoLinkCard":e.zaBlock="ZTextLinkCard",e},component:G.a}),K=n(26),q=n.n(K),Y=n(945),J=n(1377),Q=n(949),X=n.n(Q);function $(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var ee=Object(r.a)({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,a=Object(c.useRef)(!1),r=Object(c.useState)({}),o=$(g.a,r,2),i=o[0],s=o[1],l=Object(c.useState)(!1),u=$(g.a,l,2),d=u[0],f=u[1];return Object(c.useEffect)((function(){Object(w.a)("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then((function(e){var n=Object(E.camelizeKeys)(e)||{},a=n.title,r=n.desc,o=n.cover,i=n.button,c=n.resourceId,l=n.resourceName,u=n.price,d=n.error,p={};!X()(e)&&X()(d)&&(p=q()({},t,{id:t,skuId:c,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:a,subtitle:r,price:{price:u},goodsImg:{imgUrl:o,imgShape:"rectangle",cornerText:l},goodsUrl:{url:null==i?void 0:i.url},btnText:"去查看"}})),s(p),f(!0)})).catch((function(){f(!0)}))}),[t]),d&&!X()(i)?Object(p.g)(J.a,null,Object(p.g)(H.a,{id:t,ref:function(e){e&&!e.classList.contains("GoodsRecommendCard-placeholder")&&!1===a.current&&(j.a.setModule(e,{module:"Content"},{card:{content:{id:t}}}),Object(Y.onViewedOnce)(e,(function(){j.a.trackCardShow(e,{id:7203})})),a.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:i,onClick:function(e){j.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}})):null}}),te=n(99);function ne(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var ae=function(e){return{elementLocation:{type:"Button",content:{type:e.dataset.zaContentType}}}},re=function(e){return{attachedInfoBytes:e.dataset.zaAttachInfo}},oe=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a.LinkCard.old[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static[data-draft-type="link-card"]:not([data-za-content-type="Zvideo"])',zaBlock:"ZTextLinkCard",viewInfoBuilder:ae,extraInfoBuilder:re},{selector:'a.LinkCard.new.static[data-draft-type="link-card"][data-za-content-type="Zvideo"]',zaBlock:"ZTextZVideoLinkCard",viewInfoBuilder:ae,extraInfoBuilder:re},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],ie=function(e){var t,n,a=e.element,r=e.config,o=null===(t=r.viewInfoBuilder)||void 0===t?void 0:t.call(r,a,r),i=Object.assign({elementLocation:{type:"Button"},block:r.zaBlock},o),s=Object.assign({action:"OpenUrl",elementLocation:{type:"Button"},block:r.zaBlock,eventType:"Click"},o),l=Object.assign({link:{url:a.href}},null===(n=r.extraInfoBuilder)||void 0===n?void 0:n.call(r,a,r)),u=Object(k.l)().trackEvent,d=Object(k.k)(i,l),f=Object(te.a)((function(e){u(s,l),"ZTextLinkCard"===r.zaBlock&&a.dataset.isEcommerce&&e.preventDefault()}));return Object(c.useEffect)((function(){return a.addEventListener("click",f),function(){a.removeEventListener("click",f)}}),[]),Object(c.useEffect)((function(){return d(a),function(){return d(null)}}),[]),null},ce=function(e){var t=e.root,n=Object(c.useState)([]),a=ne(g.a,n,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){if(t){var e=[];oe.forEach((function(n){var a=n.selector;Array.from(t.querySelectorAll(a)).forEach((function(t){e.push({el:t,config:n})}))})),o(e)}}),[t]),Object(p.g)(s.a.Fragment,null,r.map((function(e,t){var n=e.el,a=e.config;return Object(p.g)(ie,{key:t,element:n,config:a})})))},se=n(1652),le=(Object(r.a)({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type");if(!n||!a)return null;var r=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(r){var o=document.createElement("div");return o.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(o,e),{data:{id:r},target:o}}return null})).filter(Boolean)},component:se.a}),n(50)),ue=n(58),de=n(1395);function fe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var pe={name:"1wtde8n",styles:"font-size:12px;overflow:hidden;"},me=function(e){var t=e.contentHTML,n=Object(c.useState)(!0),a=fe(g.a,n,2),r=a[0],o=a[1],i=Object(te.a)((function(){o(!r)}));return Object(p.g)(k.b,{block:"ZTextCatalog"},Object(p.g)(k.f,{as:ue.Flex,zaType:"Block",className:"Catalog-content",flexDirection:"column",css:pe,style:{height:r?"84px":"auto"},dangerouslySetInnerHTML:{__html:t}}),Object(p.g)(k.a,{as:de.a,zaType:"Button",zaAction:r?"Expand":"Collapse",isFold:r,onClick:i}))},he=function(e){var t=e.root,n=Object(c.useState)(null),a=fe(g.a,n,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){if(t){var e=t.querySelector(".Catalog-wrapper");if(e&&e.querySelector(".bottom-shadow")){var n=e.querySelector(".Catalog-content").innerHTML,a=document.createElement("div");a.className="Catalog-wrapper",e.parentNode.replaceChild(a,e),o(Object(le.createPortal)(Object(p.g)(me,{contentHTML:n}),a))}}}),[t]),r}},1477:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));n(0);var a=n(3),r=n.n(a),o=n(886),i=n(9),c=function(e){var t=e.id,a=e.isEditor,r=Object(o.a)((function(){return n.e(81).then(n.bind(null,3036))}),t);return r?Object(i.g)(r,{id:t,isEditor:a}):null},s=function(e){var t=e.id,a=e.parentType,r=e.parentId,c=e.suger,s=e.data,l=e.isEditor,u=void 0!==l&&l,d=Object(o.a)((function(){return n.e(50).then(n.bind(null,3047))}),t);return d?Object(i.g)(d,{id:t,parentType:a,urlToken:r,suger:c,data:s,isEditor:u}):null};function l(e){var t=e.id.startsWith("fee_")?c:s;return Object(i.g)(t,e)}l.propTypes={id:r.a.string.isRequired,parentType:r.a.oneOf(["answer","article"]),parentId:r.a.string,suger:r.a.object,data:r.a.object,isEditor:r.a.bool};var u=l},1488:function(e,t,n){"use strict";n.d(t,"b",(function(){return p}));var a=n(30),r=n.n(a),o=n(49),i=n.n(o),c=(n(0),n(71)),s=n.n(c),l=n(12),u=n.n(l),d=(n(1726),n(9)),f=["target","url","image","imageWidth","imageHeight","component","size","className"],p=function(e){if(!e)return!1;return e.includes("BIZ=ECOMMERCE")||e.includes(encodeURIComponent("BIZ=ECOMMERCE"))},m=function(e){return Object(d.g)("div",e,Object(d.g)("span",null),Object(d.g)("span",null))},h=function(e){var t=s()(e,["entityType","entityData","newLinkCard"]),n=t.target,a=t.url,o=t.image,c=t.imageWidth,l=t.imageHeight,p=t.component,h=t.size,v=t.className,g=r()(t,f);return Object(d.g)(p,i()({target:n,href:a,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1","data-image":o},c&&{"data-image-width":c},l&&{"data-image-height":l},h&&{"data-size":h},{className:u()("LinkCard",v)},g),Object(d.g)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard"},Object(d.g)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper"},Object(d.g)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})),Object(d.g)(m,{className:"LinkCard-ecommerceLoadingCardLoadingbar"})))};h.defaultProps={component:"a",target:"_blank"};t.a=h},1519:function(e,t,n){"use strict";e.exports=n(2146)},1520:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ForbidFill24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M16.346 18.113a7.5 7.5 0 01-10.46-10.46l10.46 10.46zm1.767-1.767L7.654 5.886a7.5 7.5 0 0110.46 10.46zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function s(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Ban"+(e.className?" "+e.className:"")}}))}},1521:function(e,t,n){"use strict";var a=n(30),r=n.n(a),o=n(49),i=n.n(o),c=n(0),s=n.n(c),l=n(3),u=n.n(l),d=n(12),f=n.n(d),p=n(71),m=n.n(p),h=n(118),v=n(1488),g=(n(1727),n(9)),b=["text","target","url","image","imageWidth","imageHeight","component","className","size","children"],C=s.a.forwardRef((function(e,t){if(!e.notCommerce&&Object(v.b)(e.url))return Object(g.g)(v.a,i()({},e,{className:f()("old",e.className)}));var n=m()(e,["entityType","entityData","notCommerce"]),a=n.text,o=n.target,c=n.url,l=n.image,u=n.imageWidth,d=n.imageHeight,p=n.component,C=n.className,y=n.size,O=n.children,j=r()(n,b),k=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"}(u,d),E=Object(h.imgUrl)(l,k);return Object(g.g)(p,i()({ref:t,target:o,href:c,"data-draft-node":"block","data-draft-type":"link-card"},E&&{"data-image":E},u&&{"data-image-width":u},d&&{"data-image-height":d},y&&{"data-size":y},a!==c&&a&&{"data-text":a},{className:f()("LinkCard new",C)},j),O||Object(g.g)(s.a.Fragment,null,Object(g.g)("span",{className:"LinkCard-contents"},Object(g.g)("span",{className:"LinkCard-title loading","data-text":!0}),Object(g.g)("span",{className:"LinkCard-desc loading"})),Object(g.g)("span",{className:"LinkCard-image LinkCard-image--default"})))}));C.propTypes={component:u.a.oneOfType([u.a.string,u.a.func]),target:u.a.string,url:u.a.string.isRequired,text:u.a.string,image:u.a.string,imageWidth:u.a.oneOfType([u.a.string,u.a.number]),imageHeight:u.a.oneOfType([u.a.string,u.a.number])},C.defaultProps={component:"a",target:"_blank"},t.a=C},1522:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--PlayFill24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M18.2 10.96a1.2 1.2 0 010 2.08L6.8 19.62A1.2 1.2 0 015 18.58V5.419A1.2 1.2 0 016.8 4.38l11.4 6.582z"}));var t}function s(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Play"+(e.className?" "+e.className:"")}}))}},1523:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(94),r=n.n(a),o=n(47),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.target,a=void 0===n?"_blank":n,i=t.hybridOpenAction,c=void 0===i?"base/openURL":i,s=t.params,l=void 0===s?{}:s;if("undefined"!=typeof window){var u=r()(navigator.userAgent),d=u||{},f=d.Zhihu,p=d.ZhihuHybrid,m=d.Safari,h=d.Mobile;f||p?o.a.supportsAction(c).then((function(t){t?Object(o.a)(c).dispatch(Object.assign({url:e},l)).catch((function(e){(null==e?void 0:e.message)&&Object(o.a)("ui/showToast").dispatch({text:null==e?void 0:e.message})})):"base/openURL"===c?m?window.location.href=e:window.open(e,a):Object(o.a)("base/openURL").dispatch({url:e})})):h||m?window.location.href=e:window.open(e,a)}}},1524:function(e,t,n){"use strict";function a(e){var t=String(e);return t.length<2&&(t="0"+t),t}t.a=function(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(a(n),":").concat(a(t))}},1629:function(e,t,n){"use strict";n.r(t),n.d(t,"PLUGIN_CARD_TYPE",(function(){return B})),n.d(t,"PLUGIN_DISPLAY_MODE",(function(){return ct})),n.d(t,"PLUGIN_CARD_STYLE",(function(){return rt})),n.d(t,"ECOMMERCE_SOURCE_FROM",(function(){return Y})),n.d(t,"default",(function(){return ut}));var a=n(49),r=n.n(a),o=n(22),i=n.n(o),c=n(28),s=n.n(c),l=n(29),u=n.n(l),d=n(18),f=n.n(d),p=n(25),m=n.n(p),h=n(0),v=n.n(h),g=n(78),b=n.n(g),C=n(26),y=n.n(C),O=n(45),j=n(39),k=n.n(j),E=n(103),w=n.n(E),x=n(69);function N(e){var t=e.url,n=e.downloadUrl,a=e.cardType,r=e.os,o=e.parentType,i=e.urlToken,c=e.zhiContentInfo,s=(c=void 0===c?{}:c).cid,l=t.replace("__CREATIVEID__",Object(O.h)()||s);return"download"===a&&"ios"===r&&n?n:"message"===a?Object(O.a)(l,{source_type:o,source_id:i}):l}function A(e,t){if(e){var n=t?e:Object(x.removeBIZParameter)(e),a=document.createElement("a");a.href=n,"ios"===Object(O.i)().os&&t||(a.target="_blank"),a.rel="noopener noreferrer",a.click()}}function L(e){return S.apply(this,arguments)}function S(){return(S=w()(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(t){var n=null,a=document.createElement("iframe");a.src=t,a.style.display="none",document.body.appendChild(a),n=setTimeout((function(){clearTimeout(n),e({status:!1})}),2e3),document.addEventListener("visibilitychange",(function(){(document.hidden||document.webkitHidden)&&(clearTimeout(n),e({status:!0}))}))}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){return fetch("https://www.zhihu.com/api/v4/commercial/wechat/miniapp/scheme?url=".concat(e),{method:"GET"}).then((function(e){return e.status>=400?null:e.json()})).catch((function(e){console.error(e)}))},I=n(24),R=n.n(I),P=n(50),_=n.n(P);function M(e){return v.a.createElement("svg",r()({xmlns:"http://www.w3.org/2000/svg",width:"83",height:"83",viewBox:"0 0 83 83"},e),v.a.createElement("g",{fill:"none",fillRule:"evenodd"},v.a.createElement("circle",{cx:"41.5",cy:"41.5",r:"41.5",fill:"#0084FF"}),v.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M22.4748737,38.5176187 C21.1080387,37.1507837 18.8919613,37.1507837 17.5251263,38.5176187 C16.1582912,39.8844537 16.1582912,42.1005311 17.5251263,43.4673662 L32.5251263,58.4673662 C33.8919613,59.8342012 36.1080387,59.8342012 37.4748737,58.4673662 L65.4673662,30.4748737 C66.8342012,29.1080387 66.8342012,26.8919613 65.4673662,25.5251263 C64.1005311,24.1582912 61.8844537,24.1582912 60.5176187,25.5251263 L35,51.042745 L22.4748737,38.5176187 Z"})))}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onCancel,n=e.data,a=void 0===n?{}:n,r=Object(h.useState)("open"),o=R()(r,2),i=o[0],c=o[1];function s(){var e=a.wechat,n=a.shareUrl,r=e;"wechat_share"!==a.cardType||e||(r=n),Object(O.d)(r);try{var o,i=document.createElement("iframe");i.src="weixin://",i.style.display="none",document.body.appendChild(i),o=setTimeout((function(){c("copy")}),2e3),document.addEventListener("visibilitychange",(function(){(document.hidden||document.webkitHidden)&&(clearTimeout(o),t())}))}catch(e){console.log(e)}}var l=function(){var e=a.cardType,n=void 0===e?"":e,r=a.wechat,o=!0,c="微信号已复制";return"wechat_share"===n&&((void 0===r?"":r)?c="公众号已复制":(o=!1,c="公众号链接已复制")),"open"===i?v.a.createElement(v.a.Fragment,null,v.a.createElement(M,{style:{height:"40px"}}),v.a.createElement("div",{className:"WechatModal-copy"},c),v.a.createElement("div",{className:"WechatModal-des"},"立即打开微信分享好友关注"),v.a.createElement("div",{className:"WechatModal-buttons"},v.a.createElement("div",{className:"WechatModal-button",onClick:t},"取消"),v.a.createElement("div",{className:"WechatModal-button active",onClick:s},"打开"))):v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"WechatModal-copy"},c),v.a.createElement("div",null,"也可按照以下步骤完成关注"),v.a.createElement("div",{className:"WechatModal-ol"},v.a.createElement("div",null,"1、打开微信",o?"":",在任意会话窗口复制链接"),v.a.createElement("div",null,"2、添加关注")),v.a.createElement("div",{className:"WechatModal-button close",onClick:t},"关闭"))},u=function(){var e=a.qrCode;return v.a.createElement("div",{onClick:t,className:"WechatModal-imgContent"},v.a.createElement("img",{src:e,className:""}),v.a.createElement("span",null,"请长按识别或微信扫一扫预览"))};function d(){var e=a.cardType;switch(void 0===e?"":e){case"wechat":case"wechat_share":return l();case"wechat_service":return u();default:return null}}return v.a.createElement("div",{className:"WechatModal"},v.a.createElement("div",{className:"WechatModal-mask"}),v.a.createElement("div",{className:"WechatModal-content"},v.a.createElement("div",{className:"WechatModal-text"},d())))}z.show=function(e){var t=document.createElement("div");document.body.appendChild(t);_.a.render(v.a.createElement(z,{onCancel:function(){setTimeout((function(){_.a.unmountComponentAtNode(t),document.body.removeChild(t)}))},data:e}),t)};var D={wechat:function(e){var t=e.packageName,n=e.isZmHandle,a=e.wechat,r=e.conversion;if(n)return z.show(e),Promise.resolve({status:!0});return U({type:x.HYBRID_ACTION_EVENT.adOpenWechat,payload:{deeplink:"weixin://",packageName:t,wechatId:a,conversion:r}})},wechat_share:function(e){return V.apply(this,arguments)},wechat_minipro:F,wechat_service:function(e){var t=e.appid,n=void 0===t?"wx1abcffe23814c5ea":t,a=e.scene,r=void 0===a?"0":a,o=e.templateId,i=void 0===o?"lpmljOmEI0FyLCcDosc5cxArV1LHDYKIqX6Mk4RbAmI":o,c=e.id,s=e.si,l=e.url,u=e.conversion;if(e.isZmHandle)return z.show(e),Promise.resolve({status:!0});return U({type:x.HYBRID_ACTION_EVENT.adWxPushOnceMsgAuth,payload:{appid:n,scene:r,template_id:i,pluginId:c,conversion:u,si:s,url:l}})},message:function(e){var t=e.parentType,n=e.urlToken,a=e.hashId;return U({type:x.HYBRID_ACTION_EVENT.baseOpenInbox,payload:{inbox_id:a,initial_message:"",auto_focus:!0,title:"",source_type:t,source_id:n}})},download:function(e){return F(e).then((function(t){return t.status?t:function(e){var t=e.downloadUrl,n=e.downloadConversion,a=void 0===n?[]:n,r=e.productName,o=e.picUrl,i=e.isZmHandle;if(!t)return Promise.resolve({status:!1});if(i&&"android"===Object(O.i)().os)return A(t),Promise.resolve({status:!0});if("ios"===Object(O.i)().os)return Z({url:N(e)});return U({type:x.HYBRID_ACTION_EVENT.adDownloadApk,payload:{adjson:JSON.stringify({ads:[{conversion_tracks:a,creatives:[{asset:{brand_name:r,app_promotion_url:t,brand_logo:o}}]}]})}})}(e)}))},normal:F,conversion:function(e){return U({type:x.HYBRID_ACTION_EVENT.adOpenForm,payload:e})},telephone:function(e){var t=e.phoneNumber;return new Promise((function(e){try{window.location.href="tel://".concat(t),e({status:!0})}catch(t){e({status:!0})}}))},baseUrl:function(e){var t=e.url;return U({type:x.HYBRID_ACTION_EVENT.baseOpenURL,payload:{url:t}})}},B=Object.keys(D).reduce((function(e,t){return e[t]=t,e}),{});function U(){return x.dispatch.apply(x,arguments).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b()({status:!0},e)})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b()({status:!1},e)}))}function V(){return(V=w()(k.a.mark((function e(t){var n,a,r,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.shareUrl,a=t.shareDesc,r=t.picUrl,o=t.conversion,!t.isZmHandle){e.next=4;break}return z.show(t),e.abrupt("return",Promise.resolve({status:!0}));case 4:return e.abrupt("return",U({type:x.HYBRID_ACTION_EVENT.openWechatShare,payload:{deeplink:"weixin://",conversion:o,shareUrl:n,shareDesc:a,picUrl:r}}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return H.apply(this,arguments)}function H(){return(H=w()(k.a.mark((function e(t){var n,a,r,o,i,c,s,l,u,d,f,p;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.deeplinkUrl,a=t.zhiContentInfo,r=void 0===a?{}:a,o=t.isZmHandle,n){e.next=3;break}return e.abrupt("return",Promise.resolve({status:!1}));case 3:if(!o){e.next=33;break}if(!(n.indexOf("zhihu2wechat://gotowechat?id=gh_bc33767b4df6")>-1)){e.next=29;break}if(!((i=decodeURIComponent(n).split("url="))[1].indexOf("https://mp.weixin.qq.com/")>-1)){e.next=23;break}if(!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))){e.next=10;break}return e.abrupt("return",Promise.resolve({status:!1}));case 10:return e.next=12,T(i[1]);case 12:if(!(c=e.sent)||!c.scheme){e.next=20;break}return e.next=16,L(c.scheme);case 16:return s=e.sent,e.abrupt("return",s);case 20:return e.abrupt("return",Promise.resolve({status:!1}));case 21:e.next=27;break;case 23:return e.next=25,L(n);case 25:return l=e.sent,e.abrupt("return",l);case 27:e.next=33;break;case 29:return e.next=31,L(n);case 31:return u=e.sent,e.abrupt("return",Promise.resolve({status:u.status}));case 33:return d=Object(O.i)(),f=d.platform,p=Object(O.o)(n,b()({},r,{os:f,ts:parseInt(Date.now()/1e3)})),e.abrupt("return",U({type:x.HYBRID_ACTION_EVENT.adECommerceOpen,payload:b()({},t,{deeplinkUrl:p})}));case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){var t=e.url,n=e.adjson;if(e.isZmHandle)return Promise.resolve({status:!1});var a={adjson:JSON.stringify({ads:[{creatives:[{asset:{landing_url:t}}]}]})};return U({type:x.HYBRID_ACTION_EVENT.commonAd,payload:n?e:a})}function G(){return Promise.resolve({status:!1})}var W=function e(){i()(this,e)};W.execute=function(){var e=w()(k.a.mark((function e(t){var n,a,r,o,i,c,s,l,u,d,f,p,m,h,v,g,C,y,j,E,w,x;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isCanvas,a=t.cardType,r=t.isZmHandle,o=void 0!==r&&r,i=t.zhiContentInfo,c=t.url,s=t.adjson,l=Object(O.i)(),u=l.os,d=l.platform,f=parseInt(Date.now()/1e3),p=b()({},t,{url:Object(O.o)(c,b()({},i,{os:d,ts:f}))}),s){m="";try{m=JSON.parse(s),(h=m.ads)&&h.length&&(m.ads=h.map((function(e){var t=e.creatives;return t&&t.length>0&&(t=t.map((function(e){var t=e.asset;if(null==t?void 0:t.landing_url){var n=t.landing_url;return b()({},e,{asset:b()({},t,{landing_url:Object(O.o)(n,b()({},i,{os:d,ts:f}))})})}return e}))),b()({},e,{creatives:t})}))),p.adjson=JSON.stringify(m)}catch(e){console.error("adjsonReplaceError",e)}}if(v=N(p),"pc"!==u){e.next=9;break}return A(v),e.abrupt("return");case 9:g=0,C=[{func:D[n?"conversion":a]},{func:Z}];case 11:if(!(g<C.length)){e.next=22;break}return y=C[g],j=y.func,E=void 0===j?G:j,w=y.payload,x=void 0===w?p:w,e.next=16,E(x);case 16:if(!e.sent.status){e.next=19;break}return e.abrupt("return");case 19:g++,e.next=11;break;case 22:A(v,o);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var K=n(1104),q=y()({},"download","download"),Y={CONTENT:"CONTENT",CANVAS:"CANVAS"},J=function(){function e(t){var n=this;i()(this,e),this._getMacroOptions=function(){var e=n.getRenderData(),t=e.xSuger,a=e.cardType,r=e.urlToken,o=void 0===r?"":r,i=e.aPageId,c=void 0===i?"":i,s=e.psi,l=void 0===s?"":s,u=e.parseUA,d=Object(O.i)(u).os;return{xSuger:t,cardType:a,aToken:o,aPageId:c,psi:l,et:"".concat(d,"_").concat(q[a]||"commodity")}},this.getContentSign=function(){x.dispatch({type:x.HYBRID_ACTION_EVENT.adGetContentSign}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,a=(t=void 0===t?{}:t).plugcb;if(a&&a.length){var r=Object(O.u)(a),o=r.cid,i=r.adid,c=r.zoneid,s=r.sid,l=r.campaignid;n._mergeRenderData({zhiContentInfo:{cid:o,adid:i,zoneid:c,sid:s,campaignid:l}})}}))},this._mergeRenderData=function(e){n.renderData=b()({},n.renderData,e)},this.setPosition=function(e){n.renderData=b()({},n.renderData,{position:e})},this.renderData={},this._calculateRenderData(t)}return s()(e,[{key:"setPropsData",value:function(e){this._calculateRenderData(e)}},{key:"preload",value:function(){if(!this._stopTracking()){var e=this.renderData,t=e.isCanvas,n=e.adjson;t&&x.dispatch({type:x.HYBRID_ACTION_EVENT.preloadAd,payload:{adjson:n}})}}},{key:"getConversionEv",value:function(e){var t=e.cardType,n=e.deeplinkUrl;return["normal","download"].includes(t)&&n||["wechat_minipro","wechat_service"].includes(t)?t:""}},{key:"handleClick",value:function(){var e,t,n,a,r=this.renderData,o=r.data,i=r.parentType,c=r.urlToken,s=r.os,l=r.downloadUrl,u=r.landingUrl,d=r.productName,f=r.deeplinkUrl,p=r.cardType,m=r.isZmHandle,h=r.zhiContentInfo,v=r.position;if(!this._stopTracking()){var g=b()({},x.getTrackMacroOptions(),this._getMacroOptions()),C=Object(O.w)({conversion:null!==(e=null===(t=this.renderData)||void 0===t?void 0:t.conversion)&&void 0!==e?e:[]},b()({},g,{cardType:this.getConversionEv({cardType:p,deeplinkUrl:f}),position:v})).conversion,y=Object(O.w)({downloadConversion:null!==(n=null===(a=this.renderData)||void 0===a?void 0:a.conversion)&&void 0!==n?n:[]},b()({},g,{cardType:""})).downloadConversion;try{W.execute(b()({},o,{token:c,pagetype:i,urlToken:c,parentType:i,os:s,downloadUrl:l,landingUrl:u,productName:d,conversion:C,downloadConversion:y,isZmHandle:m,zhiContentInfo:h}))}catch(e){console.error(e.message)}}}},{key:"getRenderData",value:function(){return this.renderData}},{key:"getTrackInfo",value:function(){if(this._stopTracking())return{};var e=this.getRenderData(),t=e.trackUrl,n=e.ssid,a=e.id,r=n?"ssid=".concat(n):"";function o(e){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(r)}return{zaClick:{id:5641},zaView:{id:5642},zaEnvBlock:"advertPluginCard",views:Object(O.f)(t,"view",[]).map(o),clicks:Object(O.f)(t,"click",[]).map(o),getMacroOptions:this._getMacroOptions,isReplacePosition:!0,setPosition:this.setPosition,id:a}}},{key:"_stopTracking",value:function(){return this.renderData.cmpStatus===K.a.ONLY_SHOW}},{key:"_calculateRenderData",value:function(e){var t=e.data,n=e.suger,a=e.urlToken,r=e.aPageId,o=void 0===r?"":r,i=e.parentType,c=e.cmpStatus,s=e.className,l=e.isZmHandle,u=e.pluginSourceFrom,d=void 0===u?Y.CONTENT:u,f=e.ssid,p=e.psi,m=e.parseUA,h=e.cardIndex,v=t.url,g=t.price,b=t.picUrl,C=t.cardType,y=t.description,j=t.interactionLaunch,k=t.logo,E=t.trackUrl,w=t.productName,N=t.isCanvas,A=t.adjson,L=t.androidUrl,S=t.iosAppStoreUrl,T=t.validStatus,I=t.webExperiment,R=t.labelName,P=t.phoneNumber,_=t.pluginStyle,M=t.conversion,z=t.deeplinkUrl,D=t.appInfo,B=t.channelSource,U=t.id,V=Object(O.i)(m).os,F={ios:S,android:L}[V]||"";this._mergeRenderData({deeplinkUrl:z,conversion:M,showCartIcon:"去购买"===j,isHidden:N&&!A||-1===T,originData:e,showPrice:!!g,price:+parseFloat((g/100).toPrecision(12)),price2Decimal:x.formatPrice(g),picUrl:b,phoneNumber:P,cardType:C,description:y,interactionLaunch:j||"去购买",logo:k,trackUrl:E,productName:"".concat(w," 的推荐"),productNameNew:w,xSuger:n,aPageId:o,data:t,urlToken:a,parentType:i,isCanvas:N,adjson:A,downloadUrl:F,landingUrl:v,os:V,cmpStatus:c,pluginStyle:_,webExperiment:I,className:s||"",labelName:R,isZmHandle:l,pluginSourceFrom:d,appInfo:D,channelSource:B,ssid:f,id:U,psi:p,parseUA:m,cardIndex:h})}}]),e}(),Q=n(12),X=n.n(Q),$=n(1055),ee=n(1520);var te={invalid:function(e){var t=e.text;return v.a.createElement(v.a.Fragment,null,v.a.createElement("span",{className:"zh-advert-pligin-invalid-replace-sign"},v.a.createElement(ee.a,{width:17}),t),v.a.createElement("span",{className:"zh-advert-pligin-invalid-replace-placeholder"}," "))},audit:function(e){var t=e.text;return v.a.createElement(v.a.Fragment,null,v.a.createElement("span",{className:"zh-advert-plugin-audit-replace-sign"},v.a.createElement(ee.a,{width:17}),t),v.a.createElement("span",{className:"zh-advert-plugin-audit-replace-placeholder"}," "))}},ne=function(e){function t(){return i()(this,t),u()(this,f()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.signData,a=n.text,r=n.type,o=te[r];return o?v.a.createElement(o,{text:a}):t}}]),t}(h.Component);function ae(){return v.a.createElement(ee.a,{width:17,style:{flexShrink:0}})}ne.defaultProps={signData:{}};var re=ne,oe=n(1012),ie=n(1076),ce=function(e){var t=e.align,n=void 0===t?"center":t,a=e.data,r=void 0===a?{}:a,o=e.parseUA,i=r.cardType;return i&&["message"].includes(i)||Object(O.j)(o)?"":v.a.createElement(ie.a,{align:n})},se="ecommerce-ad",le=function(e){var t=e.data,n=t.picUrl,a=t.logo,r=t.productName,o=t.description,i=t.price,c=t.interactionLaunch,s=t.showCartIcon,l=t.showPrice,u=t.className,d=t.data,f=t.parseUA,p=e.onSetRef,m=e.onClick;return v.a.createElement("div",{className:"".concat(se,"-container ").concat(u)},v.a.createElement("div",{className:se,ref:p,onClick:m,"data-ad-type":"ecommerce-ad-card"},v.a.createElement("div",{className:"".concat(se,"-img"),style:{backgroundImage:"url(".concat(n,")")}}),v.a.createElement("div",{className:X()("".concat(se,"-main"),{"ecommerce-ad-main-play":l})},v.a.createElement("div",{className:"".concat(se,"-main-content")},v.a.createElement("header",{className:X()("".concat(se,"-main-content-title"),{"ecommerce-ad-main-content-title-play":l})},v.a.createElement(oe.a,{alt:"",className:"".concat(se,"-main-content-title-logo"),src:a,align:"middle"}),r),v.a.createElement("div",{className:X()("".concat(se,"-main-content-des"),{"ecommerce-ad-main-content-des-none":!l})},o),l&&v.a.createElement("div",{className:"".concat(se,"-main-content-price")},"¥",i))),v.a.createElement(re,{signData:K.b(d)},v.a.createElement("div",{className:"".concat(se,"-icon")},s&&v.a.createElement($.a,{className:"".concat(se,"-main-content-purchase")}),c))),v.a.createElement(ce,{align:"center",data:d,parseUA:f}))};function ue(e){return v.a.createElement("svg",r()({width:"24px",height:"24px",viewBox:"0 0 16 28"},e),v.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(-16 -10)"},v.a.createElement("rect",{width:"48",height:"48"}),v.a.createElement("path",{d:"M16.5815824,37.3821495 C17.3536131,38.2059502 18.6110874,38.2059502 19.3860425,37.3821495 L31.4187837,25.4877594 C32.1937388,24.6639587 32.1937388,23.3329674 31.4187837,22.5091668 L19.3860425,10.6178505 C18.6110874,9.79404984 17.3565375,9.79404984 16.5815824,10.6178505 C15.8066273,11.4416511 15.8066273,12.7726424 16.578658,13.5964431 L26.6666667,24 L16.5815824,34.4035569 C15.8066273,35.2273576 15.8066273,36.5583489 16.5815824,37.3821495 Z"})))}var de="ecommerce-ad-arrow",fe=function(e){var t=e.data,n=t.picUrl,a=t.description,r=t.data,o=t.productName,i=t.interactionLaunch,c=t.webExperiment,s=t.parseUA,l=e.onClick,u=e.onSetRef,d=e.isBottomStyle,f=(c||{}).shangyebiaoshi;return v.a.createElement("div",{className:"ecommerce-ad-box"},v.a.createElement("div",{className:X()(de,{"ecommerce-ad-bottom-style":d}),onClick:l,ref:u,"data-ad-type":"ecommerce-ad-card"},v.a.createElement("div",{className:"".concat(de,"-img"),style:{backgroundImage:"url(".concat(n,")")}},f?v.a.createElement("div",{className:"".concat(de,"-sign")},v.a.createElement("div",{className:"".concat(de,"-sign-text")},f)):null),v.a.createElement("div",{className:"".concat(de,"-main")},v.a.createElement("div",{className:"".concat(de,"-main-content")},d&&v.a.createElement("div",{className:"".concat(de,"-main-content-title")},o.slice(0,-3)),v.a.createElement("div",{className:"".concat(de,"-main-content-des")},v.a.createElement("span",null,a))),v.a.createElement(re,{signData:K.b(r)},d?v.a.createElement("div",{className:"".concat(de,"-button")},i):v.a.createElement("div",{className:"".concat(de,"-icon")},v.a.createElement(ue,{width:"8px",height:"14px"}))))),v.a.createElement(ce,{data:r,parseUA:s}))};function pe(e){return v.a.createElement("svg",r()({width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),v.a.createElement("path",{d:"M1.77384 11.3751C0.942575 10.5438 0.942575 9.19607 1.77384 8.36481L3.62091 6.51773C3.82838 6.31027 3.82838 5.9739 3.62091 5.76643C3.41345 5.55897 3.07708 5.55897 2.86961 5.76643L1.02254 7.61351C-0.223658 8.8597 -0.223658 10.8802 1.02254 12.1264C2.26873 13.3726 4.28921 13.3726 5.5354 12.1264L7.38248 10.2793C7.58995 10.0718 7.58995 9.73546 7.38248 9.528C7.17501 9.32053 6.83864 9.32053 6.63118 9.528L4.7841 11.3751C3.95284 12.2063 2.6051 12.2063 1.77384 11.3751ZM5.61858 3.01746C5.41112 3.22493 5.41112 3.5613 5.61858 3.76876C5.82605 3.97623 6.16242 3.97623 6.36988 3.76876L8.25739 1.88126C9.08865 1.05 10.4364 1.05 11.2677 1.88126C12.0989 2.71252 12.0989 4.06026 11.2677 4.89152L9.38015 6.77903C9.17268 6.98649 9.17268 7.32286 9.38015 7.53033C9.58761 7.73779 9.92398 7.73779 10.1314 7.53033L12.019 5.64282C13.2651 4.39663 13.2651 2.37615 12.019 1.12996C10.7728 -0.116235 8.75228 -0.116237 7.50609 1.12996L5.61858 3.01746ZM9.38915 4.51667C9.59661 4.3092 9.59661 3.97284 9.38915 3.76537C9.18168 3.5579 8.84531 3.5579 8.63785 3.76537L3.62917 8.77404C3.42171 8.98151 3.42171 9.31788 3.62917 9.52534C3.83664 9.73281 4.17301 9.73281 4.38048 9.52534L9.38915 4.51667Z",fill:"#175199"}))}function me(e){return e.isFailurePlugin?v.a.createElement(ae,null):v.a.createElement(pe,null)}var he=function(e){var t=e.data,n=t.description,a=t.data,r=t.parseUA,o=e.onClick,i=e.onSetRef,c=K.c(a);return v.a.createElement("p",null,v.a.createElement("p",{className:"ecommerce-ad-link",onClick:o,ref:i,"data-ad-type":"ecommerce-ad-card"},v.a.createElement(me,{isFailurePlugin:c}),n),v.a.createElement(ce,{align:"left",data:a,parseUA:r}))},ve="ecommerce-ad-floatNode";function ge(e){var t=e.imgSrc,n=e.description,a=e.onClick,r=e.onSetRef,o=e.isExpand;return v.a.createElement("div",{className:X()(ve,{"Float-node-fadeIn":!o}),onClick:a,ref:r},v.a.createElement(oe.a,{className:"".concat(ve,"-img"),src:t}),v.a.createElement("span",{className:"".concat(ve,"-desc")},n))}function be(){return v.a.createElement("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.a.createElement("path",{d:"M3.31467 4.5L0.745606 7.0685C0.418131 7.39598 0.418131 7.92692 0.745607 8.25439C1.07308 8.58187 1.60402 8.58187 1.9315 8.25439L5.09295 5.09295C5.25028 4.93572 5.33867 4.72242 5.33867 4.5C5.33867 4.27758 5.25028 4.06428 5.09295 3.90705L1.9315 0.745606C1.60402 0.418131 1.07308 0.418131 0.745607 0.745606C0.418131 1.07308 0.418131 1.60402 0.745606 1.9315L3.31467 4.5Z",fill:"#FF7955"}))}var Ce="ecommerce-ad-commodity",ye="ecommerce-ad-commodity-box",Oe=function(e){var t=e.data,n=t.picUrl,a=t.showPrice,r=t.description,o=t.data,i=t.channelSource,c=t.price2Decimal,s=t.webExperiment,l=t.parseUA,u=e.onClick,d=e.onSetRef,f=(s||{}).shangyebiaoshi;return v.a.createElement("div",{className:X()("ecommerce-ad-box",ye)},v.a.createElement("div",{className:"ecommerce-ad-commodity",onClick:u,ref:d,"data-ad-type":"ecommerce-ad-card"},v.a.createElement("div",{className:"".concat(Ce,"-img"),style:{backgroundImage:"url(".concat(n,")")}},f?v.a.createElement("div",{className:"".concat(Ce,"-sign")},v.a.createElement("div",{className:"".concat(Ce,"-sign-text")},f)):null),v.a.createElement("div",{className:"".concat(Ce,"-main")},v.a.createElement("div",{className:"".concat(Ce,"-main-content")},v.a.createElement("div",{className:"".concat(Ce,"-main-content-des")},v.a.createElement("span",null,r)),v.a.createElement("div",{className:"".concat(Ce,"-main-content-source")},i||"")),v.a.createElement("div",{className:"".concat(ye,"-main-second")},v.a.createElement("div",{className:"".concat(ye,"-main-second-price")},a&&"¥".concat(c)),v.a.createElement(re,{signData:K.b(o)},v.a.createElement("div",{className:"".concat(ye,"-main-second-right")},"去购买",v.a.createElement("div",{className:"".concat(ye,"-icon")},v.a.createElement(be,{className:"rightArrow"}))))))),v.a.createElement(ce,{data:o,parseUA:l}))};function je(e){return v.a.createElement("svg",r()({width:"24",height:"24",viewBox:"0 0 24 24"},e),v.a.createElement("path",{d:"M16.1917 20C14.4179 19.9167 12.0796 18.25 9.90253 15.5L9.09622 14.5C6.91918 11.6667 5.79035 9 6.03224 7.25C6.27413 6 8.04802 5 9.01559 5C9.49937 5 9.66064 5.25 9.74127 5.41667C10.3057 6.5 11.0314 8.33333 11.0314 8.91667V9.08333C10.8701 9.41667 10.6282 9.58333 10.3863 9.66667C9.98316 9.91667 9.8219 10 9.8219 10.4167C9.8219 10.5 9.90253 11 11.3539 12.9167L11.9989 13.6667C13.4503 15.4167 13.8534 15.6667 14.0147 15.6667C14.3372 15.75 14.4985 15.5833 14.7404 15.25C14.9017 15 15.1435 14.75 15.4661 14.75H15.6273C16.2724 14.9167 17.885 16 18.7719 16.75C18.9332 16.8333 19.0945 17.0833 18.9332 17.75C18.6107 18.5833 17.3206 20 16.1917 20Z",fill:"#0084FF"}))}var ke="ecommerce-ad-TelephoneCard";var Ee=Object.freeze({NO_VERIFY:"NONE",ALL_VERIFY:"ALL",CHECK_AUTO:"WRITE"}),we=function(e){function t(e){var n;i()(this,t),(n=u()(this,f()(t).call(this,e))).handleChecked=function(){n.setState((function(e){return{checked:!e.checked}}))},n.handleSendCaptcha=function(){var e=n.props.data.originData.onSendVerify,t=n.state,a=t.phone;t.submitSuccess||(a?11===a.length?e?n.verifyPromise=e({phone:a}).then((function(){n.setState({message:"",captchaCountdown:60},(function(){var e=setInterval((function(){n.setState({captchaCountdown:n.state.captchaCountdown-1},(function(){n.state.captchaCountdown<=0&&(clearInterval(e),n.verifyPromise=null,n.setState({captchaCountdown:0}))}))}),1e3)}))})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,a=void 0===t?"请求错误,稍后再试":t;n.verifyPromise=null,n.setState({message:a})})):n.setState({message:"无法发送短信,刷新页面稍后再试"}):n.setState({message:"请输入正确的手机号"}):n.setState({message:"手机号不能为空"}))},n.handleChange=function(e){return function(t){var a,r,o=(null==t||null===(a=t.target)||void 0===a||null===(r=a.value)||void 0===r?void 0:r.trim())||"";["phone","captcha"].includes(e)&&(o=o.replace(/[^\d]/g,"")),o=o.substring(0,11),n.setState(y()({},e,o))}},n.handleSubmit=function(){var e=n.props,t=e.data.originData,a=e.dataModel,r=n.state,o=r.phone,i=r.name,c=r.captcha,s=r.submitSuccess;if(11===o.length){var l=t.onSubmit;n.submitPromise||s||(l?n.submitPromise=l({name:i,phone:o,verifyCode:c}).then((function(){var e,r;n.setState({submitSuccess:!0,message:""}),n.submitPromise=null,Object(O.w)({conversion:null!==(e=null==t||null===(r=t.data)||void 0===r?void 0:r.conversion)&&void 0!==e?e:[]},b()({},Object(x.getTrackMacroOptions)(),null==a?void 0:a._getMacroOptions(),{appendParams:"et=submit_success"})).conversion.forEach((function(e){return Object(O.C)(e)}))})).catch((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("e:",t),n.setState({message:null!==(e=null==t?void 0:t.message)&&void 0!==e?e:"提交失败"}),n.submitPromise=null})):n.setState({message:"无法提交,刷新页面稍后再试"}))}else n.setState({message:"请输入正确的手机号"})};var a=n.props.data.originData.phone,r=void 0===a?"":a;return r=r.substr(-11),n.state={submitSuccess:!1,message:"",checked:!0,captchaCountdown:0,phone:r},n}return m()(t,e),s()(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.data,r=a.description,o=a.parseUA,i=n.onSetRef,c=this.state,s=c.checked,l=c.captchaCountdown,u=c.phone,d=void 0===u?"":u,f=c.name,p=void 0===f?"":f,m=c.captcha,h=c.message,g=c.submitSuccess,b=s&&p&&d&&(!this.showVerify||m);return v.a.createElement("div",{className:"ecommerce-ad-box"},v.a.createElement("div",{className:"ecommerce-ad-form",ref:i,"data-ad-type":"ecommerce-ad-card"},v.a.createElement("div",{className:"".concat("ecommerce-ad-form","-title")},r),v.a.createElement("input",{className:"".concat("ecommerce-ad-form","-input"),type:"text",placeholder:"请输入姓名",onChange:this.handleChange("name"),disabled:g}),v.a.createElement("input",{className:"".concat("ecommerce-ad-form","-input"),type:"text",placeholder:"请输入手机号",onChange:this.handleChange("phone"),value:d,disabled:g}),this.showVerify&&v.a.createElement("div",{className:"".concat("ecommerce-ad-form","-verify")},v.a.createElement("input",{className:"".concat("ecommerce-ad-form","-input"),type:"text",placeholder:"请输入验证码",onChange:this.handleChange("captcha"),disabled:g}),v.a.createElement("span",{className:X()("".concat("ecommerce-ad-form","-submit"),(e={},y()(e,"".concat("ecommerce-ad-form","-submit-active"),!l),y()(e,"".concat("ecommerce-ad-form","-submit-disabled"),Boolean(l)),e)),onClick:this.handleSendCaptcha},l?"".concat(l," 秒"):"发送验证码")),v.a.createElement("div",{className:"".concat("ecommerce-ad-form","-protocol"),onClick:this.handleChecked},v.a.createElement("input",{type:"checkbox",checked:s,readOnly:!0}),"点击提交即视为同意将您的信息分享给商家，商家将尽快与您联系"),Boolean(h.length)&&v.a.createElement("div",{className:"".concat("ecommerce-ad-form","-message")},h),v.a.createElement("div",{className:X()("".concat("ecommerce-ad-form","-submit"),(t={},y()(t,"".concat("ecommerce-ad-form","-submit-active"),b),y()(t,"".concat("ecommerce-ad-form","-submit-disabled"),!b||g),t)),onClick:this.handleSubmit},g?"提交成功":"提交信息")),v.a.createElement(ce,{parseUA:o}))}},{key:"showVerify",get:function(){var e,t=this.props.data.originData,n=this.state.phone,a=t.data.verifyType;return a===Ee.ALL_VERIFY||a===Ee.CHECK_AUTO&&(null==t||null===(e=t.phone)||void 0===e?void 0:e.substr(-11))!==n}}]),t}(h.Component),xe=n(386),Ne=n.n(xe),Ae=n(3),Le=n.n(Ae),Se=(n(689),n(56)),Te=n.n(Se),Ie=n(77),Re=n.n(Ie),Pe=n(460);function _e(e){return"[object Number]"===Object.prototype.toString.call(e)}var Me="CLICK",ze="VIEW",De="VIEWX",Be="IMPRESSION",Ue={AD:"AD",PLUGIN:"PLUGIN"},Ve=n(51);var Fe=function(e){for(var t=Array.from(document.querySelectorAll("[data-ad-type='ecommerce-ad-card'],a[data-draft-type='link-card'],a[data-draft-type='ad-link-card']")).filter((function(e){return"link-card"!==e.getAttribute("data-draft-type")||!!function(e){return e.includes("BIZ=ECOMMERCE")?e:e.includes(encodeURIComponent("BIZ=ECOMMERCE"))?decodeURIComponent(Te.a.parse(e.slice(e.indexOf("?")+1)).target||""):""}(e.href).includes("BIZ=ECOMMERCE")})),n=0;n<t.length;n++)if(t[n]==e)return n+1;return-1},He=v.a.createContext({});var Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clickTrackFunc,n=void 0===t?function(e){return Object(Pe.a)(e)}:t,a=e.trackFunc,r=void 0===a?function(e){return Promise.all(e.map((function(e){return Object(O.B)(e)})))}:a;return function(e,t){var a=t.actionType;return e=e.filter(Boolean),a===Me?n(e,t):r(e,t)}},Ge=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=u()(this,(e=f()(t)).call.apply(e,[this].concat(r)))).__setTrackRef=function(e){n.node=e},n.onTrackClick=function(e){n.sendClickTrack(e)},n.observers=[],n.touchStartTime=Date.now(),n.state={providerValue:{setTrackRef:n.__setTrackRef,onTrackClick:n.onTrackClick}},n.sendTrackArray=function(e,t){if(Array.isArray(e)&&0!==e.length){var a=t.actionType,r=n.props,o=r.sendTracks,i=r.onSendTracksBefore,c=r.onSendTracksAfter,s=e;if(s=i(s,t),!Array.isArray(s))throw new TypeError("必须返回打点请求的数组");c(o(s,{actionType:a}),t)}},n.replacePosition=function(e){if(n.props.isReplacePosition){var t;if(!n.position)n.position=(null===(t=n.props)||void 0===t?void 0:t.cardIndex)||Fe(n.node),n.props.setPosition(n.position);return Object(O.n)(e,{position:n.position})}return e},n.getClickData=function(e){if(!(e&&n.node&&_e(e.clientX)&&_e(e.clientY)))return"";var t=Object(Pe.d)(e,n.node),a=Object(Pe.e)(n.touchStartTime);return Te.a.stringify(b()({},t,a))},n.getClickUrls=function(e,t){if(!n.props.sendClickData)return n.replacePosition(e);var a=n.getClickData(t);return(n.replacePosition(e)||[]).map((function(e){return"".concat(e,"&").concat(a)}))},n.sendClickTrack=function(e){var t,a;(n.props.zaClick&&n.props.zaClick.id&&Object(Pe.j)("trackEvent",n.node,{id:n.props.zaClick.id,action:"Click"}),n.props.zaEnvBlock)&&(null===(t=n.zaRef)||void 0===t||null===(a=t.current)||void 0===a||a.trackEvent({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Card"}}));n.sendTrackArray(n.getClickUrls(n.__trackUrls.clicks,e),{actionType:Me,event:e})},n.calculateMacroOptions=function(e){var t=Object(O.i)(e),a=t.os,r=t.platform,o=Object(O.j)(e),i=(navigator&&Object(O.g)(navigator.userAgent)).version;return n.__trackUrlMacroOption=b()({os:a,ua:navigator.userAgent,platform:r,isHybrid:o?"1":"0",version:i},n.props.getMacroOptions())},n.replaceUrlMacro=function(){var e=n.props,t=e.views,a=e.impressions,r=e.clicks,o=e.viewXs,i=e.parseUA;n.__trackUrls=Object(O.w)({views:t,impressions:a,clicks:r,viewXs:o},n.calculateMacroOptions(i))},n.zaRef=v.a.createRef(),n}return m()(t,e),s()(t,[{key:"addListener",value:function(){var e=this;this.node&&!this.observers.length&&(this.sendTrackArray(this.__trackUrls.impressions,{actionType:Be}),this.props.sendClickData&&this.node.addEventListener("touchstart",(function(){e.touchStartTime=Date.now()})),this.makeObservers([{threshold:[0],callback:function(){e.props.zaView&&e.props.zaView.id&&e.node&&Object(Pe.j)("cardShow",e.node,{id:e.props.zaView.id}),e.sendTrackArray(e.replacePosition(e.__trackUrls.views),{actionType:ze})}},{threshold:[.3],callback:function(){e.sendTrackArray(e.replacePosition(e.__trackUrls.viewXs),{actionType:De})}}]))}},{key:"makeObservers",value:function(e){var t=this;if(this.node)if(Array.isArray(e))e.forEach((function(e){t.makeObservers(e)}));else{var n=e.callback,a=function(e,t){var n=t.threshold;return new window.IntersectionObserver(e,{threshold:n})}((function(e){R()(e,1)[0].isIntersecting&&(n(),a.disconnect())}),{threshold:e.threshold});a.observe(this.node),this.observers.push(a)}}},{key:"componentDidMount",value:function(){this.replaceUrlMacro(),this.addListener()}},{key:"componentDidUpdate",value:function(){this.addListener()}},{key:"componentWillUnmount",value:function(){var e=this;this.observers.forEach((function(t){t.unobserve(e.node)})),this.observers=[]}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.children,r=n.id;return v.a.Children.only(a),v.a.createElement(Ve.b,{content:{type:"Ad",id:"".concat(r)},block:"advertPluginCard",extra:{attachedInfoBytes:""}},v.a.createElement(Ve.e,{ref:this.zaRef}),v.a.createElement(Ve.f,{zaType:"Card"}),v.a.createElement(He.Provider,{value:this.state.providerValue},(e=a.type,Boolean(e)&&"string"==typeof e?v.a.cloneElement(a,{ref:function(e){!function(e,t){e&&("function"==typeof e?e(t):e.current=t)}(a.ref,e),t.node=e},onClick:function(e){t.sendClickTrack(e),"function"==typeof a.props.onClick&&a.props.onClick(e)}}):a)))}}]),t}(v.a.Component);Ge.propTypes={type:Le.a.oneOf(Object.keys(Ue)),views:Le.a.array,viewXs:Le.a.array,impressions:Le.a.array,clicks:Le.a.array,zaClick:Le.a.shape({id:Le.a.number}),zaView:Le.a.shape({id:Le.a.number}),getMacroOptions:Le.a.func,onSendTracksBefore:Le.a.func,onSendTracksAfter:Le.a.func,sendTracks:Le.a.func.isRequired},Ge.defaultProps={views:[],viewXs:[],impressions:[],clicks:[],getMacroOptions:function(){return{}},onSendTracksBefore:function(e){return e},onSendTracksAfter:function(){},type:Ue.PLUGIN,sendTracks:Ze()},[{name:"PluginTrack",type:Ue.PLUGIN,sendTracks:Ze({clickTrackFunc:function(e){return Object(Pe.a)({trackMethod:Pe.i,tracks:e})},trackFunc:function(e){return Promise.all(e.map((function(e){return Object(Pe.i)(e)})))}})},{name:"ADTrack",type:Ue.AD}].forEach((function(e){var t=e.name,n=e.type,a=e.sendTracks;Ge[t]=function(e){var t=e.children,o=Ne()(e,["children"]);return v.a.createElement(Ge,r()({type:n,sendTracks:a},o),t)}}));var We=Ge,Ke=n(5);function qe(e){return v.a.createElement("svg",r()({width:"32",height:"28",viewBox:"0 0 32 28"},e),v.a.createElement("g",{fill:"#0084FF",fillRule:"evenodd",transform:"translate(1.464 .212)"},v.a.createElement("path",{fillRule:"nonzero",d:"M26.7860999,22.6432186 C26.7860999,23.4221053 26.1860408,24.0379555 25.465587,24.0379555 L3.60661269,24.0379555 C2.88615896,24.0379555 2.28609987,23.4221053 2.28609987,22.6432186 C2.28609987,21.8147915 1.61452699,21.1432186 0.786099865,21.1432186 C-0.0423272597,21.1432186 -0.713900135,21.8147915 -0.713900135,22.6432186 C-0.713900135,25.0617699 1.21161398,27.0379555 3.60661269,27.0379555 L25.465587,27.0379555 C27.8605858,27.0379555 29.7860999,25.0617699 29.7860999,22.6432186 C29.7860999,21.8147915 29.114527,21.1432186 28.2860999,21.1432186 C27.4576727,21.1432186 26.7860999,21.8147915 26.7860999,22.6432186 Z"}),v.a.createElement("path",{d:"M6.98076923,7.75 L22.7965587,7.75 C23.6249858,7.75 24.2965587,8.42157288 24.2965587,9.25 L24.2965587,10 C24.2965587,10.8284271 23.6249858,11.5 22.7965587,11.5 L6.98076923,11.5 C6.15234211,11.5 5.48076923,10.8284271 5.48076923,10 L5.48076923,9.25 C5.48076923,8.42157288 6.15234211,7.75 6.98076923,7.75 Z",transform:"rotate(90 14.889 9.625)"}),v.a.createElement("path",{d:"M14.1740505,12.9298687 L21.8895438,12.7652365 C22.7177824,12.7475637 23.4035291,13.4046571 23.4212019,14.2328957 C23.4215138,14.247512 23.421612,14.2621321 23.4214964,14.2767514 L23.4173849,14.7969038 C23.4109719,15.6082292 22.7605975,16.2673977 21.9494313,16.2847062 L14.233938,16.4493384 C13.4056994,16.4670112 12.7199527,15.8099178 12.7022799,14.9816792 C12.701968,14.9670629 12.7018698,14.9524427 12.7019854,14.9378235 L12.7060968,14.4176711 C12.7125099,13.6063457 13.3628843,12.9471772 14.1740505,12.9298687 Z",transform:"rotate(135 18.062 14.607)"}),v.a.createElement("path",{d:"M7.82789662,12.9298687 L15.5433899,12.7652365 C16.3716285,12.7475637 17.0573752,13.4046571 17.0750481,14.2328957 C17.07536,14.247512 17.0754581,14.2621321 17.0753426,14.2767514 L17.0712311,14.7969038 C17.0648181,15.6082292 16.4144436,16.2673977 15.6032775,16.2847062 L7.88778416,16.4493384 C7.05954556,16.4670112 6.37379885,15.8099178 6.35612601,14.9816792 C6.35581413,14.9670629 6.35571595,14.9524427 6.35583151,14.9378235 L6.35994299,14.4176711 C6.36635601,13.6063457 7.01673045,12.9471772 7.82789662,12.9298687 Z",transform:"scale(1 -1) rotate(-45 -23.55 0)"})))}var Ye=n(1056),Je=n(1057),Qe=n(1058),Xe=function(e){function t(){return i()(this,t),u()(this,f()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props.score;return v.a.createElement("span",{className:"zhihu-advert-stars-score"},Object(O.r)(e).map((function(e,t){return 1===e?v.a.createElement(Ye.a,{key:t,style:{width:"12px",height:"12px"}}):v.a.createElement("span",{key:t,className:"zhihu-advert-stars-score-item"},v.a.createElement(Je.a,{style:{width:"12px",height:"12px"}}),Boolean(e)&&v.a.createElement("span",{style:{width:"".concat(100*e,"%"),position:"absolute",left:"0px",top:"0px",overflow:"hidden"}},v.a.createElement(Qe.a,{style:{width:"12px",height:"12px"}})))})),this.props.showScore&&v.a.createElement("span",{style:{marginLeft:4}},e,"分"))}}]),t}(h.PureComponent);Xe.propTypes={score:Le.a.number,showScore:Le.a.bool},Xe.defaultProps={score:0,showScore:!1};var $e,et="ecommerce-ad-download-style",tt="ecommerce-ad-download-warning";function nt(e,t){e.stopPropagation(),e.preventDefault(),W.execute({url:t,cardType:"baseUrl"})}var at={card:fe,text:he,ecard:Oe,standard:le,download:function(e){var t=e.data,n=t.picUrl,a=t.description,r=t.productNameNew,o=t.data,i=t.pluginSourceFrom,c=t.appInfo,s=t.parseUA,l=e.onClick,u=e.onSetRef,d="string"==typeof c?JSON.parse(c):c,f=Object(Ke.camelizeKeys)(d)||{},p=f.name,m=f.appVersion,h=f.developer,g=f.appPermissionsUrl,b=f.appPrivacyUrl,C=function(e){var t=e.iosScore,n=void 0===t?0:t,a=e.androidScore,r=void 0===a?0:a;return"android"===Object(O.i)().os?r:n}(o),y=Y.CANVAS===i?[function(){},l]:[l,function(){}],j=R()(y,2),k=j[0],E=j[1],w=p&&m&&h&&g&&b,x=v.a.createElement("span",{className:"".concat(tt,"-right")},"|");return v.a.createElement("div",{className:"ecommerce-ad-box"},v.a.createElement("div",{className:et,onClick:k,ref:u,"data-ad-type":"ecommerce-ad-card"},v.a.createElement("div",{className:"".concat(et,"-img"),style:{backgroundImage:"url(".concat(n,")")}}),v.a.createElement("div",{className:"".concat(et,"-main")},v.a.createElement("div",{className:"".concat(et,"-main-content")},v.a.createElement("div",{className:"".concat(et,"-main-content-des")},v.a.createElement("span",null,r),v.a.createElement("span",null,a)),v.a.createElement("div",{className:"".concat(et,C>0?"-main-content-bottom":"-main-content-bottom-noScore")},C>0&&v.a.createElement(Xe,{score:C,showScore:!0}),v.a.createElement(re,{signData:K.b(o)},v.a.createElement("div",{className:"".concat(et,"-icon-blue"),onClick:E},v.a.createElement(qe,{width:"15px",height:"15px"}),v.a.createElement("span",null,"下载"))))))),w&&"android"===Object(O.i)().os?v.a.createElement("div",{className:tt},v.a.createElement("div",{className:"".concat(tt,"-appDes")},v.a.createElement("span",null,"应用名称: ",p),x,v.a.createElement("span",null,"版本号: ",m),x,v.a.createElement("span",null,"开发者: ",h),x,v.a.createElement("a",{onClick:function(e){return nt(e,b)},className:"".concat(tt,"-right")},"隐私政策"),x,v.a.createElement("a",{onClick:function(e){return nt(e,g)}},"应用权限"))):"",v.a.createElement(ce,{data:o,parseUA:s}))},telephone:function(e){var t=e.data,n=t.picUrl,a=t.description,r=t.data,o=t.parseUA,i=e.onClick,c=e.onSetRef,s=r.brandName,l=void 0===s?"":s;return v.a.createElement("div",{className:"ecommerce-ad-box"},v.a.createElement("div",{className:ke,onClick:i,ref:c,"data-ad-type":"ecommerce-ad-card"},v.a.createElement("div",{className:"".concat(ke,"-img"),style:{backgroundImage:"url(".concat(n,")")}}),v.a.createElement("div",{className:"".concat(ke,"-main")},v.a.createElement("div",{className:"".concat(ke,"-main-content")},v.a.createElement("div",{className:"".concat(ke,"-main-content-title")},l),v.a.createElement("div",{className:"".concat(ke,"-main-content-des")},a)),v.a.createElement(re,{showInvalidSign:K.b(r)},v.a.createElement("div",{className:"".concat(ke,"-icon")},v.a.createElement(je,null))))),v.a.createElement(ce,{data:r,parseUA:o}))},form:we},rt=Object.keys(at).reduce((function(e,t){return e[t]=t,e}),{});function ot(e){var t=e.data,n=t.picUrl,a=t.interactionLaunch,r=t.originData,o=e.onClick,i=e.onSetRef,c=r.isExpand;return v.a.createElement(ge,{isExpand:c,imgSrc:n,description:a,onClick:o,onSetRef:i})}var it,ct=Object.freeze({IN_TEXT:"0",BOTTOM:"1",FLOAT:"2"}),st=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.forwardRef,a=void 0!==n&&n;function o(t){return v.a.createElement(He.Consumer,null,(function(n){return v.a.createElement(e,r()({ref:t.forwardRef?t.forwardRef:null},n,t))}))}return Re()(o,e),a&&v.a.forwardRef((function(e,t){return v.a.createElement(o,r()({},e,{forwardedRef:t}))})),o}($e=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=u()(this,(e=f()(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){n.props.onTrackClick(e),n.props.onClick(e)},n}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=t.pluginStyle,a=t.originData,o=e.setTrackRef,i=a.displayMode,c=at[n]||le,s=i===ct.BOTTOM;return i===ct.FLOAT?v.a.createElement(ot,r()({},this.props,{onSetRef:o,onClick:this.handleClick})):v.a.createElement(c,r()({},this.props,{isBottomStyle:s,onSetRef:o,onClick:this.handleClick}))}}]),t}(v.a.Component))||$e,lt=n(994),ut=Object(lt.b)(it=function(e){function t(e){var n;return i()(this,t),(n=u()(this,f()(t).call(this,e))).onClick=function(e){e.stopPropagation(),e.preventDefault(),n.dataModel.handleClick()},n.dataModel=new J(e),n}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.dataModel.preload(),this.dataModel.getContentSign()}},{key:"shouldComponentUpdate",value:function(e){return this.dataModel.setPropsData(e),!0}},{key:"render",value:function(){var e=this.dataModel.getRenderData();return e.isHidden?v.a.createElement("div",{className:"ecommerce-ad-null","data-ad-type":"ecommerce-ad-card"}):v.a.createElement(We.PluginTrack,r()({},this.dataModel.getTrackInfo(),{sendClickData:!0,parseUA:e.parseUA,cardIndex:e.cardIndex}),v.a.createElement(st,{data:e,dataModel:this.dataModel,onClick:this.onClick}))}}]),t}(h.Component))||it},1636:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n.n(a),o=n(949),i=n.n(o),c=n(12),s=n.n(c),l=n(24),u=n.n(l),d=n(1393),f=n(9);function p(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var m=r.a.memo((function(e){var t=e.countdown,n=Object(a.useState)(t),o=p(u.a,n,2),i=o[0],c=o[1],s=Object(a.useRef)();Object(a.useEffect)((function(){return i<=0?(clearInterval(s.current),void c(0)):(s.current=setInterval((function(){c(i-1)}),1e3),function(){return clearInterval(s.current)})}),[i]);var l=Object(d.b)(i),m=l.d,h=l.h,v=l.m,g=l.s,b="".concat(m?m+"天":""," ").concat(h,":").concat(v,":").concat(g);return Object(f.g)("div",{className:"GoodsItemCardPromoTag"},Object(f.g)("div",{className:"".concat("GoodsItemCardPromoTag","-right")},i?Object(f.g)(r.a.Fragment,null,Object(f.g)("span",null,"距结束还剩 "),Object(f.g)("span",{className:"".concat("GoodsItemCardPromoTag","-rightText")},b)):Object(f.g)("span",null,"活动已结束")))})),h=function(e){var t=e.text;return Object(f.g)("div",{className:"GoodsRecommendCard-couponTag"},Object(f.g)("span",{className:"GoodsRecommendCard-couponMark"},"券"),Object(f.g)("span",{className:"GoodsRecommendCard-couponText"},t))},v=function(e){var t=e.text;return Object(f.g)("div",{className:"GoodsRecommendCard-textTag"},t)},g=function(e){var t=e.className,n=e.style,a=e.tags,r=void 0===a?[]:a,o=e.isPromo,c=e.promoTagShow,l=e.countdown;if((i()(r)||!r.length)&&!o)return null;return Object(f.g)("div",{className:s()("GoodsRecommendCard-tags",t),style:n},Object(f.g)("div",{className:"GoodsRecommendCard-tagsScale"},c?Object(f.g)(m,{countdown:l||0}):r.map((function(e,t){var n=e.type,a=e.value,r=e.imgUrl;return r?Object(f.g)("img",{className:"GoodsRecommendCard-tagsImage",src:r,key:t}):"coupon"===n&&a?Object(f.g)(h,{key:t,text:a}):"text"===n&&a?Object(f.g)(v,{key:t,text:a}):null}))))}},1642:function(e,t,n){"use strict";var a=n(24),r=n.n(a),o=n(30),i=n.n(o),c=n(49),s=n.n(c),l=n(0),u=n.n(l),d=n(51),f=n(71),p=n.n(f),m=n(1728),h=n(1521),v=n(39),g=n.n(v),b=n(103),C=n.n(b),y=n(884),O=n(99),j=n(33),k=n.n(j),E=n(22),w=n.n(E),x=n(28),N=n.n(x),A=n(5),L=n(505),S=n.n(L);function T(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var I=function(){function e(t){var n=this;w()(this,e),this.fetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.url||(n.url=e),e!==n.url)throw new Error("mismatch url\n".concat(e,"\n").concat(n.url),e,n.url);return new Promise((function(e,a){n.addToQueue({options:t,resolve:e,reject:a})}))},this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}var t;return N()(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,a=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),a&&(this.maxBatchCount=a),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=T(r.a,e,1)[0].options,n=e.reduce((function(e,t){var n,a;return(null===(n=(a=t.options).dataBuilder)||void 0===n?void 0:n.call(a,e,t))||e}),{}),a=this.url,o=!t.method||"GET"===t.method.toUpperCase();if(o){var i=S()(a,!0);i.query=Object.assign(Object.assign({},i.query),n),a=i.toString()}return[a,Object.assign(Object.assign({},t),{},{data:o?null:Object.assign(Object.assign({},t.data),n)})]}},{key:"doFetch",value:(t=C()(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.queue,this.queue=[],e.prev=4,e.next=7,this.customFetch.apply(this,T(k.a,this.buildFetchParams(t)));case 7:n=e.sent,t.forEach((function(e){var t=e.options,a=e.resolve;t.resultBuilder?a(t.resultBuilder(n)):a(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.forEach((function(t){return t.reject(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return t.apply(this,arguments)})},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout((function(){t.startTime=Date.now(),t.doFetch()}),this.delay)}}]),e}(),R=null,P=function(e){return function(t,n){return R||(R=new I(e)),R.fetch(t,n)}}(function(e){return function(){var t=C()(g.a.mark((function t(n,a){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,a);case 2:return r=t.sent,t.t0=A.camelizeKeys,t.next=6,r.json();case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(fetch));function _(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var M={},z=function(e){var t=Object(l.useRef)(0),n=e.inEditor,a=e["data-offset-key"],o=e["data-text"],i=e["data-image"],c=e.href,s=Object(l.useState)((function(){return n&&M[a]||null})),u=_(r.a,s,2),d=u[0],f=u[1],p=Object(y.a)({once:!0}),m=_(r.a,p,2),h=m[0],v=m[1],b=Object(O.a)((function(e){var t=e||d;if(!t||0===Object.keys(t).length)return{objectType:null,title:o||c,thumbnail:i};t.title=o||t.title||c,t.thumbnail=i||t.thumbnail;var r=Object.assign(Object.assign({},t),{},{cached:!0});return n&&(M[a]=r),r})),j=Object(O.a)(C()(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current+=1,e.prev=1,e.next=4,P("https://www.zhihu.com/api/v4/link_card_infos",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(c),e},resultBuilder:function(e){return e[c]}});case 4:n=e.sent,f(b(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.current<=1?j():f(b());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))));return Object(l.useEffect)((function(){!v||d&&d.cached||j()}),[v,d,j]),Object(l.useEffect)((function(){n&&f(b())}),[n,b,o,i]),[h,d]},D=n(1729),B=n(311),U=n(9),V=["inEditor","data-text","href","zaBlock"];function F(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}var H={answer:"Answer",article:"Column",zvideo:"Zvideo",question:"Question",collection:"Collection",roundtable:"Roundtable",topic:"Topic"},Z=u.a.forwardRef((function(e,t){var n=p()(e,["zvideoLinkCardProps"]),a=n.inEditor,o=n["data-text"],c=n.href,u=n.zaBlock,f=i()(n,V),v=Object(l.useRef)(),g=z(e),b=F(r.a,g,2),C=b[0],y=b[1],O=Object(D.a)(e,v,"zvideo"===(null==y?void 0:y.objectType)),j=O.handleImageClick,k=O.handleInfoClick,E=Object(l.useCallback)(Object(B.a)(t,C,v),[]),w=a?m.d:d.a,x=a?null:{as:m.d,shouldTrackShow:!0,zaText:!0,zaType:"Button",zaAction:"OpenUrl",zaBlock:u,extra:{link:{url:c}},"data-za-module":"Content"},N=Object(U.g)(w,s()({},x,{url:c,data:y,onClick:k,onClickImage:j}));return Object(U.g)(h.a,s()({ref:E,text:o,url:c,component:"a"},f),Boolean(y)&&Object(U.g)(d.b,{content:{type:H[y.objectType]||"Unknown"}},N))}));t.a=Z},1649:function(e,t,n){"use strict";var a=n(24),r=n.n(a),o=n(0),i=n(121);var c="function"==typeof Image,s={},l=c?i((function(e){return new Promise((function(t){return n=e,a=function(e,n){s[e]=n,t(n)},(r=new Image).onload=function(){var e=r.width>0&&r.height>0;a(n,e)},r.onerror=function(){a(n,!1)},void(r.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,a,r}))})):function(){return Promise.resolve(!1)};function u(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}t.a=function(e){var t=s[e],n=Object(o.useState)(t),a=u(r.a,n,2),i=a[0],d=a[1];return c&&void 0===t&&l(e).then(d),i}},1652:function(e,t,n){"use strict";var a=n(24),r=n.n(a),o=n(30),i=n.n(o),c=n(49),s=n.n(c),l=n(0),u=n.n(l),d=n(12),f=n.n(d),p=n(23),m=n(73),h=n.n(m),v=n(5),g=n(945),b=n(154),C=n(51),y=n(1019),O=n(99),j=n(1524),k=n(338),E=n(1253),w=n(1166),x=n(975),N=n(1642),A=n(9),L=["id","newLinkCard","onReady"];function S(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var a=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(t,void 0!==n&&n<a?n:a)}return e(t,n)}function T(e){var t=Object(l.useRef)(null),n=e.component,a=void 0===n?"a":n,r=e.className,o=e.onClick,i=e.onMouseDown,c=e.zvideo,s=e.enableInlinePlay,d=void 0!==s&&s,m=e.onImageClick,v=void 0===m?h.a:m,O=e.onInfoClick,E=void 0===O?h.a:O,N=e.renderInjection,L=e.zaProps,S=c.id,T=c.title,R=c.url,P=c.imageUrl,_=c.video,M=_.videoId,z=_.duration,D=_.status,B=c.author,U=c.playCount,V=c.creationReferences,F=!R?"inlinezvideo":"zvideo";Object(l.useEffect)((function(){N||Object(g.onViewedOnce)(t.current,(function(){p.a.trackCardShow(t.current,{id:7844},{button:{text:F}})}))}),[F,N]);var H=Object(l.useCallback)((function(e){p.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:F}}),v(e,c)}),[v,c,F]),Z=Object(l.useCallback)((function(e){p.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:F}}),E(e,c)}),[E,c,F]);if(N){if("function"!=typeof N)throw new Error("renderInjection must be function");return N(e)}return"converting_failure"===D?Object(A.g)(I,{error:"视频转码失败，请重新上传视频"}):Object(A.g)(u.a.Fragment,null,Object(A.g)(C.c,{as:a,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:"ZTextZVideoLinkCard",zaType:"Button",extra:{link:{url:R}},className:f()("ZVideoLinkCard",r),ref:t,href:R,target:"_blank",rel:"noopener noreferrer",onClick:o,onMouseDown:i,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:S,video_id:M}}})},d?Object(A.g)(w.a,{placeholder:Object(A.g)("div",{className:"ZVideoLinkCard-playerContainer"})},Object(A.g)("div",{className:"ZVideoLinkCard-playerContainer"},Object(A.g)(y.a,{type:"video",className:"ZVideoLinkCard-player",src:"https://www.zhihu.com/video/".concat(M),iframeProps:{allowFullScreen:!0},zaProps:Object.assign({token:S},L)}))):Object(A.g)("div",{className:"ZVideoLinkCard-image",style:{backgroundImage:"url(".concat(P,")")},onClick:H},Object(A.g)(x.a,{className:"ZVideoLinkCard-playIcon"}),Boolean(z)&&Object(A.g)("div",{className:"ZVideoLinkCard-duration"},Object(j.a)(z))),Object(A.g)("div",{className:"ZVideoLinkCard-info",onClick:Z},Object(A.g)("div",{className:"ZVideoLinkCard-title"},T),Boolean(R)&&Object(A.g)("div",{className:"ZVideoLinkCard-author"},Object(A.g)(k.a,{className:"ZVideoLinkCard-avatar",url:B.avatarUrl,alt:"",size:20,round:!0}),Object(A.g)("div",null,B.name),null!=V&&V.plaintext?Object(A.g)("div",null," ",V.plaintext):Object(A.g)("div",null,"的视频"),Boolean(U)&&Object(A.g)("div",null," · ",Object(b.cnNiceNumber)(U),"播放")))))}function I(e){var t=e.error;return Object(A.g)("div",{className:"ZVideoLinkErrorCard"},Object(A.g)("div",{className:"ZVideoLinkErrorCard-message"},t.message||"视频加载错误"))}function R(e){var t=e.id,n=e.newLinkCard,a=e.onReady,o=i()(e,L),c=Object(l.useState)(null),u=S(r.a,c,2),d=u[0],f=u[1],p=Object(l.useState)(null),m=S(r.a,p,2),h=m[0],g=m[1],b=Object(O.a)((function(){return a&&a()}));return Object(l.useEffect)((function(){if(!n){var e="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card");Object(E.a)(e).then((function(e){return Object(v.camelizeKeys)(e)})).then((function(e){e.error?g(e.error):f(e)})).catch((function(e){g(e)})).finally((function(){b()}))}}),[n,t,b]),n?Object(A.g)(N.a,s()({inEditor:!0,component:"div",href:"https://www.zhihu.com/zvideo/".concat(t)},o)):h?Object(A.g)(I,{error:h}):d?Object(A.g)(T,s()({zvideo:d},o)):null}R.defaultProps={newLinkCard:!1};t.a=R},1653:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(193),i=n.n(o),c=n(9);t.a=function(e){var t=e.referenceList,n=e.onClick,a=e.listRef;return Object(c.g)(r.a.Fragment,null,Object(c.g)("h2",null,"参考"),Object(c.g)("ol",{className:"ReferenceList",onClick:n,ref:a},i()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),a=n.length>1?Object(c.g)(r.a.Fragment,null,Object(c.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(c.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(c.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(c.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(c.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},a,e.text&&Object(c.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(c.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))}},1724:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(386),r=n.n(a),o=n(78),i=n.n(o),c=n(24),s=n.n(c),l=n(339),u=n.n(l),d=n(39),f=n.n(d),p=n(103),m=n.n(p),h=n(56),v=n.n(h),g=function(e){if(204===e.status)return!1;if("0"===e.headers.get("content-length"))return!1;var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")},b=function(e){var t=e.status;return t>=200&&t<300},C=function(){var e=m()(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=400)){e.next=5;break}throw a=n.error,r=(a=void 0===a?{}:a).message,new Error(r||"服务器错误");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e,t){if(t&&"object"===u()(t)){var n=e.split("?"),a=s()(n,2),r=a[0],o=a[1],c=o?i()({},v.a.parse(o),t):t;return"".concat(r,"?").concat(v.a.stringify(c))}return e},O=function(e){var t=e.body,n=void 0===t?{}:t,a=e.headers,o=void 0===a?{}:a,c=r()(e,["body","headers"]);return i()({},c,{body:JSON.stringify(n),headers:i()({},o,{"content-type":"application/json","X-Requested-With":"Fetch"})})};function j(e){return k.apply(this,arguments)}function k(){return(k=m()(f.a.mark((function e(t){var n,a,r,o,i,c,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.prev=1,a=O(n),r=y(t,n.query),e.next=6,fetch(r,a);case 6:if(o=e.sent,!g(o)){e.next=13;break}return e.next=10,o.json();case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,o.text();case 15:e.t0=e.sent;case 16:if(i=e.t0,!b(o)){e.next=21;break}e.t1=i,e.next=24;break;case 21:return e.next=23,C(o.status,i);case 23:e.t1=e.sent;case 24:return e.t2=e.t1,c={data:e.t2},e.abrupt("return",c);case 29:return e.prev=29,e.t3=e.catch(1),e.abrupt("return",Promise.reject(e.t3));case 32:case"end":return e.stop()}}),e,null,[[1,29]])})))).apply(this,arguments)}},1725:function(e,t,n){"use strict";var a=n(49),r=n.n(a),o=n(0),i=n.n(o),c=n(1629),s=n(994),l=n(1104);t.a=Object(s.b)((function(e){var t=e.isEditor,n=e.isPreview,a="";return(t||n)&&(a=l.a.ONLY_SHOW),i.a.createElement(c.default,r()({},e,{cmpStatus:a}))}))},1726:function(e,t,n){},1727:function(e,t,n){},1728:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return C}));var a=n(0),r=n.n(a),o=n(12),i=n.n(o),c=n(505),s=n.n(c),l=n(154),u=n(2147),d=n(1522),f=n(9),p={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题"},m={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览"},h={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],default:["followerCount","visitCount"]},v=function(e){var t=e.twoLine,n=e.children;return Boolean(n)&&Object(f.g)("span",{className:i()("LinkCard-title",{"two-line":t})},n)},g=function(e){var t=e.data,n=t.objectType,a=(h[n]||h.default).map((function(e){var n=t[e];return"".concat(Object(l.cnNiceNumber)(n)).concat(m[e])})).filter(Boolean).join(" · ");return Object(f.g)("span",{className:"LinkCard-desc"},a,Object(f.g)("span",{className:"LinkCard-tag"},p[n]))},b=function(e){var t=e.url,n=Object(a.useMemo)((function(){var e=null,n=s()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t).replace(/^https?:\/\//,"")}),[t]);return Object(f.g)("span",{className:"LinkCard-desc"},Object(f.g)(u.a,{size:14,center:!0}),n)},C=function(e){var t=e.url,n=e.isVideo,a=e.ratio,r=void 0===a?1:a,o=e.onClick;return Boolean(t)&&Object(f.g)("span",{className:"LinkCard-image",style:{height:60*r}},Object(f.g)("img",{src:t,onClick:o,alt:n?"点击可播放视频":""}),n&&Object(f.g)("span",{className:"LinkCard-image--video"},Object(f.g)(d.a,{size:10,center:!0})))},y=function(e,t){var n=e.url,a=e.data,o=e.onClick,i=e.onClickImage,c=a.title,s=a.thumbnail,l=a.objectType;return Object(f.g)(r.a.Fragment,null,Object(f.g)("span",{ref:t,className:"LinkCard-contents",onClick:o},Object(f.g)(v,{twoLine:!0},c),l?Object(f.g)(g,{data:a}):Object(f.g)(b,{url:n})),Object(f.g)(C,{url:s,isVideo:"zvideo"===l,onClick:i}))};t.d=r.a.forwardRef(y)},1729:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var a=n(0),r=n(945),o=n(23),i=n(99),c=function(e){o.a.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}})},s=function(e,t,n){var a;o.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)},l=function(e,t,n){var a;o.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)};t.a=function(e,t,n){var o=e["data-text"],u=e.href,d=e.zvideoLinkCardProps;Object(a.useEffect)((function(){n&&Object(r.onViewedOnce)(t.current,(function(){return c(t.current)}))}),[n,t]);var f=Object(i.a)((function(e){s(e,{title:o,url:u,video:{}})})),p=Object(i.a)((function(e){l(e,d,{title:o,url:u})}));return n?{handleImageClick:f,handleInfoClick:p}:{}}},1874:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(25),s=n.n(c),l=n(29),u=n.n(l),d=n(18),f=n.n(d),p=n(0),m=n.n(p),h=n(147),v=n(36),g=n(177);n(3);function b(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var C=n(50),y=n.n(C),O=!1,j=m.a.createContext(null),k=function(e){function t(t,n){var a;a=e.call(this,t,n)||this;var r,o=n&&!n.isMounting?t.enter:t.appear;return a.appearStatus=null,t.in?o?(r="exited",a.appearStatus="entering"):r="entered":r=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",a.state={status:r},a.nextCallback=null,a}Object(g.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,a=this.props.timeout;return e=t=n=a,null!=a&&"number"!=typeof a&&(e=a.exit,t=a.enter,n=void 0!==a.appear?a.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,a=this.context?this.context.isMounting:e,r=this.props.nodeRef?[a]:[y.a.findDOMNode(this),a],o=r[0],i=r[1],c=this.getTimeouts(),s=a?c.appear:c.enter;!e&&!n||O?this.safeSetState({status:"entered"},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,i),this.safeSetState({status:"entering"},(function(){t.props.onEntering(o,i),t.onTransitionEnd(s,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(o,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),a=this.props.nodeRef?void 0:y.a.findDOMNode(this);t&&!O?(this.props.onExit(a),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(a),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(a)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(a)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:y.a.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(n&&!a){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=r[0],i=r[1];this.props.addEndListener(o,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(v.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return m.a.createElement(j.Provider,{value:null},"function"==typeof n?n(e,a):m.a.cloneElement(m.a.Children.only(n),a))},t}(m.a.Component);function E(){}k.contextType=j,k.propTypes={},k.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:E,onEntering:E,onEntered:E,onExit:E,onExiting:E,onExited:E},k.UNMOUNTED="unmounted",k.EXITED="exited",k.ENTERING="entering",k.ENTERED="entered",k.EXITING="exiting";var w=k,x=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return a=t,void((n=e).classList?n.classList.remove(a):"string"==typeof n.className?n.className=b(n.className,a):n.setAttribute("class",b(n.className&&n.className.baseVal||"",a)));var n,a}))},N=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var a=t.resolveArguments(e,n),r=a[0],o=a[1];t.removeClasses(r,"exit"),t.addClass(r,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var a=t.resolveArguments(e,n),r=a[0],o=a[1]?"appear":"enter";t.addClass(r,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var a=t.resolveArguments(e,n),r=a[0],o=a[1]?"appear":"enter";t.removeClasses(r,o),t.addClass(r,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,a="string"==typeof n,r=a?""+(a&&n?n+"-":"")+e:n[e];return{baseClassName:r,activeClassName:a?r+"-active":n[e+"Active"],doneClassName:a?r+"-done":n[e+"Done"]}},t}Object(g.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var a=this.getClassNames(t)[n+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&r&&(a+=" "+r),"active"===n&&e&&e.scrollTop,a&&(this.appliedClasses[t][n]=a,function(e,t){e&&t&&t.split(" ").forEach((function(t){return a=t,void((n=e).classList?n.classList.add(a):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,a)||("string"==typeof n.className?n.className=n.className+" "+a:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+a)));var n,a}))}(e,a))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],a=n.base,r=n.active,o=n.done;this.appliedClasses[t]={},a&&x(e,a),r&&x(e,r),o&&x(e,o)},n.render=function(){var e=this.props,t=(e.classNames,Object(v.default)(e,["classNames"]));return m.a.createElement(w,Object(h.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(m.a.Component);N.defaultProps={classNames:""},N.propTypes={};var A=N,L=n(86);function S(e,t){var n=Object.create(null);return e&&p.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(p.isValidElement)(e)?t(e):e}(e)})),n}function T(e,t,n){return null!=n[t]?n[t]:e.props[t]}function I(e,t,n){var a=S(e.children),r=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var a,r=Object.create(null),o=[];for(var i in e)i in t?o.length&&(r[i]=o,o=[]):o.push(i);var c={};for(var s in t){if(r[s])for(a=0;a<r[s].length;a++){var l=r[s][a];c[r[s][a]]=n(l)}c[s]=n(s)}for(a=0;a<o.length;a++)c[o[a]]=n(o[a]);return c}(t,a);return Object.keys(r).forEach((function(o){var i=r[o];if(Object(p.isValidElement)(i)){var c=o in t,s=o in a,l=t[o],u=Object(p.isValidElement)(l)&&!l.props.in;!s||c&&!u?s||!c||u?s&&c&&Object(p.isValidElement)(l)&&(r[o]=Object(p.cloneElement)(i,{onExited:n.bind(null,i),in:l.props.in,exit:T(i,"exit",e),enter:T(i,"enter",e)})):r[o]=Object(p.cloneElement)(i,{in:!1}):r[o]=Object(p.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:T(i,"exit",e),enter:T(i,"enter",e)})}})),r}var R=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},P=function(e){function t(t,n){var a,r=(a=e.call(this,t,n)||this).handleExited.bind(Object(L.a)(a));return a.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},a}Object(g.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,a,r=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,a=o,S(n.children,(function(e){return Object(p.cloneElement)(e,{onExited:a.bind(null,e),in:!0,appear:T(e,"appear",n),enter:T(e,"enter",n),exit:T(e,"exit",n)})}))):I(e,r,o),firstRender:!1}},n.handleExited=function(e,t){var n=S(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(h.default)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,a=Object(v.default)(e,["component","childFactory"]),r=this.state.contextValue,o=R(this.state.children).map(n);return delete a.appear,delete a.enter,delete a.exit,null===t?m.a.createElement(j.Provider,{value:r},o):m.a.createElement(j.Provider,{value:r},m.a.createElement(t,a,o))},t}(m.a.Component);P.propTypes={},P.defaultProps={component:"div",childFactory:function(e){return e}};var _=P,M=n(49),z=n.n(M),D=n(30),B=n.n(D),U=n(9);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var F=function(e){s()(n,e);var t=V(n);function n(e){var a;return r()(this,n),a=t.call(this,e),"undefined"!=typeof document&&(a.element=document.createElement("div")),a}return i()(n,[{key:"componentDidMount",value:function(){this.element&&document.body.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){this.element&&(document.body.appendChild(this.element),this.element=null)}},{key:"render",value:function(){if(this.element){var e=this.props,t=e.onRef,n=B()(e,["onRef"]);return Object(C.createPortal)(Object(U.g)("div",z()({ref:t},n)),this.element)}return null}}]),n}(p.Component);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Z=function(e,t){e.addEventListener("transitionend",t,!1),e.addEventListener("transitioncancel",t,!1)},G=function(e){s()(n,e);var t=H(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={shouldMountPortal:!1,hasChildren:!1},e.handleExited=function(){e.setState((function(e){e.hasChildren}))},e}return i()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.portalClassName,a=t.transitionName,r=t.onAfterEnter,o=t.timeout,i=t.children,c=this.state,s=c.shouldMountPortal,l=c.hasChildren,u={appear:"".concat(a,"-enter"),appearActive:"".concat(a,"-enter-active"),enter:"".concat(a,"-enter"),enterActive:"".concat(a,"-enter-active"),enterDone:"".concat(a,"-enter-done"),exit:"".concat(a,"-leave"),exitActive:"".concat(a,"-leave-active"),exitDone:"".concat(a,"-leave-done")};return s&&Object(U.g)(F,{className:n},Object(U.g)(_,null,l&&p.Children.map(i,(function(t,n){return t&&Object(U.g)(A,{key:n,timeout:o,classNames:u,appear:!0,onExited:e.handleExited,onEntering:r,addEndListener:Z},t)}))))}}]),n}(p.Component);G.getDerivedStateFromProps=function(e,t){var n=p.Children.toArray(e.children).some(Boolean),a=t.hasChildren;return!a&&n?{shouldMountPortal:!0,hasChildren:n}:a&&!n?{hasChildren:n}:null};var W=G},1880:function(e,t,n){"use strict";var a=n(24),r=n.n(a),o=n(0),i=n.n(o),c=n(1724);function s(e){return new Promise((function(t,n){var a="https://www.zhihu.com/api/v4/commercial/ecommerce/preload",r=window.location.host,o=r.endsWith("dev")?"dev":"com",i=/--box-(\d+)--/g.exec(r);i&&(a="https://bidding-ecommerce-web--box-".concat(i[1],"--www-zhihu-com.zpres.zhihu.").concat(o,"/api/v4/commercial/ecommerce/preload")),Object(c.a)(a,{body:e,method:"POST",credentials:"include"}).then((function(e){t(e)})).catch((function(e){console.error("FetchData Request Error ",e),n(e)}))}))}var l=n(1895),u=n(1908),d=n(1725),f=n(78),p=n.n(f),m=n(22),h=n.n(m),v=n(28),g=n.n(v),b=function(){return i.a.createElement("span",{className:"adLinkCard-ecommerceLoading"},i.a.createElement("div",{className:"adLinkCard-ecommerceLoadingAvatarWrapper"},i.a.createElement("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"adLinkCard-ecommerceNetwork"})),i.a.createElement("div",{className:"adLinkCard-ecommerceLoadingLoadingbar"},i.a.createElement("span",null),i.a.createElement("span",null)))},C=new(function(){function e(){h()(this,e),this.events=Object.create(null),this.response=Object.create(null)}return g()(e,[{key:"clearData",value:function(){this.response={}}},{key:"request",value:function(e,t,n,a){var r=this;return this.response[e]?Promise.resolve(this.response[e]):new Promise((function(o,i){Array.isArray(r.events[e])||(a.forEach((function(e){r.events[e]=[]})),t(n).then((function(e){var t,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach((function(e){var n=e.url,a=e.payload;t[null==n?void 0:n.url]=a})),t}(null==e||null===(t=e.data)||void 0===t?void 0:t.linkcards);r.response=p()({},r.response,n),a.forEach((function(e){r.emit(e,n[e],1)}))})).catch((function(e){a.forEach((function(t){r.emit(t,e,0)}))}))),r.on(e,(function(e){1===e.status?o(e.data):i(e.data)}))}))}},{key:"on",value:function(e,t){var n;null===(n=this.events[e])||void 0===n||n.push(t)}},{key:"emit",value:function(e,t,n){var a;null===(a=this.events[e])||void 0===a||a.forEach((function(e){e({data:t,status:n})})),this.events[e]=null}}]),e}()),y={type1:l.a,type2:l.a,type3:u.a,type4:d.a};function O(e){var t=e.url,n=e.fetchUrls,a=e.data,c=e.parentType,l=e.parentId,u=e.suger,f=e.ua,p=void 0===f?{}:f,m=e.cardIndex,h=Object(o.useState)(a),v=r()(h,2),g=v[0],O=v[1],j=Object(o.useState)(""),k=r()(j,2),E=k[0],w=k[1];if(Object(o.useEffect)((function(){if(!a){var e={urls:n.map((function(e){return{url:e,contentToken:l,contentType:c}}))};C.clearData(),C.request(t,s,e,n).then((function(e){O(e||{validStatus:-1}),w("success")})).catch((function(e){w("fail"),console.error("Once Request Error ",e)}))}}),[a,n,l,c,t]),"fail"===E)return i.a.createElement("div",{className:"ecommerce-ad-null","data-ad-type":"ecommerce-ad-card"});if(!g)return i.a.createElement(b,null);var x=y["type".concat(g.commercialType)]||d.a;return i.a.createElement(x,{data:g,parentType:c,urlToken:l,suger:u,parseUA:p,cardIndex:m+1})}t.a=function(e){var t=e.url;return i.a.createElement("div",{"data-ad-url":t,"data-draft-type":"ad-link-card"},i.a.createElement(O,e))}},1889:function(e,t,n){"use strict";var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(25),s=n.n(c),l=n(29),u=n.n(l),d=n(18),f=n.n(d),p=n(3),m=n.n(p),h=n(0),v=n(50),g=n(436),b=n(12),C=n.n(b),y=n(387),O=n(1918),j=n(1890),k=n(1874),E=n(49),w=n.n(E),x=n(30),N=n.n(x),A=n(9),L=function(e){var t=e.children,n=e.className,a=e.direction,r=N()(e,["children","className","direction"]);return Object(A.g)("div",w()({className:C()("ModalButtonGroup",n,"ModalButtonGroup--".concat(a))},r),t)};L.defaultProps={direction:"vertical"},L.propTypes={children:m.a.node,direction:m.a.oneOf(["vertical","horizontal"])};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var T,I=[],R=function(e){s()(n,e);var t=S(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={transparent:!1},e.handleKeydown=function(t){var n=e.props,a=n.hotKeyClosable,r=n.onClose;t.keyCode===O.a.ESCAPE&&a&&r&&r(t)},e.handleBackdropClick=function(t){var n=e.props,a=n.maskClosable,r=n.onClose;a&&r&&r(t)},e.handleButtonClick=function(t){var n=e.props.onClose;n&&n(t)},e}return i()(n,[{key:"componentDidMount",value:function(){this.props.children&&this.handleShow()}},{key:"componentDidUpdate",value:function(e){var t=e.children,n=this.props.children;!t&&n?this.handleShow():t&&!n&&this.handleHide()}},{key:"componentWillUnmount",value:function(){this.props.children&&this.handleHide()}},{key:"handleShow",value:function(){var e=I[I.length-1];e&&e.setState({transparent:!0}),I.push(this),I.length>0&&(clearTimeout(T),y.hide())}},{key:"handleHide",value:function(){I.pop();var e=I[I.length-1];e&&e.setState({transparent:!1}),I.length<=0&&(T=setTimeout((function(){y.show()}),300))}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.spread,a=e.title,r=e.subtitle,o=e.footer,i=e.closeButton,c=void 0===i?Object(A.g)("div",{className:"ModalWindow-closeButton",onClick:this.handleButtonClick},Object(A.g)(g.a,{className:"ModalWindow-closeIcon"})):i,s=e.buttonGroupOnly,l=e.className,u=e.children,d=e.onScroll,f=e.contentClassName,p=void 0===f?"":f,m=e.backDropClassName,h=void 0===m?"":m,v=this.state.transparent;return Object(A.g)(k.a,{transitionName:"ModalWindow",timeout:300},u&&Object(A.g)(j.a,{onKeyDown:this.handleKeydown},Object(A.g)("div",{className:C()("ModalWindow-wrapper",{"ModalWindow-wrapper--transparent":v})},Object(A.g)("div",{className:C()("ModalWindow-backdrop",h),onClick:this.handleBackdropClick}),Object(A.g)("div",{className:C()("ModalWindow","ModalWindow--".concat(t),l),tabIndex:0,onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(A.g)("div",{className:"ModalWindow-inner",onScroll:d},a&&Object(A.g)("h3",{className:C()("ModalWindow-title",{"ModalWindow-title--simple":!r&&s})},a),r&&Object(A.g)("div",{className:"ModalWindow-subtitle"},r),Object(A.g)("div",{className:C()("ModalWindow-content",{"ModalWindow-content--spread":n||"fullPage"===t&&!a&&!r},p)},u),o&&Object(A.g)("div",{className:"ModalWindow-footer"},o)),c))))}}]),n}(h.Component);R.propTypes={size:m.a.oneOf(["default","large","fullPage","small"]),spread:m.a.bool,title:m.a.node,subtitle:m.a.node,footer:m.a.node,closeButton:m.a.node,buttonGroupOnly:m.a.bool,hotKeyClosable:m.a.bool,maskClosable:m.a.bool,onClose:m.a.func,onScroll:m.a.func,contentClassName:m.a.string},R.defaultProps={size:"default",spread:!1,buttonGroupOnly:!1,hotKeyClosable:!0,maskClosable:!0},R.open=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=!1,a=function(){n||(n=!0,r())};"function"==typeof e&&(e=e(a));var r=function(){Object(v.render)(Object(h.cloneElement)(e,{children:null}),t),setTimeout((function(){Object(v.unmountComponentAtNode)(t),t.parentNode.removeChild(t)}),300)};Object(v.render)(e.props.onClose?e:Object(h.cloneElement)(e,{onClose:a}),t)};t.a=R},1890:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(105),s=n.n(c),l=n(25),u=n.n(l),d=n(29),f=n.n(d),p=n(18),m=n.n(p),h=n(0),v=n.n(h),g=n(50),b=n(504),C=n.n(b);function y(e,t){e&&(e.focus(t),e instanceof HTMLInputElement&&e.select())}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a=n(C()(t)),r=a.length;if(r){var o=a.indexOf(document.activeElement);-1===o?("prev"===e&&y(a[r-1]),"next"===e&&y(a[0])):("prev"===e&&y(a[(o-1+r)%r]),"next"===e&&y(a[(o+1)%r]))}}var j=y,k=n(1918);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var w=[],x=function(e){u()(n,e);var t=E(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){if(e.isTopLayer()){var n=e.props.onKeyDown;if(n&&n(t),!t.defaultPrevented&&t.keyCode===k.a.TAB){t.preventDefault();var a=Object(g.findDOMNode)(s()(e));O(t.shiftKey?"prev":"next",a,(function(e){return e.filter((function(e){return"true"===e.contentEditable||!e.closest("[contentEditable]")}))}))}}},e}return i()(n,[{key:"componentDidMount",value:function(){w.push(this),window.addEventListener("keydown",this.handleKeyDown,!0),this.enterFocusZone()}},{key:"componentWillUnmount",value:function(){w.splice(w.indexOf(this),1),window.removeEventListener("keydown",this.handleKeyDown,!0),this.leaveFocusZone()}},{key:"enterFocusZone",value:function(){var e=this;this.prevActiveElement=document.activeElement,this.timeout=window.setTimeout((function(){var t=Object(g.findDOMNode)(e);t&&!t.contains(document.activeElement)&&function(e){O("next",e)}(t)}),100)}},{key:"leaveFocusZone",value:function(){clearTimeout(this.timeout),this.prevActiveElement&&!this.prevActiveElement.closest("[contentEditable]")&&j(this.prevActiveElement)}},{key:"isTopLayer",value:function(){return w[w.length-1]===this}},{key:"render",value:function(){return h.Children.only(this.props.children)}}]),n}(v.a.Component)},1895:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1629),i=n(78),c=n.n(i),s=n(22),l=n.n(s),u=n(28),d=n.n(u),f=n(56),p=n.n(f),m=n(515),h=n(45),v=n(460),g=function(){function e(t){var n=this;l()(this,e),this.setPropsData=function(e){n.calculateRenderData(e)},this.updateTracks=function(){var e=n.getRenderData(),t=e.xSuger,a=e.trackUrl,r=e.cardType,o={_dk:"".concat(Date.now()*Math.random())},i=Object(h.i)().os,c=Object(h.w)(a,{os:i,ua:navigator.userAgent,et:"".concat(i,"_commodity"),xSuger:t,cardType:r,creativeId:Object(h.h)(),appendParams:p.a.stringify(o)}),s=Object(h.f)(c,"view",[]),l=Object(h.f)(c,"click",[]);n._mergeRenderData({viewTrackUrls:s,clickTrackUrls:l})},this._mergeRenderData=function(e){n.renderData=c()({},n.renderData,e)},this.renderData={},this.calculateRenderData(t)}return d()(e,[{key:"trackViewUrl",value:function(e){var t=e.node,n=this.renderData,a=n.viewTrackUrls,r=n.data,o=r.isCanvas,i=r.adjson;Object(h.t)(t,(function(){try{a.forEach((function(e){return Object(h.B)(e)})),Object(v.j)("cardShow",t,{id:5642})}catch(e){console.error(e.message)}})),o&&Object(m.a)({adjson:i},"ad/preload")}},{key:"calculateRenderData",value:function(e){var t=e.data,n=e.suger,a=t.price,r=t.picUrl,o=t.cardType,i=t.description,c=t.interactionLaunch,s=t.logo,l=t.trackUrl,u=t.productName,d=t.webExperiment,f=(d=void 0===d?{}:d).awAdPluginStyle;this._mergeRenderData({price:a,picUrl:r,cardType:o,description:i,interactionLaunch:c,logo:s,trackUrl:l,productName:u,awAdPluginStyle:f,xSuger:n,data:t})}},{key:"getRenderData",value:function(){return this.renderData}}]),e}(),b=n(994),C=n(1104);t.a=Object(b.b)((function(e){var t=e.data,n=e.parentType,i=e.urlToken,c=e.suger,s=e.isPreview,l=e.isZmHandle,u=e.ssid,d=e.parseUA,f=e.cardIndex,p=1===t.implantType,m=r.a.createRef();if(Object(a.useEffect)((function(){if(p){var t=new g(e);t.updateTracks(),t.trackViewUrl({node:m.current})}}),[t,m,p,e]),"inValidate"===t.status)return null;var h="";return s&&(h=C.a.ONLY_SHOW),r.a.createElement(r.a.Fragment,null,!!t.content&&r.a.createElement("p",{className:"ecommerce-ad-implant",ref:m},t.content),!p&&r.a.createElement(o.default,{ssid:u,data:t,parentType:n,urlToken:i,suger:c,cmpStatus:h,isZmHandle:l,parseUA:d,cardIndex:f}))}))},1908:function(e,t,n){"use strict";var a=n(49),r=n.n(a),o=n(0),i=n.n(o),c=n(1629),s=n(994),l=n(1104);t.a=Object(s.b)((function(e){var t=e.data,n=e.isEditor,a=e.isPreview,o="",s=l.c(t);return(n||a||s)&&(o=l.a.ONLY_SHOW),s?i.a.createElement("div",{className:"eCommerce-ad-failure"},i.a.createElement(c.default,r()({},e,{cmpStatus:o}))):i.a.createElement(c.default,r()({},e,{cmpStatus:o}))}))},1909:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(94),r=n.n(a),o=n(5),i=n(47),c=n(477),s=n(1059),l={jingdong:{IOS:"6.0",ANDROID:"6.0"},taobao:{IOS:"6.15",ANDROID:"6.15"},pinduoduo:{IOS:"6.28",ANDROID:"6.29"},meituanhotel:{IOS:"6.37",ANDROID:"6.37"},suning:{IOS:"6.51",ANDROID:"6.51"},youzan:{IOS:"6.53",ANDROID:"6.53"}},u=n(1523),d=n(1392),f=function(e){var t=e.element,n=e.id,a=e.url,f=e.source,p=e.scenes,m=void 0===p?s.b.Content:p,h=e.utmInfo,v=void 0===h?{}:h,g=e.appSchemaIos,b=void 0===g?"":g,C=e.appSchemaAndroid,y=void 0===C?"":C,O=e.isOpenPopup,j=void 0!==O&&O,k=e.extraInfo,E=void 0===k?{}:k,w=e.trackEvent,x=e.onClick,N=r()(navigator.userAgent),A=N||{},L=A.Zhihu,S=A.ZhihuHybrid,T=A.iOS,I=A.Mobile,R=A.Tablet,P=A.Safari,_=[s.h.zhihu,s.h.zhiGoods,s.h.zhiEducation].includes(f),M="https://www.zhihu.com/grapp/select/method?id=".concat(n),z=s.i[f],D=l[z];if(_){var B=a.replace("zh_nav_right=empty","zh_nav_right=share");Object(u.a)(B)}else if(j||f!==s.h.jingdong&&f!==s.h.youzan)if(L||S){if(j){var U=Object(c.versionControl)(N,{IOS:"7.8.0",ANDROID:"7.4.0"})?T?"zhihu://goods/bottom_sheet_hybrid?height=627&url=".concat(encodeURIComponent(M)):"https://www.zhihu.com/goods/bottom_sheet_hybrid?height=627&url=".concat(encodeURIComponent(M)):M+"&zh_forcehybrid=1&zh_hide_nav_bar=true&zh_hide_tab_bar=true";return void Object(i.a)("base/openURL").dispatch({url:U})}i.a.supportsAction("mcn/openURL").then((function(e){e&&z&&Object(c.versionControl)(N,D)?Object(i.a)("mcn/openURL").dispatch({id:n,type:z,scenes:Number(m),url:(T?b:y)||a,fallbackUrl:a}):Object(i.a)("base/openURL").dispatch({url:a})})).catch((function(){}))}else if(I||R)window.location.href=j?M:a;else{if(j)return void("function"==typeof x&&x(t,{id:n,url:a,source:f,scenes:m,utmInfo:v,appSchemaIos:b,appSchemaAndroid:y}));if((f===s.h.pinduoduo||f===s.h.suning&&(null==E?void 0:E.isSuningPingou))&&"function"==typeof x)return void x(t,{id:n,url:a,source:f,scenes:m,utmInfo:v,appSchemaIos:b,appSchemaAndroid:y});if(P)window.open().location.href=a;else window.open(a,"_blank")}else{var V=new URLSearchParams(Object(o.decamelizeKeys)(Object.assign({scenes:m},v)));Object(d.a)("/api/v4/mcn/linkcard/".concat(n,"/url?").concat(V.toString())).then((function(e){var t=Object(o.camelizeKeys)(null==e?void 0:e.data)||{},n=t.appSchemaAndroid,r=t.appSchemaIos,c=t.traceId,l=t.url;if(c&&w&&w({block:"goodsCard_orderTrace",action:"OpenUrl",eventType:"Click",elementLocation:{type:"Block",text:"订单来源追踪",content:{id:c,type:"GoodsRecommend"}}}),f!==s.h.jingdong){if(f===s.h.youzan){if(L||S)return void Object(d.a)("/api/v4/me").then((function(e){"guest"!==(Object(o.camelizeKeys)(null==e?void 0:e.data)||{}).userType?Object(i.a)("base/openURL").dispatch({url:l}):Object(i.a)("account/showLoginDialog").dispatch({next:location.href}).catch((function(e){(null==e?void 0:e.message)&&Object(i.a)("ui/showToast").dispatch({text:null==e?void 0:e.message})}))})).catch((function(){Object(i.a)("base/openURL").dispatch({url:l})}));Object(u.a)(l)}}else Object(u.a)(l,{hybridOpenAction:"mcn/openURL",params:{type:z,scenes:m,url:(T?r:n)||l||a,fallbackUrl:l||a}})})).catch((function(){}))}}},1918:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={TAB:9,ESCAPE:27,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40}},2146:function(e,t,n){"use strict";
/** @license React v16.13.1
 * create-subscription.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(0);t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function a(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return(n=e.call.apply(e,[this].concat(a))||this).state={source:n.props.source,value:null!=n.props.source?t(n.props.source):void 0},n._hasUnmounted=!1,n._unsubscribe=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(a,e),a.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null};var r=a.prototype;return r.componentDidMount=function(){this.subscribe()},r.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(),this.subscribe())},r.componentWillUnmount=function(){this.unsubscribe(),this._hasUnmounted=!0},r.render=function(){return this.props.children(this.state.value)},r.subscribe=function(){var e=this,a=this.state.source;if(null!=a){var r=n(a,(function(t){e._hasUnmounted||e.setState((function(e){return t===e.value||a!==e.source?null:{value:t}}))}));if("function"!=typeof r)throw Error(function(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}(266));this._unsubscribe=r,(r=t(this.props.source))!==this.state.value&&this.setState({value:r})}},r.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},a}(a.Component)}},2147:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Link24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M5.327 18.883a3.005 3.005 0 010-4.25l2.608-2.607a.75.75 0 10-1.06-1.06l-2.608 2.607a4.505 4.505 0 006.37 6.37l2.608-2.607a.75.75 0 00-1.06-1.06l-2.608 2.607a3.005 3.005 0 01-4.25 0zm5.428-11.799a.75.75 0 001.06 1.06L14.48 5.48a3.005 3.005 0 014.25 4.25l-2.665 2.665a.75.75 0 001.061 1.06l2.665-2.664a4.505 4.505 0 00-6.371-6.372l-2.665 2.665zm5.323 2.117a.75.75 0 10-1.06-1.06l-7.072 7.07a.75.75 0 001.061 1.06l7.071-7.07z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function s(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Link"+(e.className?" "+e.className:"")}}))}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--InsertLink"+(e.className?" "+e.className:"")}}))}},2148:function(e,t,n){"use strict";(function(e){function a(){var t=null;return"undefined"!=typeof window&&window.document?t=window.Raven:void 0!==e&&(t=e.Raven),t}n.d(t,"a",(function(){return r}));var r=function(e,t){a()&&a().captureException(e,t)}}).call(this,n(135))},2200:function(e,t,n){"use strict";function a(e){var t=new o,n=0|e;function a(e){try{return Promise.resolve(e.fn.apply(e.self,e.args)).then(i,c)}catch(e){c(e)}}function i(e){return s(),e}function c(e){throw s(),e}function s(){var e=t.shift();e?e.resolve(e):n=1+(0|n)}return function(e,o,s){return 0!=(0|n)?(n=(0|n)-1,new Promise((function(t){t(e.apply(o,s))})).then(i,c)):new Promise((function(n){t.push(new r(n,e,o,s))})).then(a)}}function r(e,t,n,a){this.resolve=e,this.fn=t,this.self=n||null,this.args=a}e.exports=function(e,t){if("function"==typeof e){var n=t;t=e,e=n}if("number"!=typeof e)throw new TypeError("Expected throat size to be a number but got "+typeof e);if(void 0!==t&&"function"!=typeof t)throw new TypeError("Expected throat fn to be a function but got "+typeof t);return"function"==typeof t?function(e,t){var n=a(0|e);return function(){for(var e=new Array(arguments.length),a=0;a<arguments.length;a++)e[a]=arguments[a];return n(t,this,e)}}(0|e,t):function(e){var t=a(0|e);return function(e){if("function"!=typeof e)throw new TypeError("Expected throat fn to be a function but got "+typeof e);for(var n=new Array(arguments.length-1),a=1;a<arguments.length;a++)n[a-1]=arguments[a];return t(e,this,n)}}(0|e)},e.exports.default=e.exports;function o(){this._s1=[],this._s2=[],this._shiftBlock=this._pushBlock=new Array(64),this._pushIndex=0,this._shiftIndex=0}o.prototype.push=function(e){64===this._pushIndex&&(this._pushIndex=0,this._s1[this._s1.length]=this._pushBlock=new Array(64)),this._pushBlock[this._pushIndex++]=e},o.prototype.shift=function(){if(64===this._shiftIndex){this._shiftIndex=0;var e=this._s2;if(0===e.length){var t=this._s1;if(0===t.length)return;this._s1=e,e=this._s2=t.reverse()}this._shiftBlock=e.pop()}if(this._pushBlock!==this._shiftBlock||this._pushIndex!==this._shiftIndex){var n=this._shiftBlock[this._shiftIndex];return this._shiftBlock[this._shiftIndex++]=null,n}}},2201:function(e,t,n){e.exports=n(72)(223)},2945:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--Catalog24"+(t?" "+t:""))}),r.a.createElement("path",{d:"M10 5a1 1 0 011-1h10a1 1 0 110 2H11a1 1 0 01-1-1zm4 6a1 1 0 100 2h7a1 1 0 100-2h-7zm0 7a1 1 0 100 2h7a1 1 0 100-2h-7zm-8.335.25a.915.915 0 01-.915-.915V12.75H10a.75.75 0 000-1.5H4.75V6.665c0-.505.41-.915.915-.915H7a.75.75 0 000-1.5H5.665A2.415 2.415 0 003.25 6.665v10.67a2.415 2.415 0 002.415 2.415H10a.75.75 0 000-1.5H5.665z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function s(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--Catalog"+(e.className?" "+e.className:"")}}))}function l(e){return r.a.createElement(c,i(i({},e),{className:function(){return"Zi Zi--InsertCatalog"+(e.className?" "+e.className:"")}}))}},2969:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var a=n(0),r=n.n(a),o=n(27),i=Object.assign;function c(e){return r.a.createElement(o.a,i(i({width:"16",height:"16",viewBox:"0 0 16 16"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--ArrowRight16"+(t?" "+t:""))}),r.a.createElement("path",{d:"M4.54 1.54a.65.65 0 01.92 0l5.811 5.812a.917.917 0 010 1.296L5.46 14.46a.65.65 0 11-.92-.92L10.08 8 4.54 2.46a.65.65 0 010-.92z",fillRule:"evenodd",clipRule:"evenodd"}));var t}function s(e){return r.a.createElement(c,i(i({},e),{className:function(){return"ZDI ZDI--Arrow12"+(e.className?" "+e.className:"")}}))}},949:function(e,t,n){var a=n(674),r=n(298),o=n(296),i=n(104),c=n(191),s=n(297),l=n(295),u=n(381),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||u(e)||o(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!a(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},955:function(e,t,n){e.exports=n(72)(216)},968:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l})),function(e){e.PLAY="event/dom/play",e.PLAYING="event/dom/playing",e.PAUSE="event/dom/pause",e.ENDED="event/dom/ended",e.TIMEUPDATE="event/dom/timeupdate",e.ERROR="event/dom/error",e.WAITING="event/dom/waiting",e.CANPLAY="event/dom/canplay",e.LOADEDDATA="event/dom/loadeddata",e.PROGRESS="event/dom/progress"}(a||(a={})),function(e){e.QUALITY_CHANGE="event/player/quality-change",e.CHANGE_QUALITY_START="event/player/quality-change-start",e.CHANGE_QUALITY_SUCCESS="event/player/quality-change-success",e.CHANGE_QUALITY_FAIL="event/player/quality-change-fail",e.PLAYBACK_RATE_CHANGE="event/player/rate-change",e.REQUEST_PLAY="event/player/request-play",e.PLAY_REJECTED="event/player/play-rejected",e.REQUEST_PAUSE="event/player/request-pause",e.PLAY_COUNT="event/player/play-count",e.PLAY_FAILED="event/player/play-failed",e.ENTER_FULLSCREEN="event/player/enter-fullscreen",e.EXIT_FULLSCREEN="event/player/exit-fullscreen",e.ENTER_PAGE_FULLSCREEN="event/player/enter-page-fullscreen",e.EXIT_PAGE_FULLSCREEN="event/player/exit-page-fullscreen",e.ENTER_PIP="event/player/enter-pip",e.EXIT_PIP="event/player/exit-pip",e.SHOW_CONTROLLER="event/player/show-controller",e.HIDE_CONTROLLER="event/player/hide-controller",e.HOVER_PROGRESS_DOT="event/player/hover-progress-dot",e.LEAVE_PROGRESS_DOT="event/player/leave-progress-dot",e.SUBSCRIPTION_READY="event/player/subscription-ready"}(r||(r={}));var o,i=Object.assign(Object.assign(Object.assign({},a),r),{DOM:a,PLAYER:r});!function(e){e.PLAY="action/player/play",e.PAUSE="action/player/pause",e.SET_VOLUME="action/player/set-volume",e.ENTER_FULLSCREEN="action/player/enter-fullscreen",e.EXIT_FULLSCREEN="action/player/exit-fullscreen",e.ENTER_PAGE_FULLSCREEN="event/player/enter-page-fullscreen",e.EXIT_PAGE_FULLSCREEN="event/player/exit-page-fullscreen",e.ENTER_PIP="action/player/enter-pip",e.EXIT_PIP="action/player/exit-pip",e.TIME_UPDATE="action/player/time-update",e.SHOW_CONTROLLER="action/player/show-controller"}(o||(o={}));var c=Object.assign(Object.assign({},o),{PLAYER:o}),s="griffith";function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new Set;function r(r,o){var i="function"==typeof r,c=i?r:o,l=i?void 0:r;function u(a){var r=a.origin,o="*"===t||t===r,u=a.data||{},d=u.from,f=u.id,p=u.payload;if(o&&d===s&&(!n||e===f)&&p){var m=p.name,h=p.data;if(!m||"function"!=typeof c)return;i?c(m,h,a.source):l===m&&c(h,a.source)}}window.addEventListener("message",u);var d={unsubscribe:function(){window.removeEventListener("message",u),a.delete(d)}};return a.add(d),d}var o=function(){a.forEach((function(e){return e.unsubscribe()}))},i=function(n,a){var r;null===(r=null==n?void 0:n.postMessage)||void 0===r||r.call(n,{from:s,id:e,payload:{name:a,data:arguments.length<=2?void 0:arguments[2]}},t||"*")};return{subscribeMessage:r,dispatchMessage:i,dispose:o}}},975:function(e,t,n){"use strict";n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return T}));var a=n(22),r=n.n(a),o=n(28),i=n.n(o),c=n(25),s=n.n(c),l=n(29),u=n.n(l),d=n(18),f=n.n(d),p=n(3),m=n.n(p),h=n(0),v=n(12),g=n.n(v),b=n(94),C=n.n(b),y=n(1019),O=n(382),j=n(1394),k=n(1040),E=n(9);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var x=function(e){s()(n,e);var t=w(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isInputing:!1,value:e.props.value||""},e.handleChange=function(t){e.setState({value:Object(O.cutStringWidth)(t.target.value,30)})},e}return i()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,a=t.value,r=this.props.onChange,o=!n&&!a,i=!n&&a;return Object(E.g)("div",{className:"Editable-VideoTitleInput-container"},Object(E.g)(k.a,null,Object(E.g)("div",{className:g()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":o}),onClick:function(){return e.setState({isInputing:!0})}},o&&Object(E.g)(j.a,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&Object(E.g)("div",{className:g()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!a})},a||"好的标题可以获得更多的推荐及关注者"),n&&Object(E.g)("input",{className:"Editable-VideoTitleInput",value:a,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),r(t.target.value)}}),i&&Object(E.g)(j.a,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),n}(h.Component),N=n(1166),A=n(1522),L=n(1172),S=n.n(L),T=function(e){var t=e.className;return Object(E.g)("svg",{viewBox:"0 0 72 72",className:t},Object(E.g)("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),Object(E.g)("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},I=function(){return Object(E.g)("div",{className:"VideoCardPlayButton"},Object(E.g)(T,{className:"VideoCardPlayButton-icon"}))},R=function(e){var t=e.fileSize;return Object(E.g)("div",{className:"VideoCardPlayButton-withFileSize--outer"},Object(E.g)("span",{className:"VideoCardPlayButton-withFileSize"},Object(E.g)(A.a,{center:!0,size:14}),t?S()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))};var P={name:"u03n1e",styles:"position:relative;height:100%;&::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0, 0, 0, 0.05);}"};function _(e){var t=e.thumbnail,n=e.isLens,a=e.canPlay;return n||a?t&&"string"==typeof t?Object(E.g)("div",{css:P},Object(E.g)("img",{src:t,alt:"视频封面"})):t||null:Object(E.g)(T,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var z=function(e){s()(n,e);var t=M(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isMobile:!1,playerShown:!1,playerLoading:!1},e.handlePlay=function(t){t.preventDefault();var n=e.props,a=n.interactive,r=n.isConverting,o=n.isLens,i=n.playerUrl,c=n.onPlayFailed,s=n.onLensPlay,l=n.onBeforePlay;a&&!r&&(i||!c?l?Promise.resolve(l()).then((function(t){!1!==t&&e.play()})):o&&s&&s()||e.play():c())},e.handlePlayerLoad=function(){e.loadingCount--,0===e.loadingCount&&e.setState({playerLoading:!1})},e}return i()(n,[{key:"componentDidMount",value:function(){this.setState({isMobile:C()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){return this.props.isLens}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,a=e.onLensPlay,r=e.onBeforePlay;return t&&n&&!(a||r)}},{key:"showContent",value:function(){var e=this.props,t=e.content,n=e.isLens,a=e.title;return!e.isVideoTitleEditable&&(!n||Boolean(t||a))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,a=e.title,r=e.thumbnail,o=e.source,i=e.url,c=e.showPlayButton,s=e.usePlayButtonWithFileSize,l=e.fileSize,u=e.rightBottomButton,d=e.leftBottomButton,f=e.isVideoTitleEditable,p=e.onVideoTitleChange,m=e.isConverting,h=e.content,v=this.canPlay(),b=this.inlinePlayer(),C=Object(E.g)(_,{thumbnail:r,isLens:n,canPlay:v}),y=c&&!m&&(s?Object(E.g)(R,{fileSize:l}):Object(E.g)(I,null)),O=Object(E.g)("div",{className:"VideoCard-layout"},v?Object(E.g)("div",{className:"VideoCard-video"},Object(E.g)("div",{className:"VideoCard-video-content"},b?this.renderPlayer():Object(E.g)("div",{className:g()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!r}),onClick:this.handlePlay},C,y,u,d))):Object(E.g)("div",{className:"VideoCard-poster"},C),this.showContent()&&(h||Object(E.g)("div",{className:"VideoCard-content"},Object(E.g)("div",{className:"VideoCard-title"},a),this.showDescription()&&Object(E.g)("div",{className:"VideoCard-description"},o&&Object(E.g)("span",{className:"VideoCard-source"},o),Object(E.g)("span",{className:"VideoCard-badge"},"视频")))),f&&Object(E.g)(x,{value:a,onChange:p}));return n?O:t?Object(E.g)("a",{className:"VideoCard-link",href:i,target:"_blank",rel:"noopener noreferrer"},O):Object(E.g)("div",{className:"VideoCard-link"},O)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,a=t.playerUrl,r=t.onIframeRef,o=t.useMSE,i=t.zaProps;return Object(E.g)(N.a,{placeholder:Object(E.g)("div",{className:"VideoCard-player"})},Object(E.g)("div",{className:"VideoCard-player"},Object(E.g)(y.a,{type:"video",ref:r,src:"".concat(a),iframeProps:{onLoad:this.handlePlayerLoad,allowFullScreen:!0},griffithProps:{autoplay:e&&"lens"===n,useMSE:o},zaProps:i})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,a=e.isVideoAnswer,r=this.state,o=r.isMobile,i=r.playerShown,c=r.playerLoading;return Object(E.g)("div",{className:g()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":o,"is-videoAnswer":a})},this.renderContent(),i&&Object(E.g)("div",{className:g()("VideoCard-overlay",{"is-loading":c})},this.renderPlayer(!0)),Object(E.g)("div",{className:g()("VideoCard-mask",{"is-shown":c})}))}}]),n}(h.Component);z.propTypes={interactive:m.a.bool,showPlayButton:m.a.bool,usePlayButtonWithFileSize:m.a.bool,isVideoAnswer:m.a.bool,fileSize:m.a.number,onPlay:m.a.func,onPlayFailed:m.a.func,onLensPlay:m.a.func,onBeforePlay:m.a.func,rightBottomButton:m.a.oneOfType([m.a.element,m.a.string]),leftBottomButton:m.a.oneOfType([m.a.element,m.a.string]),thumbnail:m.a.oneOfType([m.a.element,m.a.string]),content:m.a.object,zaProps:m.a.object},z.defaultProps={interactive:!0,showPlayButton:!0};var D=z}}]);
//# sourceMappingURL=main.shared_fe1e1d815fddfd5a3371ec045852da759fc21df4.8f715afda7f39a9ef155.js.map